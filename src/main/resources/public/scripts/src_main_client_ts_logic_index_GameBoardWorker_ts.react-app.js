(self["webpackChunkspring_react_app"] = self["webpackChunkspring_react_app"] || []).push([["src_main_client_ts_logic_index_GameBoardWorker_ts"],{

/***/ "./src/main/client/fonts/chessGlyphIndex.ts":
/*!**************************************************!*\
  !*** ./src/main/client/fonts/chessGlyphIndex.ts ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "chessGlyphIndex": () => (/* binding */ chessGlyphIndex)
/* harmony export */ });
var chessGlyphIndex = {
  doubleBackwardArrow: "!",
  downloadIcon: '"',
  endBackwardArrow: "#",
  forwardDoubleArrow: "α",
  userSearch: "$",
  userConnection: "%",
  notAllowed: "&",
  clock: "'",
  extraInformation: "(",
  authorshipNotice: ")",
  draw: "+",
  backwardArrow: ",",
  userInformation: "-",
  smallBackwardArrow: "/",
  leaderBoard: ";",
  equal: "=",
  downwardArrow: "<",
  upperArrow: ">",
  endForwardArrow: "@",
  urlAttached: "A",
  crossMark: "B",
  rightOutwardsArrow: "C",
  hashtag: "D",
  newspaper: "E",
  twitter: "F",
  checkMark: "G",
  camera: "H",
  alternativeLine: "I",
  play: "J",
  pause: "K",
  reload: "L",
  world: "M",
  points: "N",
  medal: "O",
  soundOff: "P",
  circleCrossMark: "Q",
  steadyEvaluation: "R",
  facebook: "S",
  circle: "T",
  soundOn: "U",
  plus: "V",
  openEye: "W",
  copyToClipboard: "X",
  wavingFlag: "Y",
  editText: "Z",
  fullArrowLeft: "[",
  fullArrowRight: "]",
  smallArrowForward: "\\",
  goBackArrow: "_",
  youtube: "`",
  calendar: "a",
  user: "b",
  chat: "c",
  lock: "d",
  box: "e",
  circularArrows: "f",
  lightBulb: "g",
  briefcase: "h",
  board: "i",
  knightArrows: "j",
  newMessage: "k",
  drawing: "l",
  twoUsers: "m",
  twoUsers2: "n",
  openingBook: "o",
  disclaimer: "p",
  ringingBell: "q",
  list: "r",
  rookAndPawn: "s",
  hamburgerList: "t",
  mail: "u",
  userExtraInformation: "v",
  house: "w",
  sheetAndPencil: "x",
  openMail: "y",
  chatBox: "z",
  fullArrowDown: "{",
  smallArrowUp: "|",
  fullArrowUp: "}",
  arrowIntoBox: "¡",
  key: "¢",
  file: "£",
  books: "¤",
  sharing: "¥",
  userNotAllowed: "¦",
  userCrossMark: "§",
  questionMark: "©",
  boardWithCircle: "«",
  googlePlus: "®",
  reset: "°",
  reddit: "±",
  openBook: "´",
  userPlus: "¶",
  cog: "·",
  pin: "»",
  suitcase: "¼",
  mark: "½",
  cake: "¾",
  openLink: "¿",
  bishopStroke: "Ä",
  linkedin: "Å",
  knight: "Ç",
  threeCheck: "Ë",
  chess960rapid: "Ñ",
  connection: "Õ",
  quotes: "Ö",
  exit: "×",
  crossedBinoculars: "Þ",
  leaderBoardReversed: "ß",
  bishopFull: "ä",
  printer: "å",
  verticalEvaluation: "ç",
  t: "ë",
  pawn: "í",
  twoPawns: "î",
  unrated: "ð",
  elite: "ñ",
  bug: "õ",
  cpu: "ö",
  forwardArrowCircle: "÷",
  squareCrossMark: "ü",
  android: "þ",
  twoUsersPlus: "ÿ",
  crossedArrows: "Đ",
  king: "Ā",
  kingFull: "ā",
  bishop: "Ă",
  twoFullRooks: "ă",
  kingStrokes: "Ą",
  fullKnight2: "ą",
  chess960: "Č",
  leaderBoardAscent: "č",
  crazyhouse: "Ď",
  checklist: "ď",
  target: "đ",
  pawnAndHalfRook: "Ē",
  halfRookAndPawn: "ē",
  knightStrokes: "Ė",
  pawnLogo: "Ę",
  queenFull: "ę",
  exchange: "Ě",
  userNext: "Ğ",
  userPrevious: "Ġ",
  compass: "ġ",
  pawnStrokes: "Ģ",
  rookStrokes: "ģ",
  screenDisplays: "Ħ",
  kingOfTheHill: "Ī",
  antichess: "ī",
  queen: "Į",
  threePawns: "į",
  queenStrokes: "Ķ",
  rookSmallStrokes: "Ļ",
  rookSmall: "Ľ",
  bishopPair: "Ł",
  rookPair: "Ņ",
  knightPair: "Ň",
  twoUsersSearch: "Ŋ",
  shield: "ŋ",
  kingSmall: "Ō",
  bishopSmall: "Ő",
  knightSmall: "Ŗ",
  userNoConnection: "Ř",
  userStream: "v",
  queenAlternative: "Ş",
  pawnAlternative: "Š",
  threePawnsAlternative: "Ţ",
  twoPawnsAlternative: "Ť",
  rookAlternative: "Ŧ",
  knightPairFull: "Ż",
  bishopPairFull: "Ž",
  addBoard: "ˆ",
  diamond: "Ͱ",
  scales: "ͱ",
  pawn3d: "Ͳ",
  userShieldPlus: "ͳ",
  gold: "Ͷ",
  ellipsis: "Ώ",
  analysis: "Δ",
  archive: "Θ",
  arrowBottomIntoBox: "Ξ",
  disclaimerEditor: "Σ",
  sendTrophy: "Υ",
  addCheckMark: "Φ",
  checkMarkSquare: "Ψ",
  squareStaircase: "ά",
  arrowsUpBottom: "έ",
  star: "ή",
  verticalDash: "ί",
  shieldCheckMark: "β",
  top3: "ε",
  addImage: "ζ",
  chessStream: "η",
  removeTrophy: "κ",
  importantMail: "λ",
  arrowLeave: "μ",
  donut: "ν",
  computerAnalysis: "ξ",
  checkMarkSquareSmall: "ο",
  diagonalExpandArrows: "π",
  leaderBoardHorizontal: "ρ",
  checkMarkAsCircle: "χ",
  arrowFromBox: "ϊ",
  boxArrowBottom: "ό",
  boxArrowLeft: "ύ",
  boxArrowRight: "ώ",
  fourArrowsCentral: "Ϙ",
  clashingSwords: "τ",
  ratingOffset: "υ",
  smilingFace: "ς",
  fileCabinet: "σ",
  editClock: "ϙ",
  userShield: "Ϛ",
  homeFilled: "ϛ",
  paymentCard: "Ϝ",
  fourArrowsOutwards: "ϝ",
  puzzle: "Ϟ",
  addPhoto: "ϟ",
  arrowWallLeft: "Ϡ",
  arrowWallRight: "ϡ",
  boardConfiguration: "Ϸ",
  fourBlocks: "ϸ",
  sandglass: "Ϻ",
  crown: "ϻ",
  cloudUpload: "Ẹ",
  webChatBox: "ẹ",
  puzzleRush: "Ẻ",
  knightHops: "ẻ",
  instagram: "ἀ",
  squarePlus: "ἁ",
  squareMinus: "ἂ",
  squareEqual: "ἃ",
  square: "ἄ",
  fireFull: "ἅ",
  pawnRecycle: "ἆ",
  noEngine: "ἇ",
  google: "Ἀ",
  fourPlayer: "Ἁ",
  pieceMeal: "Ἂ",
  arrowBoldUp: "Ἃ",
  arrowBoldDown: "Ἄ",
  blunder: "Ἅ",
  mistake: "Ἆ",
  videoChatBox: "Ἇ",
  bonesCrossed: "ἐ",
  displays: "ἑ",
  arrowEnter: "ἒ",
  newspaperHalf: "ἓ",
  bookmark: "ἔ",
  puzzleLarge: "ἕ",
  movePawn: "Ἐ",
  pawn3dLarge: "Ἑ",
  sun: "Ἒ",
  rapid: "Ἓ",
  blitz: "Ἔ",
  bullet: "Ἕ",
  mortarboard: "ἠ",
  laptop: "ἡ",
  resetWidth: "ἢ",
  pawnConnection: "ἣ",
  copyToClipboardFromText: "ἤ",
  fire: "ἥ",
  crownSmall: "ἦ",
  orderedList: "ἧ",
  chess960daily: "Ἠ",
  arrowWallBottom: "Ἡ",
  pawn3dBold: "Ἢ",
  plusInCircle: "Ἣ",
  lightCorner: "Ἤ",
  darkCorner: "Ἥ",
  steepCurve: "Ἦ",
  heart: "Ἧ",
  checkMarkThin: "ἰ",
  connectionDiagonal: "ἱ",
  diadem: "ἲ",
  plusMinus: "ἳ",
  recycling: "ἴ",
  metrics: "ἵ",
  top1: "ἶ",
  engineCheckMark: "ἷ",
  wikipedia: "Ἰ",
  tournament: "Ἱ",
  houseConfiguration: "Ἲ",
  computerHindsight: "Ἳ",
  computerCheckMark: "Ἴ",
  lightDarkTheme: "Ἵ",
  whistlingBell: "Ἶ",
  crossMarkCompact: "Ἷ",
  eyeCrossed: "ὀ",
  fide: "ὁ",
  favorite: "ὂ",
  tShirtPawn: "ὃ",
  addSmile: "ὄ",
  library: "ὅ",
  discord: "Ὀ",
  analysisCheckMark: "Ὁ",
  versusComputer: "Ὂ",
  dollarSign: "Ὃ",
  bestMove: "Ὄ",
  gift: "Ὅ",
  evaluationLinear: "ὐ",
  evaluationThrowaway: "ὑ",
  evaluationEqual: "ὒ",
  evaluationDead: "ὓ",
  evaluationSharp: "ὔ",
  evaluationPerplexing: "ὕ",
  evaluationSmooth: "ὖ",
  libraryAdd: "ὗ",
  selfPartner: "Ὑ",
  fourPlayerConfiguration: "Ὓ",
  listDownFlow: "Ὕ",
  puzzleBattle: "Ὗ",
  hyperbullet: "ὠ",
  gameLink: "ὡ",
  gameStudy: "ὢ",
  evaluationCrazy: "ὣ",
  engine: "ὤ",
  crossedSwordsInCircle: "ὥ",
  hallmark: "ὦ",
  like: "ὧ",
  boardTwoPlayers: "Ὠ",
  fourPlayerChess: "Ὡ",
  variants: "Ὢ",
  cloudUploadCompact: "Ὣ",
  clockIncrement: "Ὤ",
  videoCamera: "Ὥ",
  inaccuracy: "Ὧ",
  bot: "ὰ",
  torpedo: "ά",
  vk: "ὲ",
  blindfold: "έ",
  customSettings: "ή",
  captureAnything: "ὶ",
  pawnSideways: "ί",
  noCastling: "ὸ",
  fogOfWar: "ό",
  automate: "ὺ",
  atomic: "ύ",
  pawnCounterfeit: "ὼ",
  elephant: "ώ",
  fullBlock: "ᾀ",
  fourFullBlocks: "ᾁ",
  nineFullBlocks: "ᾂ",
  nineFullBlocksCrossed: "ᾃ",
  hamburgerMenuCompact: "ᾄ",
  listCompact: "ᾅ",
  geoMark: "ᾆ",
  crossedDonut: "ᾇ",
  handshake: "ᾈ",
  verified: "ᾉ",
  sandglassRunningOut: "ᾊ",
  rapidLowOnTime: "ᾋ",
  tourneyBanner: "ᾌ",
  noCloud: "ᾍ",
  fork: "ᾎ",
  donutTarget: "ᾏ",
  newCalendarDay: "ᾐ",
  cornerInfiltration: "ᾑ",
  hastTagCompact: "ᾒ",
  chatterbox: "ᾓ",
  circleStar: "ᾔ",
  targetPractice: "ᾕ",
  pawnPromotion: "ᾖ",
  flagProgression: "ᾗ",
  pawnDoubleAttack: "ᾘ",
  kingAndRook: "ᾙ",
  specialMedal: "ᾚ",
  pawnBanner: "ᾛ",
  userSquare: "ᾜ",
  verifiedCandidate: "ᾝ",
  saveFile: "ᾞ",
  duck: "ᾟ",
  addBanner: "ᾠ",
  qrCode: "ᾡ",
  noAnalysis: "ᾢ",
  dualPawn: "ᾣ",
  gameEscape: "ᾤ",
  tournamentCup: "ᾥ",
  noExchanges: "ᾦ",
  tikTok: "ᾰ",
  pieChart: "ᾱ",
  search: "–",
  binoculars: "—",
  largeBoard: "’",
  exclamation: "†",
  tournamentCupIcon: "‡",
  trashBin: "•",
  arrowForwardBoldCompact: "…",
  giftDiamond: "‹",
  filter: "›",
  noChat: "⁄",
  newSheet: "€",
  xml: "∞",
  blockUser: "∫",
  facebookLike: "≤",
  facebookDislike: "≥",
  apple: "◊",
  phone: ""
};

/***/ }),

/***/ "./src/main/client/ts/interfaces/Colors.ts":
/*!*************************************************!*\
  !*** ./src/main/client/ts/interfaces/Colors.ts ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "createHSLColor": () => (/* binding */ createHSLColor),
/* harmony export */   "createHexColor": () => (/* binding */ createHexColor),
/* harmony export */   "createRGBColor": () => (/* binding */ createRGBColor),
/* harmony export */   "validateHSLColor": () => (/* binding */ validateHSLColor),
/* harmony export */   "validateHexColor": () => (/* binding */ validateHexColor),
/* harmony export */   "validateIndexedColor": () => (/* binding */ validateIndexedColor),
/* harmony export */   "validateRGBColor": () => (/* binding */ validateRGBColor),
/* harmony export */   "verifyHSLColor": () => (/* binding */ verifyHSLColor),
/* harmony export */   "verifyHexColor": () => (/* binding */ verifyHexColor),
/* harmony export */   "verifyRGBColor": () => (/* binding */ verifyRGBColor),
/* harmony export */   "wrapHSLColor": () => (/* binding */ wrapHSLColor),
/* harmony export */   "wrapIndexedColor": () => (/* binding */ wrapIndexedColor),
/* harmony export */   "wrapRGBColor": () => (/* binding */ wrapRGBColor)
/* harmony export */ });
/* harmony import */ var _baseTypes__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../baseTypes */ "./src/main/client/ts/baseTypes.ts");

var hexColorRegex = /^#(?:[0-9a-fA-F]{3}){1,2}$/;
var createHexColor = color => {
  if (hexColorRegex.test(color)) {
    return color;
  } else throw new TypeError("The supplied hex color is not a hex color: " + color);
};
var verifyHexColor = color => typeof color === "string";
var validateHexColor = color => {
  if (typeof color === "string") {
    try {
      createHexColor(color);
      return true;
    } catch (_unused) {
      return false;
    }
  } else return false;
};
var createRGBColor = color => {
  if (color >= 0 || color <= 255) {
    return color;
  } else throw new TypeError("The supplied RGB color value is not an RGB color value: ".concat(color));
};
var wrapRGBColor = color => "rgb(".concat(color.join(","), ")");
var verifyRGBColor = color => Array.isArray(color);
var validateRGBColor = color => {
  if (Array.isArray(color) && (0,_baseTypes__WEBPACK_IMPORTED_MODULE_0__.verifyTupleType)(color, 3) && color.every(c => typeof c === "number")) {
    try {
      color.forEach(c => createRGBColor(c));
      return true;
    } catch (_unused2) {
      return false;
    }
  } else return false;
};
var createHSLColor = color => {
  if ((color.hue >= 0 || color.hue <= 359) && (color.saturation >= 0 || color.saturation <= 100) && (color.lightness >= 0 || color.lightness <= 100)) {
    return color;
  } else throw new TypeError("The supplied HSL value is not an HSL color: \" + color");
};
var wrapHSLColor = color => "hsl(".concat(color.hue, ",").concat(color.saturation, "%,").concat(color.lightness, "%)");
var verifyHSLColor = color => typeof color === "object";
var validateHSLColor = color => {
  var verifyNumberRecord = obj => {
    for (var key in obj) {
      if (!Object.prototype.hasOwnProperty.call(obj, key)) continue;
      if (typeof obj[key] !== "number") return false;
    }
    return true;
  };
  if (typeof color === "object" && color && "hue" in color && "saturation" in color && "lightness" in color && verifyNumberRecord(color)) {
    try {
      createHSLColor(color);
      return true;
    } catch (_unused3) {
      return false;
    }
  } else return false;
};
var wrapIndexedColor = color => {
  if (verifyHexColor(color)) {
    return color;
  } else if (verifyRGBColor(color)) {
    return wrapRGBColor(color);
  } else if (verifyHSLColor(color)) {
    return wrapHSLColor(color);
  } else {
    return (0,_baseTypes__WEBPACK_IMPORTED_MODULE_0__.throwOnNever)(color);
  }
};
var validateIndexedColor = color => {
  return validateHexColor(color) || validateRGBColor(color) || validateHSLColor(color);
};

/***/ }),

/***/ "./src/main/client/ts/logic/index/GameBoardWorker.ts":
/*!***********************************************************!*\
  !*** ./src/main/client/ts/logic/index/GameBoardWorker.ts ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "dispatchSyncRecord": () => (/* binding */ dispatchSyncRecord),
/* harmony export */   "initialDispatches": () => (/* binding */ initialDispatches),
/* harmony export */   "requiredDispatches": () => (/* binding */ requiredDispatches)
/* harmony export */ });
/* harmony import */ var reflect_metadata__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! reflect-metadata */ "./node_modules/reflect-metadata/Reflect.js");
/* harmony import */ var reflect_metadata__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(reflect_metadata__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _moveGeneration_Board_Board__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @moveGeneration/Board/Board */ "./src/main/client/ts/logic/movegen/Board/Board.ts");
/* harmony import */ var _moveGeneration_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @moveGeneration/GameInformation/GameData */ "./src/main/client/ts/logic/movegen/GameInformation/GameData.ts");
/* harmony import */ var _moveGeneration_GameInformation_GameUnits_PieceString__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @moveGeneration/GameInformation/GameUnits/PieceString */ "./src/main/client/ts/logic/movegen/GameInformation/GameUnits/PieceString.ts");
/* harmony import */ var _moveGeneration_MoveTree_MoveTreeInterface__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @moveGeneration/MoveTree/MoveTreeInterface */ "./src/main/client/ts/logic/movegen/MoveTree/MoveTreeInterface.ts");
/* harmony import */ var _moveGeneration_VariantRules_VariantRule__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @moveGeneration/VariantRules/VariantRule */ "./src/main/client/ts/logic/movegen/VariantRules/VariantRule.ts");
/* harmony import */ var _utils_ArrayUtils__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @utils/ArrayUtils */ "./src/main/client/ts/utils/ArrayUtils.ts");
/* harmony import */ var _utils_Tags_InputOutputProcessing__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../utils/Tags/InputOutputProcessing */ "./src/main/client/ts/logic/utils/Tags/InputOutputProcessing.ts");
/* harmony import */ var _client_ts_baseTypes__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @client/ts/baseTypes */ "./src/main/client/ts/baseTypes.ts");
/* harmony import */ var _moveGeneration_Board_BoardInterface__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @moveGeneration/Board/BoardInterface */ "./src/main/client/ts/logic/movegen/Board/BoardInterface.ts");
/* harmony import */ var _moveGeneration_MoveTree_MoveTreeValidator__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @moveGeneration/MoveTree/MoveTreeValidator */ "./src/main/client/ts/logic/movegen/MoveTree/MoveTreeValidator.ts");
/* harmony import */ var _moveGeneration_MoveTree_MoveTree__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @moveGeneration/MoveTree/MoveTree */ "./src/main/client/ts/logic/movegen/MoveTree/MoveTree.ts");
/* harmony import */ var _moveGeneration_VariantRules_VariantRuleDefinitions_BoardVariantModules_InsufficientMaterial_InsufficientMaterialConstructor__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @moveGeneration/VariantRules/VariantRuleDefinitions/BoardVariantModules/InsufficientMaterial/InsufficientMaterialConstructor */ "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/BoardVariantModules/InsufficientMaterial/InsufficientMaterialConstructor.ts");
/* harmony import */ var _moveGeneration_VariantRules_VariantRuleDefinitions_BoardVariantModules_InsufficientMaterial_InsufficientMaterialChecker__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @moveGeneration/VariantRules/VariantRuleDefinitions/BoardVariantModules/InsufficientMaterial/InsufficientMaterialChecker */ "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/BoardVariantModules/InsufficientMaterial/InsufficientMaterialChecker.ts");
/* harmony import */ var _moveGeneration_VariantRules_VariantRuleDefinitions_BoardVariantModules_InsufficientMaterial_StateSerializer__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @moveGeneration/VariantRules/VariantRuleDefinitions/BoardVariantModules/InsufficientMaterial/StateSerializer */ "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/BoardVariantModules/InsufficientMaterial/StateSerializer.ts");
var _dec, _dec2, _dec3, _dec4, _dec5, _dec6, _dec7, _dec8, _dec9, _dec10, _dec11, _dec12, _dec13, _dec14, _dec15, _dec16, _dec17, _dec18, _dec19, _dec20, _dec21, _dec22, _dec23, _dec24, _dec25, _dec26, _dec27, _dec28, _dec29, _dec30, _dec31, _dec32, _class;
function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }
function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }
function _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }
function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }
function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }
function _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }
function _toPropertyKey(arg) { var key = _toPrimitive(arg, "string"); return typeof key === "symbol" ? key : String(key); }
function _toPrimitive(input, hint) { if (typeof input !== "object" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || "default"); if (typeof res !== "object") return res; throw new TypeError("@@toPrimitive must return a primitive value."); } return (hint === "string" ? String : Number)(input); }
function _applyDecoratedDescriptor(target, property, decorators, descriptor, context) { var desc = {}; Object.keys(descriptor).forEach(function (key) { desc[key] = descriptor[key]; }); desc.enumerable = !!desc.enumerable; desc.configurable = !!desc.configurable; if ('value' in desc || desc.initializer) { desc.writable = true; } desc = decorators.slice().reverse().reduce(function (desc, decorator) { return decorator(target, property, desc) || desc; }, desc); if (context && desc.initializer !== void 0) { desc.value = desc.initializer ? desc.initializer.call(context) : void 0; desc.initializer = undefined; } if (desc.initializer === void 0) { Object.defineProperty(target, property, desc); desc = null; } return desc; }
















var requiredDispatches = [];
var initialDispatches = [];
var dispatchSyncRecord = {};
function withWorkerResult() {
  return function (_, propertyKey, descriptor) {
    var originalMethod = descriptor.value;
    (0,_client_ts_baseTypes__WEBPACK_IMPORTED_MODULE_8__.assertNonUndefined)(originalMethod);
    descriptor.value = function () {
      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
        args[_key] = arguments[_key];
      }
      postMessage([propertyKey, originalMethod.apply(this, args)]);
    };
  };
}
function workerDataSync(type, gameObjectPropertySync) {
  return function (_, propertyKey) {
    if (type === "required") {
      initialDispatches.push(propertyKey);
      requiredDispatches.push(propertyKey);
    } else {
      initialDispatches.push(propertyKey);
    }
    dispatchSyncRecord[propertyKey] = gameObjectPropertySync;
  };
}
var RequestManager = (_dec = withWorkerResult(), _dec2 = workerDataSync("required", "publicFENSettings"), _dec3 = withWorkerResult(), _dec4 = workerDataSync("initial", "initiallyAliveColors"), _dec5 = withWorkerResult(), _dec6 = workerDataSync("required", "moveTree"), _dec7 = withWorkerResult(), _dec8 = withWorkerResult(), _dec9 = withWorkerResult(), _dec10 = workerDataSync("required", "serializedPGN"), _dec11 = withWorkerResult(), _dec12 = withWorkerResult(), _dec13 = withWorkerResult(), _dec14 = workerDataSync("required", "allowedInternalMoves"), _dec15 = withWorkerResult(), _dec16 = workerDataSync("initial", "variantDataRules"), _dec17 = withWorkerResult(), _dec18 = workerDataSync("required", "boardSquares"), _dec19 = withWorkerResult(), _dec20 = workerDataSync("required", "gameData"), _dec21 = withWorkerResult(), _dec22 = workerDataSync("required", "currentMove"), _dec23 = withWorkerResult(), _dec24 = workerDataSync("initial", "variantRules"), _dec25 = withWorkerResult(), _dec26 = workerDataSync("initial", "variantType"), _dec27 = withWorkerResult(), _dec28 = withWorkerResult(), _dec29 = withWorkerResult(), _dec30 = withWorkerResult(), _dec31 = workerDataSync("required", "squareVisibility"), _dec32 = withWorkerResult(), (_class = class RequestManager {
  constructor() {
    _defineProperty(this, "board", void 0);
    _defineProperty(this, "initiallyAliveColors", []);
    _defineProperty(this, "internalMoves", []);
    _defineProperty(this, "legalMoves", new Map());
    _defineProperty(this, "fogOfWarPerspective", false);
  }
  stripPieceStrings(object) {
    // eslint-disable-next-line @typescript-eslint/no-unsafe-return
    return JSON.parse(JSON.stringify(object));
  }
  generateInitiallyAliveColors() {
    return this.board.data.fenOptions.tag("dead").map(d => !d).reduce((p, n, i) => {
      if (n) {
        return [...p, i];
      } else return p;
    }, []);
  }
  generateCurrentMoves() {
    this.internalMoves = this.board.getAllowedInternalMoves(), this.legalMoves = new Map();
    var _iterator = _createForOfIteratorHelper(this.board.getPlayerPieces()[this.board.data.sideToMove]),
      _step;
    try {
      for (_iterator.s(); !(_step = _iterator.n()).done;) {
        var piece = _step.value;
        this.legalMoves.set((0,_moveGeneration_Board_BoardInterface__WEBPACK_IMPORTED_MODULE_9__.stringifyCoordinate)(piece), this.board.getLegalMoves(piece[0], piece[1]));
      }
    } catch (err) {
      _iterator.e(err);
    } finally {
      _iterator.f();
    }
  }
  construct(_variantName, pgn4) {
    this.board = new _moveGeneration_Board_Board__WEBPACK_IMPORTED_MODULE_1__.Board(pgn4);
    this.board = (0,_moveGeneration_VariantRules_VariantRule__WEBPACK_IMPORTED_MODULE_5__.decorateClassWithVariants)(this.board, _moveGeneration_Board_Board__WEBPACK_IMPORTED_MODULE_1__.Board, this.board.variantRules.boardDecorators);
    this.generateInitiallyAliveColors();
    var insufficientMaterialModule = new _moveGeneration_VariantRules_VariantRuleDefinitions_BoardVariantModules_InsufficientMaterial_InsufficientMaterialConstructor__WEBPACK_IMPORTED_MODULE_12__.InsufficientMaterialConstructor(this.board, state => {
      this.board.insufficientMaterialChecker = new _moveGeneration_VariantRules_VariantRuleDefinitions_BoardVariantModules_InsufficientMaterial_InsufficientMaterialChecker__WEBPACK_IMPORTED_MODULE_13__.InsufficientMaterialChecker(state, this.board);
      this.board.moves = (0,_moveGeneration_MoveTree_MoveTreeValidator__WEBPACK_IMPORTED_MODULE_10__.validateMoveTree)(this.board, this.board.moves);
      this.board.moves.currentMove = [-1];
      (0,_moveGeneration_MoveTree_MoveTreeValidator__WEBPACK_IMPORTED_MODULE_10__.changeGameTermination)(this.board);
      this.generateCurrentMoves();
      postMessage(["construct", _moveGeneration_VariantRules_VariantRuleDefinitions_BoardVariantModules_InsufficientMaterial_StateSerializer__WEBPACK_IMPORTED_MODULE_14__.serializeInsufficientMaterialState(state)]);
    });
    insufficientMaterialModule.generateInsufficientMaterialState();
    return _moveGeneration_VariantRules_VariantRuleDefinitions_BoardVariantModules_InsufficientMaterial_StateSerializer__WEBPACK_IMPORTED_MODULE_14__.serializeInsufficientMaterialState(insufficientMaterialModule.state);
  }
  constructWithGeneratedData(pgn4, insufficientMaterialState) {
    this.board = new _moveGeneration_Board_Board__WEBPACK_IMPORTED_MODULE_1__.Board(pgn4);
    this.board = (0,_moveGeneration_VariantRules_VariantRule__WEBPACK_IMPORTED_MODULE_5__.decorateClassWithVariants)(this.board, _moveGeneration_Board_Board__WEBPACK_IMPORTED_MODULE_1__.Board, this.board.variantRules.boardDecorators);
    this.generateInitiallyAliveColors();
    this.board.insufficientMaterialChecker = new _moveGeneration_VariantRules_VariantRuleDefinitions_BoardVariantModules_InsufficientMaterial_InsufficientMaterialChecker__WEBPACK_IMPORTED_MODULE_13__.InsufficientMaterialChecker((0,_moveGeneration_VariantRules_VariantRuleDefinitions_BoardVariantModules_InsufficientMaterial_StateSerializer__WEBPACK_IMPORTED_MODULE_14__.deserializeInsufficientMaterialState)(insufficientMaterialState), this.board);
    this.board.moves = (0,_moveGeneration_MoveTree_MoveTreeValidator__WEBPACK_IMPORTED_MODULE_10__.validateMoveTree)(this.board, this.board.moves);
    this.board.moves.currentMove = [-1];
    (0,_moveGeneration_MoveTree_MoveTreeValidator__WEBPACK_IMPORTED_MODULE_10__.changeGameTermination)(this.board);
    this.generateCurrentMoves();
  }
  getFENSettings() {
    var board = this.board;
    var royalCount = (0,_client_ts_baseTypes__WEBPACK_IMPORTED_MODULE_8__.createTuple)(0, _moveGeneration_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_2__.totalPlayers);
    var isCustomRoyals = false;
    var _iterator2 = _createForOfIteratorHelper(this.board.board),
      _step2;
    try {
      for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
        var row = _step2.value;
        var _iterator3 = _createForOfIteratorHelper(row),
          _step3;
        try {
          for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {
            var square = _step3.value;
            if (square.isPiece() && square.piece === "K" && ++royalCount[square.color] > 1) {
              isCustomRoyals = true;
              break;
            }
          }
        } catch (err) {
          _iterator3.e(err);
        } finally {
          _iterator3.f();
        }
        if (isCustomRoyals) break;
      }
    } catch (err) {
      _iterator2.e(err);
    } finally {
      _iterator2.f();
    }
    var points = [...board.data.points];
    return {
      sideToMove: board.data.sideToMove,
      points,
      isCustomRoyals,
      fenOptions: board.data.fenOptions.createSerializedState()
    };
  }
  getInitiallyAliveColors() {
    return this.initiallyAliveColors;
  }
  getMoveTree() {
    var traverse = function traverse(moves) {
      var fullMoveCounter = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;
      var results = [];
      var _iterator4 = _createForOfIteratorHelper(moves),
        _step4;
      try {
        for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {
          var moveWrapper = _step4.value;
          var resultingWrapper = {
            alternativeLines: [],
            comment: moveWrapper.comment,
            path: moveWrapper.path.slice(),
            cachedNames: _objectSpread({}, moveWrapper.cachedNames),
            metadata: {
              currentSideToMove: moveWrapper.metadata.currentSideToMove,
              playerClock: moveWrapper.metadata.playerClock,
              highlightedArrows: moveWrapper.metadata.highlightedArrows,
              highlightedSquares: moveWrapper.metadata.highlightedSquares
            }
          };
          if (moveWrapper.metadata.currentFullMove) resultingWrapper.metadata.currentFullMove = moveWrapper.metadata.currentFullMove;
          var _iterator5 = _createForOfIteratorHelper(moveWrapper.alternativeLines),
            _step5;
          try {
            for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {
              var alternativeLine = _step5.value;
              resultingWrapper.alternativeLines.push(traverse(alternativeLine, fullMoveCounter - 1));
            }
          } catch (err) {
            _iterator5.e(err);
          } finally {
            _iterator5.f();
          }
          results.push(resultingWrapper);
        }
      } catch (err) {
        _iterator4.e(err);
      } finally {
        _iterator4.f();
      }
      return results;
    };
    return traverse(this.board.moves.moves);
  }
  loadSnapshotByPath(path) {
    var snapshot;
    if ((0,_utils_ArrayUtils__WEBPACK_IMPORTED_MODULE_6__.compareArrays)(path, [-1])) {
      var preliminarySnapshot = this.board.moves.getBoardSnapshot(-1);
      (0,_client_ts_baseTypes__WEBPACK_IMPORTED_MODULE_8__.assertNonUndefined)(preliminarySnapshot);
      snapshot = preliminarySnapshot;
    } else {
      var currentMove = this.board.moves.getMove(path);
      (0,_moveGeneration_MoveTree_MoveTree__WEBPACK_IMPORTED_MODULE_11__.assertValidMove)(currentMove);
      var _preliminarySnapshot = this.board.moves.getBoardSnapshot(currentMove);
      if (!_preliminarySnapshot) return false;
      snapshot = _preliminarySnapshot;
    }
    this.board.loadSnapshot(snapshot.boardSnapshot);
    this.board.moves.currentMove = [...path];
    this.generateCurrentMoves();
    return true;
  }
  verifyNextChainedMovesAreDeleted(move) {
    return !("nextChainedMoves" in move);
  }
  convertStrippedMoveToNormal(move) {
    var newMove = [];
    var _iterator6 = _createForOfIteratorHelper(move),
      _step6;
    try {
      for (_iterator6.s(); !(_step6 = _iterator6.n()).done;) {
        var moveComponent = _step6.value;
        delete moveComponent.nextChainedMoves;
        if (!this.verifyNextChainedMovesAreDeleted(moveComponent)) throw new Error("Could not delete nextChainedMoves in move component");
        if ((0,_moveGeneration_MoveTree_MoveTreeInterface__WEBPACK_IMPORTED_MODULE_4__.verifyStandardMove)(moveComponent)) {
          var _moveComponent$promot;
          newMove.push(_objectSpread(_objectSpread({}, moveComponent), {}, {
            promotion: (_moveComponent$promot = moveComponent.promotion) === null || _moveComponent$promot === void 0 ? void 0 : _moveComponent$promot.map(p => _moveGeneration_GameInformation_GameUnits_PieceString__WEBPACK_IMPORTED_MODULE_3__.PieceString.fromObjectToClass(p))
          }));
        } else if ((0,_moveGeneration_MoveTree_MoveTreeInterface__WEBPACK_IMPORTED_MODULE_4__.verifyDroppingMove)(moveComponent)) {
          newMove.push(_objectSpread(_objectSpread({}, moveComponent), {}, {
            piece: _moveGeneration_GameInformation_GameUnits_PieceString__WEBPACK_IMPORTED_MODULE_3__.PieceString.fromObjectToClass(moveComponent.piece)
          }));
        } else newMove.push(moveComponent);
      }
    } catch (err) {
      _iterator6.e(err);
    } finally {
      _iterator6.f();
    }
    if (!(0,_moveGeneration_MoveTree_MoveTreeInterface__WEBPACK_IMPORTED_MODULE_4__.verifyRequiredMove)(newMove)) throw new Error("Supplied move object had 0 move components");
    return newMove;
  }
  makeMove(passedMove) {
    var board = this.board,
      move = this.convertStrippedMoveToNormal(passedMove);
    board.moves.augmentMoveWithMetadata({
      move,
      board,
      makeMoveFunction: () => {
        return board.makeMove(move);
      }
    });
    this.generateCurrentMoves();
  }
  serializeBoardToPGN() {
    return (0,_utils_Tags_InputOutputProcessing__WEBPACK_IMPORTED_MODULE_7__.serializeBoard)(this.board);
  }
  getDroppingMoves(pieceString) {
    if (this.board.data.gameOver) return [];
    return this.stripPieceStrings(this.board.getDroppingMoves(_moveGeneration_GameInformation_GameUnits_PieceString__WEBPACK_IMPORTED_MODULE_3__.PieceString.fromObjectToClass(pieceString)));
  }
  getLegalMoves(i, j) {
    var _this$legalMoves$get;
    if (this.board.data.gameOver) return [];
    return this.stripPieceStrings((_this$legalMoves$get = this.legalMoves.get((0,_moveGeneration_Board_BoardInterface__WEBPACK_IMPORTED_MODULE_9__.stringifyCoordinate)([i, j]))) !== null && _this$legalMoves$get !== void 0 ? _this$legalMoves$get : this.board.getLegalMoves(i, j));
  }
  getInternalMoves() {
    if (this.board.data.gameOver) return [];
    return this.stripPieceStrings(this.internalMoves);
  }
  getVariantData() {
    return this.stripPieceStrings(this.board.variantData);
  }
  getBoard() {
    return this.board.board.map(r => r.map(p => p.toObject()));
  }
  getGameData() {
    var newGameData = _objectSpread({}, this.board.gameData);
    if (typeof newGameData.date === "object") {
      newGameData.date = newGameData.date.toUTCString();
    }
    return newGameData;
  }
  getCurrentMove() {
    return this.board.moves.currentMove;
  }
  getVariantRules() {
    var resultingRules = [];
    var _iterator7 = _createForOfIteratorHelper(this.board.variantRules),
      _step7;
    try {
      for (_iterator7.s(); !(_step7 = _iterator7.n()).done;) {
        var variantRule = _step7.value;
        resultingRules.push(variantRule.getPublicProperties());
      }
    } catch (err) {
      _iterator7.e(err);
    } finally {
      _iterator7.f();
    }
    return resultingRules;
  }
  getVariantType() {
    return this.board.gameType.type;
  }
  deleteMove(path) {
    if (this.board.moves.moves.length !== 0) this.board.moves.deleteMove(path);
  }
  playPreferredBotMove() {
    if (this.board.data.getRealPlayers() <= 1) return;
    var legalMoves = [];
    var _iterator8 = _createForOfIteratorHelper(this.board.getPlayerPieces()[this.board.data.sideToMove]),
      _step8;
    try {
      for (_iterator8.s(); !(_step8 = _iterator8.n()).done;) {
        var _this$legalMoves$get2;
        var piece = _step8.value;
        legalMoves.push(...((_this$legalMoves$get2 = this.legalMoves.get((0,_moveGeneration_Board_BoardInterface__WEBPACK_IMPORTED_MODULE_9__.stringifyCoordinate)(piece))) !== null && _this$legalMoves$get2 !== void 0 ? _this$legalMoves$get2 : this.board.getLegalMoves(piece[0], piece[1])));
      }
      // TODO Pick strongest piece
    } catch (err) {
      _iterator8.e(err);
    } finally {
      _iterator8.f();
    }
    legalMoves.push(...this.board.preGeneratedAttacks[this.board.data.sideToMove].pieceDrops.piece);
    legalMoves.push(...this.board.preGeneratedAttacks[this.board.data.sideToMove].pieceDrops.pawn);
    legalMoves.push(...this.internalMoves);
    var algorithm = this.board.data.fenOptions.getDefaultZombieAlgorithm(this.board.data.sideToMove);
    var moves = algorithm.evaluate(legalMoves, this.board);
    return this.stripPieceStrings(algorithm.pickPreferredMove(moves));
  }
  changeFogPerspective() {
    if (!this.board.variantData.fogOfWar || this.board.data.getRealPlayers() <= 1) return this.fogOfWarPerspective;
    if (this.fogOfWarPerspective === false) {
      this.fogOfWarPerspective = this.board.data.sideToMove;
    } else {
      var newPerspective = this.board.data.nextTurn(this.fogOfWarPerspective);
      if (newPerspective === this.board.data.sideToMove) {
        this.fogOfWarPerspective = false;
      } else this.fogOfWarPerspective = newPerspective;
    }
    return this.fogOfWarPerspective;
  }
  getSquareVisibility() {
    if (this.fogOfWarPerspective === false) {
      return this.board.getSquareVisibility();
    } else {
      var sideToMove = this.board.data.sideToMove;
      this.board.data.sideToMove = this.fogOfWarPerspective;
      var squareVisibility = this.board.getSquareVisibility();
      this.board.data.sideToMove = sideToMove;
      return squareVisibility;
    }
  }
}, (_applyDecoratedDescriptor(_class.prototype, "constructWithGeneratedData", [_dec], Object.getOwnPropertyDescriptor(_class.prototype, "constructWithGeneratedData"), _class.prototype), _applyDecoratedDescriptor(_class.prototype, "getFENSettings", [_dec2, _dec3], Object.getOwnPropertyDescriptor(_class.prototype, "getFENSettings"), _class.prototype), _applyDecoratedDescriptor(_class.prototype, "getInitiallyAliveColors", [_dec4, _dec5], Object.getOwnPropertyDescriptor(_class.prototype, "getInitiallyAliveColors"), _class.prototype), _applyDecoratedDescriptor(_class.prototype, "getMoveTree", [_dec6, _dec7], Object.getOwnPropertyDescriptor(_class.prototype, "getMoveTree"), _class.prototype), _applyDecoratedDescriptor(_class.prototype, "loadSnapshotByPath", [_dec8], Object.getOwnPropertyDescriptor(_class.prototype, "loadSnapshotByPath"), _class.prototype), _applyDecoratedDescriptor(_class.prototype, "makeMove", [_dec9], Object.getOwnPropertyDescriptor(_class.prototype, "makeMove"), _class.prototype), _applyDecoratedDescriptor(_class.prototype, "serializeBoardToPGN", [_dec10, _dec11], Object.getOwnPropertyDescriptor(_class.prototype, "serializeBoardToPGN"), _class.prototype), _applyDecoratedDescriptor(_class.prototype, "getDroppingMoves", [_dec12], Object.getOwnPropertyDescriptor(_class.prototype, "getDroppingMoves"), _class.prototype), _applyDecoratedDescriptor(_class.prototype, "getLegalMoves", [_dec13], Object.getOwnPropertyDescriptor(_class.prototype, "getLegalMoves"), _class.prototype), _applyDecoratedDescriptor(_class.prototype, "getInternalMoves", [_dec14, _dec15], Object.getOwnPropertyDescriptor(_class.prototype, "getInternalMoves"), _class.prototype), _applyDecoratedDescriptor(_class.prototype, "getVariantData", [_dec16, _dec17], Object.getOwnPropertyDescriptor(_class.prototype, "getVariantData"), _class.prototype), _applyDecoratedDescriptor(_class.prototype, "getBoard", [_dec18, _dec19], Object.getOwnPropertyDescriptor(_class.prototype, "getBoard"), _class.prototype), _applyDecoratedDescriptor(_class.prototype, "getGameData", [_dec20, _dec21], Object.getOwnPropertyDescriptor(_class.prototype, "getGameData"), _class.prototype), _applyDecoratedDescriptor(_class.prototype, "getCurrentMove", [_dec22, _dec23], Object.getOwnPropertyDescriptor(_class.prototype, "getCurrentMove"), _class.prototype), _applyDecoratedDescriptor(_class.prototype, "getVariantRules", [_dec24, _dec25], Object.getOwnPropertyDescriptor(_class.prototype, "getVariantRules"), _class.prototype), _applyDecoratedDescriptor(_class.prototype, "getVariantType", [_dec26, _dec27], Object.getOwnPropertyDescriptor(_class.prototype, "getVariantType"), _class.prototype), _applyDecoratedDescriptor(_class.prototype, "deleteMove", [_dec28], Object.getOwnPropertyDescriptor(_class.prototype, "deleteMove"), _class.prototype), _applyDecoratedDescriptor(_class.prototype, "playPreferredBotMove", [_dec29], Object.getOwnPropertyDescriptor(_class.prototype, "playPreferredBotMove"), _class.prototype), _applyDecoratedDescriptor(_class.prototype, "changeFogPerspective", [_dec30], Object.getOwnPropertyDescriptor(_class.prototype, "changeFogPerspective"), _class.prototype), _applyDecoratedDescriptor(_class.prototype, "getSquareVisibility", [_dec31, _dec32], Object.getOwnPropertyDescriptor(_class.prototype, "getSquareVisibility"), _class.prototype)), _class));
var requestManager = new RequestManager();
self.onmessage = e => {
  if (!(e.data.requestName in RequestManager.prototype)) return;
  var method = RequestManager.prototype[e.data.requestName];
  method.apply(requestManager, e.data.parameters);
};

/***/ }),

/***/ "./src/main/client/ts/logic/movegen/Board/Board.ts":
/*!*********************************************************!*\
  !*** ./src/main/client/ts/logic/movegen/Board/Board.ts ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Board": () => (/* binding */ Board),
/* harmony export */   "baseImmunes": () => (/* binding */ baseImmunes)
/* harmony export */ });
/* harmony import */ var _baseTypes__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../baseTypes */ "./src/main/client/ts/baseTypes.ts");
/* harmony import */ var _BaseInterfaces__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../BaseInterfaces */ "./src/main/client/ts/logic/BaseInterfaces.ts");
/* harmony import */ var _MoveTree_MoveTree__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../MoveTree/MoveTree */ "./src/main/client/ts/logic/movegen/MoveTree/MoveTree.ts");
/* harmony import */ var _MoveTree_MoveTreeInterface__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../MoveTree/MoveTreeInterface */ "./src/main/client/ts/logic/movegen/MoveTree/MoveTreeInterface.ts");
/* harmony import */ var _FENData_FENData__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../FENData/FENData */ "./src/main/client/ts/logic/movegen/FENData/FENData.ts");
/* harmony import */ var _GameInformation_GameData__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../GameInformation/GameData */ "./src/main/client/ts/logic/movegen/GameInformation/GameData.ts");
/* harmony import */ var _GameInformation_GameUnits_GameUnits__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../GameInformation/GameUnits/GameUnits */ "./src/main/client/ts/logic/movegen/GameInformation/GameUnits/GameUnits.ts");
/* harmony import */ var _GameInformation_GameUnits_PieceString__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../GameInformation/GameUnits/PieceString */ "./src/main/client/ts/logic/movegen/GameInformation/GameUnits/PieceString.ts");
/* harmony import */ var _PieceControl_PieceControlBuilder__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../PieceControl/PieceControlBuilder */ "./src/main/client/ts/logic/movegen/PieceControl/PieceControlBuilder.ts");
/* harmony import */ var _PieceControl_PieceControlDeclarations__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../PieceControl/PieceControlDeclarations */ "./src/main/client/ts/logic/movegen/PieceControl/PieceControlDeclarations.ts");
/* harmony import */ var _PieceControl_PieceControlInterface__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../PieceControl/PieceControlInterface */ "./src/main/client/ts/logic/movegen/PieceControl/PieceControlInterface.ts");
/* harmony import */ var _VariantRules_VariantRule__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../VariantRules/VariantRule */ "./src/main/client/ts/logic/movegen/VariantRules/VariantRule.ts");
/* harmony import */ var _VariantRules_VariantRuleSetup__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../VariantRules/VariantRuleSetup */ "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleSetup.ts");
/* harmony import */ var _BoardInterface__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./BoardInterface */ "./src/main/client/ts/logic/movegen/Board/BoardInterface.ts");
/* harmony import */ var _client_ts_utils_ObjectUtils__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @client/ts/utils/ObjectUtils */ "./src/main/client/ts/utils/ObjectUtils.ts");
/* harmony import */ var _utils_Tags_InputOutputProcessing__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../utils/Tags/InputOutputProcessing */ "./src/main/client/ts/logic/utils/Tags/InputOutputProcessing.ts");
function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }
function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function _iterableToArrayLimit(arr, i) { var _i = null == arr ? null : "undefined" != typeof Symbol && arr[Symbol.iterator] || arr["@@iterator"]; if (null != _i) { var _s, _e, _x, _r, _arr = [], _n = !0, _d = !1; try { if (_x = (_i = _i.call(arr)).next, 0 === i) { if (Object(_i) !== _i) return; _n = !1; } else for (; !(_n = (_s = _x.call(_i)).done) && (_arr.push(_s.value), _arr.length !== i); _n = !0); } catch (err) { _d = !0, _e = err; } finally { try { if (!_n && null != _i.return && (_r = _i.return(), Object(_r) !== _r)) return; } finally { if (_d) throw _e; } } return _arr; } }
function _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }
function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }
function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }
function _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e2) { throw _e2; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e3) { didErr = true; err = _e3; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }
function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }
function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }
function _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }
function _toPropertyKey(arg) { var key = _toPrimitive(arg, "string"); return typeof key === "symbol" ? key : String(key); }
function _toPrimitive(input, hint) { if (typeof input !== "object" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || "default"); if (typeof res !== "object") return res; throw new TypeError("@@toPrimitive must return a primitive value."); } return (hint === "string" ? String : Number)(input); }
















(0,_PieceControl_PieceControlDeclarations__WEBPACK_IMPORTED_MODULE_9__.initPieceControlDeclarations)();
var baseImmunes = (0,_baseTypes__WEBPACK_IMPORTED_MODULE_0__.createTuple)(false, _GameInformation_GameData__WEBPACK_IMPORTED_MODULE_5__.totalPlayers);
class Board {
  initDecoratorSettings() {
    /* no-op */
  }

  /*---------------------------------- INITIALIZATION -----------------------------------------*/
  constructor(pgn4) {
    _defineProperty(this, "controls", {});
    _defineProperty(this, "data", void 0);
    _defineProperty(this, "moves", void 0);
    _defineProperty(this, "preGeneratedAttacks", (0,_baseTypes__WEBPACK_IMPORTED_MODULE_0__.createTupleFromCallback)(_BoardInterface__WEBPACK_IMPORTED_MODULE_13__.createBasePreGeneratedAttacks, _GameInformation_GameData__WEBPACK_IMPORTED_MODULE_5__.totalPlayers));
    _defineProperty(this, "board", void 0);
    _defineProperty(this, "isComplexSetup", (0,_BoardInterface__WEBPACK_IMPORTED_MODULE_13__.createComplexMoveLegalityTracker)());
    _defineProperty(this, "gameData", void 0);
    _defineProperty(this, "gameType", (0,_BoardInterface__WEBPACK_IMPORTED_MODULE_13__.createGameTypeSettings)());
    _defineProperty(this, "variantRules", void 0);
    _defineProperty(this, "variantData", void 0);
    _defineProperty(this, "isTwoPlayer", void 0);
    _defineProperty(this, "insufficientMaterialChecker", void 0);
    _defineProperty(this, "__baseClass", void 0);
    this.__baseClass = this;
    var parsingResults = (0,_utils_Tags_InputOutputProcessing__WEBPACK_IMPORTED_MODULE_15__.parsePGN4)(pgn4);
    this.gameType.type = parsingResults.gameType;
    this.variantRules = parsingResults.variantRules;
    this.gameData = parsingResults.gameData;
    this.board = parsingResults.board;
    this.data = parsingResults.fenData;
    this.data.injectBoard(this);
    this.data = (0,_VariantRules_VariantRule__WEBPACK_IMPORTED_MODULE_11__.decorateClassWithVariants)(this.data, _FENData_FENData__WEBPACK_IMPORTED_MODULE_4__.FENData, this.variantRules.fenDataDecorators);
    this.variantData = parsingResults.variantRuleData;
    this.variantRules = (0,_VariantRules_VariantRuleSetup__WEBPACK_IMPORTED_MODULE_12__.validateVariantRules)(this);
    this.isTwoPlayer = this.data.getRealPlayers() === 2;
    this.initPieceControls(parsingResults.pieceSet);
    this.moves = (0,_MoveTree_MoveTree__WEBPACK_IMPORTED_MODULE_2__.createMoveTree)(this.createSnapshot());
    this.moves.moves = parsingResults.moves;
    this.pregenerateAttacks();
  }
  initPieceControls(pieces) {
    if (pieces.size === 0) return;
    var builder = new _PieceControl_PieceControlBuilder__WEBPACK_IMPORTED_MODULE_8__.PieceControlBuilder();
    builder.setFENData(this.data);
    builder.setVariantRules(this.variantRules.pieceControlDecorators);
    var _iterator = _createForOfIteratorHelper(pieces),
      _step;
    try {
      for (_iterator.s(); !(_step = _iterator.n()).done;) {
        var piece = _step.value;
        var pieceControlConfigurator = builder.createPieceControlWrap(piece);
        this.controls[piece] = pieceControlConfigurator;
      }
    } catch (err) {
      _iterator.e(err);
    } finally {
      _iterator.f();
    }
  }
  getSquareVisibility() {
    return (0,_BaseInterfaces__WEBPACK_IMPORTED_MODULE_1__.initializeBoardSquares)(() => []);
  }
  createSnapshot() {
    return {
      data: this.data.createSnapshot(),
      board: this.board.map(a => [...a]),
      isComplexSetup: Object.assign({}, this.isComplexSetup)
    };
  }
  loadSnapshot(snapshot) {
    this.isComplexSetup = _objectSpread({}, snapshot.isComplexSetup);
    this.data.loadSnapshot(snapshot.data);
    this.board = snapshot.board.map(row => [...row]);
    this.pregenerateAttacks();
    this.runComplexLegalityEvaluationChecks();
  }
  createClone() {
    var targetObject = (0,_client_ts_utils_ObjectUtils__WEBPACK_IMPORTED_MODULE_14__.copyClass)(this.__baseClass, Board);
    targetObject.board = this.board.map(a => [...a]); // PieceStrings are immutable
    targetObject.isComplexSetup = Object.assign({}, this.isComplexSetup);
    targetObject.preGeneratedAttacks = (0,_baseTypes__WEBPACK_IMPORTED_MODULE_0__.createTupleFromCallback)(_BoardInterface__WEBPACK_IMPORTED_MODULE_13__.createBasePreGeneratedAttacks, _GameInformation_GameData__WEBPACK_IMPORTED_MODULE_5__.totalPlayers);
    targetObject.data = this.data.createClone();
    targetObject = (0,_VariantRules_VariantRule__WEBPACK_IMPORTED_MODULE_11__.decorateClassWithVariants)(targetObject, Board, (0,_VariantRules_VariantRuleSetup__WEBPACK_IMPORTED_MODULE_12__.copyVariantRules)(this.__baseClass.variantRules.boardDecorators));
    targetObject.data.injectBoard(targetObject);
    targetObject.data = (0,_VariantRules_VariantRule__WEBPACK_IMPORTED_MODULE_11__.decorateClassWithVariants)(targetObject.data, _FENData_FENData__WEBPACK_IMPORTED_MODULE_4__.FENData, (0,_VariantRules_VariantRuleSetup__WEBPACK_IMPORTED_MODULE_12__.copyVariantRules)(this.__baseClass.variantRules.fenDataDecorators));
    var presumedPieceLetters = new Set();
    var letter;
    for (letter in this.controls) {
      if (Object.prototype.hasOwnProperty.call(this.controls, letter)) {
        presumedPieceLetters.add(letter);
      }
    }
    targetObject.initPieceControls(presumedPieceLetters);
    targetObject.pregenerateAttacks();
    return targetObject;
  }

  /*---------------------------------- INITIALIZATION -----------------------------------------*/
  /*-------------------------------------------------------------------------------------------*/
  /*------------------------------------- UTILITIES -------------------------------------------*/

  isKingInCheck(baseColor) {
    var fenRoyal = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.data.fenOptions.tag("royal");
    var royal = fenRoyal[baseColor];
    if (!royal || this.data.fenOptions.tag("dead")[baseColor]) return false;
    var coordinates = royal;
    return !!(this.preGeneratedAttacks[baseColor].slidingPieces[coordinates[0]][coordinates[1]] || this.preGeneratedAttacks[baseColor].hoppingPieces[coordinates[0]][coordinates[1]]);
  }
  getPlayerPieces() {
    var playerPieces = [[], [], [], []];
    for (var i = 0; i < _GameInformation_GameData__WEBPACK_IMPORTED_MODULE_5__.boardDimension; i++) {
      for (var j = 0; j < _GameInformation_GameData__WEBPACK_IMPORTED_MODULE_5__.boardDimension; j++) {
        var square = this.board[i][j];
        if (square.isEmpty()) continue;
        var color = square.color;
        if (color !== _GameInformation_GameUnits_PieceString__WEBPACK_IMPORTED_MODULE_7__.deadColorIndex) playerPieces[color].push([i, j]);
      }
    }
    return playerPieces;
  }
  getCheckmatesAndStalemates() {
    var dead = this.data.fenOptions.tag("dead"),
      royal = this.data.fenOptions.tag("royal");
    var kingChecks = (0,_baseTypes__WEBPACK_IMPORTED_MODULE_0__.createTuple)(false, _GameInformation_GameData__WEBPACK_IMPORTED_MODULE_5__.totalPlayers);
    var legalMoves = (0,_baseTypes__WEBPACK_IMPORTED_MODULE_0__.createTuple)(false, _GameInformation_GameData__WEBPACK_IMPORTED_MODULE_5__.totalPlayers);
    var playerPieces = this.getPlayerPieces();
    legalMoves[this.data.sideToMove] = true;
    var _iterator2 = _createForOfIteratorHelper(_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_5__.colors),
      _step2;
    try {
      for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
        var color = _step2.value;
        if (dead[color]) continue;
        var playerArmy = playerPieces[color];
        if (this.isKingInCheck(color)) {
          kingChecks[color] = true;
        }
        var _iterator3 = _createForOfIteratorHelper(playerArmy),
          _step3;
        try {
          for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {
            var piece = _step3.value;
            if (this.getLegalMoves(piece[0], piece[1], color).length) {
              legalMoves[color] = true;
              break;
            }
          }
        } catch (err) {
          _iterator3.e(err);
        } finally {
          _iterator3.f();
        }
        if (!legalMoves[color]) {
          if (this.preGeneratedAttacks[color].pieceDrops.pawn.length || this.preGeneratedAttacks[color].pieceDrops.piece.length) {
            legalMoves[color] = true;
          }
        }
      }
    } catch (err) {
      _iterator2.e(err);
    } finally {
      _iterator2.f();
    }
    var kingCaptures = royal.map((r, i) => !dead[i] && r ? this.board[r[0]][r[1]].isEmpty() || this.board[r[0]][r[1]].color !== i : false);
    return {
      checkmates: legalMoves.map((move, i) => kingCaptures[i] || !move && kingChecks[i]),
      stalemates: legalMoves.map((move, i) => !move && !kingChecks[i]),
      checks: kingChecks
    };
  }
  runComplexLegalityEvaluationChecks() {
    if (this.isComplexSetup.hasComplexRules) return;
    for (var i = 0; i < _GameInformation_GameData__WEBPACK_IMPORTED_MODULE_5__.boardDimension; i++) {
      for (var j = 0; j < _GameInformation_GameData__WEBPACK_IMPORTED_MODULE_5__.boardDimension; j++) {
        var square = this.board[i][j];
        if (square.isPiece() && _PieceControl_PieceControlInterface__WEBPACK_IMPORTED_MODULE_10__.pieceControlConfigSettings[square.piece].moveGenerationSettings.isComplex) {
          this.isComplexSetup.hasComplexPieces = true;
          return;
        }
      }
    }
  }
  getCurrentChecks() {
    var sideToMove = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.data.sideToMove;
    var dead = this.data.fenOptions.tag("dead"),
      resigned = this.data.fenOptions.tag("resigned"),
      royal = this.data.fenOptions.tag("royal");
    var playerRoyals = royal.map((r, i) => r && !dead[i] && !resigned[i] ? r : null);
    var attackingCoordinates = (0,_baseTypes__WEBPACK_IMPORTED_MODULE_0__.createTupleFromCallback)(() => [], _GameInformation_GameData__WEBPACK_IMPORTED_MODULE_5__.totalPlayers);
    var _iterator4 = _createForOfIteratorHelper(this.preGeneratedAttacks[sideToMove].pieceMovements),
      _step4;
    try {
      for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {
        var _step4$value = _slicedToArray(_step4.value, 2),
          startingCoordinate = _step4$value[0],
          attackList = _step4$value[1];
        var _iterator5 = _createForOfIteratorHelper(attackList),
          _step5;
        try {
          for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {
            var attack = _step5.value;
            var _iterator6 = _createForOfIteratorHelper(_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_5__.colors),
              _step6;
            try {
              for (_iterator6.s(); !(_step6 = _iterator6.n()).done;) {
                var color = _step6.value;
                if (color === sideToMove) continue;
                var _royal = playerRoyals[color];
                if (_royal && (0,_BoardInterface__WEBPACK_IMPORTED_MODULE_13__.compareCoordinates)(_royal, attack.move)) {
                  attackingCoordinates[color].push(startingCoordinate);
                }
              }
            } catch (err) {
              _iterator6.e(err);
            } finally {
              _iterator6.f();
            }
          }
        } catch (err) {
          _iterator5.e(err);
        } finally {
          _iterator5.f();
        }
      }
    } catch (err) {
      _iterator4.e(err);
    } finally {
      _iterator4.f();
    }
    return attackingCoordinates;
  }

  /*------------------------------------- UTILITIES -------------------------------------------*/
  /*-------------------------------------------------------------------------------------------*/
  /*---------------------------------------- API ----------------------------------------------*/

  makeMove(move) {
    var ignoreNextMoves = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;
    var returnValues;
    var sideToMove = this.data.sideToMove,
      pregeneratedAttacks = this.preGeneratedAttacks;
    for (var i = 0; i < move.length; i++) {
      if (i === move.length - 1) {
        returnValues = this.data.affectOptions(move[i], {
          ignoreCheckmateChecks: ignoreNextMoves,
          ignoreNextTurn: false
        });
      } else {
        this.data.affectOptions(move[i], {
          ignoreCheckmateChecks: ignoreNextMoves,
          ignoreNextTurn: true
        });
      }
    }
    this.runComplexLegalityEvaluationChecks();
    if (ignoreNextMoves) return returnValues;
    var path = this.moves.currentMove.slice();
    path[path.length - 1]++;
    this.moves.currentMove = this.moves.setNewMove({
      move: (0,_MoveTree_MoveTreeInterface__WEBPACK_IMPORTED_MODULE_3__.createBaseMoveWrapper)({
        path,
        moveData: move
      }),
      snapshot: {
        boardSnapshot: this.createSnapshot(),
        pregeneratedAttacks: pregeneratedAttacks[sideToMove]
      },
      fenDataString: this.moves.constructPreliminaryHashString(this)
    });
    if (this.data.gameOver || this.data.getRealPlayers() === 1) return returnValues;
    if (returnValues.checkmates[this.data.sideToMove]) {
      returnValues = this.makeMove([{
        type: _MoveTree_MoveTreeInterface__WEBPACK_IMPORTED_MODULE_3__.InternalMoveSignature.TeamsCheckmate
      }], true);
    } else if (returnValues.stalemates[this.data.sideToMove]) {
      returnValues = this.makeMove([{
        type: _MoveTree_MoveTreeInterface__WEBPACK_IMPORTED_MODULE_3__.InternalMoveSignature.Stalemate
      }]);
    }
    return returnValues;
  }
  pregenerateAttacks() {
    var exclusiveSideToMoveGeneration = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;
    var royal = this.data.fenOptions.tag("royal");
    this.preGeneratedAttacks = (0,_baseTypes__WEBPACK_IMPORTED_MODULE_0__.createTupleFromCallback)(_BoardInterface__WEBPACK_IMPORTED_MODULE_13__.createBasePreGeneratedAttacks, _GameInformation_GameData__WEBPACK_IMPORTED_MODULE_5__.totalPlayers);
    this.getPlayerPieces().forEach((army, armyColor) => {
      if (exclusiveSideToMoveGeneration !== false && exclusiveSideToMoveGeneration !== armyColor) return;
      var preGeneratedAttacks = this.preGeneratedAttacks[armyColor];
      var _iterator7 = _createForOfIteratorHelper(army),
        _step7;
      try {
        for (_iterator7.s(); !(_step7 = _iterator7.n()).done;) {
          var coordinate = _step7.value;
          var square = this.board[coordinate[0]][coordinate[1]];
          if (!square.isPiece()) continue;
          var color = square.color;
          var letter = square.piece;
          var controlBuilder = this.controls[letter]().setColor(color).setCoordinates(coordinate[0], coordinate[1]).setBoard(this.board);
          var setting = _PieceControl_PieceControlInterface__WEBPACK_IMPORTED_MODULE_10__.pieceControlConfigSettings[square.piece];
          var resultingMoves = [];
          var control = controlBuilder.setBaseImmunePieces(this.gameType.getBaseColors(color)).constructPieceControl();
          resultingMoves.push(...control.getPseudoLegalMoves());
          control = controlBuilder.setBaseImmunePieces(baseImmunes).constructPieceControl();
          if (setting.moveGenerationSettings.isJumping) {
            var attacks = control.rayGenJumpingAttacks();
            var _iterator8 = _createForOfIteratorHelper(attacks),
              _step8;
            try {
              for (_iterator8.s(); !(_step8 = _iterator8.n()).done;) {
                var attack = _step8.value.move;
                var _iterator9 = _createForOfIteratorHelper(_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_5__.colors),
                  _step9;
                try {
                  for (_iterator9.s(); !(_step9 = _iterator9.n()).done;) {
                    var _color = _step9.value;
                    if (_color === armyColor) continue;
                    var _preGeneratedAttacks = this.preGeneratedAttacks[_color];
                    _preGeneratedAttacks.hoppingPieces[attack[0]][attack[1]]++;
                    _preGeneratedAttacks.hoppingPieceLines.push([coordinate, attack]);
                    var l = _preGeneratedAttacks.attackingColors[attack[0]][attack[1]];
                    if (~l && _preGeneratedAttacks.attackingColors[attack[0]][attack[1]] !== _color + 1) {
                      _preGeneratedAttacks.attackingColors[attack[0]][attack[1]] = l === 0 ? 1 + _color : -1;
                    }
                  }
                } catch (err) {
                  _iterator9.e(err);
                } finally {
                  _iterator9.f();
                }
              }
            } catch (err) {
              _iterator8.e(err);
            } finally {
              _iterator8.f();
            }
          }
          if (setting.moveGenerationSettings.isSliding) {
            var _attacks = control.rayGenSlidingAttacks();
            var _iterator10 = _createForOfIteratorHelper(_attacks),
              _step10;
            try {
              for (_iterator10.s(); !(_step10 = _iterator10.n()).done;) {
                var _attack = _step10.value;
                var _iterator12 = _createForOfIteratorHelper(_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_5__.colors),
                  _step12;
                try {
                  for (_iterator12.s(); !(_step12 = _iterator12.n()).done;) {
                    var _color2 = _step12.value;
                    if (_color2 === armyColor) continue;
                    var _preGeneratedAttacks2 = this.preGeneratedAttacks[_color2];
                    var _iterator13 = _createForOfIteratorHelper(_attack),
                      _step13;
                    try {
                      for (_iterator13.s(); !(_step13 = _iterator13.n()).done;) {
                        var subAttack = _step13.value.move;
                        _preGeneratedAttacks2.slidingPieces[subAttack[0]][subAttack[1]]++;
                        var _l = _preGeneratedAttacks2.attackingColors[subAttack[0]][subAttack[1]];
                        if (~_l && _preGeneratedAttacks2.attackingColors[subAttack[0]][subAttack[1]] !== _color2 + 1) {
                          _preGeneratedAttacks2.attackingColors[subAttack[0]][subAttack[1]] = _l === 0 ? 1 + _color2 : -1;
                        }
                      }
                    } catch (err) {
                      _iterator13.e(err);
                    } finally {
                      _iterator13.f();
                    }
                    if (_attack.length !== 0) {
                      _preGeneratedAttacks2.slidingPiecesLines.push([coordinate, _attack.map(m => m.move)]);
                    } else {
                      var coordinateArray = [];
                      _preGeneratedAttacks2.slidingPiecesLines.push([coordinate, coordinateArray]);
                    }
                  }
                } catch (err) {
                  _iterator12.e(err);
                } finally {
                  _iterator12.f();
                }
              }
            } catch (err) {
              _iterator10.e(err);
            } finally {
              _iterator10.f();
            }
            var rayGen = control.rayGenSlidingAttacks(_PieceControl_PieceControlInterface__WEBPACK_IMPORTED_MODULE_10__.AttackType.RayTraceLimited);
            var _iterator11 = _createForOfIteratorHelper(rayGen),
              _step11;
            try {
              for (_iterator11.s(); !(_step11 = _iterator11.n()).done;) {
                var _attack2 = _step11.value;
                var _iterator14 = _createForOfIteratorHelper(_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_5__.colors),
                  _step14;
                try {
                  for (_iterator14.s(); !(_step14 = _iterator14.n()).done;) {
                    var _color3 = _step14.value;
                    if (_color3 === armyColor) continue;
                    var _preGeneratedAttacks3 = this.preGeneratedAttacks[_color3];
                    if (_attack2.length !== 0) {
                      var isRoyalOnLine = false;
                      var resultingAttack = [];
                      var _iterator15 = _createForOfIteratorHelper(_attack2),
                        _step15;
                      try {
                        for (_iterator15.s(); !(_step15 = _iterator15.n()).done;) {
                          var _royal$_color;
                          var move = _step15.value.move;
                          resultingAttack.push(move);
                          if (isRoyalOnLine) {
                            _preGeneratedAttacks3.slidingPieces[move[0]][move[1]]++;
                          } else if ((0,_BoardInterface__WEBPACK_IMPORTED_MODULE_13__.compareCoordinates)((_royal$_color = royal[_color3]) !== null && _royal$_color !== void 0 ? _royal$_color : [-1, -1], move)) {
                            isRoyalOnLine = true;
                          }
                        }
                      } catch (err) {
                        _iterator15.e(err);
                      } finally {
                        _iterator15.f();
                      }
                      _preGeneratedAttacks3.slidingPiecesRayTracing.push([coordinate, _attack2.map(m => m.move)]);
                    } else {
                      _preGeneratedAttacks3.slidingPiecesLines.push([coordinate, []]);
                    }
                  }
                } catch (err) {
                  _iterator14.e(err);
                } finally {
                  _iterator14.f();
                }
              }
            } catch (err) {
              _iterator11.e(err);
            } finally {
              _iterator11.f();
            }
          }
          preGeneratedAttacks.pieceMovements.set((0,_BoardInterface__WEBPACK_IMPORTED_MODULE_13__.stringifyCoordinate)(coordinate), resultingMoves);
        }
      } catch (err) {
        _iterator7.e(err);
      } finally {
        _iterator7.f();
      }
      preGeneratedAttacks.pieceDrops.piece = this.getDroppingMoves((0,_GameInformation_GameUnits_PieceString__WEBPACK_IMPORTED_MODULE_7__.createPieceFromData)(armyColor, _GameInformation_GameUnits_GameUnits__WEBPACK_IMPORTED_MODULE_6__.nonPlayablePieces.wall));
      preGeneratedAttacks.pieceDrops.pawn = this.getDroppingMoves((0,_GameInformation_GameUnits_PieceString__WEBPACK_IMPORTED_MODULE_7__.createPieceFromData)(armyColor, _GameInformation_GameUnits_PieceString__WEBPACK_IMPORTED_MODULE_7__.pawnPieceString.piece));
    });
  }
  isSetupComplex() {
    return this.isComplexSetup.hasComplexPieces || this.isComplexSetup.hasComplexRules || this.data.isComplexEvaluation();
  }
  isTheMoveLegal(color, moveData) {
    var isSeirawanDrop = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;
    var royals = this.data.fenOptions.tag("royal");
    var _moveData$startCoordi = _slicedToArray(moveData.startCoordinates, 2),
      pieceI = _moveData$startCoordi[0],
      pieceJ = _moveData$startCoordi[1],
      _moveData$endCoordina = _slicedToArray(moveData.endCoordinates, 2),
      attackI = _moveData$endCoordina[0],
      attackJ = _moveData$endCoordina[1];
    var royal = royals[color];
    if (!this.board[attackI][attackJ].isEmpty() && royal && attackI === royal[0] && attackJ === royal[1]) return false;
    if (this.isSetupComplex()) {
      var snapshot = this.createSnapshot();
      var moveArray = [{
        startCoordinates: [pieceI, pieceJ],
        endCoordinates: [attackI, attackJ]
      }];
      if (isSeirawanDrop) moveArray.push({
        piece: _GameInformation_GameUnits_PieceString__WEBPACK_IMPORTED_MODULE_7__.wallPieceString,
        endCoordinates: [pieceI, pieceJ]
      });
      var _this$makeMove = this.makeMove(moveArray, true),
        checks = _this$makeMove.checks,
        checkmates = _this$makeMove.checkmates;
      var isKingInCheck = checks[color] || checkmates[color];
      if (!isKingInCheck) {
        this.pregenerateAttacks(color);
        isKingInCheck = this.isKingInCheck(color);
      }
      this.loadSnapshot(snapshot);
      return !isKingInCheck;
    } else {
      var _ref = royal !== null && royal !== void 0 ? royal : [null, null],
        _ref2 = _slicedToArray(_ref, 2),
        royalI = _ref2[0],
        royalJ = _ref2[1];
      var preGeneratedAttacks = this.preGeneratedAttacks[color];
      if (royalI === null) return true;
      var isRoyalMove = royalI === pieceI && royalJ === pieceJ;
      var attackers = preGeneratedAttacks.hoppingPieces[royalI][royalJ] + preGeneratedAttacks.slidingPieces[royalI][royalJ];
      var targetSafety = preGeneratedAttacks.slidingPieces[attackI][attackJ] + preGeneratedAttacks.hoppingPieces[attackI][attackJ] === 0;
      var legalitySettings = {
        canKingCapture: undefined
      };
      var _iterator16 = _createForOfIteratorHelper(_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_5__.colors),
        _step16;
      try {
        for (_iterator16.s(); !(_step16 = _iterator16.n()).done;) {
          var kingCaptureColor = _step16.value;
          var _royal2 = royals[kingCaptureColor];
          if (kingCaptureColor !== color && _royal2 && _royal2[0] === attackI && _royal2[1] === attackJ) {
            var royalDefendedSquare = preGeneratedAttacks.attackingColors[_royal2[1]][_royal2[0]];
            if ((royalDefendedSquare === kingCaptureColor + 1 || royalDefendedSquare === 0) && (isRoyalMove || preGeneratedAttacks.attackingColors[royalI][royalJ] === kingCaptureColor + 1)) {
              legalitySettings.canKingCapture = kingCaptureColor + 1;
            }
          }
        }
      } catch (err) {
        _iterator16.e(err);
      } finally {
        _iterator16.f();
      }
      if (!this.gameType.isFFA() && legalitySettings.canKingCapture !== undefined) return true;
      var _iterator17 = _createForOfIteratorHelper(preGeneratedAttacks.slidingPiecesRayTracing),
        _step17;
      try {
        for (_iterator17.s(); !(_step17 = _iterator17.n()).done;) {
          var _step17$value = _slicedToArray(_step17.value, 2),
            _attackingPiece2 = _step17$value[0],
            _attackLine = _step17$value[1];
          var isPieceUnderAttack = false,
            _isRoyalUnderAttack = false,
            isTheTargetSquarePinListed = false;
          var _iterator21 = _createForOfIteratorHelper(_attackLine),
            _step21;
          try {
            for (_iterator21.s(); !(_step21 = _iterator21.n()).done;) {
              var _step21$value = _slicedToArray(_step21.value, 2),
                _attackedX = _step21$value[0],
                _attackedY = _step21$value[1];
              if (!isPieceUnderAttack && _attackedX === pieceI && _attackedY === pieceJ) isPieceUnderAttack = true;else if (!isTheTargetSquarePinListed && !_isRoyalUnderAttack && _attackedX === attackI && _attackedY === attackJ) isTheTargetSquarePinListed = true;
              if (!_isRoyalUnderAttack && _attackedX === royalI && _attackedY === royalJ) _isRoyalUnderAttack = true;
              if (isRoyalMove) {
                if (_isRoyalUnderAttack && _attackedX === attackI && _attackedY === attackJ) {
                  if (legalitySettings.canKingCapture && legalitySettings.canKingCapture > 0 && this.board[_attackedX][_attackedY].color + 1 === legalitySettings.canKingCapture) continue;
                  return false;
                }
              } else {
                if (isPieceUnderAttack && _isRoyalUnderAttack && !(0,_BoardInterface__WEBPACK_IMPORTED_MODULE_13__.compareCoordinates)(_attackingPiece2, moveData.endCoordinates) && !isTheTargetSquarePinListed) {
                  if (legalitySettings.canKingCapture && legalitySettings.canKingCapture > 0 && this.board[_attackedX][_attackedY].color + 1 === legalitySettings.canKingCapture) continue;
                  return false;
                }
              }
            }
          } catch (err) {
            _iterator21.e(err);
          } finally {
            _iterator21.f();
          }
        }
      } catch (err) {
        _iterator17.e(err);
      } finally {
        _iterator17.f();
      }
      if (attackers > 1) {
        return isRoyalMove ? targetSafety || Boolean(legalitySettings.canKingCapture) : Boolean(legalitySettings.canKingCapture);
      } else if (attackers === 1) {
        if (!isRoyalMove) {
          if (preGeneratedAttacks.hoppingPieces[royalI][royalJ] === 1) {
            var _iterator18 = _createForOfIteratorHelper(preGeneratedAttacks.hoppingPieceLines),
              _step18;
            try {
              for (_iterator18.s(); !(_step18 = _iterator18.n()).done;) {
                var _step18$value = _slicedToArray(_step18.value, 2),
                  attackingPiece = _step18$value[0],
                  attackCoordinates = _step18$value[1];
                if (attackCoordinates[0] === royalI && attackCoordinates[1] === royalJ && attackingPiece[0] === attackI && attackingPiece[1] === attackJ) {
                  return true;
                }
              }
            } catch (err) {
              _iterator18.e(err);
            } finally {
              _iterator18.f();
            }
            return Boolean(legalitySettings.canKingCapture);
          } else {
            var _iterator19 = _createForOfIteratorHelper(preGeneratedAttacks.slidingPiecesLines),
              _step19;
            try {
              for (_iterator19.s(); !(_step19 = _iterator19.n()).done;) {
                var _step19$value = _slicedToArray(_step19.value, 2),
                  _attackingPiece = _step19$value[0],
                  attackLine = _step19$value[1];
                var isRoyalUnderAttack = false,
                  isTheTargetSquareBlocked = false;
                var _iterator20 = _createForOfIteratorHelper(attackLine),
                  _step20;
                try {
                  for (_iterator20.s(); !(_step20 = _iterator20.n()).done;) {
                    var _step20$value = _slicedToArray(_step20.value, 2),
                      attackedX = _step20$value[0],
                      attackedY = _step20$value[1];
                    if (!isRoyalUnderAttack && attackedX === royalI && attackedY === royalJ) isRoyalUnderAttack = true;else if (!isTheTargetSquareBlocked && !isRoyalUnderAttack && attackedX === attackI && attackedY === attackJ) isTheTargetSquareBlocked = true;
                    if (isRoyalUnderAttack && !(0,_BoardInterface__WEBPACK_IMPORTED_MODULE_13__.compareCoordinates)(_attackingPiece, moveData.endCoordinates) && !isTheTargetSquareBlocked) {
                      if (legalitySettings.canKingCapture && legalitySettings.canKingCapture > 0 && this.board[attackedX][attackedY].color + 1 === legalitySettings.canKingCapture) continue;
                      return Boolean(legalitySettings.canKingCapture);
                    }
                  }
                } catch (err) {
                  _iterator20.e(err);
                } finally {
                  _iterator20.f();
                }
              }
            } catch (err) {
              _iterator19.e(err);
            } finally {
              _iterator19.f();
            }
            return true;
          }
        } else {
          return targetSafety || Boolean(legalitySettings.canKingCapture);
        }
      } else {
        return isRoyalMove ? targetSafety || Boolean(legalitySettings.canKingCapture) : true;
      }
    }
  }
  getCastlingMoves(parameters) {
    var i = parameters.i,
      j = parameters.j,
      baseColor = parameters.baseColor;
    var specialMoves = [];
    var royal = this.data.fenOptions.tag("royal")[baseColor];
    if (royal && royal[0] === i && royal[1] === j) {
      if (this.data.fenOptions.isKingsideCastlingAvailable(baseColor, this)) {
        specialMoves.push({
          startCoordinates: [i, j],
          endCoordinates: this.data.fenOptions.getKingsideCastlingEndCoordinate(baseColor),
          specialType: _MoveTree_MoveTreeInterface__WEBPACK_IMPORTED_MODULE_3__.SpecialMove.CastlingKingside
        });
      }
      if (this.data.fenOptions.isQueensideCastlingAvailable(baseColor, this)) {
        specialMoves.push({
          startCoordinates: [i, j],
          endCoordinates: this.data.fenOptions.getQueensideCastlingEndCoordinate(baseColor),
          specialType: _MoveTree_MoveTreeInterface__WEBPACK_IMPORTED_MODULE_3__.SpecialMove.CastlingQueenside
        });
      }
    }
    return specialMoves;
  }
  getEnPassantMoves(parameters) {
    var i = parameters.i,
      j = parameters.j,
      baseColor = parameters.baseColor,
      pieceLetter = parameters.pieceLetter;
    var specialMoves = [];
    if (_PieceControl_PieceControlInterface__WEBPACK_IMPORTED_MODULE_10__.pieceControlConfigSettings[pieceLetter].moveGenerationSettings.isPawn) {
      var enPassantCaptures = this.data.fenOptions.getAvailableEnPassantCaptures(baseColor);
      var pawnAttacks = this.controls[pieceLetter]().setBaseImmunePieces(this.gameType.getBaseColors(baseColor)).setBoard(this.board).setCoordinates(i, j).setColor(baseColor).constructPieceControl().rayGenJumpingAttacks();
      if (enPassantCaptures.length !== 0) {
        var _iterator22 = _createForOfIteratorHelper(pawnAttacks),
          _step22;
        try {
          for (_iterator22.s(); !(_step22 = _iterator22.n()).done;) {
            var attack = _step22.value;
            var _iterator23 = _createForOfIteratorHelper(enPassantCaptures),
              _step23;
            try {
              for (_iterator23.s(); !(_step23 = _iterator23.n()).done;) {
                var enP = _step23.value;
                if ((0,_BoardInterface__WEBPACK_IMPORTED_MODULE_13__.compareCoordinates)(attack.move, enP)) {
                  var snapshot = this.createSnapshot();
                  var move = [{
                    startCoordinates: [i, j],
                    endCoordinates: attack.move,
                    specialType: _MoveTree_MoveTreeInterface__WEBPACK_IMPORTED_MODULE_3__.SpecialMove.EnPassant,
                    isIrreversible: attack.irreversible
                  }];
                  this.makeMove(move, true);
                  this.pregenerateAttacks();
                  if (!this.isKingInCheck(baseColor)) specialMoves.push(move[0]);
                  this.loadSnapshot(snapshot);
                }
              }
            } catch (err) {
              _iterator23.e(err);
            } finally {
              _iterator23.f();
            }
          }
        } catch (err) {
          _iterator22.e(err);
        } finally {
          _iterator22.f();
        }
      }
    }
    return specialMoves;
  }
  getSpecialMoves(parameters) {
    return [...this.getCastlingMoves(parameters), ...this.getEnPassantMoves(parameters)];
  }
  getLegalMoves(i, j) {
    var _this$board$i;
    var baseColor = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : this.data.sideToMove;
    var isSeirawanDrop = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;
    var pieceString = (_this$board$i = this.board[i]) === null || _this$board$i === void 0 ? void 0 : _this$board$i[j],
      royal = this.data.fenOptions.tag("royal")[baseColor];
    if (pieceString.isPiece()) {
      var color = pieceString.color;
      if (color !== baseColor) return [];
      var pseudoLegalMoves = this.preGeneratedAttacks[color].pieceMovements.get((0,_BoardInterface__WEBPACK_IMPORTED_MODULE_13__.stringifyCoordinate)([i, j]));
      (0,_baseTypes__WEBPACK_IMPORTED_MODULE_0__.assertNonUndefined)(pseudoLegalMoves);
      var specialMoves = this.getSpecialMoves({
        i,
        j,
        baseColor,
        pieceLetter: pieceString.piece
      });
      return [...pseudoLegalMoves.map(generatedMove => {
        var moveData = {
          startCoordinates: [i, j],
          endCoordinates: generatedMove.move,
          isIrreversible: generatedMove.irreversible
        };
        if (generatedMove.move[2]) {
          moveData.promotion = generatedMove.move[2].split("").map(piece => (0,_GameInformation_GameUnits_PieceString__WEBPACK_IMPORTED_MODULE_7__.createPieceFromData)(color, piece));
        }
        return moveData;
      }).filter(m => {
        var capturedPieces = this.data.getCapturedPieces(m);
        var isKingCapture = royal && capturedPieces.find(c => royal[0] === c[0] && royal[1] === c[1]);
        return this.isTheMoveLegal(color, m, isSeirawanDrop) && !isKingCapture;
      }), ...specialMoves];
    } else {
      return [];
    }
  }

  // eslint-disable-next-line @typescript-eslint/no-unused-vars
  getDroppingMoves(_piece) {
    var _sideToMove = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.data.sideToMove;
    return [];
  }
  getAllowedInternalMoves() {
    var sideToMove = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.data.sideToMove;
    var currentMoves = [_MoveTree_MoveTreeInterface__WEBPACK_IMPORTED_MODULE_3__.InternalMoveSignature.DrawByAgreement];
    var currentSnapshot = this.createSnapshot();
    this.makeMove([{
      type: _MoveTree_MoveTreeInterface__WEBPACK_IMPORTED_MODULE_3__.InternalMoveSignature.Resign
    }], true);
    var maximum = Math.max(...this.data.points);
    var pointIndexes = this.data.points.reduce((p, n, i) => n === maximum ? [...p, i] : p, []);
    this.loadSnapshot(currentSnapshot);
    if (pointIndexes.length === 1 && pointIndexes[0] === sideToMove) {
      currentMoves.push(_MoveTree_MoveTreeInterface__WEBPACK_IMPORTED_MODULE_3__.InternalMoveSignature.ClaimWin);
    } else {
      currentMoves.push(_MoveTree_MoveTreeInterface__WEBPACK_IMPORTED_MODULE_3__.InternalMoveSignature.Resign, _MoveTree_MoveTreeInterface__WEBPACK_IMPORTED_MODULE_3__.InternalMoveSignature.Timeout);
    }
    return currentMoves.map(type => ({
      type
    }));
  }

  /*---------------------------------------- API ----------------------------------------------*/
}

/***/ }),

/***/ "./src/main/client/ts/logic/movegen/Board/BoardInterface.ts":
/*!******************************************************************!*\
  !*** ./src/main/client/ts/logic/movegen/Board/BoardInterface.ts ***!
  \******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "DisplaySettings": () => (/* binding */ DisplaySettings),
/* harmony export */   "compareCoordinates": () => (/* binding */ compareCoordinates),
/* harmony export */   "createBasePreGeneratedAttacks": () => (/* binding */ createBasePreGeneratedAttacks),
/* harmony export */   "createComplexMoveLegalityTracker": () => (/* binding */ createComplexMoveLegalityTracker),
/* harmony export */   "createGameTypeSettings": () => (/* binding */ createGameTypeSettings),
/* harmony export */   "stringifyCoordinate": () => (/* binding */ stringifyCoordinate),
/* harmony export */   "unstringifyCoordinate": () => (/* binding */ unstringifyCoordinate)
/* harmony export */ });
/* harmony import */ var _baseTypes__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../baseTypes */ "./src/main/client/ts/baseTypes.ts");
/* harmony import */ var _BaseInterfaces__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../BaseInterfaces */ "./src/main/client/ts/logic/BaseInterfaces.ts");
/* harmony import */ var _GameInformation_GameData__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../GameInformation/GameData */ "./src/main/client/ts/logic/movegen/GameInformation/GameData.ts");
/* harmony import */ var _GameInformation_GameUnits_GameUnits__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../GameInformation/GameUnits/GameUnits */ "./src/main/client/ts/logic/movegen/GameInformation/GameUnits/GameUnits.ts");




var DisplaySettings = {
  Highlighted: 0,
  Fogged: 1,
  Ghosted: 2,
  Blindfolded: 3,
  PieceFacesCenter: 4
};
var baseTeams = [true, false, true, false];
var stringifyCoordinate = coordinate => "".concat(coordinate[0], ":").concat(coordinate[1]);
var unstringifyCoordinate = coordinate => {
  var result = coordinate.split(":").map(v => Number(v));
  if ((0,_baseTypes__WEBPACK_IMPORTED_MODULE_0__.verifyTupleType)(result, 2) && result.every(n => !Number.isNaN(n))) {
    return result;
  } else throw new Error("Unexpected stringified coordinate: ".concat(coordinate));
};
var createGameTypeSettings = () => ({
  type: _GameInformation_GameData__WEBPACK_IMPORTED_MODULE_2__.VariantType.FFA,
  teamSettings: {
    firstTeamColors: baseTeams.map(e => e),
    secondTeamColors: baseTeams.map(e => !e)
  },
  getBaseColors(color) {
    if (this.isFFA()) {
      return (0,_baseTypes__WEBPACK_IMPORTED_MODULE_0__.createTupleFromCallback)((_, i) => i === color, _GameInformation_GameData__WEBPACK_IMPORTED_MODULE_2__.totalPlayers);
    } else {
      return this.teamSettings.firstTeamColors[color] ? this.teamSettings.firstTeamColors : this.teamSettings.secondTeamColors;
    }
  },
  isFFA() {
    return this.type === _GameInformation_GameData__WEBPACK_IMPORTED_MODULE_2__.VariantType.FFA || this.type === _GameInformation_GameData__WEBPACK_IMPORTED_MODULE_2__.VariantType.Solo;
  },
  isSameTeam(colorA, colorB) {
    if (colorA === colorB) return true;
    if (this.isFFA()) {
      return false;
    } else {
      return this.teamSettings.firstTeamColors[colorA] ? this.teamSettings.firstTeamColors[colorA] && this.teamSettings.firstTeamColors[colorA] : this.teamSettings.secondTeamColors[colorA] && this.teamSettings.secondTeamColors[colorB];
    }
  },
  getTeammateColor(color) {
    if (this.isFFA()) return color;
    var teammateIndex = this.teamSettings.firstTeamColors[color] ? this.teamSettings.firstTeamColors.map((b, i) => b && i !== color).indexOf(true) : this.teamSettings.secondTeamColors.map((b, i) => b && i !== color).indexOf(true);
    return (0,_GameInformation_GameUnits_GameUnits__WEBPACK_IMPORTED_MODULE_3__.verifyNumericColor)(teammateIndex) ? teammateIndex : color;
  }
});
var createComplexMoveLegalityTracker = () => ({
  hasComplexPieces: false,
  hasComplexRules: false
});
var createBasePreGeneratedAttacks = () => {
  return {
    hoppingPieces: (0,_BaseInterfaces__WEBPACK_IMPORTED_MODULE_1__.initializeBoardSquares)(() => 0),
    slidingPieces: (0,_BaseInterfaces__WEBPACK_IMPORTED_MODULE_1__.initializeBoardSquares)(() => 0),
    hoppingPieceLines: [],
    slidingPiecesLines: [],
    slidingPiecesRayTracing: [],
    attackingColors: (0,_BaseInterfaces__WEBPACK_IMPORTED_MODULE_1__.initializeBoardSquares)(() => 0),
    pieceMovements: new Map(),
    pieceDrops: {
      pawn: [],
      piece: []
    },
    variantRuleCache: {}
  };
};
var compareCoordinates = (coordinate1, coordinate2) => coordinate1[0] === coordinate2[0] && coordinate1[1] === coordinate2[1];

/***/ }),

/***/ "./src/main/client/ts/logic/movegen/Board/BoardMoveValidator.ts":
/*!**********************************************************************!*\
  !*** ./src/main/client/ts/logic/movegen/Board/BoardMoveValidator.ts ***!
  \**********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "validateBoardMove": () => (/* binding */ validateBoardMove)
/* harmony export */ });
/* harmony import */ var _MoveTree_MoveTreeInterface__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../MoveTree/MoveTreeInterface */ "./src/main/client/ts/logic/movegen/MoveTree/MoveTreeInterface.ts");
function _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }
function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }
function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }

function validateBoardMove(board, move) {
  var startingMoves;
  var firstMove = move[0];
  if ((0,_MoveTree_MoveTreeInterface__WEBPACK_IMPORTED_MODULE_0__.verifyStandardMove)(firstMove)) {
    startingMoves = board.getLegalMoves(firstMove.startCoordinates[0], firstMove.startCoordinates[1]);
  } else if ((0,_MoveTree_MoveTreeInterface__WEBPACK_IMPORTED_MODULE_0__.verifyDroppingMove)(firstMove)) {
    startingMoves = board.getDroppingMoves(firstMove.piece);
  } else if ((0,_MoveTree_MoveTreeInterface__WEBPACK_IMPORTED_MODULE_0__.verifyInternalMove)(firstMove)) {
    startingMoves = board.getAllowedInternalMoves();
  } else throw new Error("Unexpected move signature encountered: ".concat(JSON.stringify(move)));
  var specialMoveSettings = {
    hasEnPassant: false
  };
  if (board.variantData.duckChess && move.length === 1) return false;
  var _iterator = _createForOfIteratorHelper(move),
    _step;
  try {
    var _loop = function _loop() {
      var moveComponent = _step.value;
      var move = startingMoves.find(legalMove => (0,_MoveTree_MoveTreeInterface__WEBPACK_IMPORTED_MODULE_0__.compareMoves)(legalMove, moveComponent));
      if (!move) return {
        v: false
      };
      if ((0,_MoveTree_MoveTreeInterface__WEBPACK_IMPORTED_MODULE_0__.verifyStandardMove)(move) && move.specialType === _MoveTree_MoveTreeInterface__WEBPACK_IMPORTED_MODULE_0__.SpecialMove.EnPassant) {
        specialMoveSettings.hasEnPassant = true;
      }
      if (move.nextChainedMoves) {
        startingMoves = move.nextChainedMoves;
      }
    };
    for (_iterator.s(); !(_step = _iterator.n()).done;) {
      var _ret = _loop();
      if (typeof _ret === "object") return _ret.v;
    }
  } catch (err) {
    _iterator.e(err);
  } finally {
    _iterator.f();
  }
  return specialMoveSettings;
}

/***/ }),

/***/ "./src/main/client/ts/logic/movegen/FENData/FENData.ts":
/*!*************************************************************!*\
  !*** ./src/main/client/ts/logic/movegen/FENData/FENData.ts ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "FENData": () => (/* binding */ FENData),
/* harmony export */   "FENOptions": () => (/* reexport safe */ _FENOptions_FENOptions__WEBPACK_IMPORTED_MODULE_9__.FENOptions)
/* harmony export */ });
/* harmony import */ var _BaseInterfaces__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../BaseInterfaces */ "./src/main/client/ts/logic/BaseInterfaces.ts");
/* harmony import */ var _FENDataInterface__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./FENDataInterface */ "./src/main/client/ts/logic/movegen/FENData/FENDataInterface.ts");
/* harmony import */ var _MoveTree_MoveTreeInterface__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../MoveTree/MoveTreeInterface */ "./src/main/client/ts/logic/movegen/MoveTree/MoveTreeInterface.ts");
/* harmony import */ var _baseTypes__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../baseTypes */ "./src/main/client/ts/baseTypes.ts");
/* harmony import */ var _GameInformation_GameData__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../GameInformation/GameData */ "./src/main/client/ts/logic/movegen/GameInformation/GameData.ts");
/* harmony import */ var _GameInformation_GameUnits_PieceString__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../GameInformation/GameUnits/PieceString */ "./src/main/client/ts/logic/movegen/GameInformation/GameUnits/PieceString.ts");
/* harmony import */ var _moveGeneration_PieceControl_PieceControlInterface__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @moveGeneration/PieceControl/PieceControlInterface */ "./src/main/client/ts/logic/movegen/PieceControl/PieceControlInterface.ts");
/* harmony import */ var _Board_BoardInterface__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../Board/BoardInterface */ "./src/main/client/ts/logic/movegen/Board/BoardInterface.ts");
/* harmony import */ var _GameInformation_GameUnits_GameUnits__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../GameInformation/GameUnits/GameUnits */ "./src/main/client/ts/logic/movegen/GameInformation/GameUnits/GameUnits.ts");
/* harmony import */ var _FENOptions_FENOptions__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./FENOptions/FENOptions */ "./src/main/client/ts/logic/movegen/FENData/FENOptions/FENOptions.ts");
function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }
function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }
function _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e2) { throw _e2; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e3) { didErr = true; err = _e3; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }
function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }
function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }
function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }
function _iterableToArrayLimit(arr, i) { var _i = null == arr ? null : "undefined" != typeof Symbol && arr[Symbol.iterator] || arr["@@iterator"]; if (null != _i) { var _s, _e, _x, _r, _arr = [], _n = !0, _d = !1; try { if (_x = (_i = _i.call(arr)).next, 0 === i) { if (Object(_i) !== _i) return; _n = !1; } else for (; !(_n = (_s = _x.call(_i)).done) && (_arr.push(_s.value), _arr.length !== i); _n = !0); } catch (err) { _d = !0, _e = err; } finally { try { if (!_n && null != _i.return && (_r = _i.return(), Object(_r) !== _r)) return; } finally { if (_d) throw _e; } } return _arr; } }
function _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }
function _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }
function _toPropertyKey(arg) { var key = _toPrimitive(arg, "string"); return typeof key === "symbol" ? key : String(key); }
function _toPrimitive(input, hint) { if (typeof input !== "object" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || "default"); if (typeof res !== "object") return res; throw new TypeError("@@toPrimitive must return a primitive value."); } return (hint === "string" ? String : Number)(input); }










var defaultPointsForMate = 20;
class FENData {
  initDecoratorSettings() {
    /* no-op */
  }
  constructor() {
    _defineProperty(this, "points", void 0);
    _defineProperty(this, "sideToMove", void 0);
    _defineProperty(this, "fenOptions", void 0);
    _defineProperty(this, "plyCount", void 0);
    _defineProperty(this, "board", void 0);
    _defineProperty(this, "privateGameOver", false);
    _defineProperty(this, "__baseClass", void 0);
    this.points = [0, 0, 0, 0];
    this.sideToMove = 0;
    this.fenOptions = new _FENOptions_FENOptions__WEBPACK_IMPORTED_MODULE_9__.FENOptions();
    this.plyCount = 0;
    this.__baseClass = this;
  }
  get gameOver() {
    return this.privateGameOver;
  }
  set gameOver(gameOver) {
    if (gameOver === false || this.privateGameOver === false) {
      this.privateGameOver = gameOver;
    }
  }
  injectBoard(board) {
    this.board = board;
    this.fenOptions.generateCastling(board);
  }
  createClone() {
    var newFENData = new FENData();
    newFENData.fenOptions = this.fenOptions.createClone();
    newFENData.points = [...this.points];
    newFENData.sideToMove = this.sideToMove;
    newFENData.plyCount = this.plyCount;
    return newFENData;
  }
  createSnapshot() {
    return {
      points: [...this.points],
      sideToMove: this.sideToMove,
      fenOptionsSnapshot: this.fenOptions.createSnapshot(),
      plyCount: this.plyCount,
      gameOver: this.gameOver
    };
  }
  loadSnapshot(snapshot) {
    this.fenOptions.loadSnapshot(snapshot.fenOptionsSnapshot);
    this.points = [...snapshot.points];
    this.sideToMove = snapshot.sideToMove;
    this.plyCount = snapshot.plyCount;
    this.privateGameOver = snapshot.gameOver;
  }
  getCapturedPieces(moveData) {
    var pieceString = this.board.board[moveData.endCoordinates[0]][moveData.endCoordinates[1]];
    return pieceString.isEmpty() || pieceString.isDead() ? [] : [[...moveData.endCoordinates]];
  }
  getCastlingPieceEndCoordinates(coordinates, color) {
    return [(0,_BaseInterfaces__WEBPACK_IMPORTED_MODULE_0__.isVerticalPlacement)(color) ? [coordinates[0], this.fenOptions.getKingsideCastlingTandemPiece(color)] : [this.fenOptions.getKingsideCastlingTandemPiece(color), coordinates[1]], (0,_BaseInterfaces__WEBPACK_IMPORTED_MODULE_0__.isVerticalPlacement)(color) ? [coordinates[0], this.fenOptions.getQueensideCastlingTandemPiece(color)] : [this.fenOptions.getQueensideCastlingTandemPiece(color), coordinates[1]]];
  }
  processStandardMove(moveData) {
    var _promotion$;
    var _moveData$startCoordi = _slicedToArray(moveData.startCoordinates, 2),
      startI = _moveData$startCoordi[0],
      startJ = _moveData$startCoordi[1],
      _moveData$endCoordina = _slicedToArray(moveData.endCoordinates, 2),
      endI = _moveData$endCoordina[0],
      endJ = _moveData$endCoordina[1],
      promotion = moveData.promotion;
    var endPiece = this.board.board[endI][endJ];
    var piece = (_promotion$ = promotion === null || promotion === void 0 ? void 0 : promotion[0]) !== null && _promotion$ !== void 0 ? _promotion$ : this.board.board[startI][startJ];
    var capturedPieces = this.getCapturedPieces(moveData);
    this.board.board[endI][endJ] = piece;
    this.board.board[startI][startJ] = _GameInformation_GameUnits_PieceString__WEBPACK_IMPORTED_MODULE_5__.emptyPieceString;
    var _iterator = _createForOfIteratorHelper(capturedPieces),
      _step;
    try {
      for (_iterator.s(); !(_step = _iterator.n()).done;) {
        var coordinate = _step.value;
        if ((0,_Board_BoardInterface__WEBPACK_IMPORTED_MODULE_7__.compareCoordinates)(coordinate, moveData.startCoordinates)) {
          this.board.board[endI][endJ] = _GameInformation_GameUnits_PieceString__WEBPACK_IMPORTED_MODULE_5__.emptyPieceString;
        } else if (!(0,_Board_BoardInterface__WEBPACK_IMPORTED_MODULE_7__.compareCoordinates)(coordinate, moveData.endCoordinates)) {
          this.board.board[coordinate[0]][coordinate[1]] = _GameInformation_GameUnits_PieceString__WEBPACK_IMPORTED_MODULE_5__.emptyPieceString;
        }
      }
    } catch (err) {
      _iterator.e(err);
    } finally {
      _iterator.f();
    }
    var _this$getCastlingPiec = this.getCastlingPieceEndCoordinates(moveData.startCoordinates, this.sideToMove),
      _this$getCastlingPiec2 = _slicedToArray(_this$getCastlingPiec, 2),
      kingsidePiece = _this$getCastlingPiec2[0],
      queensidePiece = _this$getCastlingPiec2[1];
    if ("specialType" in moveData) {
      var type = moveData.specialType;
      switch (type) {
        case _MoveTree_MoveTreeInterface__WEBPACK_IMPORTED_MODULE_2__.SpecialMove.CastlingKingside:
          {
            var secondKPiece = (0,_BaseInterfaces__WEBPACK_IMPORTED_MODULE_0__.isVerticalPlacement)(this.sideToMove) ? this.board.board[startI][this.fenOptions.getKingsideCastlingTandemPiece(this.sideToMove)] : this.board.board[this.fenOptions.getKingsideCastlingTandemPiece(this.sideToMove)][startJ];
            var _this$fenOptions$getK = this.fenOptions.getKingsideCastlingPieceEndCoordinate(this.sideToMove),
              _this$fenOptions$getK2 = _slicedToArray(_this$fenOptions$getK, 2),
              kI = _this$fenOptions$getK2[0],
              kJ = _this$fenOptions$getK2[1];
            this.board.board[kI][kJ] = secondKPiece;
            this.board.board[kingsidePiece[0]][kingsidePiece[1]] = _GameInformation_GameUnits_PieceString__WEBPACK_IMPORTED_MODULE_5__.emptyPieceString;
            break;
          }
        case _MoveTree_MoveTreeInterface__WEBPACK_IMPORTED_MODULE_2__.SpecialMove.CastlingQueenside:
          {
            var secondQPiece = (0,_BaseInterfaces__WEBPACK_IMPORTED_MODULE_0__.isVerticalPlacement)(this.sideToMove) ? this.board.board[startI][this.fenOptions.getQueensideCastlingTandemPiece(this.sideToMove)] : this.board.board[this.fenOptions.getQueensideCastlingTandemPiece(this.sideToMove)][startJ];
            var _this$fenOptions$getQ = this.fenOptions.getQueensideCastlingPieceEndCoordinate(this.sideToMove),
              _this$fenOptions$getQ2 = _slicedToArray(_this$fenOptions$getQ, 2),
              qI = _this$fenOptions$getQ2[0],
              qJ = _this$fenOptions$getQ2[1];
            this.board.board[qI][qJ] = secondQPiece;
            this.board.board[queensidePiece[0]][queensidePiece[1]] = _GameInformation_GameUnits_PieceString__WEBPACK_IMPORTED_MODULE_5__.emptyPieceString;
            break;
          }
        default:
          if (type === undefined || !(type in _MoveTree_MoveTreeInterface__WEBPACK_IMPORTED_MODULE_2__.SpecialMove)) {
            console.error("Unknown special move constant: ".concat(String(type)));
          }
      }
    }
    var castleKingside = this.fenOptions.tag("castleKingside"),
      castleQueenside = this.fenOptions.tag("castleQueenside"),
      royal = this.fenOptions.tag("royal");
    this.fenOptions.setTag("royal", this.fenOptions.tag("royal").map((r, i) => {
      if (r) {
        if (r[0] === startI && r[1] === startJ) {
          castleKingside[i] = false;
          castleQueenside[i] = false;
          return [endI, endJ];
        } else return [...r];
      } else return null;
    }));
    var _iterator2 = _createForOfIteratorHelper(_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_4__.colors),
      _step2;
    try {
      for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
        var color = _step2.value;
        var royalPiece = royal[color];
        if (!royalPiece) continue;
        if ((0,_Board_BoardInterface__WEBPACK_IMPORTED_MODULE_7__.compareCoordinates)(royalPiece, moveData.startCoordinates)) {
          castleKingside[color] = false;
          castleQueenside[color] = false;
          break;
        } else if ((0,_Board_BoardInterface__WEBPACK_IMPORTED_MODULE_7__.compareCoordinates)(kingsidePiece, moveData.startCoordinates)) {
          castleKingside[color] = false;
          break;
        } else if ((0,_Board_BoardInterface__WEBPACK_IMPORTED_MODULE_7__.compareCoordinates)(queensidePiece, moveData.startCoordinates)) {
          castleQueenside[color] = false;
          break;
        }
      }
    } catch (err) {
      _iterator2.e(err);
    } finally {
      _iterator2.f();
    }
    return {
      endPiece: endPiece.isEmpty() ? [] : [endPiece]
    };
  }
  spreadPointsBetweenPlayersEvenly() {
    var resigned = this.fenOptions.tag("resigned"),
      dead = this.fenOptions.tag("dead");
    var realPlayers = resigned.reduce((p, n, i) => p + Number(n || dead[i]), 0);
    var individualPoints = Math.ceil(this.obtainPointsForMate() / realPlayers);
    var _iterator3 = _createForOfIteratorHelper(_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_4__.colors),
      _step3;
    try {
      for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {
        var color = _step3.value;
        if (!dead[color]) {
          this.assignPoints(color, individualPoints);
        }
      }
    } catch (err) {
      _iterator3.e(err);
    } finally {
      _iterator3.f();
    }
  }
  branchBetweenResignationMoves(move, sideToMove) {
    var playerName = (0,_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_4__.getPlayerNameFromColor)(sideToMove).toUpperCase();
    switch (move) {
      case _MoveTree_MoveTreeInterface__WEBPACK_IMPORTED_MODULE_2__.InternalMoveSignature.Resign:
        this.gameOver = "".concat(playerName, " RESIGNED!");
        break;
      case _MoveTree_MoveTreeInterface__WEBPACK_IMPORTED_MODULE_2__.InternalMoveSignature.Timeout:
        this.gameOver = "".concat(playerName, " FORFEITS ON TIME!");
        break;
      case _MoveTree_MoveTreeInterface__WEBPACK_IMPORTED_MODULE_2__.InternalMoveSignature.ClaimWin:
        this.gameOver = "".concat(playerName, " CLAIMED THE WIN!");
        break;
      default:
        (0,_baseTypes__WEBPACK_IMPORTED_MODULE_3__.throwOnNever)(move);
    }
  }
  processInternalMove(internalMove) {
    var _this$board$insuffici;
    var resigned = this.fenOptions.tag("resigned"),
      dead = this.fenOptions.tag("dead");
    var stalemates = (0,_baseTypes__WEBPACK_IMPORTED_MODULE_3__.createTuple)(false, _GameInformation_GameData__WEBPACK_IMPORTED_MODULE_4__.totalPlayers);
    var insufficientMaterial = (_this$board$insuffici = this.board.insufficientMaterialChecker) === null || _this$board$insuffici === void 0 ? void 0 : _this$board$insuffici.checkCurrentState(this.board).every((b, i) => {
      if (i === this.sideToMove) {
        return b;
      } else {
        return b || dead[i];
      }
    });
    switch (internalMove.type) {
      case _MoveTree_MoveTreeInterface__WEBPACK_IMPORTED_MODULE_2__.InternalMoveSignature.Stalemate:
        dead[this.sideToMove] = true;
        stalemates[this.sideToMove] = true;
        break;
      case _MoveTree_MoveTreeInterface__WEBPACK_IMPORTED_MODULE_2__.InternalMoveSignature.Resign:
      case _MoveTree_MoveTreeInterface__WEBPACK_IMPORTED_MODULE_2__.InternalMoveSignature.Timeout:
        if (insufficientMaterial) {
          this.assignGeneralTermination("Timeout vs Insufficient Material");
        }
      // * Fallthrough
      case _MoveTree_MoveTreeInterface__WEBPACK_IMPORTED_MODULE_2__.InternalMoveSignature.ClaimWin:
        {
          resigned[this.sideToMove] = true;
          this.turnPiecesDead(this.sideToMove, _objectSpread(_objectSpread({}, (0,_FENDataInterface__WEBPACK_IMPORTED_MODULE_1__.createDefaultArmyDeathSettings)()), {}, {
            excludeRoyals: true,
            doNotSetDead: true
          }));
          var deadPlayers = dead.map((d, i) => d || resigned[i]).filter(Boolean);
          var isResignationOver = deadPlayers.length === _GameInformation_GameData__WEBPACK_IMPORTED_MODULE_4__.totalPlayers - 1;
          if (insufficientMaterial) {
            this.spreadPointsBetweenPlayersEvenly();
          } else if (deadPlayers.length === _GameInformation_GameData__WEBPACK_IMPORTED_MODULE_4__.totalPlayers - 1) {
            var alivePlayer = deadPlayers.findIndex(d => !d);
            if ((0,_GameInformation_GameUnits_GameUnits__WEBPACK_IMPORTED_MODULE_8__.verifyNumericColor)(alivePlayer)) {
              this.assignPoints(alivePlayer, this.countTotalPointsOnBoard().reduce((p, n, i) => p + (i === alivePlayer ? n : 0), 0));
              isResignationOver = true;
            }
          } else if (!this.board.gameType.isFFA()) {
            isResignationOver = true;
          }
          if (isResignationOver) {
            this.branchBetweenResignationMoves(internalMove.type, this.sideToMove);
          }
          break;
        }
      case _MoveTree_MoveTreeInterface__WEBPACK_IMPORTED_MODULE_2__.InternalMoveSignature.DrawByAgreement:
        this.gameOver = "½-½ AGREED.";
        break;
      case _MoveTree_MoveTreeInterface__WEBPACK_IMPORTED_MODULE_2__.InternalMoveSignature.Pass:
        break;
      case _MoveTree_MoveTreeInterface__WEBPACK_IMPORTED_MODULE_2__.InternalMoveSignature.TeamsCheckmate:
        {
          this.gameOver = "CHECKMATE \u2022 ".concat(this.getCurrentResult());
          this.turnPiecesDead(this.sideToMove);
          this.turnPiecesDead(this.board.gameType.getTeammateColor(this.sideToMove));
          break;
        }
      default:
        (0,_baseTypes__WEBPACK_IMPORTED_MODULE_3__.throwOnNever)(internalMove.type);
    }
    return {
      stalemates
    };
  }
  processDroppingMove(move) {
    var bank = this.fenOptions.tag("bank"),
      areBanksEnabled = this.fenOptions.tag("areBanksEnabled"),
      setupComplete = this.fenOptions.tag("setupComplete");
    if (!this.board.variantData.duckChess && !areBanksEnabled[this.sideToMove]) return;
    var playerBank = bank[this.sideToMove];
    var pieceStringReference = [...playerBank.keys()].find(pieceString => pieceString.piece === move.piece.piece);
    if (!pieceStringReference && !this.board.variantData.duckChess && move.piece.piece !== _GameInformation_GameUnits_GameUnits__WEBPACK_IMPORTED_MODULE_8__.nonPlayablePieces.duck) return;
    var safeReference = pieceStringReference !== null && pieceStringReference !== void 0 ? pieceStringReference : move.piece;
    this.board.board[move.endCoordinates[0]][move.endCoordinates[1]] = move.piece;
    if (!setupComplete[this.sideToMove]) return;
    var bankPieceCount = playerBank.get(safeReference);
    if (bankPieceCount == 1) {
      playerBank.delete(safeReference);
    } else if (bankPieceCount) {
      playerBank.set(safeReference, bankPieceCount - 1);
    }
  }
  turnPiecesDead(color) {
    var settings = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : (0,_FENDataInterface__WEBPACK_IMPORTED_MODULE_1__.createDefaultArmyDeathSettings)();
    var royal = this.fenOptions.tag("royal"),
      dead = this.fenOptions.tag("dead");
    var royalPiece = royal[color];
    if (!settings.doNotSetDead) {
      dead[color] = true;
      royal[color] = null;
    }
    var _iterator4 = _createForOfIteratorHelper(this.board.getPlayerPieces()[color]),
      _step4;
    try {
      for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {
        var coordinate = _step4.value;
        if (settings.excludeRoyals && royalPiece && (0,_Board_BoardInterface__WEBPACK_IMPORTED_MODULE_7__.compareCoordinates)(coordinate, royalPiece)) continue;
        var piece = this.board.board[coordinate[0]][coordinate[1]].piece;
        if (settings.onlyPawns && !_moveGeneration_PieceControl_PieceControlInterface__WEBPACK_IMPORTED_MODULE_6__.pieceControlConfigSettings[piece].moveGenerationSettings.isPawn) continue;
        this.board.board[coordinate[0]][coordinate[1]] = (0,_GameInformation_GameUnits_PieceString__WEBPACK_IMPORTED_MODULE_5__.createPieceFromData)(_GameInformation_GameUnits_PieceString__WEBPACK_IMPORTED_MODULE_5__.deadColorIndex, this.board.board[coordinate[0]][coordinate[1]].piece);
      }
    } catch (err) {
      _iterator4.e(err);
    } finally {
      _iterator4.f();
    }
  }
  getKingCaptures() {
    var kingCaptures = (0,_baseTypes__WEBPACK_IMPORTED_MODULE_3__.createTuple)(false, _GameInformation_GameData__WEBPACK_IMPORTED_MODULE_4__.totalPlayers);
    var _iterator5 = _createForOfIteratorHelper(_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_4__.colors),
      _step5;
    try {
      for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {
        var color = _step5.value;
        var royalCoordinate = this.fenOptions.tag("royal")[color];
        if (!royalCoordinate) continue;
        var pieceString = this.board.board[royalCoordinate[0]][royalCoordinate[1]];
        if (pieceString.isEmpty() || pieceString.color !== color) {
          kingCaptures[color] = true;
        }
      }
    } catch (err) {
      _iterator5.e(err);
    } finally {
      _iterator5.f();
    }
    return kingCaptures;
  }
  processPointsForChecks(currentChecks) {
    var sideToMove = this.sideToMove;
    var updatedChecks = this.board.getCurrentChecks(),
      playerChecks = (0,_baseTypes__WEBPACK_IMPORTED_MODULE_3__.createTuple)(false, _GameInformation_GameData__WEBPACK_IMPORTED_MODULE_4__.totalPlayers);
    var _iterator6 = _createForOfIteratorHelper(_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_4__.colors),
      _step6;
    try {
      for (_iterator6.s(); !(_step6 = _iterator6.n()).done;) {
        var color = _step6.value;
        var _iterator7 = _createForOfIteratorHelper(updatedChecks[color]),
          _step7;
        try {
          for (_iterator7.s(); !(_step7 = _iterator7.n()).done;) {
            var coordinate = _step7.value;
            if (!currentChecks[color].has(coordinate)) {
              playerChecks[color] = true;
              break;
            }
          }
        } catch (err) {
          _iterator7.e(err);
        } finally {
          _iterator7.f();
        }
      }
    } catch (err) {
      _iterator6.e(err);
    } finally {
      _iterator6.f();
    }
    var checkedPlayers = playerChecks.filter(Boolean).length;
    if (checkedPlayers === 2) {
      this.assignPoints(sideToMove, 1);
    } else if (checkedPlayers === 3) {
      this.assignPoints(sideToMove, 5);
    }
  }
  affectOptions(move) {
    var settings = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : (0,_FENDataInterface__WEBPACK_IMPORTED_MODULE_1__.createDefaultFENEffectSettings)();
    var moveStalemates;
    var endSquare;
    var currentChecks = this.board.getCurrentChecks().map(arr => new Set(arr));
    if ((0,_MoveTree_MoveTreeInterface__WEBPACK_IMPORTED_MODULE_2__.verifyInternalMove)(move)) {
      moveStalemates = this.processInternalMove(move).stalemates;
    } else if ((0,_MoveTree_MoveTreeInterface__WEBPACK_IMPORTED_MODULE_2__.verifyStandardMove)(move)) {
      endSquare = this.processStandardMove(move).endPiece;
    } else if ((0,_MoveTree_MoveTreeInterface__WEBPACK_IMPORTED_MODULE_2__.verifyDroppingMove)(move)) {
      this.processDroppingMove(move);
    }
    if (!settings.ignoreCheckmateChecks) this.board.pregenerateAttacks();
    var _ref = settings.ignoreCheckmateChecks ? {
        checkmates: (0,_baseTypes__WEBPACK_IMPORTED_MODULE_3__.createTuple)(false, _GameInformation_GameData__WEBPACK_IMPORTED_MODULE_4__.totalPlayers),
        checks: (0,_baseTypes__WEBPACK_IMPORTED_MODULE_3__.createTuple)(false, _GameInformation_GameData__WEBPACK_IMPORTED_MODULE_4__.totalPlayers),
        stalemates: (0,_baseTypes__WEBPACK_IMPORTED_MODULE_3__.createTuple)(false, _GameInformation_GameData__WEBPACK_IMPORTED_MODULE_4__.totalPlayers)
      } : this.board.getCheckmatesAndStalemates(),
      checkmates = _ref.checkmates,
      stalemates = _ref.stalemates,
      checks = _ref.checks;
    if (moveStalemates) {
      for (var i = 0; i < _GameInformation_GameData__WEBPACK_IMPORTED_MODULE_4__.totalPlayers; i++) {
        if (moveStalemates[i]) {
          stalemates[i] = true;
        }
      }
    }
    var totalMateSum = checkmates.reduce((p, n) => n ? p + this.obtainPointsForMate() : p, 0);
    var boardAlternations = {
      pointDistribution: {
        checkmatePoints: checkmates.map((_, i) => i === this.sideToMove ? totalMateSum : 0),
        pieceCapturingPoints: (0,_baseTypes__WEBPACK_IMPORTED_MODULE_3__.createTuple)(0, _GameInformation_GameData__WEBPACK_IMPORTED_MODULE_4__.totalPlayers)
      }
    };
    if (endSquare) {
      var _iterator8 = _createForOfIteratorHelper(endSquare),
        _step8;
      try {
        for (_iterator8.s(); !(_step8 = _iterator8.n()).done;) {
          var piece = _step8.value;
          boardAlternations.pointDistribution.pieceCapturingPoints[this.sideToMove] = this.getPointsForPiece(piece);
        }
      } catch (err) {
        _iterator8.e(err);
      } finally {
        _iterator8.f();
      }
    }
    var kingCaptures = this.getKingCaptures();
    var dead = this.fenOptions.tag("dead"),
      resigned = this.fenOptions.tag("resigned");
    if (this.board.gameType.isFFA()) {
      var _iterator9 = _createForOfIteratorHelper(_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_4__.colors),
        _step9;
      try {
        for (_iterator9.s(); !(_step9 = _iterator9.n()).done;) {
          var color = _step9.value;
          if (dead[color] || resigned[color]) {
            continue;
          }
          if (checkmates[color] || color === this.sideToMove && stalemates[color]) {
            this.turnPiecesDead(color);
            continue;
          }
          this.assignPoints(color, boardAlternations.pointDistribution.checkmatePoints[color] + boardAlternations.pointDistribution.pieceCapturingPoints[color]);
        }
      } catch (err) {
        _iterator9.e(err);
      } finally {
        _iterator9.f();
      }
    } else {
      var _iterator10 = _createForOfIteratorHelper(_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_4__.colors),
        _step10;
      try {
        for (_iterator10.s(); !(_step10 = _iterator10.n()).done;) {
          var _color = _step10.value;
          if (kingCaptures[_color]) {
            this.turnPiecesDead(_color);
            this.assignGeneralTermination("King Captured");
          }
        }
      } catch (err) {
        _iterator10.e(err);
      } finally {
        _iterator10.f();
      }
    }
    var realPlayers = this.getRealPlayers();
    var isOver = this.board.gameType.isFFA() ? realPlayers === 1 : realPlayers !== _GameInformation_GameData__WEBPACK_IMPORTED_MODULE_4__.totalPlayers;
    if (isOver) this.assignGeneralTermination("Checkmate");
    if (!settings.ignoreNextTurn && !isOver) {
      var _this$board$insuffici2;
      this.processPointsForChecks(currentChecks);
      var insufficientPieces = (_this$board$insuffici2 = this.board.insufficientMaterialChecker) === null || _this$board$insuffici2 === void 0 ? void 0 : _this$board$insuffici2.checkCurrentState(this.board);
      if (!this.gameOver && insufficientPieces !== null && insufficientPieces !== void 0 && insufficientPieces.every((insufficient, i) => dead[i] || insufficient)) {
        this.gameOver = "INSUFFICIENT MATERIAL \u2022 ".concat(this.getCurrentResult());
        this.spreadPointsBetweenPlayersEvenly();
      }
      if (this.getRealPlayers() > 1) {
        this.sideToMove = this.nextTurn();
      }
    }
    return {
      checkmates,
      stalemates,
      checks
    };
  }
  getRealPlayers() {
    var dead = this.fenOptions.tag("dead"),
      resigned = this.fenOptions.tag("resigned");
    var totalPlayers = 0;
    var _iterator11 = _createForOfIteratorHelper(_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_4__.colors),
      _step11;
    try {
      for (_iterator11.s(); !(_step11 = _iterator11.n()).done;) {
        var color = _step11.value;
        if (resigned[color] || dead[color]) continue;
        totalPlayers++;
      }
    } catch (err) {
      _iterator11.e(err);
    } finally {
      _iterator11.f();
    }
    return totalPlayers;
  }
  nextTurn() {
    var player = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.sideToMove;
    if (this.getRealPlayers() <= 1) throw new Error("Next turn called while the game is terminated");
    return (0,_FENDataInterface__WEBPACK_IMPORTED_MODULE_1__.getNeighboringSideToMove)(player, this.fenOptions.tag("dead"));
  }
  previousTurn() {
    var player = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.sideToMove;
    var dead = this.fenOptions.tag("dead");
    if (this.getRealPlayers() <= 1) throw new Error("Previous turn called while the game is terminated");
    var sideToMove = player;
    do {
      sideToMove = sideToMove === 0 ? _GameInformation_GameData__WEBPACK_IMPORTED_MODULE_4__.totalPlayers - 1 : sideToMove - 1;
    } while (dead[sideToMove]);
    if ((0,_GameInformation_GameUnits_GameUnits__WEBPACK_IMPORTED_MODULE_8__.verifyNumericColor)(sideToMove)) {
      return sideToMove;
    } else throw new Error("Unexpected numeric color: ".concat(sideToMove));
  }
  isComplexEvaluation() {
    return false;
  }
  obtainPointsForMate() {
    return defaultPointsForMate;
  }
  assignPoints(sideToMove, points) {
    if (points > 0) {
      this.points[sideToMove] += points;
    }
  }
  getPointsForPiece(pieceString) {
    if (pieceString.isPiece() && this.board.gameType.isFFA()) {
      return _moveGeneration_PieceControl_PieceControlInterface__WEBPACK_IMPORTED_MODULE_6__.pieceControlConfigSettings[pieceString.piece].points.singlesPoints;
    } else return 0;
  }
  countTotalPointsOnBoard() {
    var royal = this.fenOptions.tag("royal"),
      resigned = this.fenOptions.tag("resigned"),
      zombieImmune = this.fenOptions.tag("zombieImmune");
    var resultingPoints = [0, 0, 0, 0];
    this.board.getPlayerPieces().forEach((army, color) => {
      if (zombieImmune[color]) return;
      var royalPiece = royal[color];
      var _iterator12 = _createForOfIteratorHelper(army),
        _step12;
      try {
        for (_iterator12.s(); !(_step12 = _iterator12.n()).done;) {
          var coordinate = _step12.value;
          if (royalPiece && (0,_Board_BoardInterface__WEBPACK_IMPORTED_MODULE_7__.compareCoordinates)(coordinate, royalPiece)) {
            resultingPoints[color] += this.obtainPointsForMate();
          } else if (resigned[color]) {
            var piece = this.board.board[coordinate[0]][coordinate[1]].piece;
            resultingPoints[color] += _moveGeneration_PieceControl_PieceControlInterface__WEBPACK_IMPORTED_MODULE_6__.pieceControlConfigSettings[piece].points.singlesPoints;
          }
        }
      } catch (err) {
        _iterator12.e(err);
      } finally {
        _iterator12.f();
      }
    });
    return resultingPoints;
  }
  getCurrentResult() {
    if (this.board.gameType.isFFA()) {
      var dead = this.fenOptions.tag("dead"),
        resigned = this.fenOptions.tag("resigned");
      if (!this.board.isTwoPlayer) throw new Error("Result can only get called for 2P and teams");
      var max = Math.max(...this.points);
      var firstAlivePlayer, maximumIndex;
      var _iterator13 = _createForOfIteratorHelper(_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_4__.colors),
        _step13;
      try {
        for (_iterator13.s(); !(_step13 = _iterator13.n()).done;) {
          var color = _step13.value;
          if (dead[color] || resigned[color]) continue;
          if (this.points[color] === max) {
            if (maximumIndex === undefined) {
              maximumIndex = color;
            } else return "½-½";
          }
          if (firstAlivePlayer === undefined) firstAlivePlayer = color;
        }
      } catch (err) {
        _iterator13.e(err);
      } finally {
        _iterator13.f();
      }
      return firstAlivePlayer === maximumIndex ? "1-0" : "0-1";
    } else {
      var result = "½-½";
      var _iterator14 = _createForOfIteratorHelper(_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_4__.colors),
        _step14;
      try {
        for (_iterator14.s(); !(_step14 = _iterator14.n()).done;) {
          var _color2 = _step14.value;
          if (this.points[_color2] > 0) {
            result = this.board.gameType.teamSettings.firstTeamColors[_color2] ? "1-0" : "0-1";
            break;
          }
        }
      } catch (err) {
        _iterator14.e(err);
      } finally {
        _iterator14.f();
      }
      return result;
    }
  }
  assignGeneralTermination(generalTermination, sideToMove) {
    if (this.board.gameType.isFFA() && !this.board.isTwoPlayer) {
      if (sideToMove !== undefined) {
        switch (generalTermination) {
          case "Stalemate":
            this.gameOver = "".concat((0,_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_4__.getPlayerNameFromColor)(sideToMove).toUpperCase(), " STALEMATED!");
            return;
        }
      }
      if ((0,_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_4__.verifyWinningTermination)(generalTermination)) {
        this.gameOver = "".concat(generalTermination.toUpperCase(), "!");
      } else if ((0,_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_4__.verifyDrawingTermination)(generalTermination)) {
        this.gameOver = "".concat(generalTermination.toUpperCase());
      } else {
        (0,_baseTypes__WEBPACK_IMPORTED_MODULE_3__.throwOnNever)(generalTermination);
      }
    } else {
      this.gameOver = "".concat(generalTermination.toUpperCase(), " \u2022 ").concat(this.getCurrentResult());
    }
  }
}


/***/ }),

/***/ "./src/main/client/ts/logic/movegen/FENData/FENDataInterface.ts":
/*!**********************************************************************!*\
  !*** ./src/main/client/ts/logic/movegen/FENData/FENDataInterface.ts ***!
  \**********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "createDefaultArmyDeathSettings": () => (/* binding */ createDefaultArmyDeathSettings),
/* harmony export */   "createDefaultFENEffectSettings": () => (/* binding */ createDefaultFENEffectSettings),
/* harmony export */   "getNeighboringSideToMove": () => (/* binding */ getNeighboringSideToMove)
/* harmony export */ });
/* harmony import */ var _moveGeneration_GameInformation_GameUnits_GameUnits__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @moveGeneration/GameInformation/GameUnits/GameUnits */ "./src/main/client/ts/logic/movegen/GameInformation/GameUnits/GameUnits.ts");
/* harmony import */ var _GameInformation_GameData__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../GameInformation/GameData */ "./src/main/client/ts/logic/movegen/GameInformation/GameData.ts");


var createDefaultFENEffectSettings = () => ({
  ignoreCheckmateChecks: false,
  ignoreNextTurn: false
});
var createDefaultArmyDeathSettings = () => ({
  excludeRoyals: false,
  onlyPawns: false,
  doNotSetDead: false
});
function getNeighboringSideToMove(player, dead) {
  var sideToMove = player;
  do {
    sideToMove = sideToMove === _GameInformation_GameData__WEBPACK_IMPORTED_MODULE_1__.totalPlayers - 1 ? 0 : sideToMove + 1;
  } while (dead[sideToMove]);
  if ((0,_moveGeneration_GameInformation_GameUnits_GameUnits__WEBPACK_IMPORTED_MODULE_0__.verifyNumericColor)(sideToMove)) {
    return sideToMove;
  } else throw new Error("Unexpected numeric color: ".concat(sideToMove));
}

/***/ }),

/***/ "./src/main/client/ts/logic/movegen/FENData/FENOptions/FENOptions.ts":
/*!***************************************************************************!*\
  !*** ./src/main/client/ts/logic/movegen/FENData/FENOptions/FENOptions.ts ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "FENOptions": () => (/* binding */ FENOptions)
/* harmony export */ });
/* harmony import */ var _client_ts_baseTypes__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @client/ts/baseTypes */ "./src/main/client/ts/baseTypes.ts");
/* harmony import */ var _client_ts_logic_BaseInterfaces__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @client/ts/logic/BaseInterfaces */ "./src/main/client/ts/logic/BaseInterfaces.ts");
/* harmony import */ var _moveGeneration_VariantRules_VariantRuleDefinitions_BoardVariantModules_EngineMoveGeneration_BotInterface__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @moveGeneration/VariantRules/VariantRuleDefinitions/BoardVariantModules/EngineMoveGeneration/BotInterface */ "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/BoardVariantModules/EngineMoveGeneration/BotInterface.ts");
/* harmony import */ var _utils_ObjectUtils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @utils/ObjectUtils */ "./src/main/client/ts/utils/ObjectUtils.ts");
/* harmony import */ var _GameInformation_GameData__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../GameInformation/GameData */ "./src/main/client/ts/logic/movegen/GameInformation/GameData.ts");
/* harmony import */ var _FENOptionsTagsInterface__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./FENOptionsTagsInterface */ "./src/main/client/ts/logic/movegen/FENData/FENOptions/FENOptionsTagsInterface.ts");
function _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e2) { throw _e2; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e3) { didErr = true; err = _e3; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }
function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }
function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }
function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }
function _iterableToArrayLimit(arr, i) { var _i = null == arr ? null : "undefined" != typeof Symbol && arr[Symbol.iterator] || arr["@@iterator"]; if (null != _i) { var _s, _e, _x, _r, _arr = [], _n = !0, _d = !1; try { if (_x = (_i = _i.call(arr)).next, 0 === i) { if (Object(_i) !== _i) return; _n = !1; } else for (; !(_n = (_s = _x.call(_i)).done) && (_arr.push(_s.value), _arr.length !== i); _n = !0); } catch (err) { _d = !0, _e = err; } finally { try { if (!_n && null != _i.return && (_r = _i.return(), Object(_r) !== _r)) return; } finally { if (_d) throw _e; } } return _arr; } }
function _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }
function _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }
function _toPropertyKey(arg) { var key = _toPrimitive(arg, "string"); return typeof key === "symbol" ? key : String(key); }
function _toPrimitive(input, hint) { if (typeof input !== "object" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || "default"); if (typeof res !== "object") return res; throw new TypeError("@@toPrimitive must return a primitive value."); } return (hint === "string" ? String : Number)(input); }






class FENOptions {
  constructor() {
    _defineProperty(this, "tags", (0,_FENOptionsTagsInterface__WEBPACK_IMPORTED_MODULE_5__.createFENOptionsTags)());
    _defineProperty(this, "castlingKingsideData", (0,_client_ts_baseTypes__WEBPACK_IMPORTED_MODULE_0__.createTupleFromCallback)(() => ({
      endCoordinates: -1,
      pieceCoordinates: -1,
      pieceEndCoordinates: -1,
      checkSquares: []
    }), _GameInformation_GameData__WEBPACK_IMPORTED_MODULE_4__.totalPlayers));
    _defineProperty(this, "castlingQueensideData", (0,_client_ts_baseTypes__WEBPACK_IMPORTED_MODULE_0__.createTupleFromCallback)(() => ({
      endCoordinates: -1,
      pieceCoordinates: -1,
      pieceEndCoordinates: -1,
      checkSquares: []
    }), _GameInformation_GameData__WEBPACK_IMPORTED_MODULE_4__.totalPlayers));
  }
  static loadSerializedState(state) {
    var newTags = (0,_FENOptionsTagsInterface__WEBPACK_IMPORTED_MODULE_5__.createFENOptionsTags)();
    var key;
    for (key in newTags) {
      if (Object.prototype.hasOwnProperty.call(newTags, key)) {
        newTags[key].value = state[key];
      }
    }
    return newTags;
  }
  createSnapshot() {
    return {
      tagsSnapshot: (0,_FENOptionsTagsInterface__WEBPACK_IMPORTED_MODULE_5__.createFENOptionsTagsSnapshot)(this.tags)
    };
  }
  loadTagSnapshot(value, tag) {
    tag.loadSnapshot(value);
  }
  loadSnapshot(snapshot) {
    var key;
    for (key in snapshot.tagsSnapshot) {
      if (!Object.prototype.hasOwnProperty.call(snapshot.tagsSnapshot, key)) continue;
      this.loadTagSnapshot(snapshot.tagsSnapshot[key], this.tags[key]);
    }
  }
  verifyKeyTag(key, snapshot) {
    return key in snapshot;
  }
  createClone() {
    var newOptions = (0,_utils_ObjectUtils__WEBPACK_IMPORTED_MODULE_3__.copyClass)(this, FENOptions);
    var snapshot = this.createSnapshot();
    newOptions.tags = (0,_FENOptionsTagsInterface__WEBPACK_IMPORTED_MODULE_5__.createFENOptionsTags)();
    newOptions.loadSnapshot(snapshot);
    var key;
    for (key in this.tags) {
      if (Object.prototype.hasOwnProperty.call(this.tags, key) && !this.verifyKeyTag(key, snapshot.tagsSnapshot)) {
        newOptions.tags[key].value = this.tags[key].value;
      }
    }
    return newOptions;
  }
  tag(key) {
    return this.tags[key].value;
  }
  setTag(key, value) {
    this.tags[key].value = value;
  }
  createSerializedState() {
    var serializedState = {};
    var fenTag;
    for (fenTag in this.tags) {
      if (!Object.prototype.hasOwnProperty.call(this.tags, fenTag)) continue;
      var tag = this.tags[fenTag];
      serializedState[fenTag] = tag.createSnapshot();
    }
    return serializedState;
  }
  generateCastling(board) {
    var _this = this;
    var _this$tag = this.tag("dim"),
      _this$tag2 = _slicedToArray(_this$tag, 2),
      dimensionRY = _this$tag2[0],
      dimensionBG = _this$tag2[1];
    if (!this.tag("noCorners")) {
      if (dimensionRY > 8) dimensionRY = 8;
      if (dimensionBG > 8) dimensionBG = 8;
    }
    var dimensions = [dimensionRY, dimensionBG, dimensionRY, dimensionBG];
    var royalRanks = this.tag("royal").map((r, i) => r ? r[(0,_client_ts_logic_BaseInterfaces__WEBPACK_IMPORTED_MODULE_1__.getHorizontalPlacementModulus)(i)] : r);
    var royalCoordinates = this.tag("royal").map((r, i) => r ? r[(0,_client_ts_logic_BaseInterfaces__WEBPACK_IMPORTED_MODULE_1__.getHorizontalPlacementModulus)(i)] : r);
    var kingsideCastlePieceCoordinate = [];
    var queensideCastlePieceCoordinate = [];
    var boardSquares = board.board;
    for (var i = 0; i < this.tag("royal").length; i++) {
      var royalCoordinateI = royalCoordinates[i];
      var royalRanksI = royalRanks[i];
      if (royalCoordinateI === null || royalRanksI === null) {
        kingsideCastlePieceCoordinate.push(-1);
        queensideCastlePieceCoordinate.push(-1);
        continue;
      }
      var condition = i % 2 === 0;
      for (var j = royalCoordinateI; j < 14; j++) {
        var pieceString = boardSquares[condition ? royalRanksI : j][condition ? j : royalRanksI];
        if (!pieceString.isEmpty() && pieceString.piece === this.tag("castleWith")) {
          kingsideCastlePieceCoordinate.push(j);
          break;
        } else if (j === 13) {
          kingsideCastlePieceCoordinate.push(-1);
        }
      }
      for (var _j = royalCoordinateI; _j > -1; _j--) {
        var _pieceString = boardSquares[condition ? royalRanksI : _j][condition ? _j : royalRanksI];
        if (!_pieceString.isEmpty() && _pieceString.piece === this.tag("castleWith")) {
          queensideCastlePieceCoordinate.push(_j);
          break;
        } else if (_j === 0) {
          queensideCastlePieceCoordinate.push(-1);
        }
      }
    }
    var _loop = function _loop() {
      var royalCoordinate = royalCoordinates[_i2];
      if (royalCoordinate === null) return "continue";
      var d = dimensions[_i2] - 6 < 1 ? 1 : dimensions[_i2] - 6;
      if (kingsideCastlePieceCoordinate[_i2] === -1) {
        _this.tag("castleKingside")[_i2] = false;
      } else {
        var kArr = [...Array(kingsideCastlePieceCoordinate[_i2] - royalCoordinate - 1).keys()];
        var endCoordinates = royalCoordinate + d;
        var castlingData = {
          endCoordinates,
          checkSquares: kArr.map(j => j + royalCoordinate + 1),
          pieceCoordinates: kingsideCastlePieceCoordinate[_i2],
          pieceEndCoordinates: endCoordinates - 1
        };
        if (royalCoordinate <= 6) {
          _this.castlingQueensideData[_i2] = castlingData;
        } else {
          _this.castlingKingsideData[_i2] = castlingData;
        }
      }
      if (queensideCastlePieceCoordinate[_i2] === -1) {
        _this.tags.castleQueenside.value[_i2] = false;
      } else {
        var qArr = [...Array(royalCoordinate - queensideCastlePieceCoordinate[_i2] - 1).keys()];
        var _endCoordinates = royalCoordinate - d;
        var _castlingData = {
          endCoordinates: _endCoordinates,
          checkSquares: royalCoordinate <= 6 ? qArr.map(j => j + royalCoordinate - 2) : qArr.map(j => j + royalCoordinate - 3),
          pieceCoordinates: queensideCastlePieceCoordinate[_i2],
          pieceEndCoordinates: _endCoordinates + 1
        };
        if (royalCoordinate <= 6) {
          _this.castlingKingsideData[_i2] = _castlingData;
        } else {
          _this.castlingQueensideData[_i2] = _castlingData;
        }
      }
    };
    for (var _i2 = 0; _i2 < this.tag("royal").length; _i2++) {
      var _ret = _loop();
      if (_ret === "continue") continue;
    }
  }
  isCastlingAvailable(player, board, checks) {
    var royal = this.tag("royal")[player];
    if (royal === null) return false;
    var royalCoordinate = royal[(0,_client_ts_logic_BaseInterfaces__WEBPACK_IMPORTED_MODULE_1__.getVerticalPlacementModulus)(player)];
    var squares = board.board;
    var _iterator = _createForOfIteratorHelper(checks),
      _step;
    try {
      for (_iterator.s(); !(_step = _iterator.n()).done;) {
        var checkSquare = _step.value;
        var coordinateA = (0,_client_ts_logic_BaseInterfaces__WEBPACK_IMPORTED_MODULE_1__.isVerticalPlacement)(player) ? royalCoordinate : checkSquare;
        var coordinateB = (0,_client_ts_logic_BaseInterfaces__WEBPACK_IMPORTED_MODULE_1__.isVerticalPlacement)(player) ? checkSquare : royalCoordinate;
        if (!squares[coordinateA][coordinateB].isEmpty() || board.preGeneratedAttacks[player].hoppingPieces[coordinateA][coordinateB] > 0 || board.preGeneratedAttacks[player].slidingPieces[coordinateA][coordinateB] > 0) return false;
      }
    } catch (err) {
      _iterator.e(err);
    } finally {
      _iterator.f();
    }
    if (board.isKingInCheck(player)) return false;
    return true;
  }
  isKingsideCastlingAvailable(player, board) {
    if (!this.tag("castleKingside")[player]) return false;
    if (this.castlingKingsideData[player].endCoordinates === -1) {
      this.generateCastling(board);
    }
    return this.isCastlingAvailable(player, board, this.castlingKingsideData[player].checkSquares);
  }
  isQueensideCastlingAvailable(player, board) {
    if (!this.tag("castleQueenside")[player]) return false;
    if (this.castlingQueensideData[player].endCoordinates === -1) {
      this.generateCastling(board);
    }
    return this.isCastlingAvailable(player, board, this.castlingQueensideData[player].checkSquares);
  }
  getCastlingEndCoordinate(player, coordinates) {
    var _this$tag$player;
    var royalCoordinate = (_this$tag$player = this.tag("royal")[player]) === null || _this$tag$player === void 0 ? void 0 : _this$tag$player[(0,_client_ts_logic_BaseInterfaces__WEBPACK_IMPORTED_MODULE_1__.getVerticalPlacementModulus)(player)];
    (0,_client_ts_baseTypes__WEBPACK_IMPORTED_MODULE_0__.assertNonUndefined)(coordinates);
    (0,_client_ts_baseTypes__WEBPACK_IMPORTED_MODULE_0__.assertNonUndefined)(royalCoordinate);
    var coordinateA = (0,_client_ts_logic_BaseInterfaces__WEBPACK_IMPORTED_MODULE_1__.isVerticalPlacement)(player) ? royalCoordinate : coordinates;
    var coordinateB = (0,_client_ts_logic_BaseInterfaces__WEBPACK_IMPORTED_MODULE_1__.isVerticalPlacement)(player) ? coordinates : royalCoordinate;
    return [coordinateA, coordinateB];
  }
  getKingsideCastlingEndCoordinate(player) {
    return this.getCastlingEndCoordinate(player, this.castlingKingsideData[player].endCoordinates);
  }
  getQueensideCastlingEndCoordinate(player) {
    return this.getCastlingEndCoordinate(player, this.castlingQueensideData[player].endCoordinates);
  }
  getKingsideCastlingPieceEndCoordinate(player) {
    return this.getCastlingEndCoordinate(player, this.castlingKingsideData[player].pieceEndCoordinates);
  }
  getQueensideCastlingPieceEndCoordinate(player) {
    return this.getCastlingEndCoordinate(player, this.castlingQueensideData[player].pieceEndCoordinates);
  }
  getKingsideCastlingTandemPiece(player) {
    return this.castlingKingsideData[player].pieceCoordinates;
  }
  getQueensideCastlingTandemPiece(player) {
    return this.castlingQueensideData[player].pieceCoordinates;
  }
  getAvailableEnPassantCaptures(baseColor) {
    var coordinates = [];
    this.tag("enPassant").forEach((enPassant, i) => {
      if (i === baseColor) return;
      if (enPassant) coordinates.push(enPassant[0]);
    });
    return coordinates.map(e => [...e]);
  }
  getDefaultZombieAlgorithm(baseColor) {
    var algorithm = _moveGeneration_VariantRules_VariantRuleDefinitions_BoardVariantModules_EngineMoveGeneration_BotInterface__WEBPACK_IMPORTED_MODULE_2__.botAlgorithms.get(this.tag("resigned")[baseColor] ? this.tag("zombieType")[baseColor] : _moveGeneration_VariantRules_VariantRuleDefinitions_BoardVariantModules_EngineMoveGeneration_BotInterface__WEBPACK_IMPORTED_MODULE_2__.ZombieType.F_Checker);
    (0,_client_ts_baseTypes__WEBPACK_IMPORTED_MODULE_0__.assertNonUndefined)(algorithm);
    return algorithm;
  }
}

/***/ }),

/***/ "./src/main/client/ts/logic/movegen/FENData/FENOptions/FENOptionsTags.ts":
/*!*******************************************************************************!*\
  !*** ./src/main/client/ts/logic/movegen/FENData/FENOptions/FENOptionsTags.ts ***!
  \*******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "createBankTag": () => (/* binding */ createBankTag),
/* harmony export */   "createBooleanTag": () => (/* binding */ createBooleanTag),
/* harmony export */   "createBooleanTupleTag": () => (/* binding */ createBooleanTupleTag),
/* harmony export */   "createBoxOffsetTag": () => (/* binding */ createBoxOffsetTag),
/* harmony export */   "createCastleWithTag": () => (/* binding */ createCastleWithTag),
/* harmony export */   "createDimensionTag": () => (/* binding */ createDimensionTag),
/* harmony export */   "createEnPassantTag": () => (/* binding */ createEnPassantTag),
/* harmony export */   "createLivesTag": () => (/* binding */ createLivesTag),
/* harmony export */   "createPawnBaseRankTag": () => (/* binding */ createPawnBaseRankTag),
/* harmony export */   "createPromotedFromTag": () => (/* binding */ createPromotedFromTag),
/* harmony export */   "createRoyalTag": () => (/* binding */ createRoyalTag),
/* harmony export */   "createSeirawanDropsTag": () => (/* binding */ createSeirawanDropsTag),
/* harmony export */   "createSetupPointsTag": () => (/* binding */ createSetupPointsTag),
/* harmony export */   "createZombiesTag": () => (/* binding */ createZombiesTag)
/* harmony export */ });
/* harmony import */ var _client_ts_baseTypes__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @client/ts/baseTypes */ "./src/main/client/ts/baseTypes.ts");
/* harmony import */ var _client_ts_utils_ArrayUtils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @client/ts/utils/ArrayUtils */ "./src/main/client/ts/utils/ArrayUtils.ts");
/* harmony import */ var _Board_BoardInterface__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../Board/BoardInterface */ "./src/main/client/ts/logic/movegen/Board/BoardInterface.ts");
/* harmony import */ var _GameInformation_GameData__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../GameInformation/GameData */ "./src/main/client/ts/logic/movegen/GameInformation/GameData.ts");
/* harmony import */ var _GameInformation_GameUnits_GameUnits__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../GameInformation/GameUnits/GameUnits */ "./src/main/client/ts/logic/movegen/GameInformation/GameUnits/GameUnits.ts");
/* harmony import */ var _GameInformation_GameUnits_PieceString__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../GameInformation/GameUnits/PieceString */ "./src/main/client/ts/logic/movegen/GameInformation/GameUnits/PieceString.ts");
/* harmony import */ var _PieceControl_PieceControlInterface__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../PieceControl/PieceControlInterface */ "./src/main/client/ts/logic/movegen/PieceControl/PieceControlInterface.ts");
/* harmony import */ var _moveGeneration_VariantRules_VariantRuleDefinitions_BoardVariantModules_EngineMoveGeneration_BotInterface__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @moveGeneration/VariantRules/VariantRuleDefinitions/BoardVariantModules/EngineMoveGeneration/BotInterface */ "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/BoardVariantModules/EngineMoveGeneration/BotInterface.ts");
/* harmony import */ var _client_ts_logic_utils_Tags_Moves_ParsePGNMoves__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @client/ts/logic/utils/Tags/Moves/ParsePGNMoves */ "./src/main/client/ts/logic/utils/Tags/Moves/ParsePGNMoves.ts");
/* harmony import */ var _client_ts_logic_utils_Tags_Utils__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @client/ts/logic/utils/Tags/Utils */ "./src/main/client/ts/logic/utils/Tags/Utils.ts");
/* harmony import */ var _client_ts_utils_ObjectUtils__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @client/ts/utils/ObjectUtils */ "./src/main/client/ts/utils/ObjectUtils.ts");
function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }
function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function _iterableToArrayLimit(arr, i) { var _i = null == arr ? null : "undefined" != typeof Symbol && arr[Symbol.iterator] || arr["@@iterator"]; if (null != _i) { var _s, _e, _x, _r, _arr = [], _n = !0, _d = !1; try { if (_x = (_i = _i.call(arr)).next, 0 === i) { if (Object(_i) !== _i) return; _n = !1; } else for (; !(_n = (_s = _x.call(_i)).done) && (_arr.push(_s.value), _arr.length !== i); _n = !0); } catch (err) { _d = !0, _e = err; } finally { try { if (!_n && null != _i.return && (_r = _i.return(), Object(_r) !== _r)) return; } finally { if (_d) throw _e; } } return _arr; } }
function _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }
function _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e2) { throw _e2; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e3) { didErr = true; err = _e3; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }
function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }
function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }











var verifyParameterType = (param, type) => {
  return Array.isArray(param) && (0,_client_ts_baseTypes__WEBPACK_IMPORTED_MODULE_0__.verifyTupleType)(param, _GameInformation_GameData__WEBPACK_IMPORTED_MODULE_3__.totalPlayers) && param.every(v => typeof v === type);
};
function createBooleanTupleTag(parameters) {
  var defaultValue = parameters.defaultValue,
    key = parameters.key,
    isStatic = parameters.isStatic;
  var resultingObject = {
    value: [...defaultValue],
    parse(value) {
      if (verifyParameterType(value, "boolean")) {
        return value;
      } else return this.createSnapshot();
    },
    serialize() {
      if (key === "castleKingside" || key === "castleQueenside" || key === "dead" || key === "areBanksEnabled") return;
      if (!(0,_client_ts_utils_ArrayUtils__WEBPACK_IMPORTED_MODULE_1__.compareArrays)(this.value, defaultValue)) {
        return "'".concat(key, "':(").concat(this.value.join(","), ")");
      } else return;
    },
    createSnapshot() {
      return [...this.value];
    },
    loadSnapshot(snapshot) {
      var tuple = [...snapshot];
      this.value = tuple;
    }
  };
  if (isStatic) delete resultingObject.loadSnapshot;
  return resultingObject;
}
var defaultPawnBaseRank = 2;
var createPawnBaseRankTag = () => ({
  value: defaultPawnBaseRank,
  parse(value) {
    return typeof value === "number" && value > 0 && value <= _GameInformation_GameData__WEBPACK_IMPORTED_MODULE_3__.boardDimension ? value : this.value;
  },
  serialize() {
    return this.value === defaultPawnBaseRank ? undefined : "'pawnBaseRank':".concat(this.value);
  },
  createSnapshot() {
    return this.value;
  }
});
var createEnPassantTag = () => ({
  value: (0,_client_ts_baseTypes__WEBPACK_IMPORTED_MODULE_0__.createTuple)(null, _GameInformation_GameData__WEBPACK_IMPORTED_MODULE_3__.totalPlayers),
  parse(input) {
    if (verifyParameterType(input, "string")) {
      return input.map(v => {
        var _parseEnPassantCoordi;
        return (_parseEnPassantCoordi = (0,_client_ts_logic_utils_Tags_Utils__WEBPACK_IMPORTED_MODULE_9__.parseEnPassantCoordinates)(v)) !== null && _parseEnPassantCoordi !== void 0 ? _parseEnPassantCoordi : null;
      });
    } else return this.createSnapshot();
  },
  serialize() {
    if (this.value.some(v => !v)) {
      return "'enPassant':(".concat(this.value.map(enP => enP ? "'".concat((0,_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_3__.convertCoordinateToPGN4)(enP[0]), ":").concat((0,_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_3__.convertCoordinateToPGN4)(enP[1]), "'") : "''").join(","), ")");
    } else return;
  },
  createSnapshot() {
    return this.value.map(enP => enP ? [[...enP[0]], [...enP[1]]] : enP);
  },
  loadSnapshot(snapshot) {
    this.value = snapshot.map(enP => enP ? [[...enP[0]], [...enP[1]]] : enP);
  }
});
var defaultCastleWith = "R";
var createCastleWithTag = () => ({
  value: defaultCastleWith,
  parse(input) {
    return typeof input === "string" ? input : this.value;
  },
  serialize() {
    return this.value === defaultCastleWith ? undefined : "'castleWith':".concat(this.value);
  },
  createSnapshot() {
    return this.value;
  }
});
var defaultBoxOffset = 0;
var createBoxOffsetTag = () => ({
  value: defaultBoxOffset,
  parse(input) {
    return typeof input === "number" && (0,_GameInformation_GameUnits_GameUnits__WEBPACK_IMPORTED_MODULE_4__.verifyNumericColor)(input) ? input : this.value;
  },
  serialize() {
    return this.value === defaultBoxOffset ? undefined : "'boxOffset':".concat(this.value);
  },
  createSnapshot() {
    return this.value;
  }
});
function createBooleanTag(parameters) {
  var defaultValue = parameters.defaultValue,
    key = parameters.key,
    isStatic = parameters.isStatic;
  var result = {
    value: defaultValue,
    parse(input) {
      return typeof input === "boolean" ? input : this.createSnapshot();
    },
    serialize() {
      return this.value === defaultValue ? undefined : "'".concat(key, "':").concat(String(this.value));
    },
    createSnapshot() {
      return this.value;
    },
    loadSnapshot(snapshot) {
      this.value = snapshot;
    }
  };
  if (isStatic) delete result.loadSnapshot;
  return result;
}
var defaultDimension = [14, 14];
var createDimensionTag = () => ({
  value: [...defaultDimension],
  parse(baseInput) {
    if (typeof baseInput !== "string") return this.createSnapshot();
    var input = baseInput.split("x");
    return Array.isArray(input) && (0,_client_ts_baseTypes__WEBPACK_IMPORTED_MODULE_0__.verifyTupleType)(input, 2) && input.every(i => {
      var v = Number(i);
      return !isNaN(v) && v >= 2 && v <= 14 && v % 2 === 0;
    }) ? input.map(v => Number(v)).reverse() : this.createSnapshot();
  },
  serialize() {
    if ((0,_client_ts_utils_ArrayUtils__WEBPACK_IMPORTED_MODULE_1__.compareArrays)(this.value, defaultDimension)) return;
    return "'dim':'".concat(this.value.join("x"), "'");
  },
  createSnapshot() {
    return [...this.value];
  }
});
var defaultZombies = (0,_client_ts_baseTypes__WEBPACK_IMPORTED_MODULE_0__.createTuple)(_moveGeneration_VariantRules_VariantRuleDefinitions_BoardVariantModules_EngineMoveGeneration_BotInterface__WEBPACK_IMPORTED_MODULE_7__.ZombieType.Rando, _GameInformation_GameData__WEBPACK_IMPORTED_MODULE_3__.totalPlayers);
var createZombiesTag = () => ({
  value: [...defaultZombies],
  parse(input) {
    if (Array.isArray(input) && (0,_client_ts_baseTypes__WEBPACK_IMPORTED_MODULE_0__.verifyTupleType)(input, _GameInformation_GameData__WEBPACK_IMPORTED_MODULE_3__.totalPlayers) && input.every(v => typeof v === "string")) {
      var newZombies = this.createSnapshot();
      var _iterator = _createForOfIteratorHelper(_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_3__.colors),
        _step;
      try {
        for (_iterator.s(); !(_step = _iterator.n()).done;) {
          var color = _step.value;
          var zombieType = input[color];
          if ((0,_moveGeneration_VariantRules_VariantRuleDefinitions_BoardVariantModules_EngineMoveGeneration_BotInterface__WEBPACK_IMPORTED_MODULE_7__.verifyZombieType)(zombieType)) newZombies[color] = zombieType;
        }
      } catch (err) {
        _iterator.e(err);
      } finally {
        _iterator.f();
      }
      return newZombies;
    } else return this.createSnapshot();
  },
  serialize() {
    if ((0,_client_ts_utils_ArrayUtils__WEBPACK_IMPORTED_MODULE_1__.compareArrays)(this.value, defaultZombies)) return;
    return "'zombieType':(".concat(this.value.map((t, i) => t === defaultZombies[i] ? "''" : "'".concat(t, "'")).join(","), ")");
  },
  createSnapshot() {
    return [...this.value];
  }
});
var createRoyalTag = () => ({
  value: (0,_client_ts_baseTypes__WEBPACK_IMPORTED_MODULE_0__.createTuple)(null, _GameInformation_GameData__WEBPACK_IMPORTED_MODULE_3__.totalPlayers),
  parse(input) {
    if (verifyParameterType(input, "string")) {
      return input.map(c => {
        var _parseSingleCoordinat;
        return (_parseSingleCoordinat = (0,_client_ts_logic_utils_Tags_Utils__WEBPACK_IMPORTED_MODULE_9__.parseSingleCoordinate)(c)) !== null && _parseSingleCoordinat !== void 0 ? _parseSingleCoordinat : null;
      });
    } else return this.createSnapshot();
  },
  serialize() {
    return "'royal':(".concat(this.value.map(r => r ? "'".concat((0,_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_3__.convertCoordinateToPGN4)(r), "'") : "''").join(","), ")");
  },
  createSnapshot() {
    return this.value.map(c => c ? [...c] : c);
  },
  loadSnapshot(snapshot) {
    this.value = snapshot.map(c => c ? [...c] : c);
  }
});
var createLivesTag = () => ({
  value: (0,_client_ts_baseTypes__WEBPACK_IMPORTED_MODULE_0__.createTuple)(null, _GameInformation_GameData__WEBPACK_IMPORTED_MODULE_3__.totalPlayers),
  parse(input) {
    if (verifyParameterType(input, "number")) {
      return input;
    } else return this.createSnapshot();
  },
  serialize() {
    if (this.value.some(v => v !== null)) {
      return "'lives':(".concat(this.value.map(l => l ? String(l) : "1").join(","), ")");
    } else return;
  },
  createSnapshot() {
    return [...this.value];
  },
  loadSnapshot(snapshot) {
    this.value = [...snapshot];
  }
});
var createBankTag = () => ({
  value: (0,_client_ts_baseTypes__WEBPACK_IMPORTED_MODULE_0__.createTupleFromCallback)(() => new Map(), _GameInformation_GameData__WEBPACK_IMPORTED_MODULE_3__.totalPlayers),
  parse(input) {
    var defaultBanks = (0,_client_ts_baseTypes__WEBPACK_IMPORTED_MODULE_0__.createTupleFromCallback)(() => new Map(), _GameInformation_GameData__WEBPACK_IMPORTED_MODULE_3__.totalPlayers);
    if (verifyParameterType(input, "string")) {
      var _iterator2 = _createForOfIteratorHelper(_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_3__.colors),
        _step2;
      try {
        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
          var color = _step2.value;
          var _iterator3 = _createForOfIteratorHelper(input[color].split(",")),
            _step3;
          try {
            for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {
              var pieceDefinition = _step3.value;
              var _pieceDefinition$spli = pieceDefinition.split("x").map((e, i) => i === 1 ? Number(e) : e),
                _pieceDefinition$spli2 = _slicedToArray(_pieceDefinition$spli, 2),
                piece = _pieceDefinition$spli2[0],
                _pieceDefinition$spli3 = _pieceDefinition$spli2[1],
                count = _pieceDefinition$spli3 === void 0 ? 1 : _pieceDefinition$spli3;
              if (typeof piece !== "string" || typeof count !== "number") continue;
              if (!/^(?:r|b|y|g).$/.test(piece)) continue;
              var pieceLetter = piece.charAt(1);
              if ((0,_PieceControl_PieceControlInterface__WEBPACK_IMPORTED_MODULE_6__.verifyPieceLetter)(pieceLetter)) {
                defaultBanks[color].set((0,_GameInformation_GameUnits_PieceString__WEBPACK_IMPORTED_MODULE_5__.createPieceFromString)(piece), count);
              }
            }
          } catch (err) {
            _iterator3.e(err);
          } finally {
            _iterator3.f();
          }
        }
      } catch (err) {
        _iterator2.e(err);
      } finally {
        _iterator2.f();
      }
    }
    return defaultBanks;
  },
  serialize() {
    if (this.value.some(b => b.size !== 0)) {
      return "'bank':(".concat(this.value.map(bank => {
        var resultingStrings = [];
        var _iterator4 = _createForOfIteratorHelper(bank),
          _step4;
        try {
          for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {
            var _step4$value = _slicedToArray(_step4.value, 2),
              piece = _step4$value[0],
              count = _step4$value[1];
            if (count === 1) {
              resultingStrings.push(piece.value);
            } else {
              resultingStrings.push("".concat(piece.value, "x").concat(count));
            }
          }
        } catch (err) {
          _iterator4.e(err);
        } finally {
          _iterator4.f();
        }
        return "'".concat(resultingStrings.join(","), "'");
      }).join(","), ")");
    } else return;
  },
  createSnapshot() {
    return this.value.map(m => [...m.entries()].map(_ref => {
      var _ref2 = _slicedToArray(_ref, 2),
        pieceString = _ref2[0],
        count = _ref2[1];
      return [pieceString.toObject(), count];
    }));
  },
  loadSnapshot(snapshot) {
    this.value = snapshot.map(v => new Map(v.map(_ref3 => {
      var _ref4 = _slicedToArray(_ref3, 2),
        pieceStringObject = _ref4[0],
        count = _ref4[1];
      return [_GameInformation_GameUnits_PieceString__WEBPACK_IMPORTED_MODULE_5__.PieceString.fromObjectToClass(pieceStringObject), count];
    })));
  }
});
var createPromotedFromTag = () => ({
  value: new Map(),
  parse(input) {
    var promotedFromMap = new Map();
    if (!(0,_client_ts_utils_ObjectUtils__WEBPACK_IMPORTED_MODULE_10__.verifyObjectType)(input)) return promotedFromMap;
    for (var key in input) {
      if (!Object.prototype.hasOwnProperty.call(promotedFromMap, key)) continue;
      var parsedCoordinate = (0,_client_ts_logic_utils_Tags_Utils__WEBPACK_IMPORTED_MODULE_9__.parseSingleCoordinate)(key);
      var pieceLetter = input[key];
      if (!parsedCoordinate || typeof pieceLetter !== "string" || !(0,_PieceControl_PieceControlInterface__WEBPACK_IMPORTED_MODULE_6__.verifyPieceLetter)(pieceLetter)) continue;
      promotedFromMap.set(parsedCoordinate, pieceLetter);
    }
    return promotedFromMap;
  },
  serialize() {
    if (this.value.size === 0) return;
    var promotedFromStrings = [];
    var _iterator5 = _createForOfIteratorHelper(this.value),
      _step5;
    try {
      for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {
        var _step5$value = _slicedToArray(_step5.value, 2),
          coordinate = _step5$value[0],
          piece = _step5$value[1];
        promotedFromStrings.push("'".concat((0,_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_3__.convertCoordinateToPGN4)(coordinate), "':'").concat(piece, "'"));
      }
    } catch (err) {
      _iterator5.e(err);
    } finally {
      _iterator5.f();
    }
    return "'promotedFrom':{".concat(promotedFromStrings.join(","), "}");
  },
  createSnapshot() {
    var newMap = [];
    var _iterator6 = _createForOfIteratorHelper(this.value.entries()),
      _step6;
    try {
      for (_iterator6.s(); !(_step6 = _iterator6.n()).done;) {
        var _step6$value = _slicedToArray(_step6.value, 2),
          coordinate = _step6$value[0],
          pieceLetter = _step6$value[1];
        newMap.push([[...coordinate], pieceLetter]);
      }
    } catch (err) {
      _iterator6.e(err);
    } finally {
      _iterator6.f();
    }
    return newMap;
  },
  loadSnapshot(snapshot) {
    this.value.clear();
    var _iterator7 = _createForOfIteratorHelper(snapshot),
      _step7;
    try {
      for (_iterator7.s(); !(_step7 = _iterator7.n()).done;) {
        var _step7$value = _slicedToArray(_step7.value, 2),
          coordinate = _step7$value[0],
          pieceLetter = _step7$value[1];
        this.value.set([...coordinate], pieceLetter);
      }
    } catch (err) {
      _iterator7.e(err);
    } finally {
      _iterator7.f();
    }
  }
});
var createSetupPointsTag = () => ({
  value: null,
  parse(input) {
    if (verifyParameterType(input, "number")) {
      return input;
    } else return this.createSnapshot();
  },
  serialize() {
    if (this.value) {
      return "'setupPoints':(".concat(this.value.join(","), ")");
    } else return;
  },
  createSnapshot() {
    return this.value ? [...this.value] : this.value;
  },
  loadSnapshot(snapshot) {
    this.value = snapshot ? [...snapshot] : snapshot;
  }
});
var createSeirawanDropsTag = () => ({
  value: (0,_client_ts_baseTypes__WEBPACK_IMPORTED_MODULE_0__.createTupleFromCallback)(() => new Set(), _GameInformation_GameData__WEBPACK_IMPORTED_MODULE_3__.totalPlayers),
  parse(input) {
    var defaultValue = (0,_client_ts_baseTypes__WEBPACK_IMPORTED_MODULE_0__.createTupleFromCallback)(() => new Set(), _GameInformation_GameData__WEBPACK_IMPORTED_MODULE_3__.totalPlayers);
    if (Array.isArray(input) && ((0,_client_ts_baseTypes__WEBPACK_IMPORTED_MODULE_0__.verifyTupleType)(input, _GameInformation_GameData__WEBPACK_IMPORTED_MODULE_3__.totalPlayers) || (0,_client_ts_baseTypes__WEBPACK_IMPORTED_MODULE_0__.verifyTupleType)(input, _GameInformation_GameData__WEBPACK_IMPORTED_MODULE_3__.totalPlayers + 1)) && input.every(v => Array.isArray(v))) {
      var _iterator8 = _createForOfIteratorHelper(_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_3__.colors),
        _step8;
      try {
        for (_iterator8.s(); !(_step8 = _iterator8.n()).done;) {
          var color = _step8.value;
          var seirawanDropsArray = input[color];
          if (!seirawanDropsArray.every(v => typeof v === "string")) continue;
          var _iterator9 = _createForOfIteratorHelper(seirawanDropsArray),
            _step9;
          try {
            for (_iterator9.s(); !(_step9 = _iterator9.n()).done;) {
              var pieceDefinition = _step9.value;
              if (!_client_ts_logic_utils_Tags_Moves_ParsePGNMoves__WEBPACK_IMPORTED_MODULE_8__.PGN4_SYNTAX.COORDINATE_REGEX.test(pieceDefinition)) continue;
              var coordinate = (0,_client_ts_logic_utils_Tags_Utils__WEBPACK_IMPORTED_MODULE_9__.parseSingleCoordinate)(pieceDefinition);
              if (coordinate) {
                defaultValue[color].add((0,_Board_BoardInterface__WEBPACK_IMPORTED_MODULE_2__.stringifyCoordinate)(coordinate));
              }
            }
          } catch (err) {
            _iterator9.e(err);
          } finally {
            _iterator9.f();
          }
        }
      } catch (err) {
        _iterator8.e(err);
      } finally {
        _iterator8.f();
      }
    }
    return defaultValue;
  },
  serialize() {
    if (this.value.every(m => m.size === 0)) return;
    return "'seirawanDrops':(".concat(this.value.map(coordinates => {
      return "(".concat([...coordinates].map(coord => "'".concat((0,_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_3__.convertCoordinateToPGN4)((0,_Board_BoardInterface__WEBPACK_IMPORTED_MODULE_2__.unstringifyCoordinate)(coord)), "'")).join(","), ")");
    }).join(","), ")");
  },
  createSnapshot() {
    return this.value.map(s => [...s.values()]);
  },
  loadSnapshot(snapshot) {
    this.value = snapshot.map(s => new Set(s));
  }
});

/***/ }),

/***/ "./src/main/client/ts/logic/movegen/FENData/FENOptions/FENOptionsTagsInterface.ts":
/*!****************************************************************************************!*\
  !*** ./src/main/client/ts/logic/movegen/FENData/FENOptions/FENOptionsTagsInterface.ts ***!
  \****************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "createFENOptionsTags": () => (/* binding */ createFENOptionsTags),
/* harmony export */   "createFENOptionsTagsSnapshot": () => (/* binding */ createFENOptionsTagsSnapshot),
/* harmony export */   "verifyDynamicFENOptionKey": () => (/* binding */ verifyDynamicFENOptionKey),
/* harmony export */   "verifyDynamicTag": () => (/* binding */ verifyDynamicTag)
/* harmony export */ });
/* harmony import */ var _client_ts_baseTypes__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @client/ts/baseTypes */ "./src/main/client/ts/baseTypes.ts");
/* harmony import */ var _GameInformation_GameData__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../GameInformation/GameData */ "./src/main/client/ts/logic/movegen/GameInformation/GameData.ts");
/* harmony import */ var _FENOptionsTags__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./FENOptionsTags */ "./src/main/client/ts/logic/movegen/FENData/FENOptions/FENOptionsTags.ts");



var verifyDynamicFENOptionKey = (fenTag, key) => "loadSnapshot" in fenTag;
var verifyDynamicTag = fenTag => "loadSnapshot" in fenTag;
function createFENOptionsTags() {
  return {
    dead: _FENOptionsTags__WEBPACK_IMPORTED_MODULE_2__.createBooleanTupleTag({
      key: "dead",
      defaultValue: (0,_client_ts_baseTypes__WEBPACK_IMPORTED_MODULE_0__.createTuple)(false, _GameInformation_GameData__WEBPACK_IMPORTED_MODULE_1__.totalPlayers),
      isStatic: false
    }),
    resigned: _FENOptionsTags__WEBPACK_IMPORTED_MODULE_2__.createBooleanTupleTag({
      key: "resigned",
      defaultValue: (0,_client_ts_baseTypes__WEBPACK_IMPORTED_MODULE_0__.createTuple)(false, _GameInformation_GameData__WEBPACK_IMPORTED_MODULE_1__.totalPlayers),
      isStatic: false
    }),
    pawnBaseRank: _FENOptionsTags__WEBPACK_IMPORTED_MODULE_2__.createPawnBaseRankTag(),
    enPassant: _FENOptionsTags__WEBPACK_IMPORTED_MODULE_2__.createEnPassantTag(),
    boxOffset: _FENOptionsTags__WEBPACK_IMPORTED_MODULE_2__.createBoxOffsetTag(),
    wb: _FENOptionsTags__WEBPACK_IMPORTED_MODULE_2__.createBooleanTag({
      key: "wb",
      defaultValue: false,
      isStatic: true
    }),
    dim: _FENOptionsTags__WEBPACK_IMPORTED_MODULE_2__.createDimensionTag(),
    noCorners: _FENOptionsTags__WEBPACK_IMPORTED_MODULE_2__.createBooleanTag({
      key: "noCorners",
      defaultValue: false,
      isStatic: true
    }),
    castleKingside: _FENOptionsTags__WEBPACK_IMPORTED_MODULE_2__.createBooleanTupleTag({
      key: "castleKingside",
      defaultValue: (0,_client_ts_baseTypes__WEBPACK_IMPORTED_MODULE_0__.createTuple)(true, _GameInformation_GameData__WEBPACK_IMPORTED_MODULE_1__.totalPlayers),
      isStatic: false
    }),
    castleQueenside: _FENOptionsTags__WEBPACK_IMPORTED_MODULE_2__.createBooleanTupleTag({
      key: "castleQueenside",
      defaultValue: (0,_client_ts_baseTypes__WEBPACK_IMPORTED_MODULE_0__.createTuple)(true, _GameInformation_GameData__WEBPACK_IMPORTED_MODULE_1__.totalPlayers),
      isStatic: false
    }),
    castleWith: _FENOptionsTags__WEBPACK_IMPORTED_MODULE_2__.createCastleWithTag(),
    zombieType: _FENOptionsTags__WEBPACK_IMPORTED_MODULE_2__.createZombiesTag(),
    zombieImmune: _FENOptionsTags__WEBPACK_IMPORTED_MODULE_2__.createBooleanTupleTag({
      key: "zombieImmune",
      defaultValue: (0,_client_ts_baseTypes__WEBPACK_IMPORTED_MODULE_0__.createTuple)(false, _GameInformation_GameData__WEBPACK_IMPORTED_MODULE_1__.totalPlayers),
      isStatic: false
    }),
    royal: _FENOptionsTags__WEBPACK_IMPORTED_MODULE_2__.createRoyalTag(),
    lives: _FENOptionsTags__WEBPACK_IMPORTED_MODULE_2__.createLivesTag(),
    bank: _FENOptionsTags__WEBPACK_IMPORTED_MODULE_2__.createBankTag(),
    promotedFrom: _FENOptionsTags__WEBPACK_IMPORTED_MODULE_2__.createPromotedFromTag(),
    setupPoints: _FENOptionsTags__WEBPACK_IMPORTED_MODULE_2__.createSetupPointsTag(),
    setupComplete: _FENOptionsTags__WEBPACK_IMPORTED_MODULE_2__.createBooleanTupleTag({
      key: "setupComplete",
      defaultValue: (0,_client_ts_baseTypes__WEBPACK_IMPORTED_MODULE_0__.createTuple)(true, _GameInformation_GameData__WEBPACK_IMPORTED_MODULE_1__.totalPlayers),
      isStatic: false
    }),
    seirawanDrops: _FENOptionsTags__WEBPACK_IMPORTED_MODULE_2__.createSeirawanDropsTag(),
    areBanksEnabled: _FENOptionsTags__WEBPACK_IMPORTED_MODULE_2__.createBooleanTupleTag({
      key: "areBanksEnabled",
      defaultValue: (0,_client_ts_baseTypes__WEBPACK_IMPORTED_MODULE_0__.createTuple)(false, _GameInformation_GameData__WEBPACK_IMPORTED_MODULE_1__.totalPlayers),
      isStatic: false
    })
  };
}
function createFENOptionsTagsSnapshot(tags) {
  var resultingTags = {};
  var fenTag;
  for (fenTag in tags) {
    if (!Object.prototype.hasOwnProperty.call(tags, fenTag)) continue;
    var tag = tags[fenTag];
    if (!verifyDynamicFENOptionKey(tag, fenTag) || !verifyDynamicTag(tag)) continue;
    resultingTags[fenTag] = tag.createSnapshot();
  }
  return resultingTags;
}

/***/ }),

/***/ "./src/main/client/ts/logic/movegen/GameInformation/GameUnits/PieceString.ts":
/*!***********************************************************************************!*\
  !*** ./src/main/client/ts/logic/movegen/GameInformation/GameUnits/PieceString.ts ***!
  \***********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "PieceString": () => (/* binding */ PieceString),
/* harmony export */   "createPieceFromData": () => (/* binding */ createPieceFromData),
/* harmony export */   "createPieceFromString": () => (/* binding */ createPieceFromString),
/* harmony export */   "deadColorIndex": () => (/* binding */ deadColorIndex),
/* harmony export */   "duckPieceString": () => (/* binding */ duckPieceString),
/* harmony export */   "emptyPieceString": () => (/* binding */ emptyPieceString),
/* harmony export */   "pawnPieceString": () => (/* binding */ pawnPieceString),
/* harmony export */   "wallPieceString": () => (/* binding */ wallPieceString)
/* harmony export */ });
/* harmony import */ var _moveGeneration_PieceControl_PieceControlInterface__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @moveGeneration/PieceControl/PieceControlInterface */ "./src/main/client/ts/logic/movegen/PieceControl/PieceControlInterface.ts");
/* harmony import */ var _GameUnits__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./GameUnits */ "./src/main/client/ts/logic/movegen/GameInformation/GameUnits/GameUnits.ts");
function _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }
function _toPropertyKey(arg) { var key = _toPrimitive(arg, "string"); return typeof key === "symbol" ? key : String(key); }
function _toPrimitive(input, hint) { if (typeof input !== "object" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || "default"); if (typeof res !== "object") return res; throw new TypeError("@@toPrimitive must return a primitive value."); } return (hint === "string" ? String : Number)(input); }


var deadColorIndex = 4;
class PieceString {
  static comparePieceStrings(pieceString1, pieceString2) {
    return pieceString1._piece === pieceString2._piece && pieceString1._color === pieceString2._color;
  }
  static comparePieceStringObjects(pieceString1, pieceString2) {
    return pieceString1._piece === pieceString2._piece && pieceString1._color === pieceString2._color;
  }
  static fromObjectToClass(object) {
    return new PieceString(object._color, object._piece);
  }
  constructor(_color, _piece) {
    _defineProperty(this, "value", void 0);
    this._color = _color;
    this._piece = _piece;
    this.value = _piece.length ? /[xXΘ]/.test(_piece) ? _piece : _GameUnits__WEBPACK_IMPORTED_MODULE_1__.stringColorEnum[_color] + _piece : "";
  }
  isDead() {
    return this._color === deadColorIndex && !this.isWall();
  }
  isEmpty() {
    return this._piece.length === 0;
  }
  isWall() {
    return this.value.length === 1;
  }
  isPiece() {
    return this.value.length === 2 && this._color !== deadColorIndex;
  }
  get piece() {
    if (this.isEmpty()) throw new TypeError("Accessing a piece string piece value while the piece string is empty.");
    return this._piece;
  }
  get color() {
    if (this.isEmpty()) throw new TypeError("Accessing a piece string color value while the piece string is empty.");
    return this._color;
  }
  getStringifiedColor() {
    return this.value.charAt(0);
  }
  toObject() {
    return {
      _piece: this._piece,
      _color: this._color,
      value: this.value
    };
  }
}
var createPieceFromData = (color, piece) => {
  if ((0,_moveGeneration_PieceControl_PieceControlInterface__WEBPACK_IMPORTED_MODULE_0__.verifyPieceLetter)(piece)) {
    return new PieceString(color, piece);
  }
  throw new Error("Wrong color signature for the piece provided");
};
var createPieceFromString = piece => {
  var verifyColorEnum = p => p in _GameUnits__WEBPACK_IMPORTED_MODULE_1__.colorEnum;
  if (piece.length === 1 && (0,_moveGeneration_PieceControl_PieceControlInterface__WEBPACK_IMPORTED_MODULE_0__.verifyPieceLetter)(piece)) {
    return new PieceString(deadColorIndex, piece);
  } else {
    var color = piece.charAt(0);
    var pieceLetter = piece.charAt(1);
    if (!(0,_moveGeneration_PieceControl_PieceControlInterface__WEBPACK_IMPORTED_MODULE_0__.verifyPieceLetter)(pieceLetter)) throw new Error("Wrong signature for the piece provided");
    if (color === "d") {
      return new PieceString(deadColorIndex, pieceLetter);
    } else {
      if (verifyColorEnum(color)) {
        return new PieceString(_GameUnits__WEBPACK_IMPORTED_MODULE_1__.colorEnum[color], pieceLetter);
      } else throw new Error("Wrong color signature for the piece provided");
    }
  }
};
var testEmptyPieceString = new PieceString(0, _moveGeneration_PieceControl_PieceControlInterface__WEBPACK_IMPORTED_MODULE_0__.emptyLetter);
if (!testEmptyPieceString.isEmpty()) throw new Error("Empty piece string is not isEmpty");
var emptyPieceString = testEmptyPieceString;
var testWallPieceString = new PieceString(deadColorIndex, _moveGeneration_PieceControl_PieceControlInterface__WEBPACK_IMPORTED_MODULE_0__.wallPieceLetter);
if (!testWallPieceString.isWall()) throw new Error("Wall piece string is not isWall");
var wallPieceString = testWallPieceString;
var testActivePieceString = new PieceString(0, _moveGeneration_PieceControl_PieceControlInterface__WEBPACK_IMPORTED_MODULE_0__.pawnPieceLetter);
if (!testActivePieceString.isPiece()) throw new Error("Active piece string is not isActive");
var pawnPieceString = testActivePieceString;
var testDuckPieceString = new PieceString(deadColorIndex, _moveGeneration_PieceControl_PieceControlInterface__WEBPACK_IMPORTED_MODULE_0__.duckLetter);
if (!testDuckPieceString.isWall()) throw new Error("Wall piece string is not isWall");
var duckPieceString = testActivePieceString;

/***/ }),

/***/ "./src/main/client/ts/logic/movegen/MoveTree/MoveNotationStringifier.ts":
/*!******************************************************************************!*\
  !*** ./src/main/client/ts/logic/movegen/MoveTree/MoveNotationStringifier.ts ***!
  \******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "fullMoveNotationStringify": () => (/* binding */ fullMoveNotationStringify),
/* harmony export */   "moveNotation": () => (/* binding */ moveNotation),
/* harmony export */   "shortenedMoveNotationStringify": () => (/* binding */ shortenedMoveNotationStringify)
/* harmony export */ });
/* harmony import */ var _client_ts_baseTypes__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @client/ts/baseTypes */ "./src/main/client/ts/baseTypes.ts");
/* harmony import */ var _utils_ArrayUtils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../utils/ArrayUtils */ "./src/main/client/ts/utils/ArrayUtils.ts");
/* harmony import */ var _BaseInterfaces__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../BaseInterfaces */ "./src/main/client/ts/logic/BaseInterfaces.ts");
/* harmony import */ var _Board_BoardInterface__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../Board/BoardInterface */ "./src/main/client/ts/logic/movegen/Board/BoardInterface.ts");
/* harmony import */ var _GameInformation_GameData__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../GameInformation/GameData */ "./src/main/client/ts/logic/movegen/GameInformation/GameData.ts");
/* harmony import */ var _GameInformation_GameUnits_PieceString__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../GameInformation/GameUnits/PieceString */ "./src/main/client/ts/logic/movegen/GameInformation/GameUnits/PieceString.ts");
/* harmony import */ var _MoveTreeInterface__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./MoveTreeInterface */ "./src/main/client/ts/logic/movegen/MoveTree/MoveTreeInterface.ts");
function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }
function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function _iterableToArrayLimit(arr, i) { var _i = null == arr ? null : "undefined" != typeof Symbol && arr[Symbol.iterator] || arr["@@iterator"]; if (null != _i) { var _s, _e, _x, _r, _arr = [], _n = !0, _d = !1; try { if (_x = (_i = _i.call(arr)).next, 0 === i) { if (Object(_i) !== _i) return; _n = !1; } else for (; !(_n = (_s = _x.call(_i)).done) && (_arr.push(_s.value), _arr.length !== i); _n = !0); } catch (err) { _d = !0, _e = err; } finally { try { if (!_n && null != _i.return && (_r = _i.return(), Object(_r) !== _r)) return; } finally { if (_d) throw _e; } } return _arr; } }
function _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }
function _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e2) { throw _e2; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e3) { didErr = true; err = _e3; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }
function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }
function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }







function generateCastlingString(moveData) {
  switch (moveData.specialType) {
    case _MoveTreeInterface__WEBPACK_IMPORTED_MODULE_6__.SpecialMove.CastlingKingside:
      return "O-O";
    case _MoveTreeInterface__WEBPACK_IMPORTED_MODULE_6__.SpecialMove.CastlingQueenside:
      return "O-O-O";
    default:
      return "";
  }
}
function extractPiece(metadata) {
  return metadata.movingPiece.piece !== _GameInformation_GameUnits_PieceString__WEBPACK_IMPORTED_MODULE_5__.pawnPieceString.piece ? metadata.movingPiece.piece : "";
}
function obtainAmbiguousOrthogonality(parameters) {
  var moveMetadata = parameters.moveMetadata,
    move = parameters.move,
    _parameters$snapshot = parameters.snapshot,
    board = _parameters$snapshot.boardSnapshot.board,
    pieceMovements = _parameters$snapshot.pregeneratedAttacks.pieceMovements,
    isCapture = parameters.isCapture;
  var _moveMetadata$movingP = moveMetadata.movingPiece,
    piece = _moveMetadata$movingP.piece,
    color = _moveMetadata$movingP.color;
  var isPawn = piece === _GameInformation_GameUnits_PieceString__WEBPACK_IMPORTED_MODULE_5__.pawnPieceString.piece;
  var registeredPieces = [];
  var _iterator = _createForOfIteratorHelper(pieceMovements),
    _step;
  try {
    for (_iterator.s(); !(_step = _iterator.n()).done;) {
      var _step$value = _slicedToArray(_step.value, 2),
        _piece = _step$value[0],
        movements = _step$value[1];
      var parsedCoordinate = (0,_Board_BoardInterface__WEBPACK_IMPORTED_MODULE_3__.unstringifyCoordinate)(_piece);
      var boardPiece = board[parsedCoordinate[0]][parsedCoordinate[1]];
      if (boardPiece.isEmpty() || boardPiece.color !== color || boardPiece.piece !== _piece) continue;
      if (movements.find(m => (0,_utils_ArrayUtils__WEBPACK_IMPORTED_MODULE_1__.compareArrays)(move.endCoordinates, m.move)) !== undefined) {
        registeredPieces.push(parsedCoordinate);
      }
    }
  } catch (err) {
    _iterator.e(err);
  } finally {
    _iterator.f();
  }
  if (color === _GameInformation_GameUnits_PieceString__WEBPACK_IMPORTED_MODULE_5__.deadColorIndex) return [false, false];
  var ambiguousRank = isCapture && isPawn && (0,_BaseInterfaces__WEBPACK_IMPORTED_MODULE_2__.isVerticalPlacement)(color) || registeredPieces.some((c, i) => registeredPieces.some((c2, j) => i !== j && c[0] === c2[0]));
  var ambiguousFile = isCapture && isPawn && !(0,_BaseInterfaces__WEBPACK_IMPORTED_MODULE_2__.isVerticalPlacement)(color) || registeredPieces.some((c, i) => registeredPieces.some((c2, j) => i !== j && c[1] === c2[1]));
  return [ambiguousRank, ambiguousFile];
}
function extractPromotion(move) {
  return move.promotion ? "=".concat(move.promotion[0].piece) : "";
}
function extractChecksAndCheckmates(metadata) {
  return "+".repeat(metadata.checks) + "#".repeat(metadata.checkmates);
}
var shortenedMoveNotationStringify = (moveWrapper, snapshot, dimension) => {
  var _moveWrapper$metadata;
  var resultingString = "";
  var isFirstCapturingMoveSet = false;
  var _iterator2 = _createForOfIteratorHelper(moveWrapper.moveData),
    _step2;
  try {
    for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
      var move = _step2.value;
      if ((0,_MoveTreeInterface__WEBPACK_IMPORTED_MODULE_6__.verifyStandardMove)(move)) {
        if (resultingString += generateCastlingString(move)) continue;
        resultingString += extractPiece(moveWrapper.metadata);
        var isCapture = !isFirstCapturingMoveSet && moveWrapper.metadata.isCapture;
        var _obtainAmbiguousOrtho = obtainAmbiguousOrthogonality({
            isCapture,
            move,
            snapshot,
            moveMetadata: moveWrapper.metadata
          }),
          _obtainAmbiguousOrtho2 = _slicedToArray(_obtainAmbiguousOrtho, 2),
          ambiguousRank = _obtainAmbiguousOrtho2[0],
          ambiguousFile = _obtainAmbiguousOrtho2[1];
        if (ambiguousFile && !ambiguousRank) {
          resultingString += (0,_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_4__.convertCoordinateToPGN4Array)(move.startCoordinates, dimension)[1];
        } else if (!ambiguousFile && ambiguousRank) {
          resultingString += (0,_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_4__.convertCoordinateToPGN4Array)(move.startCoordinates, dimension)[0];
        } else if (ambiguousFile && ambiguousRank) {
          resultingString += (0,_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_4__.convertCoordinateToPGN4)(move.startCoordinates, dimension);
        }
        if (isCapture) {
          resultingString += "x";
          isFirstCapturingMoveSet = true;
        }
        resultingString += (0,_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_4__.convertCoordinateToPGN4)(move.endCoordinates, dimension);
        resultingString += extractPromotion(move);
      } else if ((0,_MoveTreeInterface__WEBPACK_IMPORTED_MODULE_6__.verifyDroppingMove)(move)) {
        resultingString += "@".concat(move.piece.piece);
        resultingString += "".concat((0,_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_4__.convertCoordinateToPGN4)(move.endCoordinates, dimension));
      } else if ((0,_MoveTreeInterface__WEBPACK_IMPORTED_MODULE_6__.verifyInternalMove)(move)) {
        resultingString += move.type;
      } else (0,_client_ts_baseTypes__WEBPACK_IMPORTED_MODULE_0__.throwOnNever)(move);
    }
  } catch (err) {
    _iterator2.e(err);
  } finally {
    _iterator2.f();
  }
  resultingString += extractChecksAndCheckmates(moveWrapper.metadata);
  resultingString += (_moveWrapper$metadata = moveWrapper.metadata.annotation) !== null && _moveWrapper$metadata !== void 0 ? _moveWrapper$metadata : "";
  return resultingString;
};
var fullMoveNotationStringify = moveWrapper => {
  var resultingString = "";
  var firstStandardMoveCaptureSet = false;
  var _iterator3 = _createForOfIteratorHelper(moveWrapper.moveData),
    _step3;
  try {
    for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {
      var move = _step3.value;
      if ((0,_MoveTreeInterface__WEBPACK_IMPORTED_MODULE_6__.verifyStandardMove)(move)) {
        if (resultingString += generateCastlingString(move)) continue;
        resultingString += extractPiece(moveWrapper.metadata);
        resultingString += (0,_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_4__.convertCoordinateToPGN4)(move.startCoordinates);
        if (!firstStandardMoveCaptureSet && moveWrapper.metadata.isCapture) {
          resultingString += "x";
          firstStandardMoveCaptureSet = true;
        } else resultingString += "-";
        resultingString += (0,_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_4__.convertCoordinateToPGN4)(move.endCoordinates);
        resultingString += extractPromotion(move);
      } else if ((0,_MoveTreeInterface__WEBPACK_IMPORTED_MODULE_6__.verifyDroppingMove)(move)) {
        resultingString += "@".concat(move.piece.piece);
        resultingString += "-".concat((0,_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_4__.convertCoordinateToPGN4)(move.endCoordinates));
      } else if ((0,_MoveTreeInterface__WEBPACK_IMPORTED_MODULE_6__.verifyInternalMove)(move)) {
        resultingString += move.type;
      } else (0,_client_ts_baseTypes__WEBPACK_IMPORTED_MODULE_0__.throwOnNever)(move);
    }
  } catch (err) {
    _iterator3.e(err);
  } finally {
    _iterator3.f();
  }
  resultingString += extractChecksAndCheckmates(moveWrapper.metadata);
  return resultingString;
};
var moveNotation = {
  fullMoveNotation: fullMoveNotationStringify,
  shortenedMoveNotation: shortenedMoveNotationStringify
};

/***/ }),

/***/ "./src/main/client/ts/logic/movegen/MoveTree/MoveTree.ts":
/*!***************************************************************!*\
  !*** ./src/main/client/ts/logic/movegen/MoveTree/MoveTree.ts ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "alterCurrentPath": () => (/* binding */ alterCurrentPath),
/* harmony export */   "assertValidMove": () => (/* binding */ assertValidMove),
/* harmony export */   "createMoveTree": () => (/* binding */ createMoveTree),
/* harmony export */   "verifyValidMove": () => (/* binding */ verifyValidMove)
/* harmony export */ });
/* harmony import */ var _MoveTreeInterface__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./MoveTreeInterface */ "./src/main/client/ts/logic/movegen/MoveTree/MoveTreeInterface.ts");
/* harmony import */ var _MoveNotationStringifier__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./MoveNotationStringifier */ "./src/main/client/ts/logic/movegen/MoveTree/MoveNotationStringifier.ts");
/* harmony import */ var _utils_ArrayUtils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @utils/ArrayUtils */ "./src/main/client/ts/utils/ArrayUtils.ts");
/* harmony import */ var _moveGeneration_GameInformation_GameUnits_PieceString__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @moveGeneration/GameInformation/GameUnits/PieceString */ "./src/main/client/ts/logic/movegen/GameInformation/GameUnits/PieceString.ts");
/* harmony import */ var _moveGeneration_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @moveGeneration/GameInformation/GameData */ "./src/main/client/ts/logic/movegen/GameInformation/GameData.ts");
/* harmony import */ var _moveGeneration_FENData_FENOptions_FENOptionsTagsInterface__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @moveGeneration/FENData/FENOptions/FENOptionsTagsInterface */ "./src/main/client/ts/logic/movegen/FENData/FENOptions/FENOptionsTagsInterface.ts");
function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }
function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }
function _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }
function _toPropertyKey(arg) { var key = _toPrimitive(arg, "string"); return typeof key === "symbol" ? key : String(key); }
function _toPrimitive(input, hint) { if (typeof input !== "object" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || "default"); if (typeof res !== "object") return res; throw new TypeError("@@toPrimitive must return a primitive value."); } return (hint === "string" ? String : Number)(input); }
function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }
function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function _iterableToArrayLimit(arr, i) { var _i = null == arr ? null : "undefined" != typeof Symbol && arr[Symbol.iterator] || arr["@@iterator"]; if (null != _i) { var _s, _e, _x, _r, _arr = [], _n = !0, _d = !1; try { if (_x = (_i = _i.call(arr)).next, 0 === i) { if (Object(_i) !== _i) return; _n = !1; } else for (; !(_n = (_s = _x.call(_i)).done) && (_arr.push(_s.value), _arr.length !== i); _n = !0); } catch (err) { _d = !0, _e = err; } finally { try { if (!_n && null != _i.return && (_r = _i.return(), Object(_r) !== _r)) return; } finally { if (_d) throw _e; } } return _arr; } }
function _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }
function _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e2) { throw _e2; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e3) { didErr = true; err = _e3; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }
function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }
function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }






function alterCurrentPath(current, path) {
  var currentMove = [...current];
  for (var i = 0; i < currentMove.length; i++) {
    if (path[i] > currentMove[i]) break;
    if (path[i] === currentMove[i]) {
      if (i === path.length - 1) {
        currentMove = currentMove.slice(0, i + 1);
        currentMove[i]--;
        break;
      }
    } else {
      currentMove = currentMove.slice(0, i + 1);
      currentMove[i] = path[i] - 1;
      break;
    }
  }
  var indexOfMinus = currentMove.indexOf(-1);
  if (indexOfMinus !== -1) {
    currentMove = currentMove.slice(0, indexOfMinus);
    var lastNumber = 0;
    do {
      var popped = currentMove.pop();
      if (popped === undefined) {
        lastNumber = -1;
        break;
      }
      lastNumber = popped;
    } while (lastNumber <= 0);
    if (lastNumber !== -1) currentMove.push(lastNumber);
  }
  return currentMove;
}
function verifyValidMove(move) {
  return move !== undefined && !Array.isArray(move);
}
function assertValidMove(move) {
  if (!move || Array.isArray(move)) {
    throw new Error("The selected move is not a valid move");
  }
}
var createMoveTree = baseSnapshot => {
  var snapshots = new WeakMap();
  var boardHashes = new Map();
  var moves = [];
  var startingSnapshot = {
    boardSnapshot: baseSnapshot,
    get hash() {
      throw new Error("Should not access hash on base move");
    },
    get pregeneratedAttacks() {
      throw new Error("Should not access pregenerated attacks on base move");
    }
  };
  function obtainMatchingAlternativeLine(baseMoveWrapper, newMoveWrapper) {
    var _iterator = _createForOfIteratorHelper(baseMoveWrapper.alternativeLines),
      _step;
    try {
      for (_iterator.s(); !(_step = _iterator.n()).done;) {
        var _step$value = _slicedToArray(_step.value, 1),
          alternativeFirstMove = _step$value[0];
        if (alternativeFirstMove.moveData.length !== newMoveWrapper.moveData.length) continue;
        if (alternativeFirstMove.moveData.every((m, i) => (0,_MoveTreeInterface__WEBPACK_IMPORTED_MODULE_0__.compareMoves)(m, newMoveWrapper.moveData[i]))) {
          return alternativeFirstMove.path;
        }
      }
    } catch (err) {
      _iterator.e(err);
    } finally {
      _iterator.f();
    }
    return false;
  }
  function stripEmptyAlternativeLines() {
    var current = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : moves;
    var _iterator2 = _createForOfIteratorHelper(current),
      _step2;
    try {
      for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
        var moveWrapper = _step2.value;
        for (var i = 0; i < moveWrapper.alternativeLines.length; i++) {
          if (moveWrapper.alternativeLines[i].length === 0) {
            moveWrapper.alternativeLines.splice(i, 1);
          } else stripEmptyAlternativeLines(moveWrapper.alternativeLines[i]);
        }
      }
    } catch (err) {
      _iterator2.e(err);
    } finally {
      _iterator2.f();
    }
  }
  function stripDeletedMoveHashes(current, currentMove) {
    var _iterator3 = _createForOfIteratorHelper(current),
      _step3;
    try {
      for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {
        var moveWrapper = _step3.value;
        var snapshot = snapshots.get(moveWrapper);
        if (!snapshot) continue;
        var hash = snapshot.hash;
        var boardHash = boardHashes.get(hash);
        if (boardHash) {
          if (boardHash.length === 1) {
            boardHashes.delete(hash);
          } else {
            var currentLine = boardHash.findIndex(p => (0,_utils_ArrayUtils__WEBPACK_IMPORTED_MODULE_2__.compareArrays)(p, currentMove));
            if (currentLine === -1) {
              console.error("Current line for move wrapper not found in board hashes");
            } else {
              boardHash.splice(currentLine, 1);
            }
          }
        }
        var _iterator4 = _createForOfIteratorHelper(moveWrapper.alternativeLines),
          _step4;
        try {
          for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {
            var line = _step4.value;
            stripDeletedMoveHashes(line, currentMove);
          }
        } catch (err) {
          _iterator4.e(err);
        } finally {
          _iterator4.f();
        }
      }
    } catch (err) {
      _iterator3.e(err);
    } finally {
      _iterator3.f();
    }
  }
  function addBoardSnapshot(parameters, currentMove) {
    var move = parameters.move,
      snapshot = parameters.snapshot,
      fenDataString = parameters.fenDataString;
    snapshots.set(move, {
      boardSnapshot: snapshot.boardSnapshot,
      pregeneratedAttacks: snapshot.pregeneratedAttacks,
      hash: fenDataString
    });
    var boardHash = boardHashes.get(fenDataString);
    if (boardHash) {
      var hasAdditionalPath = boardHash.find(p => (0,_utils_ArrayUtils__WEBPACK_IMPORTED_MODULE_2__.compareArrays)(p, currentMove));
      boardHashes.set(fenDataString, hasAdditionalPath ? boardHash : [...boardHash, currentMove.slice()]);
    } else boardHashes.set(fenDataString, [currentMove.slice()]);
  }
  var assignMoveWrapperKey = (object, key, value) => {
    object[key] = value;
  };
  return {
    moves,
    currentMove: [-1],
    getMove(path) {
      return (0,_MoveTreeInterface__WEBPACK_IMPORTED_MODULE_0__.getMoveFromPathAndTree)(moves, path);
    },
    setNewMove(parameters) {
      var move = parameters.move;
      var moveWrapper = this.getMove(move.path.slice(0, -1));
      var path = move.path.slice();
      if (!moveWrapper) return path;
      if (Array.isArray(moveWrapper)) {
        if (moveWrapper.length > move.path[move.path.length - 1]) {
          var currentMove = this.getMove(move.path);
          if (Array.isArray(currentMove)) {
            this.setNewMove(_objectSpread(_objectSpread({}, parameters), {}, {
              move: _objectSpread(_objectSpread({}, move), {}, {
                path: [...move.path, currentMove.length]
              })
            }));
          } else if (currentMove) {
            var alternativeLine = obtainMatchingAlternativeLine(currentMove, move);
            if (alternativeLine) {
              return alternativeLine;
            } else {
              currentMove.alternativeLines.push([]);
              var newMove = _objectSpread(_objectSpread({}, move), {}, {
                path: [...move.path, currentMove.alternativeLines.length - 1, 0]
              });
              path = newMove.path.slice();
              return this.setNewMove(_objectSpread(_objectSpread({}, parameters), {}, {
                move: newMove
              }));
            }
          }
        } else {
          moveWrapper.push(move);
          addBoardSnapshot(parameters, this.currentMove);
        }
      } else {
        var key;
        for (key in move) {
          if (Object.prototype.hasOwnProperty.call(move, key)) assignMoveWrapperKey(moveWrapper, key, move[key]);
        }
        addBoardSnapshot(parameters, this.currentMove);
      }
      return path;
    },
    getBoardSnapshot(move) {
      if (move === -1) {
        return startingSnapshot;
      } else {
        return snapshots.get(move);
      }
    },
    deleteMove(path) {
      var items = [];
      var moveWrapper = this.getMove(path.slice(0, -1));
      if (!moveWrapper) return;
      var finalIndex = path[path.length - 1];
      if (Array.isArray(moveWrapper)) {
        items = [...moveWrapper.splice(finalIndex, moveWrapper.length - finalIndex)];
      } else {
        if (moveWrapper.alternativeLines.length > 0) {
          items = moveWrapper.alternativeLines.splice(path[path.length - 1], 1)[0];
        }
      }
      stripDeletedMoveHashes(items, this.currentMove);
      stripEmptyAlternativeLines();
      var newCurrentMove = alterCurrentPath(this.currentMove, path);
      this.currentMove = newCurrentMove.length === 0 ? [-1] : newCurrentMove;
    },
    getHash(preliminaryHashString) {
      var hash = boardHashes.get(preliminaryHashString);
      if (hash === undefined) return 0;
      var totalCount = 0;
      var _iterator5 = _createForOfIteratorHelper(hash),
        _step5;
      try {
        for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {
          var line = _step5.value;
          for (var i = 0; i < line.length; i++) {
            if (i + 1 % 2 !== 0 && i === line.length - 1) {
              totalCount++;
            } else if (line[i] !== this.currentMove[i]) break;
          }
        }
      } catch (err) {
        _iterator5.e(err);
      } finally {
        _iterator5.f();
      }
      return totalCount;
    },
    stringifyMove(moveWrapper, dimension) {
      var snapshot = this.getBoardSnapshot(moveWrapper);
      if (!snapshot) {
        console.error("No snapshot assigned when moveWrapper is called");
        return "";
      }
      var key;
      for (key in _MoveNotationStringifier__WEBPACK_IMPORTED_MODULE_1__.moveNotation) {
        if (!Object.prototype.hasOwnProperty.call(_MoveNotationStringifier__WEBPACK_IMPORTED_MODULE_1__.moveNotation, key)) continue;
        moveWrapper.cachedNames[key] = _MoveNotationStringifier__WEBPACK_IMPORTED_MODULE_1__.moveNotation[key](moveWrapper, snapshot, dimension);
      }
    },
    augmentMoveWithMetadata(parameters) {
      var move = parameters.move,
        board = parameters.board,
        makeMoveFunction = parameters.makeMoveFunction;
      var standardMove = move.find(m => (0,_MoveTreeInterface__WEBPACK_IMPORTED_MODULE_0__.verifyStandardMove)(m));
      var movingPiece = standardMove ? board.board[standardMove.startCoordinates[0]][standardMove.startCoordinates[1]] : _moveGeneration_GameInformation_GameUnits_PieceString__WEBPACK_IMPORTED_MODULE_3__.pawnPieceString;
      var capturedPieces = standardMove ? board.data.getCapturedPieces(standardMove).length !== 0 : false;
      var postMoveResults = makeMoveFunction();
      var deadColors = [...board.data.fenOptions.tag("dead")];
      var currentSideToMove = board.data.sideToMove,
        currentMove = board.moves.getMove(board.moves.currentMove);
      assertValidMove(currentMove);
      if (board.moves.currentMove[board.moves.currentMove.length - 1] === 0 || (0,_utils_ArrayUtils__WEBPACK_IMPORTED_MODULE_2__.findLastIndex)(deadColors, b => !b) === currentSideToMove) {
        var lastCurrentMoves = board.moves.getMove(board.moves.currentMove.slice(0, -1));
        if (!Array.isArray(lastCurrentMoves)) throw new Error("The selected move is not within an array");
        for (var i = lastCurrentMoves.length - 1; i >= 0; i--) {
          var lastCurrent = lastCurrentMoves[i].metadata.currentFullMove;
          if (lastCurrent) {
            currentMove.metadata.currentFullMove = lastCurrent + 1;
            break;
          } else if (i === 0) {
            if (currentMove.path.length === 1) {
              currentMove.metadata.currentFullMove = 1;
            } else {
              var alternativeLineContainer = board.moves.getMove(board.moves.currentMove.slice(0, -3));
              if (!Array.isArray(alternativeLineContainer)) throw new Error("The selected move is not within an array");
              currentMove.metadata.currentFullMove = alternativeLineContainer[(0,_utils_ArrayUtils__WEBPACK_IMPORTED_MODULE_2__.findLastIndex)(alternativeLineContainer, m => Boolean(m.metadata.currentFullMove))].metadata.currentFullMove;
            }
          }
        }
      }
      currentMove.metadata.currentSideToMove = currentSideToMove;
      currentMove.metadata.isCapture = capturedPieces;
      currentMove.metadata.movingPiece = movingPiece;
      var _iterator6 = _createForOfIteratorHelper(_moveGeneration_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_4__.colors),
        _step6;
      try {
        for (_iterator6.s(); !(_step6 = _iterator6.n()).done;) {
          var color = _step6.value;
          if (postMoveResults.checkmates[color]) {
            currentMove.metadata.checkmates++;
          } else if (postMoveResults.checks[color]) {
            currentMove.metadata.checks++;
          }
        }
      } catch (err) {
        _iterator6.e(err);
      } finally {
        _iterator6.f();
      }
      this.stringifyMove(currentMove, Math.max(...board.data.fenOptions.tag("dim")));
    },
    constructPreliminaryHashString(boardObject) {
      var board = boardObject.board,
        data = boardObject.data;
      var builder = "";
      builder += data.sideToMove;
      var key;
      for (key in data.fenOptions.tags) {
        var tag = data.fenOptions.tags[key];
        if (!(0,_moveGeneration_FENData_FENOptions_FENOptionsTagsInterface__WEBPACK_IMPORTED_MODULE_5__.verifyDynamicFENOptionKey)(tag, key)) continue;
        var serializedForm = tag.serialize();
        if (serializedForm) builder += serializedForm;
      }
      builder = board.reduce((p, n) => p + n.map(ps => ps.value || "-").join(""), builder);
      return builder;
    }
  };
};

/***/ }),

/***/ "./src/main/client/ts/logic/movegen/MoveTree/MoveTreeInterface.ts":
/*!************************************************************************!*\
  !*** ./src/main/client/ts/logic/movegen/MoveTree/MoveTreeInterface.ts ***!
  \************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "InternalMoveSignature": () => (/* binding */ InternalMoveSignature),
/* harmony export */   "SpecialMove": () => (/* binding */ SpecialMove),
/* harmony export */   "compareMoves": () => (/* binding */ compareMoves),
/* harmony export */   "createBaseMoveWrapper": () => (/* binding */ createBaseMoveWrapper),
/* harmony export */   "createDummyMoveMetadata": () => (/* binding */ createDummyMoveMetadata),
/* harmony export */   "getLatestChainedMoves": () => (/* binding */ getLatestChainedMoves),
/* harmony export */   "getMoveFromPathAndTree": () => (/* binding */ getMoveFromPathAndTree),
/* harmony export */   "verifyDroppingMove": () => (/* binding */ verifyDroppingMove),
/* harmony export */   "verifyDroppingMoveArray": () => (/* binding */ verifyDroppingMoveArray),
/* harmony export */   "verifyInternalMove": () => (/* binding */ verifyInternalMove),
/* harmony export */   "verifyInternalMoveArray": () => (/* binding */ verifyInternalMoveArray),
/* harmony export */   "verifyMoveWrapperProperties": () => (/* binding */ verifyMoveWrapperProperties),
/* harmony export */   "verifyRequiredMove": () => (/* binding */ verifyRequiredMove),
/* harmony export */   "verifyStandardMove": () => (/* binding */ verifyStandardMove),
/* harmony export */   "verifyStandardMoveArray": () => (/* binding */ verifyStandardMoveArray)
/* harmony export */ });
/* harmony import */ var _Board_BoardInterface__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Board/BoardInterface */ "./src/main/client/ts/logic/movegen/Board/BoardInterface.ts");
/* harmony import */ var _GameInformation_GameUnits_PieceString__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../GameInformation/GameUnits/PieceString */ "./src/main/client/ts/logic/movegen/GameInformation/GameUnits/PieceString.ts");
function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }
function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }
function _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }
function _toPropertyKey(arg) { var key = _toPrimitive(arg, "string"); return typeof key === "symbol" ? key : String(key); }
function _toPrimitive(input, hint) { if (typeof input !== "object" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || "default"); if (typeof res !== "object") return res; throw new TypeError("@@toPrimitive must return a primitive value."); } return (hint === "string" ? String : Number)(input); }


var SpecialMove = /*#__PURE__*/function (SpecialMove) {
  SpecialMove[SpecialMove["CastlingKingside"] = 0] = "CastlingKingside";
  SpecialMove[SpecialMove["CastlingQueenside"] = 1] = "CastlingQueenside";
  SpecialMove[SpecialMove["EnPassant"] = 2] = "EnPassant";
  return SpecialMove;
}({});
var InternalMoveSignature = /*#__PURE__*/function (InternalMoveSignature) {
  InternalMoveSignature["Resign"] = "R";
  InternalMoveSignature["Timeout"] = "T";
  InternalMoveSignature["ClaimWin"] = "C";
  InternalMoveSignature["DrawByAgreement"] = "D";
  InternalMoveSignature["Stalemate"] = "S";
  InternalMoveSignature["Pass"] = "P";
  InternalMoveSignature["TeamsCheckmate"] = "#";
  return InternalMoveSignature;
}({});
var verifyRequiredMove = move => move.length > 0;
function verifyMoveWrapperProperties(moveWrapper) {
  return Boolean(moveWrapper.alternativeLines && moveWrapper.comment !== undefined && moveWrapper.path && moveWrapper.metadata && moveWrapper.moveData);
}
function compareMoves(move1, move2) {
  if (verifyStandardMove(move1)) {
    if (!verifyStandardMove(move2)) return false;
    return (0,_Board_BoardInterface__WEBPACK_IMPORTED_MODULE_0__.compareCoordinates)(move1.startCoordinates, move2.startCoordinates) && (0,_Board_BoardInterface__WEBPACK_IMPORTED_MODULE_0__.compareCoordinates)(move1.endCoordinates, move2.endCoordinates) && (move1.specialType === move2.specialType || move1.specialType === SpecialMove.EnPassant || move2.specialType === SpecialMove.EnPassant);
  } else if (verifyDroppingMove(move1)) {
    if (!verifyDroppingMove(move2)) return false;
    return (0,_Board_BoardInterface__WEBPACK_IMPORTED_MODULE_0__.compareCoordinates)(move1.endCoordinates, move2.endCoordinates) && _GameInformation_GameUnits_PieceString__WEBPACK_IMPORTED_MODULE_1__.PieceString.comparePieceStrings(move1.piece, move2.piece);
  } else if (verifyInternalMove(move1)) {
    if (!verifyInternalMove(move2)) return false;
    return move1.type === move2.type;
  }
  throw new Error("Unexpected move signature of first move ".concat(JSON.stringify(move1)));
}
function createDummyMoveMetadata() {
  return {
    isCapture: false,
    movingPiece: _GameInformation_GameUnits_PieceString__WEBPACK_IMPORTED_MODULE_1__.pawnPieceString,
    checks: 0,
    checkmates: 0,
    currentSideToMove: 0,
    highlightedArrows: [],
    highlightedSquares: []
  };
}
var createBaseMoveWrapper = function createBaseMoveWrapper(requiredSettings) {
  var settings = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
  var wrapper = {
    path: requiredSettings.path,
    moveData: requiredSettings.moveData,
    comment: "",
    alternativeLines: [],
    metadata: createDummyMoveMetadata(),
    cachedNames: {
      fullMoveNotation: "",
      shortenedMoveNotation: ""
    }
  };
  return _objectSpread(_objectSpread({}, wrapper), settings);
};
var verifyInternalMove = move => "type" in move;
var verifyDroppingMove = move => "piece" in move;
var verifyStandardMove = move => "startCoordinates" in move;
var verifyInternalMoveArray = move => "type" in move[0];
var verifyDroppingMoveArray = move => "piece" in move[0];
var verifyStandardMoveArray = move => "startCoordinates" in move[0];
var getMoveFromPathAndTree = (moves, path) => {
  var _movePath$shift;
  if (path.length === 0) return moves;
  var movePath = path.slice();
  if (movePath[0] >= moves.length) return;
  var currentSelection = moves[(_movePath$shift = movePath.shift()) !== null && _movePath$shift !== void 0 ? _movePath$shift : 0];
  while (movePath.length > 0) {
    var currentIndex = movePath.shift();
    if (currentIndex !== undefined) {
      if (currentIndex >= currentSelection.alternativeLines.length) return;
      var alternativeLine = currentSelection.alternativeLines[currentIndex];
      var index = movePath.shift();
      if (index === undefined) {
        return alternativeLine;
      }
      if (index >= alternativeLine.length) return;
      currentSelection = alternativeLine[index];
    }
  }
  return currentSelection;
};
var getLatestChainedMoves = move => {
  if (move.length > 0 && move[0].nextChainedMoves) {
    return getLatestChainedMoves(move[0].nextChainedMoves);
  } else return move;
};

/***/ }),

/***/ "./src/main/client/ts/logic/movegen/MoveTree/MoveTreeValidator.ts":
/*!************************************************************************!*\
  !*** ./src/main/client/ts/logic/movegen/MoveTree/MoveTreeValidator.ts ***!
  \************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "changeGameTermination": () => (/* binding */ changeGameTermination),
/* harmony export */   "validateMoveTree": () => (/* binding */ validateMoveTree)
/* harmony export */ });
/* harmony import */ var _client_ts_baseTypes__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @client/ts/baseTypes */ "./src/main/client/ts/baseTypes.ts");
/* harmony import */ var _utils_ArrayUtils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @utils/ArrayUtils */ "./src/main/client/ts/utils/ArrayUtils.ts");
/* harmony import */ var _Board_BoardMoveValidator__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../Board/BoardMoveValidator */ "./src/main/client/ts/logic/movegen/Board/BoardMoveValidator.ts");
/* harmony import */ var _GameInformation_GameData__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../GameInformation/GameData */ "./src/main/client/ts/logic/movegen/GameInformation/GameData.ts");
/* harmony import */ var _GameInformation_GameUnits_PieceString__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../GameInformation/GameUnits/PieceString */ "./src/main/client/ts/logic/movegen/GameInformation/GameUnits/PieceString.ts");
/* harmony import */ var _MoveTree__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./MoveTree */ "./src/main/client/ts/logic/movegen/MoveTree/MoveTree.ts");
/* harmony import */ var _MoveTreeInterface__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./MoveTreeInterface */ "./src/main/client/ts/logic/movegen/MoveTree/MoveTreeInterface.ts");
function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }
function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }
function _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }
function _toPropertyKey(arg) { var key = _toPrimitive(arg, "string"); return typeof key === "symbol" ? key : String(key); }
function _toPrimitive(input, hint) { if (typeof input !== "object" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || "default"); if (typeof res !== "object") return res; throw new TypeError("@@toPrimitive must return a primitive value."); } return (hint === "string" ? String : Number)(input); }
function _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }
function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }
function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }







function validateMoveTree(board, moves) {
  var clonedBoard = board.createClone();
  clonedBoard.moves = (0,_MoveTree__WEBPACK_IMPORTED_MODULE_5__.createMoveTree)(clonedBoard.createSnapshot());
  clonedBoard.pregenerateAttacks();
  var dimension = Math.max(...clonedBoard.data.fenOptions.tag("dim"));
  function traverse(current) {
    var currentFullMove = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;
    var currentTimeOnClocks = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : (0,_client_ts_baseTypes__WEBPACK_IMPORTED_MODULE_0__.createTuple)(board.gameData.timeControl.baseTime, _GameInformation_GameData__WEBPACK_IMPORTED_MODULE_3__.totalPlayers);
    var moves = [];
    var previousSideToMove = -1;
    for (var i = 0; i < current.length; i++) {
      var moveWrapper = current[i];
      var moveData = moveWrapper.moveData,
        path = moveWrapper.path,
        alternativeLines = moveWrapper.alternativeLines;
      var newMoveWrapper = (0,_MoveTreeInterface__WEBPACK_IMPORTED_MODULE_6__.createBaseMoveWrapper)({
        moveData,
        path: path.slice()
      }, {
        comment: moveWrapper.comment
      });
      var validationResult = void 0;
      try {
        if (validationResult = (0,_Board_BoardMoveValidator__WEBPACK_IMPORTED_MODULE_2__.validateBoardMove)(clonedBoard, moveData) || undefined) {
          newMoveWrapper.moveData = moveData;
        } else break;
      } catch (_unused) {
        break;
      }
      var firstStandardMoveSet = false;
      var _iterator = _createForOfIteratorHelper(moveData),
        _step;
      try {
        for (_iterator.s(); !(_step = _iterator.n()).done;) {
          var moveComponent = _step.value;
          if ((0,_MoveTreeInterface__WEBPACK_IMPORTED_MODULE_6__.verifyStandardMove)(moveComponent)) {
            if (moveComponent.promotion) {
              moveComponent.promotion = moveComponent.promotion.map(p => {
                if (p.isWall()) return p;
                return (0,_GameInformation_GameUnits_PieceString__WEBPACK_IMPORTED_MODULE_4__.createPieceFromData)(clonedBoard.data.sideToMove, p.piece);
              });
            }
            if (!firstStandardMoveSet) {
              newMoveWrapper.metadata.movingPiece = clonedBoard.board[moveComponent.startCoordinates[0]][moveComponent.startCoordinates[1]];
              firstStandardMoveSet = true;
            }
            if (validationResult.hasEnPassant) {
              moveComponent.specialType = _MoveTreeInterface__WEBPACK_IMPORTED_MODULE_6__.SpecialMove.EnPassant;
              validationResult.hasEnPassant = false;
              newMoveWrapper.metadata.isCapture = true;
            }
            if (clonedBoard.data.getCapturedPieces(moveComponent).length > 0) newMoveWrapper.metadata.isCapture = true;
          }
        }
      } catch (err) {
        _iterator.e(err);
      } finally {
        _iterator.f();
      }
      if (i === 0 || (0,_utils_ArrayUtils__WEBPACK_IMPORTED_MODULE_1__.findLastIndex)(clonedBoard.data.fenOptions.tag("dead"), b => !b) === previousSideToMove) {
        newMoveWrapper.metadata.currentFullMove = ++currentFullMove;
      }
      newMoveWrapper.metadata.currentSideToMove = previousSideToMove = clonedBoard.data.sideToMove;
      var results = clonedBoard.makeMove(moveData);
      for (var _i = 0; _i < _GameInformation_GameData__WEBPACK_IMPORTED_MODULE_3__.totalPlayers; _i++) {
        if (results.checkmates[_i]) {
          newMoveWrapper.metadata.checkmates++;
        } else if (results.checks[_i]) {
          newMoveWrapper.metadata.checks++;
        }
      }
      var _iterator2 = _createForOfIteratorHelper(alternativeLines),
        _step2;
      try {
        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
          var line = _step2.value;
          newMoveWrapper.alternativeLines.push(traverse(line, currentFullMove, [...currentTimeOnClocks]));
        }
      } catch (err) {
        _iterator2.e(err);
      } finally {
        _iterator2.f();
      }
      if (moveWrapper.metadata.playerClock) {
        currentTimeOnClocks[previousSideToMove] -= moveWrapper.metadata.playerClock;
      }
      newMoveWrapper.metadata = _objectSpread({}, moveWrapper.metadata);
      newMoveWrapper.metadata.playerClock = currentTimeOnClocks[previousSideToMove];
      var currentMove = clonedBoard.moves.getMove(newMoveWrapper.path);
      (0,_MoveTree__WEBPACK_IMPORTED_MODULE_5__.assertValidMove)(currentMove);
      currentMove.metadata = newMoveWrapper.metadata;
      currentMove.comment = moveWrapper.comment;
      clonedBoard.moves.stringifyMove(currentMove, dimension);
    }
    return moves;
  }
  traverse(moves.moves);
  return clonedBoard.moves;
}
function changeGameTermination(board) {
  var currentMove = board.moves.getMove([board.moves.moves.length - 1]);
  var snapshot = board.moves.getBoardSnapshot((0,_MoveTree__WEBPACK_IMPORTED_MODULE_5__.verifyValidMove)(currentMove) ? currentMove : -1);
  (0,_client_ts_baseTypes__WEBPACK_IMPORTED_MODULE_0__.assertNonUndefined)(snapshot);
  if (snapshot.boardSnapshot.data.gameOver) {
    board.gameData.termination = snapshot.boardSnapshot.data.gameOver;
    if (board.gameData.result) return;
    if (board.isTwoPlayer || board.gameType.type === _GameInformation_GameData__WEBPACK_IMPORTED_MODULE_3__.VariantType.Teams) {
      var currentSnapshot = board.createSnapshot();
      board.loadSnapshot(snapshot.boardSnapshot);
      board.gameData.result = board.data.getCurrentResult();
      board.loadSnapshot(currentSnapshot);
    } else {
      var currentResults = [];
      var dead = board.data.fenOptions.tag("dead"),
        resigned = board.data.fenOptions.tag("resigned"),
        wb = board.data.fenOptions.tag("wb"),
        points = snapshot.boardSnapshot.data.points;
      var _iterator3 = _createForOfIteratorHelper(_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_3__.colors),
        _step3;
      try {
        for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {
          var color = _step3.value;
          if (dead[color] || resigned[color]) continue;
          currentResults.push("".concat((0,_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_3__.getPlayerNameFromColor)(color, wb), ": ").concat(points[color]));
        }
      } catch (err) {
        _iterator3.e(err);
      } finally {
        _iterator3.f();
      }
      board.gameData.result = currentResults.join(" – ");
    }
  }
}

/***/ }),

/***/ "./src/main/client/ts/logic/movegen/PieceControl/PieceControl.ts":
/*!***********************************************************************!*\
  !*** ./src/main/client/ts/logic/movegen/PieceControl/PieceControl.ts ***!
  \***********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "PieceControl": () => (/* binding */ PieceControl)
/* harmony export */ });
/* harmony import */ var _moveGeneration_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @moveGeneration/GameInformation/GameData */ "./src/main/client/ts/logic/movegen/GameInformation/GameData.ts");
/* harmony import */ var _GameInformation_GameUnits_PieceString__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../GameInformation/GameUnits/PieceString */ "./src/main/client/ts/logic/movegen/GameInformation/GameUnits/PieceString.ts");
/* harmony import */ var _PieceControlInterface__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./PieceControlInterface */ "./src/main/client/ts/logic/movegen/PieceControl/PieceControlInterface.ts");
function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }
function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }
function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }
function _iterableToArrayLimit(arr, i) { var _i = null == arr ? null : "undefined" != typeof Symbol && arr[Symbol.iterator] || arr["@@iterator"]; if (null != _i) { var _s, _e, _x, _r, _arr = [], _n = !0, _d = !1; try { if (_x = (_i = _i.call(arr)).next, 0 === i) { if (Object(_i) !== _i) return; _n = !1; } else for (; !(_n = (_s = _x.call(_i)).done) && (_arr.push(_s.value), _arr.length !== i); _n = !0); } catch (err) { _d = !0, _e = err; } finally { try { if (!_n && null != _i.return && (_r = _i.return(), Object(_r) !== _r)) return; } finally { if (_d) throw _e; } } return _arr; } }
function _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }
function _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }
function _toPropertyKey(arg) { var key = _toPrimitive(arg, "string"); return typeof key === "symbol" ? key : String(key); }
function _toPrimitive(input, hint) { if (typeof input !== "object" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || "default"); if (typeof res !== "object") return res; throw new TypeError("@@toPrimitive must return a primitive value."); } return (hint === "string" ? String : Number)(input); }



class PieceControl {
  initDecoratorSettings() {
    /* no-op */
  }
  /*---------------------------------- INITIALIZATION -----------------------------------------*/

  constructor() {
    _defineProperty(this, "color", void 0);
    _defineProperty(this, "sliding", void 0);
    _defineProperty(this, "jumping", void 0);
    _defineProperty(this, "hooks", void 0);
    _defineProperty(this, "moves", void 0);
    _defineProperty(this, "rayGenCache", void 0);
    _defineProperty(this, "baseRankActive", void 0);
    _defineProperty(this, "immunePieces", void 0);
    _defineProperty(this, "fenData", void 0);
    _defineProperty(this, "board", void 0);
    _defineProperty(this, "i", void 0);
    _defineProperty(this, "j", void 0);
    _defineProperty(this, "__baseClass", void 0);
    this.moves = [];
    this.color = 0;
    this.sliding = [];
    this.jumping = [];
    this.rayGenCache = [];
    this.hooks = {
      useTrajectory: undefined,
      usePerspective: undefined,
      usePawnLogic: undefined,
      useHopping: false
    };
    this.baseRankActive = false;
    this.immunePieces = [false, false, false, false];
    this.__baseClass = this;
  }
  configure(configuration) {
    var _configuration$baseRa;
    this.color = configuration.color;
    this.immunePieces = configuration.immunePieces;
    var _configuration$coordi = _slicedToArray(configuration.coordinates, 2);
    this.i = _configuration$coordi[0];
    this.j = _configuration$coordi[1];
    var baseRankCalc = [13 - this.i, this.j, this.i, 13 - this.j][this.color] - this.fenData.fenOptions.tag("pawnBaseRank");
    this.baseRankActive = (_configuration$baseRa = configuration.baseRank) !== null && _configuration$baseRa !== void 0 ? _configuration$baseRa : baseRankCalc === -1 || baseRankCalc === -2;
    this.board = configuration.board;
  }
  setFENData(fenData) {
    this.fenData = fenData;
  }
  isRayTrace(attackType) {
    return attackType === _PieceControlInterface__WEBPACK_IMPORTED_MODULE_2__.AttackType.RayTrace || attackType === _PieceControlInterface__WEBPACK_IMPORTED_MODULE_2__.AttackType.RayTraceLimited;
  }

  /*---------------------------------- INITIALIZATION -----------------------------------------*/
  /*-------------------------------------------------------------------------------------------*/
  /*--------------------------------- MOVE GENERATION -----------------------------------------*/

  modifyDisplacements(i, j) {
    var baseDisplacements = [[i, j], [j, -i], [-i, -j], [-j, i]];
    return baseDisplacements[this.color];
  }
  pushMove(settings) {
    if (!settings.isRayGen && this.hooks.usePawnLogic && this.hooks.usePawnLogic.promotionRanks && this.hooks.usePawnLogic.promotionRanks[this.color] === (this.color % 2 === 0 ? settings.i : settings.j) && this.hooks.usePawnLogic.promotionPieces) {
      var _settings$irreversibl;
      this.moves.push({
        move: [settings.i, settings.j, this.hooks.usePawnLogic.promotionPieces.join("")],
        irreversible: (_settings$irreversibl = settings.irreversible) !== null && _settings$irreversibl !== void 0 ? _settings$irreversibl : false
      });
      return;
    } else {
      var _settings$irreversibl2;
      this.moves.push({
        move: [settings.i, settings.j],
        irreversible: (_settings$irreversibl2 = settings.irreversible) !== null && _settings$irreversibl2 !== void 0 ? _settings$irreversibl2 : false
      });
    }
  }
  generateSlidingAttack(settings) {
    var _settings$limit, _settings$special, _this$hooks$usePerspe;
    var _settings$displacemen = _slicedToArray(settings.displacement, 2),
      displacementI = _settings$displacemen[0],
      displacementJ = _settings$displacemen[1],
      limit = (_settings$limit = settings.limit) !== null && _settings$limit !== void 0 ? _settings$limit : Infinity;
    var rayGenCache = settings.rayGenCache,
      special = (_settings$special = settings.special) !== null && _settings$special !== void 0 ? _settings$special : _PieceControlInterface__WEBPACK_IMPORTED_MODULE_2__.AttackType.Normal;
    var rayTraceLimit = 0;
    if ((_this$hooks$usePerspe = this.hooks.usePerspective) !== null && _this$hooks$usePerspe !== void 0 && _this$hooks$usePerspe[this.color]) {
      var _this$modifyDisplacem = this.modifyDisplacements(displacementI, displacementJ);
      var _this$modifyDisplacem2 = _slicedToArray(_this$modifyDisplacem, 2);
      displacementI = _this$modifyDisplacem2[0];
      displacementJ = _this$modifyDisplacem2[1];
    }
    var startI = this.i + displacementI,
      startJ = this.j + displacementJ;
    var iLength = this.board[0].length,
      jLength = this.board.length;
    var isRayGen = rayGenCache !== null && rayGenCache !== void 0 ? rayGenCache : this.isRayTrace(special);
    while (limit > 0 && startI >= 0 && startI < iLength && startJ >= 0 && startJ < jLength) {
      // TODO add trajectories?
      if (this.getMovePossibility({
        displacement: [startI, startJ],
        special,
        rayGenCache
      })) {
        this.pushMove({
          i: startI,
          j: startJ,
          isRayGen: Boolean(isRayGen),
          irreversible: settings.irreversible
        });
      }
      if (special === _PieceControlInterface__WEBPACK_IMPORTED_MODULE_2__.AttackType.RayTraceLimited && !this.board[startI][startJ].isEmpty()) {
        rayTraceLimit++;
        if (rayTraceLimit === 2) break;
      }
      if (!this.isRayTrace(special) && !this.board[startI][startJ].isEmpty()) {
        break;
      }
      startI += displacementI;
      startJ += displacementJ;
      limit--;
    }
  }
  generateJumpAttack(settings) {
    var _settings$special2, _this$hooks$usePerspe2;
    var _settings$displacemen2 = _slicedToArray(settings.displacement, 2),
      displacementI = _settings$displacemen2[0],
      displacementJ = _settings$displacemen2[1];
    var rayGenCache = settings.rayGenCache,
      squareBlockingIndex = settings.squareBlockingIndex,
      special = (_settings$special2 = settings.special) !== null && _settings$special2 !== void 0 ? _settings$special2 : _PieceControlInterface__WEBPACK_IMPORTED_MODULE_2__.AttackType.Normal;
    if ((_this$hooks$usePerspe2 = this.hooks.usePerspective) !== null && _this$hooks$usePerspe2 !== void 0 && _this$hooks$usePerspe2[this.color]) {
      var _this$modifyDisplacem3 = this.modifyDisplacements(displacementI, displacementJ);
      var _this$modifyDisplacem4 = _slicedToArray(_this$modifyDisplacem3, 2);
      displacementI = _this$modifyDisplacem4[0];
      displacementJ = _this$modifyDisplacem4[1];
    }
    var startI = this.i + displacementI,
      startJ = this.j + displacementJ;
    var isRayGen = rayGenCache !== null && rayGenCache !== void 0 ? rayGenCache : this.isRayTrace(special);
    var isTestPassed = true;
    if (this.hooks.useTrajectory && squareBlockingIndex !== undefined) {
      var _this$hooks$usePerspe3;
      var trajectory = this.hooks.useTrajectory[squareBlockingIndex];
      var trajectoryX, trajectoryY;
      if ((_this$hooks$usePerspe3 = this.hooks.usePerspective) !== null && _this$hooks$usePerspe3 !== void 0 && _this$hooks$usePerspe3[this.color]) {
        var _this$modifyDisplacem5 = this.modifyDisplacements(trajectory[0], trajectory[1]);
        var _this$modifyDisplacem6 = _slicedToArray(_this$modifyDisplacem5, 2);
        trajectoryX = _this$modifyDisplacem6[0];
        trajectoryY = _this$modifyDisplacem6[1];
      } else {
        trajectoryX = trajectory[0], trajectoryY = trajectory[1];
      }
      if (!this.getMovePossibility({
        displacement: [this.i + trajectoryX, this.j + trajectoryY],
        special,
        rayGenCache
      })) {
        isTestPassed = false;
      }
    }
    if (isTestPassed && this.getMovePossibility({
      displacement: [startI, startJ],
      special,
      rayGenCache
    })) {
      this.pushMove({
        i: startI,
        j: startJ,
        isRayGen: Boolean(isRayGen),
        irreversible: settings.irreversible
      });
    }
  }
  getMovePossibility(configuration) {
    var _configuration$displa = _slicedToArray(configuration.displacement, 2),
      i = _configuration$displa[0],
      j = _configuration$displa[1],
      rayGenCache = configuration.rayGenCache,
      special = configuration.special;
    if (i < 0 || i >= _moveGeneration_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_0__.boardDimension || j < 0 || j >= _moveGeneration_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_0__.boardDimension) return false;
    var piece = this.board[i][j];
    if (!piece.isEmpty() && piece.color !== _GameInformation_GameUnits_PieceString__WEBPACK_IMPORTED_MODULE_1__.deadColorIndex && !rayGenCache && !this.isRayTrace(special !== null && special !== void 0 ? special : _PieceControlInterface__WEBPACK_IMPORTED_MODULE_2__.AttackType.Normal)) {
      if (this.immunePieces[piece.color] || this.fenData.fenOptions.tag("zombieImmune")[piece.color]) return false;
    }
    var pushTo = () => {
      if (rayGenCache) {
        this.rayGenCache.push(rayGenCache);
      }
      return true;
    };
    if (special === undefined || special === _PieceControlInterface__WEBPACK_IMPORTED_MODULE_2__.AttackType.Normal) {
      if (!piece.isWall()) {
        return pushTo();
      }
    } else if (special === _PieceControlInterface__WEBPACK_IMPORTED_MODULE_2__.AttackType.RayGen) {
      if (!piece.isEmpty()) {
        return pushTo();
      }
    } else if (special === _PieceControlInterface__WEBPACK_IMPORTED_MODULE_2__.AttackType.AttackOnly) {
      if (!piece.isEmpty() && !piece.isWall()) {
        return pushTo();
      }
    } else if (special === _PieceControlInterface__WEBPACK_IMPORTED_MODULE_2__.AttackType.MoveOnly) {
      if (piece.isEmpty()) {
        return pushTo();
      }
    } else if (this.isRayTrace(special)) {
      return pushTo();
    }
    return false;
  }

  /*--------------------------------- MOVE GENERATION -----------------------------------------*/
  /*-------------------------------------------------------------------------------------------*/
  /*------------------------------- OUTPUT GENERATION -----------------------------------------*/

  getPossibleCells() {
    if (this.hooks.useHopping) {
      this.sliding.forEach(displacement => this.generateSlidingAttack({
        displacement,
        special: _PieceControlInterface__WEBPACK_IMPORTED_MODULE_2__.AttackType.RayGen,
        rayGenCache: [...displacement]
      }));
      var moves = this.moves.slice();
      this.moves = [];
      moves.forEach((s, i) => {
        var startI = s.move[0] + this.rayGenCache[i][0];
        var startJ = s.move[1] + this.rayGenCache[i][1];
        if (this.getMovePossibility({
          displacement: [startI, startJ]
        })) {
          this.pushMove({
            i: startI,
            j: startJ
          });
        }
      });
      this.rayGenCache = [];
    } else {
      this.sliding.forEach(a => this.generateSlidingAttack({
        displacement: a
      }));
      this.jumping.forEach(a => this.generateJumpAttack({
        displacement: a
      }));
    }
  }
  rayGenJumpingAttacks() {
    this.jumping.forEach(a => this.generateJumpAttack({
      displacement: a,
      special: _PieceControlInterface__WEBPACK_IMPORTED_MODULE_2__.AttackType.RayTrace
    }));
    return this.moves.splice(0);
  }
  rayGenSlidingAttacks(trace) {
    var slidingLines = [];
    this.sliding.forEach(a => {
      this.generateSlidingAttack({
        displacement: a,
        special: trace
      });
      if (this.moves.length !== 0) {
        slidingLines.push(this.moves.splice(0));
      }
    });
    return slidingLines;
  }
  getPseudoLegalMoves() {
    this.getPossibleCells();
    return this.moves.splice(0);
  }

  /*------------------------------- OUTPUT GENERATION -----------------------------------------*/
}

/***/ }),

/***/ "./src/main/client/ts/logic/movegen/PieceControl/PieceControlBuilder.ts":
/*!******************************************************************************!*\
  !*** ./src/main/client/ts/logic/movegen/PieceControl/PieceControlBuilder.ts ***!
  \******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "PieceControlBuilder": () => (/* binding */ PieceControlBuilder),
/* harmony export */   "PieceControlConfigurator": () => (/* binding */ PieceControlConfigurator)
/* harmony export */ });
/* harmony import */ var _client_ts_baseTypes__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @client/ts/baseTypes */ "./src/main/client/ts/baseTypes.ts");
/* harmony import */ var _moveGeneration_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @moveGeneration/GameInformation/GameData */ "./src/main/client/ts/logic/movegen/GameInformation/GameData.ts");
/* harmony import */ var _BaseInterfaces__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../BaseInterfaces */ "./src/main/client/ts/logic/BaseInterfaces.ts");
/* harmony import */ var _GameInformation_GameUnits_PieceString__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../GameInformation/GameUnits/PieceString */ "./src/main/client/ts/logic/movegen/GameInformation/GameUnits/PieceString.ts");
/* harmony import */ var _VariantRules_VariantRule__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../VariantRules/VariantRule */ "./src/main/client/ts/logic/movegen/VariantRules/VariantRule.ts");
/* harmony import */ var _VariantRules_VariantRuleSetup__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../VariantRules/VariantRuleSetup */ "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleSetup.ts");
/* harmony import */ var _PieceControl__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./PieceControl */ "./src/main/client/ts/logic/movegen/PieceControl/PieceControl.ts");
/* harmony import */ var _PieceControlInterface__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./PieceControlInterface */ "./src/main/client/ts/logic/movegen/PieceControl/PieceControlInterface.ts");
function _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }
function _toPropertyKey(arg) { var key = _toPrimitive(arg, "string"); return typeof key === "symbol" ? key : String(key); }
function _toPrimitive(input, hint) { if (typeof input !== "object" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || "default"); if (typeof res !== "object") return res; throw new TypeError("@@toPrimitive must return a primitive value."); } return (hint === "string" ? String : Number)(input); }








class PieceControlConfigurator {
  constructor(control) {
    _defineProperty(this, "_control", void 0);
    _defineProperty(this, "_isConfigured", void 0);
    this._control = control;
    this._isConfigured = {
      coordinates: [0, 0],
      board: (0,_BaseInterfaces__WEBPACK_IMPORTED_MODULE_2__.initializeBoardSquares)(() => _GameInformation_GameUnits_PieceString__WEBPACK_IMPORTED_MODULE_3__.emptyPieceString),
      immunePieces: (0,_client_ts_baseTypes__WEBPACK_IMPORTED_MODULE_0__.createTuple)(false, _moveGeneration_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_1__.totalPlayers),
      color: 0
    };
  }
  setCoordinates(x, y) {
    this._isConfigured.coordinates = [x, y];
    return this;
  }
  setBaseImmunePieces(immune) {
    this._isConfigured.immunePieces = immune;
    return this;
  }
  setColor(color) {
    this._isConfigured.color = color;
    return this;
  }
  setBoard(board) {
    this._isConfigured.board = board;
    return this;
  }
  constructPieceControl() {
    this._control.configure(this._isConfigured);
    return this._control;
  }
}
class PieceControlBuilder {
  constructor() {
    _defineProperty(this, "_generalConfig", void 0);
    this._generalConfig = {};
  }
  setFENData(fenData) {
    this._generalConfig.fenData = fenData;
  }
  setVariantRules(rules) {
    this._generalConfig.variantRules = rules;
  }
  createPieceControlWrap(letter) {
    var information = _PieceControlInterface__WEBPACK_IMPORTED_MODULE_7__.pieceControlConfigSettings[letter];
    var control = new information.construct();
    if (!this._generalConfig.fenData || !this._generalConfig.variantRules) throw new Error("PieceControl builder setup is not complete");
    control.setFENData(this._generalConfig.fenData);
    var decoratedControl = (0,_VariantRules_VariantRule__WEBPACK_IMPORTED_MODULE_4__.decorateClassWithVariants)(control, _PieceControl__WEBPACK_IMPORTED_MODULE_6__.PieceControl, (0,_VariantRules_VariantRuleSetup__WEBPACK_IMPORTED_MODULE_5__.copyVariantRules)(this._generalConfig.variantRules));
    return () => {
      return new PieceControlConfigurator(decoratedControl);
    };
  }
}

/***/ }),

/***/ "./src/main/client/ts/logic/movegen/PieceControl/PieceControlDeclarations.ts":
/*!***********************************************************************************!*\
  !*** ./src/main/client/ts/logic/movegen/PieceControl/PieceControlDeclarations.ts ***!
  \***********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "initPieceControlDeclarations": () => (/* binding */ initPieceControlDeclarations)
/* harmony export */ });
/* harmony import */ var _PieceControl__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./PieceControl */ "./src/main/client/ts/logic/movegen/PieceControl/PieceControl.ts");
/* harmony import */ var _PieceControlInterface__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./PieceControlInterface */ "./src/main/client/ts/logic/movegen/PieceControl/PieceControlInterface.ts");


var orthogonalMoves = [[-1, 0], [1, 0], [0, 1], [0, -1]];
var diagonalMoves = [[-1, -1], [1, 1], [-1, 1], [1, -1]];
var kingDirections = [...orthogonalMoves, ...diagonalMoves];
var knightHops = [[-1, -2], [-2, -1], [-1, 2], [2, -1], [-2, 1], [1, -2], [1, 2], [2, 1]];
var camelHops = [[-1, -3], [-3, -1], [-1, 3], [3, -1], [-3, 1], [1, -3], [1, 3], [3, 1]];
var dabbabaHops = [[-2, 0], [2, 0], [0, 2], [0, -2]];
var alfilHops = [[-2, -2], [2, 2], [-2, 2], [2, -2]];
var initPieceControlDeclarations = () => {
  (0,_PieceControlInterface__WEBPACK_IMPORTED_MODULE_1__.createPieceDeclaration)({
    baseClassRef: class extends _PieceControl__WEBPACK_IMPORTED_MODULE_0__.PieceControl {
      constructor() {
        super();
        this.sliding = orthogonalMoves;
      }
    },
    configuration: {
      points: {
        singlesPoints: 5,
        teamsPoints: 5,
        botFFAValue: 7,
        botTeamsValue: 7
      },
      piece: _PieceControlInterface__WEBPACK_IMPORTED_MODULE_1__.defaultPieces.rook,
      moveGenerationSettings: {
        isComplex: false,
        isJumping: false,
        isSliding: true,
        isPawn: false,
        isColorBound: false
      },
      naming: {
        name: "Rook",
        shortName: _PieceControlInterface__WEBPACK_IMPORTED_MODULE_1__.defaultPieces.rook.toLowerCase()
      }
    }
  });
  (0,_PieceControlInterface__WEBPACK_IMPORTED_MODULE_1__.createPieceDeclaration)({
    baseClassRef: class extends _PieceControl__WEBPACK_IMPORTED_MODULE_0__.PieceControl {
      constructor() {
        super();
        this.sliding = diagonalMoves;
      }
    },
    configuration: {
      points: {
        singlesPoints: 5,
        teamsPoints: 4,
        botFFAValue: 6,
        botTeamsValue: 6
      },
      piece: _PieceControlInterface__WEBPACK_IMPORTED_MODULE_1__.defaultPieces.bishop,
      moveGenerationSettings: {
        isComplex: false,
        isJumping: false,
        isSliding: true,
        isPawn: false,
        isColorBound: true
      },
      naming: {
        name: "Bishop",
        shortName: _PieceControlInterface__WEBPACK_IMPORTED_MODULE_1__.defaultPieces.bishop.toLowerCase()
      }
    }
  });
  (0,_PieceControlInterface__WEBPACK_IMPORTED_MODULE_1__.createPieceDeclaration)({
    baseClassRef: class extends _PieceControl__WEBPACK_IMPORTED_MODULE_0__.PieceControl {
      constructor() {
        super();
        this.jumping = kingDirections;
      }
    },
    configuration: {
      points: {
        singlesPoints: 3,
        teamsPoints: 0,
        botFFAValue: 3,
        botTeamsValue: 3
      },
      piece: _PieceControlInterface__WEBPACK_IMPORTED_MODULE_1__.defaultPieces.king,
      moveGenerationSettings: {
        isComplex: false,
        isJumping: true,
        isSliding: false,
        isPawn: false,
        isColorBound: false
      },
      naming: {
        name: "King",
        shortName: _PieceControlInterface__WEBPACK_IMPORTED_MODULE_1__.defaultPieces.king.toLowerCase()
      }
    }
  });
  (0,_PieceControlInterface__WEBPACK_IMPORTED_MODULE_1__.createPieceDeclaration)({
    baseClassRef: class extends _PieceControl__WEBPACK_IMPORTED_MODULE_0__.PieceControl {
      constructor() {
        super();
        this.sliding = kingDirections;
      }
    },
    configuration: {
      points: {
        singlesPoints: 9,
        teamsPoints: 10,
        botFFAValue: 14,
        botTeamsValue: 15
      },
      piece: _PieceControlInterface__WEBPACK_IMPORTED_MODULE_1__.defaultPieces.queen,
      moveGenerationSettings: {
        isComplex: false,
        isJumping: false,
        isSliding: true,
        isPawn: false,
        isColorBound: false
      },
      naming: {
        name: "Queen",
        shortName: _PieceControlInterface__WEBPACK_IMPORTED_MODULE_1__.defaultPieces.queen.toLowerCase()
      }
    }
  });
  (0,_PieceControlInterface__WEBPACK_IMPORTED_MODULE_1__.createPieceDeclaration)({
    baseClassRef: class extends _PieceControl__WEBPACK_IMPORTED_MODULE_0__.PieceControl {
      constructor() {
        super();
        this.sliding = kingDirections;
      }
    },
    configuration: {
      points: {
        singlesPoints: 9,
        teamsPoints: 10,
        botFFAValue: 13,
        botTeamsValue: 13
      },
      piece: _PieceControlInterface__WEBPACK_IMPORTED_MODULE_1__.dameLetter,
      moveGenerationSettings: {
        isComplex: false,
        isJumping: false,
        isSliding: true,
        isPawn: false,
        isColorBound: false
      },
      naming: {
        name: "1-point queen",
        shortName: _PieceControlInterface__WEBPACK_IMPORTED_MODULE_1__.dameLetter.toLowerCase()
      }
    }
  });
  (0,_PieceControlInterface__WEBPACK_IMPORTED_MODULE_1__.createPieceDeclaration)({
    baseClassRef: class extends _PieceControl__WEBPACK_IMPORTED_MODULE_0__.PieceControl {
      constructor() {
        super();
        this.jumping = knightHops;
      }
    },
    configuration: {
      points: {
        singlesPoints: 3,
        teamsPoints: 3,
        botFFAValue: 4,
        botTeamsValue: 4
      },
      piece: _PieceControlInterface__WEBPACK_IMPORTED_MODULE_1__.defaultPieces.knight,
      moveGenerationSettings: {
        isComplex: false,
        isJumping: true,
        isSliding: false,
        isPawn: false,
        isColorBound: false
      },
      naming: {
        name: "Knight",
        shortName: _PieceControlInterface__WEBPACK_IMPORTED_MODULE_1__.defaultPieces.knight.toLowerCase()
      }
    }
  });
  (0,_PieceControlInterface__WEBPACK_IMPORTED_MODULE_1__.createPieceDeclaration)({
    baseClassRef: class extends _PieceControl__WEBPACK_IMPORTED_MODULE_0__.PieceControl {
      constructor() {
        super();
        this.jumping = [...knightHops, ...kingDirections];
      }
    },
    configuration: {
      points: {
        singlesPoints: 5,
        teamsPoints: 5,
        botFFAValue: 7,
        botTeamsValue: 7
      },
      piece: "M",
      moveGenerationSettings: {
        isComplex: false,
        isJumping: true,
        isSliding: false,
        isPawn: false,
        isColorBound: false
      },
      naming: {
        name: "General",
        shortName: "m",
        description: "combines king and knight"
      }
    }
  });
  (0,_PieceControlInterface__WEBPACK_IMPORTED_MODULE_1__.createPieceDeclaration)({
    baseClassRef: class extends _PieceControl__WEBPACK_IMPORTED_MODULE_0__.PieceControl {
      constructor() {
        super();
        this.jumping = diagonalMoves;
      }
    },
    configuration: {
      points: {
        singlesPoints: 1,
        teamsPoints: 1,
        botFFAValue: 0.6,
        botTeamsValue: 0.6
      },
      piece: "F",
      moveGenerationSettings: {
        isComplex: false,
        isJumping: true,
        isSliding: false,
        isPawn: false,
        isColorBound: true
      },
      naming: {
        name: "Ferz",
        shortName: "f",
        description: "moves one square diagonally"
      }
    }
  });
  (0,_PieceControlInterface__WEBPACK_IMPORTED_MODULE_1__.createPieceDeclaration)({
    baseClassRef: class extends _PieceControl__WEBPACK_IMPORTED_MODULE_0__.PieceControl {
      constructor() {
        super();
        this.jumping = orthogonalMoves;
      }
    },
    configuration: {
      points: {
        singlesPoints: 1,
        teamsPoints: 1,
        botFFAValue: 0.4,
        botTeamsValue: 0.4
      },
      piece: "W",
      moveGenerationSettings: {
        isComplex: false,
        isJumping: true,
        isSliding: false,
        isPawn: false,
        isColorBound: false
      },
      naming: {
        name: "Wazir",
        shortName: "w",
        description: "moves one square horizontally or vertically"
      }
    }
  });
  (0,_PieceControlInterface__WEBPACK_IMPORTED_MODULE_1__.createPieceDeclaration)({
    baseClassRef: class extends _PieceControl__WEBPACK_IMPORTED_MODULE_0__.PieceControl {
      constructor() {
        super();
        this.jumping = orthogonalMoves;
      }
    },
    configuration: {
      points: {
        singlesPoints: 1,
        teamsPoints: 1,
        botFFAValue: 0.4,
        botTeamsValue: 0.4
      },
      piece: "W",
      moveGenerationSettings: {
        isComplex: false,
        isJumping: true,
        isSliding: false,
        isPawn: false,
        isColorBound: false
      },
      naming: {
        name: "Wazir",
        shortName: "w",
        description: "moves one square horizontally or vertically"
      }
    }
  });
  (0,_PieceControlInterface__WEBPACK_IMPORTED_MODULE_1__.createPieceDeclaration)({
    baseClassRef: class extends _PieceControl__WEBPACK_IMPORTED_MODULE_0__.PieceControl {
      constructor() {
        super();
        this.jumping = dabbabaHops;
      }
    },
    configuration: {
      points: {
        singlesPoints: 1,
        teamsPoints: 1,
        botFFAValue: 1.6,
        botTeamsValue: 1.6
      },
      piece: "S",
      moveGenerationSettings: {
        isComplex: false,
        isJumping: true,
        isSliding: false,
        isPawn: false,
        isColorBound: true
      },
      naming: {
        name: "Dabbaba",
        shortName: "s",
        description: "jumps two squares horizontally or vertically"
      }
    }
  });
  (0,_PieceControlInterface__WEBPACK_IMPORTED_MODULE_1__.createPieceDeclaration)({
    baseClassRef: class extends _PieceControl__WEBPACK_IMPORTED_MODULE_0__.PieceControl {
      constructor() {
        super();
        this.sliding = dabbabaHops;
      }
    },
    configuration: {
      points: {
        singlesPoints: 4,
        teamsPoints: 4,
        botFFAValue: 5.4,
        botTeamsValue: 5.4
      },
      piece: "T",
      moveGenerationSettings: {
        isComplex: false,
        isJumping: false,
        isSliding: true,
        isPawn: false,
        isColorBound: true
      },
      naming: {
        name: "Dabbaba-rider",
        shortName: "t"
      }
    }
  });
  (0,_PieceControlInterface__WEBPACK_IMPORTED_MODULE_1__.createPieceDeclaration)({
    baseClassRef: class extends _PieceControl__WEBPACK_IMPORTED_MODULE_0__.PieceControl {
      constructor() {
        super();
        this.jumping = alfilHops;
      }
    },
    configuration: {
      points: {
        singlesPoints: 1,
        teamsPoints: 1,
        botFFAValue: 0.5,
        botTeamsValue: 0.5
      },
      piece: "I",
      moveGenerationSettings: {
        isComplex: false,
        isJumping: true,
        isSliding: false,
        isPawn: false,
        isColorBound: true
      },
      naming: {
        name: "Alfil",
        shortName: "i",
        description: "jumps two squares diagonally"
      }
    }
  });
  (0,_PieceControlInterface__WEBPACK_IMPORTED_MODULE_1__.createPieceDeclaration)({
    baseClassRef: class extends _PieceControl__WEBPACK_IMPORTED_MODULE_0__.PieceControl {
      constructor() {
        super();
        this.sliding = alfilHops;
      }
    },
    configuration: {
      points: {
        singlesPoints: 3,
        teamsPoints: 3,
        botFFAValue: 4.5,
        botTeamsValue: 4.5
      },
      piece: "J",
      moveGenerationSettings: {
        isComplex: false,
        isJumping: false,
        isSliding: true,
        isPawn: false,
        isColorBound: true
      },
      naming: {
        name: "Alfil-rider",
        shortName: "j"
      }
    }
  });
  (0,_PieceControlInterface__WEBPACK_IMPORTED_MODULE_1__.createPieceDeclaration)({
    baseClassRef: class extends _PieceControl__WEBPACK_IMPORTED_MODULE_0__.PieceControl {
      constructor() {
        super();
        this.jumping = [...alfilHops, ...dabbabaHops];
      }
    },
    configuration: {
      points: {
        singlesPoints: 3,
        teamsPoints: 3,
        botFFAValue: 3,
        botTeamsValue: 3
      },
      piece: "Y",
      moveGenerationSettings: {
        isComplex: false,
        isJumping: true,
        isSliding: false,
        isPawn: false,
        isColorBound: true
      },
      naming: {
        name: "Alibaba",
        shortName: "y",
        description: "combines alfil and dabbaba"
      }
    }
  });
  (0,_PieceControlInterface__WEBPACK_IMPORTED_MODULE_1__.createPieceDeclaration)({
    baseClassRef: class extends _PieceControl__WEBPACK_IMPORTED_MODULE_0__.PieceControl {
      constructor() {
        super();
        this.sliding = [...alfilHops, ...dabbabaHops];
      }
    },
    configuration: {
      points: {
        singlesPoints: 6,
        teamsPoints: 6,
        botFFAValue: 6.2,
        botTeamsValue: 6.2
      },
      piece: "Z",
      moveGenerationSettings: {
        isComplex: false,
        isJumping: false,
        isSliding: true,
        isPawn: false,
        isColorBound: true
      },
      naming: {
        name: "Alibaba-rider",
        shortName: "z"
      }
    }
  });
  (0,_PieceControlInterface__WEBPACK_IMPORTED_MODULE_1__.createPieceDeclaration)({
    baseClassRef: class extends _PieceControl__WEBPACK_IMPORTED_MODULE_0__.PieceControl {
      constructor() {
        super();
        this.jumping = knightHops;
        this.sliding = kingDirections;
      }
    },
    configuration: {
      points: {
        singlesPoints: 12,
        teamsPoints: 12,
        botFFAValue: 17,
        botTeamsValue: 17
      },
      piece: "A",
      moveGenerationSettings: {
        isComplex: false,
        isJumping: true,
        isSliding: true,
        isPawn: false,
        isColorBound: false
      },
      naming: {
        name: "Amazon",
        shortName: "a",
        description: "combines queen and knight"
      }
    }
  });
  (0,_PieceControlInterface__WEBPACK_IMPORTED_MODULE_1__.createPieceDeclaration)({
    baseClassRef: class extends _PieceControl__WEBPACK_IMPORTED_MODULE_0__.PieceControl {
      constructor() {
        super();
        this.jumping = camelHops;
      }
    },
    configuration: {
      points: {
        singlesPoints: 3,
        teamsPoints: 3,
        botFFAValue: 4.2,
        botTeamsValue: 4.2
      },
      piece: "C",
      moveGenerationSettings: {
        isComplex: false,
        isJumping: true,
        isSliding: false,
        isPawn: false,
        isColorBound: true
      },
      naming: {
        name: "Camel",
        shortName: "c",
        description: "an elongated 3-1 knight"
      }
    }
  });
  (0,_PieceControlInterface__WEBPACK_IMPORTED_MODULE_1__.createPieceDeclaration)({
    baseClassRef: class extends _PieceControl__WEBPACK_IMPORTED_MODULE_0__.PieceControl {
      constructor() {
        super();
        this.jumping = knightHops;
        this.sliding = orthogonalMoves;
      }
    },
    configuration: {
      points: {
        singlesPoints: 7,
        teamsPoints: 7,
        botFFAValue: 10,
        botTeamsValue: 10
      },
      piece: "E",
      moveGenerationSettings: {
        isComplex: false,
        isJumping: true,
        isSliding: true,
        isPawn: false,
        isColorBound: false
      },
      naming: {
        name: "Chancellor",
        shortName: "a",
        description: "combines rook and knight"
      }
    }
  });
  (0,_PieceControlInterface__WEBPACK_IMPORTED_MODULE_1__.createPieceDeclaration)({
    baseClassRef: class extends _PieceControl__WEBPACK_IMPORTED_MODULE_0__.PieceControl {
      constructor() {
        super();
        this.jumping = knightHops;
        this.sliding = diagonalMoves;
      }
    },
    configuration: {
      points: {
        singlesPoints: 7,
        teamsPoints: 7,
        botFFAValue: 9,
        botTeamsValue: 9
      },
      piece: "H",
      moveGenerationSettings: {
        isComplex: false,
        isJumping: true,
        isSliding: true,
        isPawn: false,
        isColorBound: false
      },
      naming: {
        name: "Archbishop",
        shortName: "h",
        description: "combines bishop and knight"
      }
    }
  });
  (0,_PieceControlInterface__WEBPACK_IMPORTED_MODULE_1__.createPieceDeclaration)({
    baseClassRef: class extends _PieceControl__WEBPACK_IMPORTED_MODULE_0__.PieceControl {
      constructor() {
        super();
        this.sliding = knightHops;
      }
    },
    configuration: {
      points: {
        singlesPoints: 7,
        teamsPoints: 7,
        botFFAValue: 10,
        botTeamsValue: 10
      },
      piece: "O",
      moveGenerationSettings: {
        isComplex: false,
        isJumping: false,
        isSliding: true,
        isPawn: false,
        isColorBound: false
      },
      naming: {
        name: "Knight-rider",
        shortName: "o"
      }
    }
  });
  (0,_PieceControlInterface__WEBPACK_IMPORTED_MODULE_1__.createPieceDeclaration)({
    baseClassRef: class extends _PieceControl__WEBPACK_IMPORTED_MODULE_0__.PieceControl {
      constructor() {
        super();
        this.sliding = camelHops;
      }
    },
    configuration: {
      points: {
        singlesPoints: 7,
        teamsPoints: 7,
        botFFAValue: 8,
        botTeamsValue: 8
      },
      piece: "L",
      moveGenerationSettings: {
        isComplex: false,
        isJumping: false,
        isSliding: true,
        isPawn: false,
        isColorBound: true
      },
      naming: {
        name: "Camel-rider",
        shortName: "l"
      }
    }
  });
  (0,_PieceControlInterface__WEBPACK_IMPORTED_MODULE_1__.createPieceDeclaration)({
    baseClassRef: class extends _PieceControl__WEBPACK_IMPORTED_MODULE_0__.PieceControl {
      constructor() {
        super();
        this.jumping = [...camelHops, ...knightHops];
      }
    },
    configuration: {
      points: {
        singlesPoints: 5,
        teamsPoints: 5,
        botFFAValue: 8,
        botTeamsValue: 8
      },
      piece: "V",
      moveGenerationSettings: {
        isComplex: false,
        isJumping: true,
        isSliding: false,
        isPawn: false,
        isColorBound: false
      },
      naming: {
        name: "Wildebeest",
        shortName: "v",
        description: "combines camel and knight"
      }
    }
  });
  (0,_PieceControlInterface__WEBPACK_IMPORTED_MODULE_1__.createPieceDeclaration)({
    baseClassRef: class extends _PieceControl__WEBPACK_IMPORTED_MODULE_0__.PieceControl {
      constructor() {
        super();
        this.hooks.usePerspective = [true, true, true, true];
        this.hooks.usePawnLogic = {};
      }
      getPossibleCells() {
        this.generateJumpAttack({
          displacement: [-1, -1],
          special: _PieceControlInterface__WEBPACK_IMPORTED_MODULE_1__.AttackType.AttackOnly
        });
        this.generateJumpAttack({
          displacement: [-1, 1],
          special: _PieceControlInterface__WEBPACK_IMPORTED_MODULE_1__.AttackType.AttackOnly
        });
        this.generateSlidingAttack({
          displacement: [-1, 0],
          special: _PieceControlInterface__WEBPACK_IMPORTED_MODULE_1__.AttackType.MoveOnly,
          limit: this.baseRankActive ? 2 : 1,
          irreversible: true
        });
        return this.moves;
      }
      rayGenJumpingAttacks() {
        this.generateJumpAttack({
          displacement: [-1, -1],
          special: _PieceControlInterface__WEBPACK_IMPORTED_MODULE_1__.AttackType.RayTrace
        });
        this.generateJumpAttack({
          displacement: [-1, 1],
          special: _PieceControlInterface__WEBPACK_IMPORTED_MODULE_1__.AttackType.RayTrace
        });
        var moves = this.moves.slice();
        this.moves = [];
        return moves;
      }
    },
    configuration: {
      points: {
        singlesPoints: 1,
        teamsPoints: 1,
        botFFAValue: 1,
        botTeamsValue: 0.4
      },
      piece: _PieceControlInterface__WEBPACK_IMPORTED_MODULE_1__.pawnPieceLetter,
      moveGenerationSettings: {
        isComplex: false,
        isJumping: true,
        isSliding: false,
        isPawn: true,
        isColorBound: false
      },
      naming: {
        name: "Pawn",
        shortName: _PieceControlInterface__WEBPACK_IMPORTED_MODULE_1__.pawnPieceLetter.toLowerCase()
      }
    }
  });
  (0,_PieceControlInterface__WEBPACK_IMPORTED_MODULE_1__.createPieceDeclaration)({
    baseClassRef: class extends _PieceControl__WEBPACK_IMPORTED_MODULE_0__.PieceControl {
      constructor() {
        super();
        this.hooks.usePerspective = [true, true, true, true];
        this.hooks.usePawnLogic = {};
      }
      getPossibleCells() {
        this.generateSlidingAttack({
          displacement: [-1, -1],
          special: _PieceControlInterface__WEBPACK_IMPORTED_MODULE_1__.AttackType.MoveOnly,
          limit: this.baseRankActive ? 2 : 1,
          irreversible: true
        });
        this.generateSlidingAttack({
          displacement: [-1, 1],
          special: _PieceControlInterface__WEBPACK_IMPORTED_MODULE_1__.AttackType.MoveOnly,
          limit: this.baseRankActive ? 2 : 1,
          irreversible: true
        });
        this.generateJumpAttack({
          displacement: [-1, -1],
          special: _PieceControlInterface__WEBPACK_IMPORTED_MODULE_1__.AttackType.AttackOnly
        });
        return this.moves;
      }
      rayGenJumpingAttacks() {
        this.generateJumpAttack({
          displacement: [-1, -1],
          special: _PieceControlInterface__WEBPACK_IMPORTED_MODULE_1__.AttackType.RayTrace
        });
        var moves = this.moves.slice();
        this.moves = [];
        return moves;
      }
    },
    configuration: {
      points: {
        singlesPoints: 1,
        teamsPoints: 1,
        botFFAValue: 1,
        botTeamsValue: 0.4
      },
      piece: "α",
      moveGenerationSettings: {
        isComplex: false,
        isJumping: true,
        isSliding: false,
        isPawn: true,
        isColorBound: false
      },
      naming: {
        name: "Berolina",
        shortName: "alpha",
        description: "a pawn that moves diagonally and captures forwards"
      }
    }
  });
  var stoneGeneralControl = (0,_PieceControlInterface__WEBPACK_IMPORTED_MODULE_1__.createPieceDeclaration)({
    baseClassRef: class extends _PieceControl__WEBPACK_IMPORTED_MODULE_0__.PieceControl {
      constructor() {
        super();
        this.hooks.usePerspective = [true, true, true, true];
        this.hooks.usePawnLogic = {};
      }
      getPossibleCells() {
        this.generateSlidingAttack({
          displacement: [-1, -1],
          special: _PieceControlInterface__WEBPACK_IMPORTED_MODULE_1__.AttackType.MoveOnly,
          limit: this.baseRankActive ? 2 : 0,
          irreversible: true
        });
        this.generateSlidingAttack({
          displacement: [-1, 1],
          special: _PieceControlInterface__WEBPACK_IMPORTED_MODULE_1__.AttackType.MoveOnly,
          limit: this.baseRankActive ? 2 : 0,
          irreversible: true
        });
        this.generateJumpAttack({
          displacement: [-1, -1],
          irreversible: true
        });
        this.generateJumpAttack({
          displacement: [-1, 1],
          irreversible: true
        });
        return this.moves;
      }
      rayGenJumpingAttacks() {
        this.generateJumpAttack({
          displacement: [-1, -1],
          special: _PieceControlInterface__WEBPACK_IMPORTED_MODULE_1__.AttackType.RayTrace
        });
        this.generateJumpAttack({
          displacement: [-1, 1],
          special: _PieceControlInterface__WEBPACK_IMPORTED_MODULE_1__.AttackType.RayTrace
        });
        var moves = this.moves.slice();
        this.moves = [];
        return moves;
      }
    },
    configuration: {
      points: {
        singlesPoints: 1,
        teamsPoints: 1,
        botFFAValue: 1,
        botTeamsValue: 0.4
      },
      piece: "γ",
      moveGenerationSettings: {
        isComplex: false,
        isJumping: true,
        isSliding: false,
        isPawn: true,
        isColorBound: false
      },
      naming: {
        name: "Stone General",
        shortName: "gamma",
        description: "a pawn that moves and captures diagonally"
      }
    }
  });
  var soldierControl = (0,_PieceControlInterface__WEBPACK_IMPORTED_MODULE_1__.createPieceDeclaration)({
    baseClassRef: class extends _PieceControl__WEBPACK_IMPORTED_MODULE_0__.PieceControl {
      constructor() {
        super();
        this.hooks.usePerspective = [true, true, true, true];
        this.hooks.usePawnLogic = {};
      }
      getPossibleCells() {
        this.generateSlidingAttack({
          displacement: [-1, 0],
          special: _PieceControlInterface__WEBPACK_IMPORTED_MODULE_1__.AttackType.MoveOnly,
          limit: this.baseRankActive ? 2 : 0,
          irreversible: true
        });
        this.generateJumpAttack({
          displacement: [-1, 0],
          irreversible: true
        });
        return this.moves;
      }
      rayGenJumpingAttacks() {
        this.generateJumpAttack({
          displacement: [-1, 0],
          special: _PieceControlInterface__WEBPACK_IMPORTED_MODULE_1__.AttackType.RayTrace
        });
        var moves = this.moves.slice();
        this.moves = [];
        return moves;
      }
    },
    configuration: {
      points: {
        singlesPoints: 1,
        teamsPoints: 1,
        botFFAValue: 1,
        botTeamsValue: 0.4
      },
      piece: "β",
      moveGenerationSettings: {
        isComplex: false,
        isJumping: true,
        isSliding: false,
        isPawn: true,
        isColorBound: false
      },
      naming: {
        name: "Soldier",
        shortName: "beta",
        description: "a pawn that moves and captures forwards only"
      }
    }
  });
  (0,_PieceControlInterface__WEBPACK_IMPORTED_MODULE_1__.createPieceDeclaration)({
    baseClassRef: class extends _PieceControl__WEBPACK_IMPORTED_MODULE_0__.PieceControl {
      constructor() {
        super();
        this.hooks.usePerspective = [true, true, true, true];
        this.hooks.usePawnLogic = {};
      }
      getPossibleCells() {
        stoneGeneralControl.getPossibleCells.call(this);
        soldierControl.getPossibleCells.call(this);
        return this.moves;
      }
      rayGenJumpingAttacks() {
        stoneGeneralControl.rayGenJumpingAttacks.call(this);
        soldierControl.rayGenJumpingAttacks.call(this);
        var moves = this.moves.slice();
        this.moves = [];
        return moves;
      }
    },
    configuration: {
      points: {
        singlesPoints: 1,
        teamsPoints: 1,
        botFFAValue: 1,
        botTeamsValue: 0.4
      },
      piece: "δ",
      moveGenerationSettings: {
        isComplex: false,
        isJumping: true,
        isSliding: false,
        isPawn: true,
        isColorBound: false
      },
      naming: {
        name: "Sergeant",
        shortName: "delta",
        description: "a pawn that moves and captures forwards and diagonally"
      }
    }
  });
  var xiangqiHorseControl = (0,_PieceControlInterface__WEBPACK_IMPORTED_MODULE_1__.createPieceDeclaration)({
    baseClassRef: class extends _PieceControl__WEBPACK_IMPORTED_MODULE_0__.PieceControl {
      constructor() {
        super();
        this.hooks.useTrajectory = [[-1, 0], [1, 0], [0, 1], [0, -1]];
      }
      getPossibleCells() {
        this.generateJumpAttack({
          displacement: [-1, -2],
          special: _PieceControlInterface__WEBPACK_IMPORTED_MODULE_1__.AttackType.Normal,
          squareBlockingIndex: 3
        });
        this.generateJumpAttack({
          displacement: [1, -2],
          special: _PieceControlInterface__WEBPACK_IMPORTED_MODULE_1__.AttackType.Normal,
          squareBlockingIndex: 3
        });
        this.generateJumpAttack({
          displacement: [-1, 2],
          special: _PieceControlInterface__WEBPACK_IMPORTED_MODULE_1__.AttackType.Normal,
          squareBlockingIndex: 2
        });
        this.generateJumpAttack({
          displacement: [1, 2],
          special: _PieceControlInterface__WEBPACK_IMPORTED_MODULE_1__.AttackType.Normal,
          squareBlockingIndex: 2
        });
        this.generateJumpAttack({
          displacement: [2, -1],
          special: _PieceControlInterface__WEBPACK_IMPORTED_MODULE_1__.AttackType.Normal,
          squareBlockingIndex: 1
        });
        this.generateJumpAttack({
          displacement: [2, 1],
          special: _PieceControlInterface__WEBPACK_IMPORTED_MODULE_1__.AttackType.Normal,
          squareBlockingIndex: 1
        });
        this.generateJumpAttack({
          displacement: [-2, -1],
          special: _PieceControlInterface__WEBPACK_IMPORTED_MODULE_1__.AttackType.Normal,
          squareBlockingIndex: 0
        });
        this.generateJumpAttack({
          displacement: [-2, 1],
          special: _PieceControlInterface__WEBPACK_IMPORTED_MODULE_1__.AttackType.Normal,
          squareBlockingIndex: 0
        });
        return this.moves;
      }
    },
    configuration: {
      points: {
        singlesPoints: 2,
        teamsPoints: 2,
        botFFAValue: 2.1,
        botTeamsValue: 2.1
      },
      piece: "U",
      moveGenerationSettings: {
        isComplex: true,
        isJumping: true,
        isSliding: false,
        isPawn: false,
        isColorBound: false
      },
      naming: {
        name: "Xiangqi horse",
        shortName: "u",
        description: "moves one square orthogonally and then one diagonally"
      }
    }
  });
  (0,_PieceControlInterface__WEBPACK_IMPORTED_MODULE_1__.createPieceDeclaration)({
    baseClassRef: class extends _PieceControl__WEBPACK_IMPORTED_MODULE_0__.PieceControl {
      constructor() {
        super();
        this.hooks.useTrajectory = [[-1, 0], [1, 0], [0, 1], [0, -1]];
      }
      getPossibleCells() {
        xiangqiHorseControl.getPossibleCells.call(this);
        this.sliding.forEach(displacement => {
          this.generateSlidingAttack({
            displacement
          });
        });
        return this.moves;
      }
    },
    configuration: {
      points: {
        singlesPoints: 6,
        teamsPoints: 6,
        botFFAValue: 7.5,
        botTeamsValue: 7.5
      },
      piece: "Δ",
      moveGenerationSettings: {
        isComplex: true,
        isJumping: true,
        isSliding: true,
        isPawn: false,
        isColorBound: false
      },
      naming: {
        name: "Dragon bishop",
        shortName: "deltaUpper",
        description: "combines bishop and xiangqi horse"
      }
    }
  });
  (0,_PieceControlInterface__WEBPACK_IMPORTED_MODULE_1__.createPieceDeclaration)({
    baseClassRef: class extends _PieceControl__WEBPACK_IMPORTED_MODULE_0__.PieceControl {
      constructor() {
        super();
        this.hooks.useHopping = true;
        this.sliding = kingDirections;
      }
    },
    configuration: {
      points: {
        singlesPoints: 3,
        teamsPoints: 3,
        botFFAValue: 5.8,
        botTeamsValue: 5.8
      },
      piece: _PieceControlInterface__WEBPACK_IMPORTED_MODULE_1__.grasshopperPieceLetter,
      moveGenerationSettings: {
        isComplex: true,
        isJumping: true,
        isSliding: false,
        isPawn: false,
        isColorBound: false
      },
      naming: {
        name: "Grasshopper",
        shortName: _PieceControlInterface__WEBPACK_IMPORTED_MODULE_1__.grasshopperPieceLetter.toLowerCase(),
        description: "jumps in any direction hopping over the first piece, landing immediately behind it"
      }
    }
  });
};

/***/ }),

/***/ "./src/main/client/ts/logic/movegen/VariantRules/VariantRule.ts":
/*!**********************************************************************!*\
  !*** ./src/main/client/ts/logic/movegen/VariantRules/VariantRule.ts ***!
  \**********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "VariantRule": () => (/* binding */ VariantRule),
/* harmony export */   "decorateClassWithVariants": () => (/* binding */ decorateClassWithVariants)
/* harmony export */ });
/* harmony import */ var _client_ts_utils_ObjectUtils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @client/ts/utils/ObjectUtils */ "./src/main/client/ts/utils/ObjectUtils.ts");
/* harmony import */ var _baseTypes__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../baseTypes */ "./src/main/client/ts/baseTypes.ts");
var _Reflect$getPrototype;
function _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }
function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }
function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }
function _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }
function _toPropertyKey(arg) { var key = _toPrimitive(arg, "string"); return typeof key === "symbol" ? key : String(key); }
function _toPrimitive(input, hint) { if (typeof input !== "object" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || "default"); if (typeof res !== "object") return res; throw new TypeError("@@toPrimitive must return a primitive value."); } return (hint === "string" ? String : Number)(input); }


var verifyHandlerProperty = (handler, key) => key in handler;
var verifyPrototypeProperty = (superClass, key) => key in superClass.prototype;
class VariantRule {
  constructor() {
    _defineProperty(this, "dependencies", new Map());
    _defineProperty(this, "decorator", void 0);
    _defineProperty(this, "wrappingDecorators", []);
  }
  static initVariantRule(rv) {
    VariantRule.variantRuleList.push(rv);
  }
  initializeBaseHandler(handler) {
    this.decorator = handler;
  }
  initializeWrappingHandler(handler) {
    this.wrappingDecorators.push(handler);
  }
  injectIntoBaseClass(callback) {
    return callback.bind(this.decorator);
  }
  callHandler(method, args) {
    var _iterator = _createForOfIteratorHelper(this.wrappingDecorators),
      _step;
    try {
      for (_iterator.s(); !(_step = _iterator.n()).done;) {
        var decorator = _step.value;
        if (!verifyHandlerProperty(decorator, method)) continue;
        var decoratorMethod = decorator[method];
        if (!(0,_baseTypes__WEBPACK_IMPORTED_MODULE_1__.verifyFunctionType)(decoratorMethod)) continue;
        // eslint-disable-next-line @typescript-eslint/no-unsafe-return
        return decoratorMethod.call(decorator, ...args);
      }
    } catch (err) {
      _iterator.e(err);
    } finally {
      _iterator.f();
    }
    var decoratorType = this.getDecoratorType();
    if (!verifyPrototypeProperty(decoratorType, method)) throw new Error("Method called to callHandler is not a part of prototype");
    var prototypeMethod = decoratorType.prototype[method];
    if (!(0,_baseTypes__WEBPACK_IMPORTED_MODULE_1__.verifyFunctionType)(prototypeMethod)) throw new Error("Method called to callHandler is not a part of prototype");
    // eslint-disable-next-line @typescript-eslint/no-unsafe-return
    return prototypeMethod.call(this.decorator, ...args);
  }
  getInsufficientMaterialData() {
    return {
      isPartiallyDisabled: false,
      isDisabled: false
    };
  }
}
_defineProperty(VariantRule, "variantRuleList", []);
var objectPrototype = new Set(Reflect.ownKeys((_Reflect$getPrototype = Reflect.getPrototypeOf({})) !== null && _Reflect$getPrototype !== void 0 ? _Reflect$getPrototype : []));
function decorateClassWithVariants(baseClass, classReference, variants) {
  if (variants.length === 0) return baseClass;
  var decoratorProperties = (0,_client_ts_utils_ObjectUtils__WEBPACK_IMPORTED_MODULE_0__.copyClass)(baseClass, classReference, true);
  var methods = new Set();
  decoratorProperties.initDecoratorSettings = () => {
    // Do nothing, this method only exists for the purpose of being overridden
  };
  methods.add("initDecoratorSettings");
  var lastInheritedMethods = new Set();
  var basePrototype = null;
  var verifyKeyInDecoratorProperties = k => typeof k !== "number" && k in decoratorProperties && !objectPrototype.has(k) && !lastInheritedMethods.has(k);
  while (basePrototype = Reflect.getPrototypeOf((_basePrototype = basePrototype) !== null && _basePrototype !== void 0 ? _basePrototype : baseClass)) {
    var _basePrototype;
    Reflect.ownKeys(basePrototype).forEach(k => {
      if (verifyKeyInDecoratorProperties(k)) {
        decoratorProperties[k] = baseClass[k];
        methods.add(k);
        lastInheritedMethods.add(k);
      }
    });
  }
  var verifyOwnProperty = k => k in baseClass;
  var _iterator2 = _createForOfIteratorHelper(Object.getOwnPropertyNames(baseClass)),
    _step2;
  try {
    var _loop = function _loop() {
      var property = _step2.value;
      if (!verifyOwnProperty(property)) throw new Error("Expected prototype to not be overridden");
      var localProperty = property;
      Object.defineProperty(decoratorProperties, property, {
        get: function get() {
          return baseClass[localProperty];
        },
        set: function set(v) {
          baseClass[localProperty] = v;
        },
        enumerable: true,
        configurable: false
      });
    };
    for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
      _loop();
    }
  } catch (err) {
    _iterator2.e(err);
  } finally {
    _iterator2.f();
  }
  decoratorProperties.__baseClass = baseClass;
  var _iterator3 = _createForOfIteratorHelper(methods),
    _step3;
  try {
    var _loop2 = function _loop2() {
      var method = _step3.value;
      var variantRuleChain = variants.filter(rv => method in rv);
      if (variantRuleChain.length === 0) return "continue";
      variantRuleChain[0].initializeBaseHandler(decoratorProperties);
      var variantDecorator = variantRuleChain.reduce((p, c) => {
        c.initializeBaseHandler(decoratorProperties);
        c.initializeWrappingHandler(p);
        return c;
      });
      if (method in decoratorProperties) {
        var variant = Reflect.get(variantDecorator, method);
        if (typeof variant === "function") {
          var variantFunc = variant;
          if ((0,_baseTypes__WEBPACK_IMPORTED_MODULE_1__.verifyFunctionType)(decoratorProperties[method])) {
            Object.defineProperty(decoratorProperties, method, {
              value: function value() {
                // eslint-disable-next-line @typescript-eslint/no-unsafe-return, @typescript-eslint/no-unsafe-call
                return variantFunc.bind(variantDecorator)(...arguments);
              },
              enumerable: false,
              writable: false,
              configurable: false
            });
          }
        }
      }
    };
    for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {
      var _ret = _loop2();
      if (_ret === "continue") continue;
    }
  } catch (err) {
    _iterator3.e(err);
  } finally {
    _iterator3.f();
  }
  decoratorProperties.initDecoratorSettings();
  return decoratorProperties;
}
(0,_baseTypes__WEBPACK_IMPORTED_MODULE_1__.importAll)(__webpack_require__("./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions sync recursive \\.ts$"));

/***/ }),

/***/ "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/BoardDecorators/AllowPassing.ts":
/*!**************************************************************************************************************!*\
  !*** ./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/BoardDecorators/AllowPassing.ts ***!
  \**************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "AllowPassing": () => (/* binding */ AllowPassing)
/* harmony export */ });
/* harmony import */ var _Board_Board__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../Board/Board */ "./src/main/client/ts/logic/movegen/Board/Board.ts");
/* harmony import */ var _MoveTree_MoveTreeInterface__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../MoveTree/MoveTreeInterface */ "./src/main/client/ts/logic/movegen/MoveTree/MoveTreeInterface.ts");
/* harmony import */ var _VariantRule__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../VariantRule */ "./src/main/client/ts/logic/movegen/VariantRules/VariantRule.ts");
/* harmony import */ var _VariantRuleInterface__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../VariantRuleInterface */ "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleInterface.ts");
/* harmony import */ var _client_fonts_chessGlyphIndex__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @client/fonts/chessGlyphIndex */ "./src/main/client/fonts/chessGlyphIndex.ts");
function _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }
function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }
function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }





var tag = "allowPassing";
class AllowPassing extends _VariantRule__WEBPACK_IMPORTED_MODULE_2__.VariantRule {
  getDecoratorType() {
    return _Board_Board__WEBPACK_IMPORTED_MODULE_0__.Board;
  }
  getPublicProperties() {
    return {
      parameterValue: true,
      information: {
        name: "Allow Passing",
        description: "Players can pass instead of making a move",
        tag,
        color: _VariantRuleInterface__WEBPACK_IMPORTED_MODULE_3__.variantRuleColors.minor,
        displayIcon: _client_fonts_chessGlyphIndex__WEBPACK_IMPORTED_MODULE_4__.chessGlyphIndex.pause
      }
    };
  }
  matchesPGNDeclaration(match) {
    return /^AllowPassing$/i.test(match);
  }
  serializeToParsingForm() {
    return "AllowPassing";
  }
  isDisabled(_ref) {
    var variantDataRules = _ref.variantDataRules;
    return variantDataRules.giveaway;
  }
  getAllowedInternalMoves() {
    var sideToMove = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.decorator.data.sideToMove;
    var passingMoves = this.decorator.isKingInCheck(sideToMove) ? [] : [{
      type: _MoveTree_MoveTreeInterface__WEBPACK_IMPORTED_MODULE_1__.InternalMoveSignature.Pass
    }];
    var _iterator = _createForOfIteratorHelper(this.wrappingDecorators),
      _step;
    try {
      for (_iterator.s(); !(_step = _iterator.n()).done;) {
        var decorator = _step.value;
        if (decorator.getAllowedInternalMoves) {
          return [...passingMoves, ...decorator.getAllowedInternalMoves(sideToMove)];
        }
      }
    } catch (err) {
      _iterator.e(err);
    } finally {
      _iterator.f();
    }
    return [...passingMoves, ..._Board_Board__WEBPACK_IMPORTED_MODULE_0__.Board.prototype.getAllowedInternalMoves.call(this.decorator, sideToMove)];
  }
}
_VariantRule__WEBPACK_IMPORTED_MODULE_2__.VariantRule.initVariantRule(AllowPassing);

/***/ }),

/***/ "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/BoardDecorators/AlternativeTeams.ts":
/*!******************************************************************************************************************!*\
  !*** ./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/BoardDecorators/AlternativeTeams.ts ***!
  \******************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "AlternativeTeams": () => (/* binding */ AlternativeTeams)
/* harmony export */ });
/* harmony import */ var _moveGeneration_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @moveGeneration/GameInformation/GameData */ "./src/main/client/ts/logic/movegen/GameInformation/GameData.ts");
/* harmony import */ var _Board_Board__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../Board/Board */ "./src/main/client/ts/logic/movegen/Board/Board.ts");
/* harmony import */ var _VariantRule__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../VariantRule */ "./src/main/client/ts/logic/movegen/VariantRules/VariantRule.ts");
/* harmony import */ var _VariantRuleInterface__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../VariantRuleInterface */ "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleInterface.ts");
function _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }
function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }
function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }
function _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }
function _toPropertyKey(arg) { var key = _toPrimitive(arg, "string"); return typeof key === "symbol" ? key : String(key); }
function _toPrimitive(input, hint) { if (typeof input !== "object" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || "default"); if (typeof res !== "object") return res; throw new TypeError("@@toPrimitive must return a primitive value."); } return (hint === "string" ? String : Number)(input); }




var tag = "alternativeTeams";
class AlternativeTeams extends _VariantRule__WEBPACK_IMPORTED_MODULE_2__.VariantRule {
  constructor(teammate) {
    super();
    _defineProperty(this, "teammate", void 0);
    if (typeof teammate === "number") {
      this.teammate = teammate;
    } else {
      this.teammate = 2;
    }
  }
  getDecoratorType() {
    return _Board_Board__WEBPACK_IMPORTED_MODULE_1__.Board;
  }
  getPublicProperties() {
    var rbTeams = this.teammate === 1;
    var teamOne = rbTeams ? "Red & Blue" : "Red & Green";
    var teamTwo = rbTeams ? "Yellow & Green" : "Blue & Yellow";
    return {
      parameterValue: this.teammate,
      information: {
        name: "Teams",
        description: "Alternative Teams: ".concat(teamOne, " form a team against ").concat(teamTwo),
        tag,
        color: _VariantRuleInterface__WEBPACK_IMPORTED_MODULE_3__.variantRuleColors.autogenous,
        displayIcon: "Đ"
      }
    };
  }
  matchesPGNDeclaration(match) {
    var matchArray = match.match(/^Teammate=(1|3)$/);
    if (matchArray) {
      this.teammate = Number(matchArray[1]);
      return true;
    } else {
      return false;
    }
  }
  serializeToParsingForm() {
    return "Teammate=".concat(this.teammate);
  }
  isDisabled(_ref) {
    var gameType = _ref.gameType;
    return gameType !== _moveGeneration_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_0__.VariantType.Teams;
  }
  getParametrizedOptions() {
    return new Map([["Red & Yellow v Blue & Green", 2], ["Red & Blue v Yellow & Green", 1], ["Red & Green v Blue & Yellow", 3]]);
  }
  initDecoratorSettings() {
    var teamSettings = this.decorator.gameType.teamSettings;
    if (this.teammate === 1) {
      teamSettings.firstTeamColors = [true, true, false, false];
      teamSettings.secondTeamColors = [false, false, true, true];
    } else if (this.teammate === 3) {
      teamSettings.firstTeamColors = [true, false, false, true];
      teamSettings.secondTeamColors = [false, true, true, false];
    }
    var _iterator = _createForOfIteratorHelper(this.wrappingDecorators),
      _step;
    try {
      for (_iterator.s(); !(_step = _iterator.n()).done;) {
        var _decorator$initDecora;
        var decorator = _step.value;
        (_decorator$initDecora = decorator.initDecoratorSettings) === null || _decorator$initDecora === void 0 ? void 0 : _decorator$initDecora.call(decorator);
      }
    } catch (err) {
      _iterator.e(err);
    } finally {
      _iterator.f();
    }
  }
}
_VariantRule__WEBPACK_IMPORTED_MODULE_2__.VariantRule.initVariantRule(AlternativeTeams);

/***/ }),

/***/ "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/BoardDecorators/BarePieceRule.ts":
/*!***************************************************************************************************************!*\
  !*** ./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/BoardDecorators/BarePieceRule.ts ***!
  \***************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "BarePieceRule": () => (/* binding */ BarePieceRule)
/* harmony export */ });
/* harmony import */ var _client_fonts_chessGlyphIndex__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @client/fonts/chessGlyphIndex */ "./src/main/client/fonts/chessGlyphIndex.ts");
/* harmony import */ var _Board_Board__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../Board/Board */ "./src/main/client/ts/logic/movegen/Board/Board.ts");
/* harmony import */ var _Board_BoardInterface__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../Board/BoardInterface */ "./src/main/client/ts/logic/movegen/Board/BoardInterface.ts");
/* harmony import */ var _MoveTree_MoveTreeInterface__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../MoveTree/MoveTreeInterface */ "./src/main/client/ts/logic/movegen/MoveTree/MoveTreeInterface.ts");
/* harmony import */ var _VariantRule__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../VariantRule */ "./src/main/client/ts/logic/movegen/VariantRules/VariantRule.ts");
/* harmony import */ var _VariantRuleInterface__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../VariantRuleInterface */ "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleInterface.ts");
function _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }
function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }
function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }






var tag = "barePieceRule";
class BarePieceRule extends _VariantRule__WEBPACK_IMPORTED_MODULE_4__.VariantRule {
  getDecoratorType() {
    return _Board_Board__WEBPACK_IMPORTED_MODULE_1__.Board;
  }
  getPublicProperties() {
    return {
      parameterValue: true,
      information: {
        name: "Bare piece rule",
        description: "Players with only one remaining piece are forfeit",
        tag,
        color: _VariantRuleInterface__WEBPACK_IMPORTED_MODULE_5__.variantRuleColors.minor,
        displayIcon: _client_fonts_chessGlyphIndex__WEBPACK_IMPORTED_MODULE_0__.chessGlyphIndex.filter
      }
    };
  }
  matchesPGNDeclaration(match) {
    return /^BarePieceLoses$/i.test(match);
  }
  isDisabled() {
    return false;
  }
  getInsufficientMaterialData() {
    return {
      isPartiallyDisabled: true,
      isDisabled: false
    };
  }
  serializeToParsingForm() {
    return "BarePieceLoses";
  }
  makeMove() {
    var _this$decorator = this.decorator,
      sideToMove = _this$decorator.data.sideToMove,
      board = _this$decorator.board,
      preGeneratedAttacks = _this$decorator.preGeneratedAttacks;
    var results = this.callHandler("makeMove", arguments);
    var playerPieces = this.decorator.getPlayerPieces()[sideToMove];
    if (playerPieces.length === 1) {
      var pieceMovements = preGeneratedAttacks[sideToMove].pieceMovements.get((0,_Board_BoardInterface__WEBPACK_IMPORTED_MODULE_2__.stringifyCoordinate)(playerPieces[0]));
      if (pieceMovements) {
        var _iterator = _createForOfIteratorHelper(pieceMovements),
          _step;
        try {
          for (_iterator.s(); !(_step = _iterator.n()).done;) {
            var coordinate = _step.value.move;
            if (board[coordinate[0]][coordinate[1]].isPiece()) {
              return results;
            }
          }
        } catch (err) {
          _iterator.e(err);
        } finally {
          _iterator.f();
        }
        return this.decorator.makeMove([{
          type: _MoveTree_MoveTreeInterface__WEBPACK_IMPORTED_MODULE_3__.InternalMoveSignature.Resign
        }]);
      }
    }
    return results;
  }
}
_VariantRule__WEBPACK_IMPORTED_MODULE_4__.VariantRule.initVariantRule(BarePieceRule);

/***/ }),

/***/ "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/BoardDecorators/Blindfold.ts":
/*!***********************************************************************************************************!*\
  !*** ./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/BoardDecorators/Blindfold.ts ***!
  \***********************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Blindfold": () => (/* binding */ Blindfold)
/* harmony export */ });
/* harmony import */ var _Board_Board__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../Board/Board */ "./src/main/client/ts/logic/movegen/Board/Board.ts");
/* harmony import */ var _Board_BoardInterface__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../Board/BoardInterface */ "./src/main/client/ts/logic/movegen/Board/BoardInterface.ts");
/* harmony import */ var _VariantRule__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../VariantRule */ "./src/main/client/ts/logic/movegen/VariantRules/VariantRule.ts");
/* harmony import */ var _VariantRuleInterface__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../VariantRuleInterface */ "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleInterface.ts");
/* harmony import */ var _client_fonts_chessGlyphIndex__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @client/fonts/chessGlyphIndex */ "./src/main/client/fonts/chessGlyphIndex.ts");





var tag = "blindfold";
class Blindfold extends _VariantRule__WEBPACK_IMPORTED_MODULE_2__.VariantRule {
  getDecoratorType() {
    return _Board_Board__WEBPACK_IMPORTED_MODULE_0__.Board;
  }
  getPublicProperties() {
    return {
      parameterValue: true,
      information: {
        name: "Blindfold",
        description: "Pieces are invisible",
        tag,
        color: _VariantRuleInterface__WEBPACK_IMPORTED_MODULE_3__.variantRuleColors.visual,
        displayIcon: _client_fonts_chessGlyphIndex__WEBPACK_IMPORTED_MODULE_4__.chessGlyphIndex.blindfold
      }
    };
  }
  matchesPGNDeclaration(match) {
    return /^Blindfold$/i.test(match);
  }
  serializeToParsingForm() {
    return "Blindfold";
  }
  isDisabled(_ref) {
    var variantDataRules = _ref.variantDataRules;
    return variantDataRules.fogOfWar;
  }
  getSquareVisibility() {
    var squareVisibility = this.callHandler("getSquareVisibility", arguments);
    return squareVisibility.map((r, i) => r.map((v, j) => {
      if (this.decorator.board[i][j].isWall()) {
        return v;
      } else {
        return [...v, _Board_BoardInterface__WEBPACK_IMPORTED_MODULE_1__.DisplaySettings.Blindfolded];
      }
    }));
  }
}
_VariantRule__WEBPACK_IMPORTED_MODULE_2__.VariantRule.initVariantRule(Blindfold);

/***/ }),

/***/ "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/BoardDecorators/CaptureTheKing.ts":
/*!****************************************************************************************************************!*\
  !*** ./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/BoardDecorators/CaptureTheKing.ts ***!
  \****************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "CaptureTheKing": () => (/* binding */ CaptureTheKing)
/* harmony export */ });
/* harmony import */ var _client_fonts_chessGlyphIndex__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @client/fonts/chessGlyphIndex */ "./src/main/client/fonts/chessGlyphIndex.ts");
/* harmony import */ var _Board_Board__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../Board/Board */ "./src/main/client/ts/logic/movegen/Board/Board.ts");
/* harmony import */ var _VariantRule__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../VariantRule */ "./src/main/client/ts/logic/movegen/VariantRules/VariantRule.ts");
/* harmony import */ var _VariantRuleInterface__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../VariantRuleInterface */ "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleInterface.ts");




var tag = "captureTheKing";
class CaptureTheKing extends _VariantRule__WEBPACK_IMPORTED_MODULE_2__.VariantRule {
  getDecoratorType() {
    return _Board_Board__WEBPACK_IMPORTED_MODULE_1__.Board;
  }
  getPublicProperties() {
    return {
      parameterValue: true,
      information: {
        name: "Capture the King",
        description: "To checkmate, kings must be captured",
        tag,
        color: _VariantRuleInterface__WEBPACK_IMPORTED_MODULE_3__.variantRuleColors.minor,
        displayIcon: _client_fonts_chessGlyphIndex__WEBPACK_IMPORTED_MODULE_0__.chessGlyphIndex.king
      }
    };
  }
  matchesPGNDeclaration(match) {
    return /^CaptureTheKing$/i.test(match);
  }
  serializeToParsingForm() {
    return "CaptureTheKing";
  }
  isDisabled(_ref) {
    var variantDataRules = _ref.variantDataRules;
    return variantDataRules.giveaway || variantDataRules.taboo;
  }
  getInsufficientMaterialData() {
    return {
      isPartiallyDisabled: true,
      isDisabled: false
    };
  }
  isKingInCheck() {
    return false;
  }
  isTheMoveLegal() {
    return true;
  }
}
_VariantRule__WEBPACK_IMPORTED_MODULE_2__.VariantRule.initVariantRule(CaptureTheKing);

/***/ }),

/***/ "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/BoardDecorators/Chess960.ts":
/*!**********************************************************************************************************!*\
  !*** ./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/BoardDecorators/Chess960.ts ***!
  \**********************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Chess960": () => (/* binding */ Chess960)
/* harmony export */ });
/* harmony import */ var _client_ts_logic_BaseInterfaces__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @client/ts/logic/BaseInterfaces */ "./src/main/client/ts/logic/BaseInterfaces.ts");
/* harmony import */ var _Board_Board__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../Board/Board */ "./src/main/client/ts/logic/movegen/Board/Board.ts");
/* harmony import */ var _GameInformation_GameData__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../GameInformation/GameData */ "./src/main/client/ts/logic/movegen/GameInformation/GameData.ts");
/* harmony import */ var _VariantRule__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../VariantRule */ "./src/main/client/ts/logic/movegen/VariantRules/VariantRule.ts");
/* harmony import */ var _VariantRuleInterface__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../VariantRuleInterface */ "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleInterface.ts");
/* harmony import */ var _client_fonts_chessGlyphIndex__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @client/fonts/chessGlyphIndex */ "./src/main/client/fonts/chessGlyphIndex.ts");
function _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }
function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }
function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }
function _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }
function _toPropertyKey(arg) { var key = _toPrimitive(arg, "string"); return typeof key === "symbol" ? key : String(key); }
function _toPrimitive(input, hint) { if (typeof input !== "object" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || "default"); if (typeof res !== "object") return res; throw new TypeError("@@toPrimitive must return a primitive value."); } return (hint === "string" ? String : Number)(input); }






var tag = "chess960";
class Chess960 extends _VariantRule__WEBPACK_IMPORTED_MODULE_3__.VariantRule {
  static createBaseChess960mappings() {
    return {
      colorBoundPieces: [2, 5],
      supermajorPieces: [3],
      minorPieces: [1, 6],
      royalPiece: [4],
      edgePieces: [0, 7]
    };
  }
  constructor(positionID) {
    super();
    _defineProperty(this, "positionID", void 0);
    if (typeof positionID === "number") {
      this.positionID = positionID;
    } else {
      this.positionID = -1;
    }
  }
  getDecoratorType() {
    return _Board_Board__WEBPACK_IMPORTED_MODULE_1__.Board;
  }
  getPublicProperties() {
    return {
      parameterValue: this.positionID,
      information: {
        name: "Chess960",
        description: "Initial position with randomly shuffled pieces on home ranks",
        tag,
        color: _VariantRuleInterface__WEBPACK_IMPORTED_MODULE_4__.variantRuleColors.startingPosition,
        displayIcon: _client_fonts_chessGlyphIndex__WEBPACK_IMPORTED_MODULE_5__.chessGlyphIndex.chess960
      }
    };
  }
  matchesPGNDeclaration(match) {
    var matchArray = match.match(Chess960.regExp);
    if (matchArray) {
      var newID = Number(matchArray[1]);
      if (newID < 0 || newID > 15760) return false;
      this.positionID = newID;
      return true;
    } else {
      return false;
    }
  }
  serializeToParsingForm() {
    return "Chess960=".concat(this.positionID);
  }
  isDisabled() {
    return false;
  }
  initDecoratorSettings() {
    if (this.positionID === -1) throw new Error("Position ID for Chess960 is not defined");
    var nr = this.positionID;
    var boardSquares = this.decorator.board;
    var rank = Chess960.chess960ranges.findIndex(r => nr >= r[0] && nr <= r[1]);
    if (rank === -1) {
      if (nr > Chess960.legacy.legacy2PThreshold) {
        rank = Chess960.legacy.legacy2PRank;
        nr -= Chess960.legacy.legacy2PTakeaway;
      } else {
        rank = Chess960.legacy.legacy4Prank;
      }
    }
    var pieceArrays = [[], [], [], []];
    var ranks = [13 - rank, rank, rank, 13 - rank];
    pieceArrays[0] = boardSquares[ranks[0]].slice(Chess960.displacement[0], Chess960.displacement[1]);
    pieceArrays[1] = boardSquares.map(row => row[ranks[1]]).slice(Chess960.displacement[0], Chess960.displacement[1]);
    pieceArrays[2] = boardSquares[ranks[2]].slice(Chess960.displacement[0], Chess960.displacement[1]);
    pieceArrays[3] = boardSquares.map(row => row[ranks[3]]).slice(Chess960.displacement[0], Chess960.displacement[1]);
    var walls = pieceArrays.map(a => a.map(p => p.isWall() ? true : false));
    var intersections = [];
    var _iterator = _createForOfIteratorHelper(walls),
      _step;
    try {
      for (_iterator.s(); !(_step = _iterator.n()).done;) {
        var wall = _step.value;
        intersections.push(wall.reduce((p, c, i) => {
          if (c) {
            return p.filter(v => Chess960.pieceMasks[i].includes(v));
          } else return p;
        }, Chess960.c960range));
      }
    } catch (err) {
      _iterator.e(err);
    } finally {
      _iterator.f();
    }
    var calcNr = nr - Chess960.chess960ranges[rank][0];
    var positions = [];
    var generatePositionIndexes = calcNr => {
      var colorBoundIndexes = [2 * Math.floor(calcNr % 16 / 4), 1 + 2 * (calcNr % 16 % 4)].sort();
      var supermajorIndex = Math.floor(calcNr / 16) % 6;
      var minorPieceIndexes = Chess960.minorPieceCache[Math.floor(calcNr / 96) % 10];
      var position = {
        colorBoundPieces: Array(8).fill(false),
        supermajorPieces: Array(8).fill(false),
        minorPieces: Array(8).fill(false),
        royalPiece: Array(8).fill(false),
        edgePieces: Array(8).fill(false)
      };
      var edgeSet = false,
        royalSet = false,
        colorDelta = 0,
        majorDelta = 0;
      for (var i = 0; i < _GameInformation_GameData__WEBPACK_IMPORTED_MODULE_2__.boardDimension - Chess960.displacement[0] * 2; i++) {
        if (i === colorBoundIndexes[0] || i === colorBoundIndexes[1]) {
          position.colorBoundPieces[i] = true;
          colorDelta++;
        } else if (i === supermajorIndex + colorDelta) {
          position.supermajorPieces[i] = true;
          majorDelta++;
        } else if (i === minorPieceIndexes[0] + colorDelta + majorDelta || i === minorPieceIndexes[1] + colorDelta + majorDelta) {
          position.minorPieces[i] = true;
        } else {
          position[edgeSet ? royalSet ? "edgePieces" : "royalPiece" : "edgePieces"][i] = true;
          royalSet = edgeSet;
          edgeSet = true;
        }
      }
      return position;
    };
    for (var _i = 0, _intersections = intersections; _i < _intersections.length; _i++) {
      var intersection = _intersections[_i];
      if (intersection.length === 0) return null;
      var calcTempNr = calcNr;
      var cycles = 0;
      while (cycles < 2) {
        if (intersection.includes(calcTempNr)) {
          positions.push(generatePositionIndexes(calcTempNr));
          break;
        } else if (intersection.includes(Chess960.twins[calcTempNr - 1])) {
          positions.push(generatePositionIndexes(Chess960.twins[calcTempNr - 1]));
          break;
        }
        calcTempNr++;
        if (calcTempNr === 960) calcTempNr = 0, cycles++;
      }
      if (cycles === 2) intersections.push([]);
    }
    var fenData = this.decorator.data;
    var royalPieces = fenData.fenOptions.tag("royal");
    var royalOnCorrectRank = royalPieces.map((r, i) => r !== null ? r[(0,_client_ts_logic_BaseInterfaces__WEBPACK_IMPORTED_MODULE_0__.getVerticalPlacementModulus)(i)] === ranks[i] ? r[(0,_client_ts_logic_BaseInterfaces__WEBPACK_IMPORTED_MODULE_0__.getVerticalPlacementModulus)(i)] : -1 : -1);
    var replaceRow = player => {
      var pieces = Chess960.createBaseChess960mappings();
      var royal = royalPieces[player];
      if (!royal) return;
      var r = royal[(0,_client_ts_logic_BaseInterfaces__WEBPACK_IMPORTED_MODULE_0__.getVerticalPlacementModulus)(player)];
      var supermajorOverRoyal = royalOnCorrectRank[player] ? r <= 6 : false;
      for (var i = Chess960.displacement[0]; i < Chess960.displacement[1]; i++) {
        var k = void 0;
        for (k in pieces) {
          if (!Object.prototype.hasOwnProperty.call(pieces, k) || !positions[player][k][i - 3]) continue;
          if (royalOnCorrectRank[player] !== -1 && k === "royalPiece" && r !== i) {
            royal[(0,_client_ts_logic_BaseInterfaces__WEBPACK_IMPORTED_MODULE_0__.getVerticalPlacementModulus)(player)] = i;
          }
          var mI = supermajorOverRoyal ? intersections[player].length === 960 ? _GameInformation_GameData__WEBPACK_IMPORTED_MODULE_2__.boardDimension - 1 - i : i : i;
          var piece = pieces[k].shift();
          if (piece !== undefined) {
            boardSquares[(0,_client_ts_logic_BaseInterfaces__WEBPACK_IMPORTED_MODULE_0__.isVerticalPlacement)(player) ? ranks[player] : mI][(0,_client_ts_logic_BaseInterfaces__WEBPACK_IMPORTED_MODULE_0__.isVerticalPlacement)(player) ? mI : ranks[player]] = pieceArrays[player][piece];
            break;
          }
        }
      }
    };
    var _iterator2 = _createForOfIteratorHelper(_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_2__.colors),
      _step2;
    try {
      for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
        var color = _step2.value;
        replaceRow(color);
      }
    } catch (err) {
      _iterator2.e(err);
    } finally {
      _iterator2.f();
    }
    var _iterator3 = _createForOfIteratorHelper(this.wrappingDecorators),
      _step3;
    try {
      for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {
        var _decorator$initDecora;
        var decorator = _step3.value;
        (_decorator$initDecora = decorator.initDecoratorSettings) === null || _decorator$initDecora === void 0 ? void 0 : _decorator$initDecora.call(decorator);
      }
    } catch (err) {
      _iterator3.e(err);
    } finally {
      _iterator3.f();
    }
  }
}
_VariantRule__WEBPACK_IMPORTED_MODULE_3__.VariantRule.initVariantRule(Chess960);
_defineProperty(Chess960, "chess960ranges", [...Array.from({
  length: 9
}, (_, i) => [960 * (i + 1) + 1, 960 + 960 * (i + 1)]), ...Array.from({
  length: 5
}, (_, i) => [10000 + 960 * (i + 1) + 1, 10960 + 960 * (i + 1)])]);
_defineProperty(Chess960, "minorPieceCache", function () {
  var minorPieceCache = [];
  for (var i = 0; i < 4; i++) {
    for (var j = i + 1; j < 5; j++) {
      minorPieceCache.push([i, j]);
    }
  }
  return minorPieceCache;
}());
// prettier-ignore
_defineProperty(Chess960, "pieceMasks", [[404, 405, 406, 407, 408, 409, 410, 411, 412, 413, 414, 415, 420, 421, 422, 423, 424, 425, 426, 427, 428, 429, 430, 431, 436, 437, 438, 439, 440, 441, 442, 443, 444, 445, 446, 447, 452, 453, 454, 455, 456, 457, 458, 459, 460, 461, 462, 463, 468, 469, 470, 471, 472, 473, 474, 475, 476, 477, 478, 479, 500, 501, 502, 503, 504, 505, 506, 507, 508, 509, 510, 511, 516, 517, 518, 519, 520, 521, 522, 523, 524, 525, 526, 527, 532, 533, 534, 535, 536, 537, 538, 539, 540, 541, 542, 543, 548, 549, 550, 551, 552, 553, 554, 555, 556, 557, 558, 559, 564, 565, 566, 567, 568, 569, 570, 571, 572, 573, 574, 575, 596, 597, 598, 599, 600, 601, 602, 603, 604, 605, 606, 607, 612, 613, 614, 615, 616, 617, 618, 619, 620, 621, 622, 623, 628, 629, 630, 631, 632, 633, 634, 635, 636, 637, 638, 639, 644, 645, 646, 647, 648, 649, 650, 651, 652, 653, 654, 655, 660, 661, 662, 663, 664, 665, 666, 667, 668, 669, 670, 671, 692, 693, 694, 695, 696, 697, 698, 699, 700, 701, 702, 703, 708, 709, 710, 711, 712, 713, 714, 715, 716, 717, 718, 719, 724, 725, 726, 727, 728, 729, 730, 731, 732, 733, 734, 735, 740, 741, 742, 743, 744, 745, 746, 747, 748, 749, 750, 751, 756, 757, 758, 759, 760, 761, 762, 763, 764, 765, 766, 767, 788, 789, 790, 791, 792, 793, 794, 795, 796, 797, 798, 799, 804, 805, 806, 807, 808, 809, 810, 811, 812, 813, 814, 815, 820, 821, 822, 823, 824, 825, 826, 827, 828, 829, 830, 831, 836, 837, 838, 839, 840, 841, 842, 843, 844, 845, 846, 847, 852, 853, 854, 855, 856, 857, 858, 859, 860, 861, 862, 863, 884, 885, 886, 887, 888, 889, 890, 891, 892, 893, 894, 895, 900, 901, 902, 903, 904, 905, 906, 907, 908, 909, 910, 911, 916, 917, 918, 919, 920, 921, 922, 923, 924, 925, 926, 927, 932, 933, 934, 935, 936, 937, 938, 939, 940, 941, 942, 943, 948, 949, 950, 951, 952, 953, 954, 955, 956, 957, 958, 959], [5, 6, 7, 9, 10, 11, 13, 14, 15, 17, 18, 19, 33, 34, 35, 37, 38, 39, 41, 42, 43, 45, 46, 47, 49, 50, 51, 53, 54, 55, 57, 58, 59, 61, 62, 63, 65, 66, 67, 69, 70, 71, 73, 74, 75, 77, 78, 79, 81, 82, 83, 85, 86, 87, 89, 90, 91, 93, 94, 95, 101, 102, 103, 105, 106, 107, 109, 110, 111, 113, 114, 115, 129, 130, 131, 145, 146, 147, 161, 162, 163, 177, 178, 179, 197, 198, 199, 201, 202, 203, 205, 206, 207, 209, 210, 211, 225, 226, 227, 241, 242, 243, 257, 258, 259, 273, 274, 275, 293, 294, 295, 297, 298, 299, 301, 302, 303, 305, 306, 307, 321, 322, 323, 337, 338, 339, 353, 354, 355, 369, 370, 371, 421, 422, 423, 425, 426, 427, 429, 430, 431, 437, 438, 439, 441, 442, 443, 445, 446, 447, 453, 454, 455, 457, 458, 459, 461, 462, 463, 469, 470, 471, 473, 474, 475, 477, 478, 479, 517, 518, 519, 521, 522, 523, 525, 526, 527, 533, 534, 535, 537, 538, 539, 541, 542, 543, 549, 550, 551, 553, 554, 555, 557, 558, 559, 565, 566, 567, 569, 570, 571, 573, 574, 575, 613, 614, 615, 617, 618, 619, 621, 622, 623, 629, 630, 631, 633, 634, 635, 637, 638, 639, 645, 646, 647, 649, 650, 651, 653, 654, 655, 661, 662, 663, 665, 666, 667, 669, 670, 671], [4, 5, 6, 7, 20, 21, 22, 23, 36, 37, 38, 39, 52, 53, 54, 55, 68, 69, 70, 71, 84, 85, 86, 87, 100, 101, 102, 103, 116, 117, 118, 119, 132, 133, 134, 135, 148, 149, 150, 151, 164, 165, 166, 167, 180, 181, 182, 183, 196, 197, 198, 199, 212, 213, 214, 215, 228, 229, 230, 231, 244, 245, 246, 247, 260, 261, 262, 263, 276, 277, 278, 279, 292, 293, 294, 295, 308, 309, 310, 311, 324, 325, 326, 327, 340, 341, 342, 343, 356, 357, 358, 359, 372, 373, 374, 375, 388, 389, 390, 391, 404, 405, 406, 407, 420, 421, 422, 423, 436, 437, 438, 439, 452, 453, 454, 455, 468, 469, 470, 471, 484, 485, 486, 487, 500, 501, 502, 503, 516, 517, 518, 519, 532, 533, 534, 535, 548, 549, 550, 551, 564, 565, 566, 567, 580, 581, 582, 583, 596, 597, 598, 599, 612, 613, 614, 615, 628, 629, 630, 631, 644, 645, 646, 647, 660, 661, 662, 663, 676, 677, 678, 679, 692, 693, 694, 695, 708, 709, 710, 711, 724, 725, 726, 727, 740, 741, 742, 743, 756, 757, 758, 759, 772, 773, 774, 775, 788, 789, 790, 791, 804, 805, 806, 807, 820, 821, 822, 823, 836, 837, 838, 839, 852, 853, 854, 855, 868, 869, 870, 871, 884, 885, 886, 887, 900, 901, 902, 903, 916, 917, 918, 919, 932, 933, 934, 935, 948, 949, 950, 951], [16, 20, 34, 35, 38, 39, 40, 44, 58, 59, 62, 63, 112, 116, 130, 131, 134, 135, 136, 140, 154, 155, 158, 159, 208, 212, 226, 227, 230, 231, 232, 236, 250, 251, 254, 255, 304, 308, 322, 323, 326, 327, 328, 332, 346, 347, 350, 351, 400, 404, 418, 419, 422, 423, 424, 428, 442, 443, 446, 447, 496, 500, 514, 515, 518, 519, 520, 524, 538, 539, 542, 543, 592, 596, 610, 611, 614, 615, 616, 620, 634, 635, 638, 639, 688, 692, 706, 707, 710, 711, 712, 716, 730, 731, 734, 735, 784, 788, 802, 803, 806, 807, 808, 812, 826, 827, 830, 831, 880, 884, 898, 899, 902, 903, 904, 908, 922, 923, 926, 927], [14, 15, 30, 31, 46, 47, 62, 63, 66, 67, 70, 71, 76, 77, 82, 83, 86, 87, 92, 93, 110, 111, 126, 127, 142, 143, 158, 159, 162, 163, 166, 167, 172, 173, 178, 179, 182, 183, 188, 189, 194, 195, 198, 199, 204, 205, 210, 211, 214, 215, 220, 221, 226, 227, 230, 231, 236, 237, 240, 241, 244, 245, 256, 257, 260, 261, 272, 273, 276, 277, 290, 291, 294, 295, 300, 301, 306, 307, 310, 311, 316, 317, 322, 323, 326, 327, 332, 333, 336, 337, 340, 341, 352, 353, 356, 357, 368, 369, 372, 373, 398, 399, 414, 415, 430, 431, 446, 447, 450, 451, 454, 455, 460, 461, 466, 467, 470, 471, 476, 477, 482, 483, 486, 487, 492, 493, 498, 499, 502, 503, 508, 509, 514, 515, 518, 519, 524, 525, 528, 529, 532, 533, 544, 545, 548, 549, 560, 561, 564, 565, 578, 579, 582, 583, 588, 589, 594, 595, 598, 599, 604, 605, 610, 611, 614, 615, 620, 621, 624, 625, 628, 629, 640, 641, 644, 645, 656, 657, 660, 661, 672, 673, 676, 677, 688, 689, 692, 693, 768, 769, 772, 773, 784, 785, 788, 789, 864, 865, 868, 869, 880, 881, 884, 885], [2, 6, 10, 14, 18, 22, 26, 30, 34, 38, 42, 46, 50, 54, 58, 62, 66, 70, 74, 78, 82, 86, 90, 94, 98, 102, 106, 110, 114, 118, 122, 126, 130, 134, 138, 142, 146, 150, 154, 158, 162, 166, 170, 174, 178, 182, 186, 190, 194, 198, 202, 206, 210, 214, 218, 222, 226, 230, 234, 238, 242, 246, 250, 254, 258, 262, 266, 270, 274, 278, 282, 286, 290, 294, 298, 302, 306, 310, 314, 318, 322, 326, 330, 334, 338, 342, 346, 350, 354, 358, 362, 366, 370, 374, 378, 382, 386, 390, 394, 398, 402, 406, 410, 414, 418, 422, 426, 430, 434, 438, 442, 446, 450, 454, 458, 462, 466, 470, 474, 478, 482, 486, 490, 494, 498, 502, 506, 510, 514, 518, 522, 526, 530, 534, 538, 542, 546, 550, 554, 558, 562, 566, 570, 574, 578, 582, 586, 590, 594, 598, 602, 606, 610, 614, 618, 622, 626, 630, 634, 638, 642, 646, 650, 654, 658, 662, 666, 670, 674, 678, 682, 686, 690, 694, 698, 702, 706, 710, 714, 718, 722, 726, 730, 734, 738, 742, 746, 750, 754, 758, 762, 766, 770, 774, 778, 782, 786, 790, 794, 798, 802, 806, 810, 814, 818, 822, 826, 830, 834, 838, 842, 846, 850, 854, 858, 862, 866, 870, 874, 878, 882, 886, 890, 894, 898, 902, 906, 910, 914, 918, 922, 926, 930, 934, 938, 942, 946, 950, 954, 958], [192, 193, 194, 196, 197, 198, 200, 201, 202, 208, 209, 210, 212, 213, 214, 216, 217, 218, 224, 225, 226, 228, 229, 230, 232, 233, 234, 240, 241, 242, 244, 245, 246, 248, 249, 250, 291, 295, 299, 307, 311, 315, 323, 327, 331, 339, 343, 347, 355, 359, 363, 368, 369, 370, 372, 373, 374, 376, 377, 378, 480, 481, 482, 484, 485, 486, 488, 489, 490, 496, 497, 498, 500, 501, 502, 504, 505, 506, 512, 513, 514, 516, 517, 518, 520, 521, 522, 528, 529, 530, 532, 533, 534, 536, 537, 538, 579, 583, 587, 595, 599, 603, 611, 615, 619, 627, 631, 635, 643, 647, 651, 656, 657, 658, 660, 661, 662, 664, 665, 666, 672, 673, 674, 676, 677, 678, 680, 681, 682, 688, 689, 690, 692, 693, 694, 696, 697, 698, 704, 705, 706, 708, 709, 710, 712, 713, 714, 720, 721, 722, 724, 725, 726, 728, 729, 730, 771, 775, 779, 787, 791, 795, 803, 807, 811, 819, 823, 827, 835, 839, 843, 848, 849, 850, 852, 853, 854, 856, 857, 858, 864, 865, 866, 867, 868, 869, 870, 871, 872, 873, 874, 875, 880, 881, 882, 883, 884, 885, 886, 887, 888, 889, 890, 891, 896, 897, 898, 899, 900, 901, 902, 903, 904, 905, 906, 907, 912, 913, 914, 915, 916, 917, 918, 919, 920, 921, 922, 923, 931, 935, 939, 944, 945, 946, 948, 949, 950, 952, 953, 954], [1, 2, 4, 5, 6, 8, 9, 10, 12, 13, 14, 16, 17, 18, 20, 21, 22, 24, 25, 26, 28, 29, 30, 32, 33, 34, 36, 37, 38, 40, 41, 42, 44, 45, 46, 48, 49, 50, 52, 53, 54, 56, 57, 58, 60, 61, 62, 64, 65, 66, 68, 69, 70, 72, 73, 74, 76, 77, 78, 96, 97, 98, 100, 101, 102, 104, 105, 106, 108, 109, 110, 112, 113, 114, 116, 117, 118, 120, 121, 122, 124, 125, 126, 128, 129, 130, 132, 133, 134, 136, 137, 138, 140, 141, 142, 144, 145, 146, 148, 149, 150, 152, 153, 154, 156, 157, 158, 160, 161, 162, 164, 165, 166, 168, 169, 170, 172, 173, 174, 192, 193, 194, 196, 197, 198, 200, 201, 202, 204, 205, 206, 208, 209, 210, 212, 213, 214, 216, 217, 218, 220, 221, 222, 224, 225, 226, 228, 229, 230, 232, 233, 234, 236, 237, 238, 240, 241, 242, 244, 245, 246, 248, 249, 250, 252, 253, 254, 256, 257, 258, 260, 261, 262, 264, 265, 266, 268, 269, 270, 384, 385, 386, 388, 389, 390, 392, 393, 394, 396, 397, 398, 400, 401, 402, 404, 405, 406, 408, 409, 410, 412, 413, 414, 416, 417, 418, 420, 421, 422, 424, 425, 426, 428, 429, 430, 432, 433, 434, 436, 437, 438, 440, 441, 442, 444, 445, 446, 448, 449, 450, 452, 453, 454, 456, 457, 458, 460, 461, 462, 480, 481, 482, 484, 485, 486, 488, 489, 490, 492, 493, 494, 496, 497, 498, 500, 501, 502, 504, 505, 506, 508, 509, 510, 512, 513, 514, 516, 517, 518, 520, 521, 522, 524, 525, 526, 528, 529, 530, 532, 533, 534, 536, 537, 538, 540, 541, 542, 544, 545, 546, 548, 549, 550, 552, 553, 554, 556, 557, 558, 672, 673, 674, 676, 677, 678, 680, 681, 682, 684, 685, 686, 688, 689, 690, 692, 693, 694, 696, 697, 698, 700, 701, 702, 704, 705, 706, 708, 709, 710, 712, 713, 714, 716, 717, 718, 720, 721, 722, 724, 725, 726, 728, 729, 730, 732, 733, 734, 736, 737, 738, 740, 741, 742, 744, 745, 746, 748, 749, 750]]);
_defineProperty(Chess960, "c960range", function () {
  var arr = [...Array(961).keys()];
  arr.shift();
  return arr;
}());
// prettier-ignore
_defineProperty(Chess960, "twins", [959, 955, 951, 947, 958, 954, 950, 946, 957, 953, 949, 945, 956, 952, 948, 944, 943, 939, 935, 931, 942, 938, 934, 930, 941, 937, 933, 929, 940, 936, 932, 928, 927, 923, 919, 915, 926, 922, 918, 914, 925, 921, 917, 913, 924, 920, 916, 912, 911, 907, 903, 899, 910, 906, 902, 898, 909, 905, 901, 897, 908, 904, 900, 896, 895, 891, 887, 883, 894, 890, 886, 882, 893, 889, 885, 881, 892, 888, 884, 880, 879, 875, 871, 867, 878, 874, 870, 866, 877, 873, 869, 865, 876, 872, 868, 864, 863, 859, 855, 851, 862, 858, 854, 850, 861, 857, 853, 849, 860, 856, 852, 848, 847, 843, 839, 835, 846, 842, 838, 834, 845, 841, 837, 833, 844, 840, 836, 832, 831, 827, 823, 819, 830, 826, 822, 818, 829, 825, 821, 817, 828, 824, 820, 816, 815, 811, 807, 803, 814, 810, 806, 802, 813, 809, 805, 801, 812, 808, 804, 800, 799, 795, 791, 787, 798, 794, 790, 786, 797, 793, 789, 785, 796, 792, 788, 784, 783, 779, 775, 771, 782, 778, 774, 770, 781, 777, 773, 769, 780, 776, 772, 768, 671, 667, 663, 659, 670, 666, 662, 658, 669, 665, 661, 657, 668, 664, 660, 656, 655, 651, 647, 643, 654, 650, 646, 642, 653, 649, 645, 641, 652, 648, 644, 640, 639, 635, 631, 627, 638, 634, 630, 626, 637, 633, 629, 625, 636, 632, 628, 624, 623, 619, 615, 611, 622, 618, 614, 610, 621, 617, 613, 609, 620, 616, 612, 608, 607, 603, 599, 595, 606, 602, 598, 594, 605, 601, 597, 593, 604, 600, 596, 592, 591, 587, 583, 579, 590, 586, 582, 578, 589, 585, 581, 577, 588, 584, 580, 576, 383, 379, 375, 371, 382, 378, 374, 370, 381, 377, 373, 369, 380, 376, 372, 368, 367, 363, 359, 355, 366, 362, 358, 354, 365, 361, 357, 353, 364, 360, 356, 352, 351, 347, 343, 339, 350, 346, 342, 338, 349, 345, 341, 337, 348, 344, 340, 336, 335, 331, 327, 323, 334, 330, 326, 322, 333, 329, 325, 321, 332, 328, 324, 320, 319, 315, 311, 307, 318, 314, 310, 306, 317, 313, 309, 305, 316, 312, 308, 304, 303, 299, 295, 291, 302, 298, 294, 290, 301, 297, 293, 289, 300, 296, 292, 288, 767, 763, 759, 755, 766, 762, 758, 754, 765, 761, 757, 753, 764, 760, 756, 752, 751, 747, 743, 739, 750, 746, 742, 738, 749, 745, 741, 737, 748, 744, 740, 736, 735, 731, 727, 723, 734, 730, 726, 722, 733, 729, 725, 721, 732, 728, 724, 720, 719, 715, 711, 707, 718, 714, 710, 706, 717, 713, 709, 705, 716, 712, 708, 704, 703, 699, 695, 691, 702, 698, 694, 690, 701, 697, 693, 689, 700, 696, 692, 688, 687, 683, 679, 675, 686, 682, 678, 674, 685, 681, 677, 673, 684, 680, 676, 672, 575, 571, 567, 563, 574, 570, 566, 562, 573, 569, 565, 561, 572, 568, 564, 560, 559, 555, 551, 547, 558, 554, 550, 546, 557, 553, 549, 545, 556, 552, 548, 544, 543, 539, 535, 531, 542, 538, 534, 530, 541, 537, 533, 529, 540, 536, 532, 528, 527, 523, 519, 515, 526, 522, 518, 514, 525, 521, 517, 513, 524, 520, 516, 512, 511, 507, 503, 499, 510, 506, 502, 498, 509, 505, 501, 497, 508, 504, 500, 496, 495, 491, 487, 483, 494, 490, 486, 482, 493, 489, 485, 481, 492, 488, 484, 480, 287, 283, 279, 275, 286, 282, 278, 274, 285, 281, 277, 273, 284, 280, 276, 272, 271, 267, 263, 259, 270, 266, 262, 258, 269, 265, 261, 257, 268, 264, 260, 256, 255, 251, 247, 243, 254, 250, 246, 242, 253, 249, 245, 241, 252, 248, 244, 240, 239, 235, 231, 227, 238, 234, 230, 226, 237, 233, 229, 225, 236, 232, 228, 224, 223, 219, 215, 211, 222, 218, 214, 210, 221, 217, 213, 209, 220, 216, 212, 208, 207, 203, 199, 195, 206, 202, 198, 194, 205, 201, 197, 193, 204, 200, 196, 192, 479, 475, 471, 467, 478, 474, 470, 466, 477, 473, 469, 465, 476, 472, 468, 464, 463, 459, 455, 451, 462, 458, 454, 450, 461, 457, 453, 449, 460, 456, 452, 448, 447, 443, 439, 435, 446, 442, 438, 434, 445, 441, 437, 433, 444, 440, 436, 432, 431, 427, 423, 419, 430, 426, 422, 418, 429, 425, 421, 417, 428, 424, 420, 416, 415, 411, 407, 403, 414, 410, 406, 402, 413, 409, 405, 401, 412, 408, 404, 400, 399, 395, 391, 387, 398, 394, 390, 386, 397, 393, 389, 385, 396, 392, 388, 384, 191, 187, 183, 179, 190, 186, 182, 178, 189, 185, 181, 177, 188, 184, 180, 176, 175, 171, 167, 163, 174, 170, 166, 162, 173, 169, 165, 161, 172, 168, 164, 160, 159, 155, 151, 147, 158, 154, 150, 146, 157, 153, 149, 145, 156, 152, 148, 144, 143, 139, 135, 131, 142, 138, 134, 130, 141, 137, 133, 129, 140, 136, 132, 128, 127, 123, 119, 115, 126, 122, 118, 114, 125, 121, 117, 113, 124, 120, 116, 112, 111, 107, 103, 99, 110, 106, 102, 98, 109, 105, 101, 97, 108, 104, 100, 96, 95, 91, 87, 83, 94, 90, 86, 82, 93, 89, 85, 81, 92, 88, 84, 80, 79, 75, 71, 67, 78, 74, 70, 66, 77, 73, 69, 65, 76, 72, 68, 64, 63, 59, 55, 51, 62, 58, 54, 50, 61, 57, 53, 49, 60, 56, 52, 48, 47, 43, 39, 35, 46, 42, 38, 34, 45, 41, 37, 33, 44, 40, 36, 32, 31, 27, 23, 19, 30, 26, 22, 18, 29, 25, 21, 17, 28, 24, 20, 16, 15, 11, 7, 3, 14, 10, 6, 2, 13, 9, 5, 1, 12, 8, 4, 0]);
_defineProperty(Chess960, "legacy", {
  legacy2PThreshold: 1000,
  legacy2PRank: 3,
  legacy4Prank: 0,
  legacy2PTakeaway: 6160
});
_defineProperty(Chess960, "displacement", [3, 11]);
_defineProperty(Chess960, "regExp", /Chess960=(\d{1,5})/i);

/***/ }),

/***/ "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/BoardDecorators/Crazyhouse.ts":
/*!************************************************************************************************************!*\
  !*** ./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/BoardDecorators/Crazyhouse.ts ***!
  \************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Crazyhouse": () => (/* binding */ Crazyhouse)
/* harmony export */ });
/* harmony import */ var _Board_Board__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../Board/Board */ "./src/main/client/ts/logic/movegen/Board/Board.ts");
/* harmony import */ var _GameInformation_GameData__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../GameInformation/GameData */ "./src/main/client/ts/logic/movegen/GameInformation/GameData.ts");
/* harmony import */ var _VariantRule__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../VariantRule */ "./src/main/client/ts/logic/movegen/VariantRules/VariantRule.ts");
/* harmony import */ var _VariantRuleInterface__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../VariantRuleInterface */ "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleInterface.ts");
/* harmony import */ var _moveGeneration_PieceControl_PieceControlInterface__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @moveGeneration/PieceControl/PieceControlInterface */ "./src/main/client/ts/logic/movegen/PieceControl/PieceControlInterface.ts");
/* harmony import */ var _FENDataDecorators_FiftyMoveRule__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../FENDataDecorators/FiftyMoveRule */ "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/FENDataDecorators/FiftyMoveRule.ts");
/* harmony import */ var _client_ts_logic_BaseInterfaces__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @client/ts/logic/BaseInterfaces */ "./src/main/client/ts/logic/BaseInterfaces.ts");
/* harmony import */ var _client_fonts_chessGlyphIndex__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @client/fonts/chessGlyphIndex */ "./src/main/client/fonts/chessGlyphIndex.ts");
function _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }
function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }
function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }
function _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }
function _toPropertyKey(arg) { var key = _toPrimitive(arg, "string"); return typeof key === "symbol" ? key : String(key); }
function _toPrimitive(input, hint) { if (typeof input !== "object" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || "default"); if (typeof res !== "object") return res; throw new TypeError("@@toPrimitive must return a primitive value."); } return (hint === "string" ? String : Number)(input); }








var tag = "crazyhouse";
class Crazyhouse extends _VariantRule__WEBPACK_IMPORTED_MODULE_2__.VariantRule {
  constructor() {
    super(...arguments);
    _defineProperty(this, "dependencies", new Map([[_FENDataDecorators_FiftyMoveRule__WEBPACK_IMPORTED_MODULE_5__.FiftyMoveRule, [Infinity]]]));
  }
  getDecoratorType() {
    return _Board_Board__WEBPACK_IMPORTED_MODULE_0__.Board;
  }
  getPublicProperties() {
    return {
      parameterValue: true,
      information: {
        name: "Crazyhouse",
        description: "You can drop pieces from banks",
        tag,
        color: _VariantRuleInterface__WEBPACK_IMPORTED_MODULE_3__.variantRuleColors.extending,
        displayIcon: _client_fonts_chessGlyphIndex__WEBPACK_IMPORTED_MODULE_7__.chessGlyphIndex.crazyhouse
      }
    };
  }
  matchesPGNDeclaration(match) {
    return /^Crazyhouse$/i.test(match);
  }
  serializeToParsingForm() {
    return "Crazyhouse";
  }
  isDisabled() {
    return false;
  }
  getInsufficientMaterialData() {
    return {
      isPartiallyDisabled: false,
      isDisabled: true
    };
  }
  initDecoratorSettings() {
    this.decorator.data.fenOptions.setTag("areBanksEnabled", [true, true, true, true]);
    var _iterator = _createForOfIteratorHelper(this.wrappingDecorators),
      _step;
    try {
      for (_iterator.s(); !(_step = _iterator.n()).done;) {
        var _decorator$initDecora;
        var decorator = _step.value;
        (_decorator$initDecora = decorator.initDecoratorSettings) === null || _decorator$initDecora === void 0 ? void 0 : _decorator$initDecora.call(decorator);
      }
    } catch (err) {
      _iterator.e(err);
    } finally {
      _iterator.f();
    }
  }
  getDroppingMoves(piece) {
    var color = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.decorator.data.sideToMove;
    if (piece.color !== color) return [];
    var royal = this.decorator.data.fenOptions.tag("royal")[color];
    if (royal && this.decorator.preGeneratedAttacks[color].hoppingPieces[royal[0]][royal[1]]) return [];
    var isPawn = _moveGeneration_PieceControl_PieceControlInterface__WEBPACK_IMPORTED_MODULE_4__.pieceControlConfigSettings[piece.piece].moveGenerationSettings.isPawn;
    var resultingMoveDrops = [];
    var isRY = (0,_client_ts_logic_BaseInterfaces__WEBPACK_IMPORTED_MODULE_6__.isVerticalPlacement)(color);
    var pawnPromotionRank = this.decorator.variantData.promotionRank === false ? -1 : this.decorator.variantData.promotionRank;
    var pawnBaseRank = this.decorator.data.fenOptions.tag("pawnBaseRank");
    for (var i = 0; i < _GameInformation_GameData__WEBPACK_IMPORTED_MODULE_1__.boardDimension; i++) {
      if (isPawn && isRY && (pawnPromotionRank === i || pawnBaseRank === i)) {
        continue;
      }
      for (var j = 0; j < _GameInformation_GameData__WEBPACK_IMPORTED_MODULE_1__.boardDimension; j++) {
        if (isPawn && !isRY && (pawnPromotionRank === j || pawnBaseRank === j)) {
          continue;
        }
        var square = this.decorator.board[i][j];
        if (!square.isEmpty()) continue;
        resultingMoveDrops.push({
          piece,
          endCoordinates: [i, j]
        });
      }
    }
    if (this.decorator.isKingInCheck(color)) {
      return resultingMoveDrops.filter(moveDrop => {
        var _this$decorator$makeM = this.decorator.makeMove([moveDrop], true),
          checks = _this$decorator$makeM.checks,
          checkmates = _this$decorator$makeM.checkmates;
        return !checks[color] || checkmates[color] || this.decorator.isKingInCheck(color);
      });
    } else {
      return resultingMoveDrops;
    }
  }
}
_VariantRule__WEBPACK_IMPORTED_MODULE_2__.VariantRule.initVariantRule(Crazyhouse);

/***/ }),

/***/ "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/BoardDecorators/DuckChess.ts":
/*!***********************************************************************************************************!*\
  !*** ./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/BoardDecorators/DuckChess.ts ***!
  \***********************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "DuckChess": () => (/* binding */ DuckChess)
/* harmony export */ });
/* harmony import */ var _Board_Board__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../Board/Board */ "./src/main/client/ts/logic/movegen/Board/Board.ts");
/* harmony import */ var _MoveTree_MoveTreeInterface__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../MoveTree/MoveTreeInterface */ "./src/main/client/ts/logic/movegen/MoveTree/MoveTreeInterface.ts");
/* harmony import */ var _VariantRule__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../VariantRule */ "./src/main/client/ts/logic/movegen/VariantRules/VariantRule.ts");
/* harmony import */ var _VariantRuleInterface__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../VariantRuleInterface */ "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleInterface.ts");
/* harmony import */ var _CaptureTheKing__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./CaptureTheKing */ "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/BoardDecorators/CaptureTheKing.ts");
/* harmony import */ var _GameInformation_GameUnits_PieceString__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../GameInformation/GameUnits/PieceString */ "./src/main/client/ts/logic/movegen/GameInformation/GameUnits/PieceString.ts");
/* harmony import */ var _GameInformation_GameData__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../GameInformation/GameData */ "./src/main/client/ts/logic/movegen/GameInformation/GameData.ts");
/* harmony import */ var _GameInformation_GameUnits_GameUnits__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../GameInformation/GameUnits/GameUnits */ "./src/main/client/ts/logic/movegen/GameInformation/GameUnits/GameUnits.ts");
/* harmony import */ var _client_fonts_chessGlyphIndex__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @client/fonts/chessGlyphIndex */ "./src/main/client/fonts/chessGlyphIndex.ts");
function _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }
function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }
function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }
function _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }
function _toPropertyKey(arg) { var key = _toPrimitive(arg, "string"); return typeof key === "symbol" ? key : String(key); }
function _toPrimitive(input, hint) { if (typeof input !== "object" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || "default"); if (typeof res !== "object") return res; throw new TypeError("@@toPrimitive must return a primitive value."); } return (hint === "string" ? String : Number)(input); }









var tag = "duckChess";
class DuckChess extends _VariantRule__WEBPACK_IMPORTED_MODULE_2__.VariantRule {
  constructor() {
    super(...arguments);
    _defineProperty(this, "dependencies", new Map([[_CaptureTheKing__WEBPACK_IMPORTED_MODULE_4__.CaptureTheKing, []]]));
  }
  getDecoratorType() {
    return _Board_Board__WEBPACK_IMPORTED_MODULE_0__.Board;
  }
  getPublicProperties() {
    return {
      parameterValue: true,
      information: {
        name: "Duck Chess",
        description: "The duck must be moved to an empty square after every move",
        tag,
        color: _VariantRuleInterface__WEBPACK_IMPORTED_MODULE_3__.variantRuleColors.extending,
        displayIcon: _client_fonts_chessGlyphIndex__WEBPACK_IMPORTED_MODULE_8__.chessGlyphIndex.duck
      }
    };
  }
  matchesPGNDeclaration(match) {
    return /^DuckChess$/i.test(match);
  }
  serializeToParsingForm() {
    return "DuckChess";
  }
  isDisabled(_ref) {
    var variantDataRules = _ref.variantDataRules;
    return variantDataRules.taboo;
  }
  getLegalMoves(i, j) {
    var moves = this.callHandler("getLegalMoves", arguments);
    var latestMoves = (0,_MoveTree_MoveTreeInterface__WEBPACK_IMPORTED_MODULE_1__.getLatestChainedMoves)(moves);
    var ducks = [],
      emptySquares = [];
    for (var _i = 0; _i < _GameInformation_GameData__WEBPACK_IMPORTED_MODULE_6__.boardDimension; _i++) {
      for (var _j = 0; _j < _GameInformation_GameData__WEBPACK_IMPORTED_MODULE_6__.boardDimension; _j++) {
        var pieceString = this.decorator.board[_i][_j];
        if (pieceString.isWall() && pieceString.piece === _GameInformation_GameUnits_GameUnits__WEBPACK_IMPORTED_MODULE_7__.nonPlayablePieces.duck) {
          ducks.push([_i, _j]);
        } else if (pieceString.isEmpty()) {
          emptySquares.push([_i, _j]);
        }
      }
    }
    var droppingChainedMoves = [];
    var duckChainedMoves = [];
    if (ducks.length === 0) {
      var _iterator = _createForOfIteratorHelper(emptySquares),
        _step;
      try {
        for (_iterator.s(); !(_step = _iterator.n()).done;) {
          var emptySquare = _step.value;
          droppingChainedMoves.push({
            piece: _GameInformation_GameUnits_PieceString__WEBPACK_IMPORTED_MODULE_5__.duckPieceString,
            endCoordinates: emptySquare
          });
        }
      } catch (err) {
        _iterator.e(err);
      } finally {
        _iterator.f();
      }
      droppingChainedMoves.push({
        piece: _GameInformation_GameUnits_PieceString__WEBPACK_IMPORTED_MODULE_5__.duckPieceString,
        endCoordinates: [i, j]
      });
    } else {
      var _iterator2 = _createForOfIteratorHelper(ducks),
        _step2;
      try {
        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
          var duck = _step2.value;
          var _iterator3 = _createForOfIteratorHelper(emptySquares),
            _step3;
          try {
            for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {
              var _emptySquare = _step3.value;
              duckChainedMoves.push({
                startCoordinates: duck,
                endCoordinates: _emptySquare
              });
            }
          } catch (err) {
            _iterator3.e(err);
          } finally {
            _iterator3.f();
          }
          duckChainedMoves.push({
            startCoordinates: duck,
            endCoordinates: [i, j]
          });
        }
      } catch (err) {
        _iterator2.e(err);
      } finally {
        _iterator2.f();
      }
    }
    var _iterator4 = _createForOfIteratorHelper(latestMoves),
      _step4;
    try {
      for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {
        var move = _step4.value;
        move.nextChainedMoves = droppingChainedMoves.length > 0 ? droppingChainedMoves : duckChainedMoves;
      }
    } catch (err) {
      _iterator4.e(err);
    } finally {
      _iterator4.f();
    }
    return moves;
  }
}
_VariantRule__WEBPACK_IMPORTED_MODULE_2__.VariantRule.initVariantRule(DuckChess);

/***/ }),

/***/ "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/BoardDecorators/FogOfWar.ts":
/*!**********************************************************************************************************!*\
  !*** ./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/BoardDecorators/FogOfWar.ts ***!
  \**********************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "FogOfWar": () => (/* binding */ FogOfWar)
/* harmony export */ });
/* harmony import */ var _client_fonts_chessGlyphIndex__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @client/fonts/chessGlyphIndex */ "./src/main/client/fonts/chessGlyphIndex.ts");
/* harmony import */ var _BaseInterfaces__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../BaseInterfaces */ "./src/main/client/ts/logic/BaseInterfaces.ts");
/* harmony import */ var _Board_Board__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../Board/Board */ "./src/main/client/ts/logic/movegen/Board/Board.ts");
/* harmony import */ var _Board_BoardInterface__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../Board/BoardInterface */ "./src/main/client/ts/logic/movegen/Board/BoardInterface.ts");
/* harmony import */ var _VariantRule__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../VariantRule */ "./src/main/client/ts/logic/movegen/VariantRules/VariantRule.ts");
/* harmony import */ var _VariantRuleInterface__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../VariantRuleInterface */ "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleInterface.ts");
/* harmony import */ var _CaptureTheKing__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./CaptureTheKing */ "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/BoardDecorators/CaptureTheKing.ts");
function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }
function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function _iterableToArrayLimit(arr, i) { var _i = null == arr ? null : "undefined" != typeof Symbol && arr[Symbol.iterator] || arr["@@iterator"]; if (null != _i) { var _s, _e, _x, _r, _arr = [], _n = !0, _d = !1; try { if (_x = (_i = _i.call(arr)).next, 0 === i) { if (Object(_i) !== _i) return; _n = !1; } else for (; !(_n = (_s = _x.call(_i)).done) && (_arr.push(_s.value), _arr.length !== i); _n = !0); } catch (err) { _d = !0, _e = err; } finally { try { if (!_n && null != _i.return && (_r = _i.return(), Object(_r) !== _r)) return; } finally { if (_d) throw _e; } } return _arr; } }
function _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }
function _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e2) { throw _e2; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e3) { didErr = true; err = _e3; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }
function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }
function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }
function _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }
function _toPropertyKey(arg) { var key = _toPrimitive(arg, "string"); return typeof key === "symbol" ? key : String(key); }
function _toPrimitive(input, hint) { if (typeof input !== "object" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || "default"); if (typeof res !== "object") return res; throw new TypeError("@@toPrimitive must return a primitive value."); } return (hint === "string" ? String : Number)(input); }







var tag = "fogOfWar";
class FogOfWar extends _VariantRule__WEBPACK_IMPORTED_MODULE_4__.VariantRule {
  constructor() {
    super(...arguments);
    _defineProperty(this, "dependencies", new Map([[_CaptureTheKing__WEBPACK_IMPORTED_MODULE_6__.CaptureTheKing, []]]));
  }
  getDecoratorType() {
    return _Board_Board__WEBPACK_IMPORTED_MODULE_2__.Board;
  }
  getPublicProperties() {
    return {
      parameterValue: true,
      information: {
        name: "Fog of War",
        description: "Players can only see their pieces and the squares they can legally move to",
        tag,
        color: _VariantRuleInterface__WEBPACK_IMPORTED_MODULE_5__.variantRuleColors.widespread,
        displayIcon: _client_fonts_chessGlyphIndex__WEBPACK_IMPORTED_MODULE_0__.chessGlyphIndex.fogOfWar
      }
    };
  }
  matchesPGNDeclaration(match) {
    return /^FogOfWar$/i.test(match);
  }
  serializeToParsingForm() {
    return "FogOfWar";
  }
  isDisabled(_ref) {
    var variantDataRules = _ref.variantDataRules;
    return variantDataRules.taboo;
  }
  getSquareVisibility() {
    var currentPlayerMoves = (0,_BaseInterfaces__WEBPACK_IMPORTED_MODULE_1__.initializeBoardSquares)(() => false);
    var preGeneratedAttacks = this.decorator.preGeneratedAttacks[this.decorator.data.sideToMove];
    var _iterator = _createForOfIteratorHelper(preGeneratedAttacks.pieceMovements),
      _step;
    try {
      for (_iterator.s(); !(_step = _iterator.n()).done;) {
        var _step$value = _slicedToArray(_step.value, 2),
          piece = _step$value[0],
          moves = _step$value[1];
        var startingCoordinate = (0,_Board_BoardInterface__WEBPACK_IMPORTED_MODULE_3__.unstringifyCoordinate)(piece);
        currentPlayerMoves[startingCoordinate[0]][startingCoordinate[1]] = true;
        var _iterator2 = _createForOfIteratorHelper(moves),
          _step2;
        try {
          for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
            var move = _step2.value.move;
            currentPlayerMoves[move[0]][move[1]] = true;
          }
        } catch (err) {
          _iterator2.e(err);
        } finally {
          _iterator2.f();
        }
      }
    } catch (err) {
      _iterator.e(err);
    } finally {
      _iterator.f();
    }
    for (var _i = 0, _arr = [...preGeneratedAttacks.pieceDrops.pawn, ...preGeneratedAttacks.pieceDrops.piece]; _i < _arr.length; _i++) {
      var drop = _arr[_i];
      currentPlayerMoves[drop.endCoordinates[0]][drop.endCoordinates[1]] = true;
    }
    var squareVisibility = this.callHandler("getSquareVisibility", arguments);
    return squareVisibility.map((r, i) => r.map((v, j) => {
      if (this.decorator.board[i][j].isWall() || currentPlayerMoves[i][j]) {
        return v;
      } else {
        return [...v, _Board_BoardInterface__WEBPACK_IMPORTED_MODULE_3__.DisplaySettings.Fogged];
      }
    }));
  }
}
_VariantRule__WEBPACK_IMPORTED_MODULE_4__.VariantRule.initVariantRule(FogOfWar);

/***/ }),

/***/ "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/BoardDecorators/ForcedCapture.ts":
/*!***************************************************************************************************************!*\
  !*** ./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/BoardDecorators/ForcedCapture.ts ***!
  \***************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ForcedCapture": () => (/* binding */ ForcedCapture)
/* harmony export */ });
/* harmony import */ var _Board_Board__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../Board/Board */ "./src/main/client/ts/logic/movegen/Board/Board.ts");
/* harmony import */ var _Board_BoardInterface__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../Board/BoardInterface */ "./src/main/client/ts/logic/movegen/Board/BoardInterface.ts");
/* harmony import */ var _VariantRule__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../VariantRule */ "./src/main/client/ts/logic/movegen/VariantRules/VariantRule.ts");
/* harmony import */ var _VariantRuleInterface__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../VariantRuleInterface */ "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleInterface.ts");
/* harmony import */ var _client_fonts_chessGlyphIndex__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @client/fonts/chessGlyphIndex */ "./src/main/client/fonts/chessGlyphIndex.ts");
function _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }
function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }
function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }





var tag = "forcedCapture";
class ForcedCapture extends _VariantRule__WEBPACK_IMPORTED_MODULE_2__.VariantRule {
  getDecoratorType() {
    return _Board_Board__WEBPACK_IMPORTED_MODULE_0__.Board;
  }
  getPublicProperties() {
    return {
      parameterValue: true,
      information: {
        name: "Forced Capture",
        description: "Capturing is always compulsory",
        tag,
        color: _VariantRuleInterface__WEBPACK_IMPORTED_MODULE_3__.variantRuleColors.widespread,
        displayIcon: _client_fonts_chessGlyphIndex__WEBPACK_IMPORTED_MODULE_4__.chessGlyphIndex.target
      }
    };
  }
  matchesPGNDeclaration(match) {
    return /^ForcedCapture$/i.test(match);
  }
  serializeToParsingForm() {
    return "ForcedCapture";
  }
  isDisabled() {
    return false;
  }
  getInsufficientMaterialData() {
    return {
      isPartiallyDisabled: true,
      isDisabled: false
    };
  }
  pregenerateAttacks() {
    var _this$decorator = this.decorator,
      sideToMove = _this$decorator.data.sideToMove,
      board = _this$decorator.board,
      preGeneratedAttacks = _this$decorator.preGeneratedAttacks;
    this.callHandler("pregenerateAttacks", arguments);
    var _iterator = _createForOfIteratorHelper(this.decorator.getPlayerPieces()[sideToMove]),
      _step;
    try {
      for (_iterator.s(); !(_step = _iterator.n()).done;) {
        var piece = _step.value;
        var moves = preGeneratedAttacks[sideToMove].pieceMovements.get((0,_Board_BoardInterface__WEBPACK_IMPORTED_MODULE_1__.stringifyCoordinate)(piece));
        if (moves) {
          var _iterator2 = _createForOfIteratorHelper(moves),
            _step2;
          try {
            for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
              var coordinate = _step2.value.move;
              if (board[coordinate[0]][coordinate[1]].isPiece()) {
                preGeneratedAttacks[sideToMove].variantRuleCache.hasCaptures = true;
                return;
              }
            }
          } catch (err) {
            _iterator2.e(err);
          } finally {
            _iterator2.f();
          }
        }
      }
    } catch (err) {
      _iterator.e(err);
    } finally {
      _iterator.f();
    }
    preGeneratedAttacks[sideToMove].variantRuleCache.hasCaptures = false;
  }
  isTheMoveLegal(_, moveData) {
    var isCapturing = this.decorator.data.getCapturedPieces(moveData).length > 0;
    if (!isCapturing && this.decorator.preGeneratedAttacks[this.decorator.data.sideToMove].variantRuleCache.hasCaptures) return false;
    return this.callHandler("isTheMoveLegal", arguments);
  }
}
_VariantRule__WEBPACK_IMPORTED_MODULE_2__.VariantRule.initVariantRule(ForcedCapture);

/***/ }),

/***/ "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/BoardDecorators/GameMetadataRules.ts":
/*!*******************************************************************************************************************!*\
  !*** ./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/BoardDecorators/GameMetadataRules.ts ***!
  \*******************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Anonymous": () => (/* binding */ Anonymous),
/* harmony export */   "SelfPartner": () => (/* binding */ SelfPartner),
/* harmony export */   "SemiAnonymous": () => (/* binding */ SemiAnonymous)
/* harmony export */ });
/* harmony import */ var _client_fonts_chessGlyphIndex__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @client/fonts/chessGlyphIndex */ "./src/main/client/fonts/chessGlyphIndex.ts");
/* harmony import */ var _utils_ArrayUtils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../../utils/ArrayUtils */ "./src/main/client/ts/utils/ArrayUtils.ts");
/* harmony import */ var _Board_Board__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../Board/Board */ "./src/main/client/ts/logic/movegen/Board/Board.ts");
/* harmony import */ var _GameInformation_GameData__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../GameInformation/GameData */ "./src/main/client/ts/logic/movegen/GameInformation/GameData.ts");
/* harmony import */ var _GameInformation_GameUnits_GameUnits__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../GameInformation/GameUnits/GameUnits */ "./src/main/client/ts/logic/movegen/GameInformation/GameUnits/GameUnits.ts");
/* harmony import */ var _VariantRule__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../VariantRule */ "./src/main/client/ts/logic/movegen/VariantRules/VariantRule.ts");
/* harmony import */ var _VariantRuleInterface__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../VariantRuleInterface */ "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleInterface.ts");
function _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }
function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }
function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }







var tag = "anonymous";
class Anonymous extends _VariantRule__WEBPACK_IMPORTED_MODULE_5__.VariantRule {
  getDecoratorType() {
    return _Board_Board__WEBPACK_IMPORTED_MODULE_2__.Board;
  }
  getPublicProperties() {
    return {
      parameterValue: true,
      information: {
        name: "Anonymous",
        description: "Players' names and ratings are hidden",
        tag,
        color: _VariantRuleInterface__WEBPACK_IMPORTED_MODULE_6__.variantRuleColors.metadata,
        displayIcon: _client_fonts_chessGlyphIndex__WEBPACK_IMPORTED_MODULE_0__.chessGlyphIndex.userInformation
      }
    };
  }
  matchesPGNDeclaration(match) {
    return /^Anonymous$/i.test(match);
  }
  serializeToParsingForm() {
    return "Anonymous";
  }
  isDisabled() {
    return false;
  }
  initDecoratorSettings() {
    for (var i = 0; i < _GameInformation_GameData__WEBPACK_IMPORTED_MODULE_3__.totalPlayers; i++) {
      this.decorator.gameData.players[i].name = "Anonymous";
      this.decorator.gameData.players[i].elo = undefined;
    }
    var _iterator = _createForOfIteratorHelper(this.wrappingDecorators),
      _step;
    try {
      for (_iterator.s(); !(_step = _iterator.n()).done;) {
        var _decorator$initDecora;
        var decorator = _step.value;
        (_decorator$initDecora = decorator.initDecoratorSettings) === null || _decorator$initDecora === void 0 ? void 0 : _decorator$initDecora.call(decorator);
      }
    } catch (err) {
      _iterator.e(err);
    } finally {
      _iterator.f();
    }
  }
}
_VariantRule__WEBPACK_IMPORTED_MODULE_5__.VariantRule.initVariantRule(Anonymous);
var semiAnonTag = "semiAnonymous";
class SemiAnonymous extends _VariantRule__WEBPACK_IMPORTED_MODULE_5__.VariantRule {
  getDecoratorType() {
    return _Board_Board__WEBPACK_IMPORTED_MODULE_2__.Board;
  }
  getPublicProperties() {
    return {
      parameterValue: true,
      information: {
        name: "Semi-Anonymous",
        description: "Players's colors are hidden",
        tag: semiAnonTag,
        color: _VariantRuleInterface__WEBPACK_IMPORTED_MODULE_6__.variantRuleColors.metadata,
        displayIcon: _client_fonts_chessGlyphIndex__WEBPACK_IMPORTED_MODULE_0__.chessGlyphIndex.userExtraInformation
      }
    };
  }
  matchesPGNDeclaration(match) {
    return /^Semi-Anonymous$/i.test(match);
  }
  serializeToParsingForm() {
    return "Semi-Anonymous";
  }
  isDisabled() {
    return false;
  }
  initDecoratorSettings() {
    (0,_utils_ArrayUtils__WEBPACK_IMPORTED_MODULE_1__.shuffleArray)(this.decorator.gameData.players);
    var _iterator2 = _createForOfIteratorHelper(this.wrappingDecorators),
      _step2;
    try {
      for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
        var _decorator$initDecora2;
        var decorator = _step2.value;
        (_decorator$initDecora2 = decorator.initDecoratorSettings) === null || _decorator$initDecora2 === void 0 ? void 0 : _decorator$initDecora2.call(decorator);
      }
    } catch (err) {
      _iterator2.e(err);
    } finally {
      _iterator2.f();
    }
  }
}
_VariantRule__WEBPACK_IMPORTED_MODULE_5__.VariantRule.initVariantRule(SemiAnonymous);
var spTag = "selfPartner";
class SelfPartner extends _VariantRule__WEBPACK_IMPORTED_MODULE_5__.VariantRule {
  getDecoratorType() {
    return _Board_Board__WEBPACK_IMPORTED_MODULE_2__.Board;
  }
  getPublicProperties() {
    return {
      parameterValue: true,
      information: {
        name: "Self-Partner",
        description: "Both sides of the team were played by one player",
        tag: spTag,
        color: _VariantRuleInterface__WEBPACK_IMPORTED_MODULE_6__.variantRuleColors.metadata,
        displayIcon: _client_fonts_chessGlyphIndex__WEBPACK_IMPORTED_MODULE_0__.chessGlyphIndex.selfPartner
      }
    };
  }
  matchesPGNDeclaration(match) {
    return /^SelfPartner$/i.test(match);
  }
  serializeToParsingForm() {
    return "SelfPartner";
  }
  isDisabled(_ref) {
    var gameType = _ref.gameType,
      fenTags = _ref.fenTags;
    return gameType !== _GameInformation_GameData__WEBPACK_IMPORTED_MODULE_3__.VariantType.Teams || fenTags.resigned.value.filter(Boolean).length !== 0;
  }
  initDecoratorSettings() {
    var _iterator3 = _createForOfIteratorHelper(this.wrappingDecorators),
      _step3;
    try {
      for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {
        var _decorator$initDecora3;
        var decorator = _step3.value;
        (_decorator$initDecora3 = decorator.initDecoratorSettings) === null || _decorator$initDecora3 === void 0 ? void 0 : _decorator$initDecora3.call(decorator);
      }
    } catch (err) {
      _iterator3.e(err);
    } finally {
      _iterator3.f();
    }
    var gameType = this.decorator.gameType;
    var firstTeamPlayer = gameType.teamSettings.firstTeamColors.indexOf(true),
      secondTeamPlayer = gameType.teamSettings.secondTeamColors.indexOf(true);
    if ((0,_GameInformation_GameUnits_GameUnits__WEBPACK_IMPORTED_MODULE_4__.verifyNumericColor)(firstTeamPlayer)) {
      this.decorator.gameData.players[gameType.getTeammateColor(firstTeamPlayer)].name = this.decorator.gameData.players[firstTeamPlayer].name;
    }
    if ((0,_GameInformation_GameUnits_GameUnits__WEBPACK_IMPORTED_MODULE_4__.verifyNumericColor)(secondTeamPlayer)) {
      this.decorator.gameData.players[gameType.getTeammateColor(secondTeamPlayer)].name = this.decorator.gameData.players[secondTeamPlayer].name;
    }
  }
}
_VariantRule__WEBPACK_IMPORTED_MODULE_5__.VariantRule.initVariantRule(SelfPartner);

/***/ }),

/***/ "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/BoardDecorators/Ghostboard.ts":
/*!************************************************************************************************************!*\
  !*** ./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/BoardDecorators/Ghostboard.ts ***!
  \************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Ghostboard": () => (/* binding */ Ghostboard)
/* harmony export */ });
/* harmony import */ var _client_fonts_chessGlyphIndex__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @client/fonts/chessGlyphIndex */ "./src/main/client/fonts/chessGlyphIndex.ts");
/* harmony import */ var _Board_Board__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../Board/Board */ "./src/main/client/ts/logic/movegen/Board/Board.ts");
/* harmony import */ var _Board_BoardInterface__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../Board/BoardInterface */ "./src/main/client/ts/logic/movegen/Board/BoardInterface.ts");
/* harmony import */ var _VariantRule__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../VariantRule */ "./src/main/client/ts/logic/movegen/VariantRules/VariantRule.ts");
/* harmony import */ var _VariantRuleInterface__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../VariantRuleInterface */ "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleInterface.ts");





var tag = "ghostboard";
class Ghostboard extends _VariantRule__WEBPACK_IMPORTED_MODULE_3__.VariantRule {
  getDecoratorType() {
    return _Board_Board__WEBPACK_IMPORTED_MODULE_1__.Board;
  }
  getPublicProperties() {
    return {
      parameterValue: true,
      information: {
        name: "Ghostboard",
        description: "Board, clocks and players are invisible",
        tag,
        color: _VariantRuleInterface__WEBPACK_IMPORTED_MODULE_4__.variantRuleColors.visual,
        displayIcon: _client_fonts_chessGlyphIndex__WEBPACK_IMPORTED_MODULE_0__.chessGlyphIndex.crossedBinoculars
      }
    };
  }
  matchesPGNDeclaration(match) {
    return /^Ghostboard$/i.test(match);
  }
  serializeToParsingForm() {
    return "Ghostboard";
  }
  isDisabled() {
    return false;
  }
  getSquareVisibility() {
    var squareVisibility = this.callHandler("getSquareVisibility", arguments);
    return squareVisibility.map(r => r.map(v => [...v, _Board_BoardInterface__WEBPACK_IMPORTED_MODULE_2__.DisplaySettings.Ghosted]));
  }
}
_VariantRule__WEBPACK_IMPORTED_MODULE_3__.VariantRule.initVariantRule(Ghostboard);

/***/ }),

/***/ "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/BoardDecorators/ParadigmChess30.ts":
/*!*****************************************************************************************************************!*\
  !*** ./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/BoardDecorators/ParadigmChess30.ts ***!
  \*****************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ParadigmChess30": () => (/* binding */ ParadigmChess30)
/* harmony export */ });
/* harmony import */ var _client_fonts_chessGlyphIndex__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @client/fonts/chessGlyphIndex */ "./src/main/client/fonts/chessGlyphIndex.ts");
/* harmony import */ var _Board_Board__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../Board/Board */ "./src/main/client/ts/logic/movegen/Board/Board.ts");
/* harmony import */ var _VariantRule__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../VariantRule */ "./src/main/client/ts/logic/movegen/VariantRules/VariantRule.ts");
/* harmony import */ var _VariantRuleInterface__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../VariantRuleInterface */ "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleInterface.ts");
function _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }
function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }
function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }
function _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }
function _toPropertyKey(arg) { var key = _toPrimitive(arg, "string"); return typeof key === "symbol" ? key : String(key); }
function _toPrimitive(input, hint) { if (typeof input !== "object" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || "default"); if (typeof res !== "object") return res; throw new TypeError("@@toPrimitive must return a primitive value."); } return (hint === "string" ? String : Number)(input); }




var tag = "paradigmChess30";
class ParadigmChess30 extends _VariantRule__WEBPACK_IMPORTED_MODULE_2__.VariantRule {
  constructor(positionId) {
    super();
    _defineProperty(this, "preMethodExecution", false);
    _defineProperty(this, "positionId", void 0);
    if (typeof positionId === "number") {
      this.positionId = positionId;
    } else {
      this.positionId = -1;
    }
  }
  getPublicProperties() {
    return {
      parameterValue: this.positionId,
      information: {
        name: "Paradigm Chess30",
        description: "Paradigm Chess30: Dragon bishops combine the movement of bishop and xiangqi horse. 30 semi-random starting positions",
        tag,
        color: _VariantRuleInterface__WEBPACK_IMPORTED_MODULE_3__.variantRuleColors.startingPosition,
        displayIcon: _client_fonts_chessGlyphIndex__WEBPACK_IMPORTED_MODULE_0__.chessGlyphIndex.bishop
      }
    };
  }
  getDecoratorType() {
    return _Board_Board__WEBPACK_IMPORTED_MODULE_1__.Board;
  }
  matchesPGNDeclaration(match) {
    var matchArray = match.match(/^ParadigmChess30=((\d{1,3}))$/i);
    if (matchArray) {
      var newID = Number(matchArray[1]);
      if (newID < 0 || newID > 450) return false;
      this.positionId = newID;
      return true;
    } else return false;
  }
  serializeToParsingForm() {
    return "ParadigmChess30=".concat(this.positionId);
  }
  isDisabled() {
    return false;
  }
  getInformation() {
    return {
      name: "Paradigm Chess30",
      description: "Paradigm Chess30: Dragon bishops combine the movement of bishop and xiangqi horse. 30 semi-random starting positions",
      tag
    };
  }
  initDecoratorSettings() {
    if (this.positionId === -1) throw new Error("Position ID for Paradigm Chess30 is not defined");
    var nr = this.positionId;
    var boardSquares = this.decorator.board;
    var data = this.decorator.data;
    var rank = ParadigmChess30.paradigmRanges.findIndex(r => nr >= r[0] && nr <= r[1]);
    if (rank === -1) {
      rank = ParadigmChess30.legacy.twoPlayerRank;
      nr += ParadigmChess30.legacy.twoPlayerAdjustment;
    }
    var calcNr = nr - ParadigmChess30.paradigmRanges[rank][0];
    var ranks = [13 - rank, rank, rank, 13 - rank];
    var pieceArrays = [[], [], [], []];
    pieceArrays[0] = boardSquares[ranks[0]].slice(4, 10);
    pieceArrays[1] = boardSquares.map(row => row[ranks[1]]).slice(4, 10);
    pieceArrays[2] = boardSquares[ranks[2]].slice(4, 10);
    pieceArrays[3] = boardSquares.map(row => row[ranks[3]]).slice(4, 10);
    var royalPieces = data.fenOptions.tag("royal"),
      dead = data.fenOptions.tag("dead");
    var replaceRow = player => {
      var _royalPieces$player;
      var r = (_royalPieces$player = royalPieces[player]) === null || _royalPieces$player === void 0 ? void 0 : _royalPieces$player[player % 2 === 0 ? 1 : 0];
      var pieceCoordinates = [[5, 8], [4, 9], [r === undefined || r >= 7 ? 6 : 7]];
      var moveCoordinate = (i, iter) => {
        var _pieceCoordinates$i$s;
        if (dead[player]) return;
        var coordinateA = player % 2 === 0 ? ranks[player] : iter;
        var coordinateB = player % 2 === 0 ? iter : ranks[player];
        if (pieceArrays[player][pieceCoordinates[i][0] - 4].isWall() || boardSquares[coordinateA][coordinateB].isWall()) return;
        royalPieces.some(r => {
          if (r && r[0] === coordinateA && r[1] === coordinateB) {
            r[0] = coordinateB, r[1] = coordinateA;
            return true;
          }
          return false;
        });
        boardSquares[coordinateA][coordinateB] = pieceArrays[player][((_pieceCoordinates$i$s = pieceCoordinates[i].shift()) !== null && _pieceCoordinates$i$s !== void 0 ? _pieceCoordinates$i$s : 4) - 4];
      };
      var c = 0;
      var rp = r === undefined || r >= 7 ? 7 : 6;
      var permutations = rp === 6 ? ParadigmChess30.permutations[calcNr].slice().reverse() : ParadigmChess30.permutations[calcNr];
      for (var i = 4; i < 10; i++) {
        if (i === rp) continue;
        moveCoordinate(permutations[c++], i);
      }
    };
    for (var i = 0; i < 4; i++) replaceRow(i);
    var _iterator = _createForOfIteratorHelper(this.wrappingDecorators),
      _step;
    try {
      for (_iterator.s(); !(_step = _iterator.n()).done;) {
        var _decorator$initDecora;
        var decorator = _step.value;
        (_decorator$initDecora = decorator.initDecoratorSettings) === null || _decorator$initDecora === void 0 ? void 0 : _decorator$initDecora.call(decorator);
      }
    } catch (err) {
      _iterator.e(err);
    } finally {
      _iterator.f();
    }
  }
}
_VariantRule__WEBPACK_IMPORTED_MODULE_2__.VariantRule.initVariantRule(ParadigmChess30);
_defineProperty(ParadigmChess30, "paradigmRanges", [...Array.from({
  length: 14
}, (_, i) => [30 * (i + 1) + 1, 30 + 30 * (i + 1)])]);
// 0 = color bound, 1 = minor, 2 = major
_defineProperty(ParadigmChess30, "permutations", [[0, 0, 1, 1, 2], [0, 0, 1, 2, 1], [0, 0, 2, 1, 1], [0, 1, 0, 1, 2], [0, 1, 0, 2, 1], [0, 1, 1, 0, 2], [0, 1, 1, 2, 0], [0, 1, 2, 0, 1], [0, 1, 2, 1, 0], [0, 2, 0, 1, 1], [0, 2, 1, 0, 1], [0, 2, 1, 1, 0], [1, 0, 0, 1, 2], [1, 0, 0, 2, 1], [1, 0, 1, 0, 2], [1, 0, 1, 2, 0], [1, 0, 2, 0, 1], [1, 0, 2, 1, 0], [1, 1, 0, 0, 2], [1, 1, 0, 2, 0], [1, 1, 2, 0, 0], [1, 2, 0, 0, 1], [1, 2, 0, 1, 0], [1, 2, 1, 0, 0], [2, 0, 0, 1, 1], [2, 0, 1, 0, 1], [2, 0, 1, 1, 0], [2, 1, 0, 0, 1], [2, 1, 0, 1, 0], [2, 1, 1, 0, 0]]);
_defineProperty(ParadigmChess30, "legacy", {
  twoPlayerRank: 3,
  twoPlayerAdjustment: 30 * 4
});

/***/ }),

/***/ "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/BoardDecorators/PiecesFaceCenter.ts":
/*!******************************************************************************************************************!*\
  !*** ./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/BoardDecorators/PiecesFaceCenter.ts ***!
  \******************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "PiecesFaceCenter": () => (/* binding */ PiecesFaceCenter)
/* harmony export */ });
/* harmony import */ var _Board_Board__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../Board/Board */ "./src/main/client/ts/logic/movegen/Board/Board.ts");
/* harmony import */ var _Board_BoardInterface__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../Board/BoardInterface */ "./src/main/client/ts/logic/movegen/Board/BoardInterface.ts");
/* harmony import */ var _VariantRule__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../VariantRule */ "./src/main/client/ts/logic/movegen/VariantRules/VariantRule.ts");
/* harmony import */ var _VariantRuleInterface__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../VariantRuleInterface */ "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleInterface.ts");
/* harmony import */ var _client_fonts_chessGlyphIndex__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @client/fonts/chessGlyphIndex */ "./src/main/client/fonts/chessGlyphIndex.ts");





var tag = "piecesFaceCenter";
class PiecesFaceCenter extends _VariantRule__WEBPACK_IMPORTED_MODULE_2__.VariantRule {
  getDecoratorType() {
    return _Board_Board__WEBPACK_IMPORTED_MODULE_0__.Board;
  }
  getPublicProperties() {
    return {
      parameterValue: true,
      information: {
        name: "Pieces Face Center",
        description: "Pieces are rotated to face center",
        tag,
        color: _VariantRuleInterface__WEBPACK_IMPORTED_MODULE_3__.variantRuleColors.visual,
        displayIcon: _client_fonts_chessGlyphIndex__WEBPACK_IMPORTED_MODULE_4__.chessGlyphIndex.pawn3dLarge
      }
    };
  }
  matchesPGNDeclaration(match) {
    return /^PiecesFaceCenter$/i.test(match);
  }
  serializeToParsingForm() {
    return "PiecesFaceCenter";
  }
  isDisabled() {
    return false;
  }
  getSquareVisibility() {
    var squareVisibility = this.callHandler("getSquareVisibility", arguments);
    return squareVisibility.map((r, i) => r.map((v, j) => {
      if (!this.decorator.board[i][j].isPiece()) {
        return v;
      } else {
        return [...v, _Board_BoardInterface__WEBPACK_IMPORTED_MODULE_1__.DisplaySettings.PieceFacesCenter];
      }
    }));
  }
}
_VariantRule__WEBPACK_IMPORTED_MODULE_2__.VariantRule.initVariantRule(PiecesFaceCenter);

/***/ }),

/***/ "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/BoardDecorators/SeirawanSetup.ts":
/*!***************************************************************************************************************!*\
  !*** ./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/BoardDecorators/SeirawanSetup.ts ***!
  \***************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "SeirawanSetup": () => (/* binding */ SeirawanSetup)
/* harmony export */ });
/* harmony import */ var _Board_Board__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../Board/Board */ "./src/main/client/ts/logic/movegen/Board/Board.ts");
/* harmony import */ var _Board_BoardInterface__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../Board/BoardInterface */ "./src/main/client/ts/logic/movegen/Board/BoardInterface.ts");
/* harmony import */ var _GameInformation_GameData__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../GameInformation/GameData */ "./src/main/client/ts/logic/movegen/GameInformation/GameData.ts");
/* harmony import */ var _MoveTree_MoveTreeInterface__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../MoveTree/MoveTreeInterface */ "./src/main/client/ts/logic/movegen/MoveTree/MoveTreeInterface.ts");
/* harmony import */ var _VariantRule__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../VariantRule */ "./src/main/client/ts/logic/movegen/VariantRules/VariantRule.ts");
/* harmony import */ var _VariantRuleInterface__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../VariantRuleInterface */ "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleInterface.ts");
/* harmony import */ var _client_fonts_chessGlyphIndex__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @client/fonts/chessGlyphIndex */ "./src/main/client/fonts/chessGlyphIndex.ts");
function _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }
function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }
function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }







var tag = "seirawanSetup";
class SeirawanSetup extends _VariantRule__WEBPACK_IMPORTED_MODULE_4__.VariantRule {
  getDecoratorType() {
    return _Board_Board__WEBPACK_IMPORTED_MODULE_0__.Board;
  }
  getPublicProperties() {
    return {
      parameterValue: true,
      information: {
        name: "Seirawan Setup",
        description: "When moving a piece for the first time, a piece from the bank can be placed on the vacated square, as part of the move",
        tag,
        color: _VariantRuleInterface__WEBPACK_IMPORTED_MODULE_5__.variantRuleColors.extending,
        displayIcon: _client_fonts_chessGlyphIndex__WEBPACK_IMPORTED_MODULE_6__.chessGlyphIndex.pieceMeal
      }
    };
  }
  matchesPGNDeclaration(match) {
    return /^SeirawanSetup$/i.test(match);
  }
  serializeToParsingForm() {
    return "SeirawanSetup";
  }
  isDisabled(_ref) {
    var variantDataRules = _ref.variantDataRules;
    return variantDataRules.crazyhouse || variantDataRules.setupChess !== false;
  }
  initDecoratorSettings() {
    var fenOptions = this.decorator.data.fenOptions;
    var areBanksEnabled = fenOptions.tag("areBanksEnabled"),
      dead = fenOptions.tag("dead"),
      seirawanDrops = fenOptions.tag("seirawanDrops"),
      bank = fenOptions.tag("bank");
    var _iterator = _createForOfIteratorHelper(_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_2__.colors),
      _step;
    try {
      for (_iterator.s(); !(_step = _iterator.n()).done;) {
        var color = _step.value;
        if (!dead[color] && seirawanDrops[color].size > 0 && bank[color].size > 0) {
          areBanksEnabled[color] = true;
        }
      }
    } catch (err) {
      _iterator.e(err);
    } finally {
      _iterator.f();
    }
    var _iterator2 = _createForOfIteratorHelper(this.wrappingDecorators),
      _step2;
    try {
      for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
        var _decorator$initDecora;
        var decorator = _step2.value;
        (_decorator$initDecora = decorator.initDecoratorSettings) === null || _decorator$initDecora === void 0 ? void 0 : _decorator$initDecora.call(decorator);
      }
    } catch (err) {
      _iterator2.e(err);
    } finally {
      _iterator2.f();
    }
  }
  makeMove(move) {
    var _this$decorator$data = this.decorator.data,
      fenOptions = _this$decorator$data.fenOptions,
      sideToMove = _this$decorator$data.sideToMove;
    var areBanksEnabled = fenOptions.tag("areBanksEnabled"),
      seirawanDrops = fenOptions.tag("seirawanDrops"),
      bank = fenOptions.tag("bank");
    var disabledIndex = false;
    if ((0,_MoveTree_MoveTreeInterface__WEBPACK_IMPORTED_MODULE_3__.verifyStandardMove)(move[0])) {
      seirawanDrops[sideToMove].delete((0,_Board_BoardInterface__WEBPACK_IMPORTED_MODULE_1__.stringifyCoordinate)(move[0].startCoordinates));
      if (seirawanDrops[sideToMove].size === 0 || bank[sideToMove].size === 0) {
        disabledIndex = true;
      }
    }
    var returnValue = this.callHandler("makeMove", arguments);
    if (disabledIndex) {
      seirawanDrops[sideToMove].clear();
      bank[sideToMove].clear();
      areBanksEnabled[sideToMove] = false;
    }
    return returnValue;
  }
  getLegalMoves(i, j) {
    var _this$decorator$data2 = this.decorator.data,
      fenOptions = _this$decorator$data2.fenOptions,
      sideToMove = _this$decorator$data2.sideToMove;
    var seirawanDrops = fenOptions.tag("seirawanDrops"),
      bank = fenOptions.tag("bank");
    var startCoordinates = [i, j];
    var stringifiedCoordinate = (0,_Board_BoardInterface__WEBPACK_IMPORTED_MODULE_1__.stringifyCoordinate)(startCoordinates);
    var coordinate = [...seirawanDrops[sideToMove]].find(c => c === stringifiedCoordinate);
    var validateWithDrops = bank[sideToMove].size !== 0 && coordinate !== undefined;
    var moves = this.callHandler("getLegalMoves", arguments);
    var continuations = [];
    var _iterator3 = _createForOfIteratorHelper(bank[sideToMove].keys()),
      _step3;
    try {
      for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {
        var piece = _step3.value;
        continuations.push({
          piece,
          endCoordinates: startCoordinates
        });
      }
    } catch (err) {
      _iterator3.e(err);
    } finally {
      _iterator3.f();
    }
    if (validateWithDrops && (0,_MoveTree_MoveTreeInterface__WEBPACK_IMPORTED_MODULE_3__.verifyRequiredMove)(continuations)) {
      var _iterator4 = _createForOfIteratorHelper(moves),
        _step4;
      try {
        for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {
          var move = _step4.value;
          move.nextChainedMoves = continuations;
        }
      } catch (err) {
        _iterator4.e(err);
      } finally {
        _iterator4.f();
      }
    }
    return moves;
  }
}
_VariantRule__WEBPACK_IMPORTED_MODULE_4__.VariantRule.initVariantRule(SeirawanSetup);

/***/ }),

/***/ "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/BoardDecorators/SelfCheck.ts":
/*!***********************************************************************************************************!*\
  !*** ./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/BoardDecorators/SelfCheck.ts ***!
  \***********************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "SelfCheck": () => (/* binding */ SelfCheck)
/* harmony export */ });
/* harmony import */ var _Board_Board__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../Board/Board */ "./src/main/client/ts/logic/movegen/Board/Board.ts");
/* harmony import */ var _Board_BoardInterface__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../Board/BoardInterface */ "./src/main/client/ts/logic/movegen/Board/BoardInterface.ts");
/* harmony import */ var _VariantRule__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../VariantRule */ "./src/main/client/ts/logic/movegen/VariantRules/VariantRule.ts");
/* harmony import */ var _VariantRuleInterface__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../VariantRuleInterface */ "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleInterface.ts");
/* harmony import */ var _client_fonts_chessGlyphIndex__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @client/fonts/chessGlyphIndex */ "./src/main/client/fonts/chessGlyphIndex.ts");
function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }
function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function _iterableToArrayLimit(arr, i) { var _i = null == arr ? null : "undefined" != typeof Symbol && arr[Symbol.iterator] || arr["@@iterator"]; if (null != _i) { var _s, _e, _x, _r, _arr = [], _n = !0, _d = !1; try { if (_x = (_i = _i.call(arr)).next, 0 === i) { if (Object(_i) !== _i) return; _n = !1; } else for (; !(_n = (_s = _x.call(_i)).done) && (_arr.push(_s.value), _arr.length !== i); _n = !0); } catch (err) { _d = !0, _e = err; } finally { try { if (!_n && null != _i.return && (_r = _i.return(), Object(_r) !== _r)) return; } finally { if (_d) throw _e; } } return _arr; } }
function _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }
function _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e2) { throw _e2; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e3) { didErr = true; err = _e3; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }
function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }
function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }





var tag = "selfCheck";
class SelfCheck extends _VariantRule__WEBPACK_IMPORTED_MODULE_2__.VariantRule {
  getDecoratorType() {
    return _Board_Board__WEBPACK_IMPORTED_MODULE_0__.Board;
  }
  getPublicProperties() {
    return {
      parameterValue: true,
      information: {
        name: "Self-check",
        description: "Self-checks cost lives. Checkmate yourself to earn points",
        tag,
        color: _VariantRuleInterface__WEBPACK_IMPORTED_MODULE_3__.variantRuleColors.minor,
        displayIcon: _client_fonts_chessGlyphIndex__WEBPACK_IMPORTED_MODULE_4__.chessGlyphIndex.donut
      }
    };
  }
  matchesPGNDeclaration(match) {
    return /^SelfCheck$/i.test(match);
  }
  serializeToParsingForm() {
    return "SelfCheck";
  }
  isDisabled(_ref) {
    var variantDataRules = _ref.variantDataRules;
    return !variantDataRules.nCheck || !variantDataRules.captureTheKing;
  }
  getCurrentChecks() {
    var baseColor = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.decorator.data.sideToMove;
    var _this$decorator = this.decorator,
      _this$decorator$data = _this$decorator.data,
      fenOptions = _this$decorator$data.fenOptions,
      sideToMove = _this$decorator$data.sideToMove,
      preGeneratedAttacks = _this$decorator.preGeneratedAttacks;
    var baseChecks = this.callHandler("getCurrentChecks", arguments);
    var royal = fenOptions.tag("royal")[baseColor];
    var newCoordinates = [];
    if (royal) {
      var _iterator = _createForOfIteratorHelper(preGeneratedAttacks[sideToMove].hoppingPieceLines),
        _step;
      try {
        for (_iterator.s(); !(_step = _iterator.n()).done;) {
          var _step$value = _slicedToArray(_step.value, 2),
            attackingPiece = _step$value[0],
            attackCoordinates = _step$value[1];
          if ((0,_Board_BoardInterface__WEBPACK_IMPORTED_MODULE_1__.compareCoordinates)(attackCoordinates, royal)) {
            newCoordinates.push((0,_Board_BoardInterface__WEBPACK_IMPORTED_MODULE_1__.stringifyCoordinate)(attackingPiece));
          }
        }
      } catch (err) {
        _iterator.e(err);
      } finally {
        _iterator.f();
      }
      var _iterator2 = _createForOfIteratorHelper(preGeneratedAttacks[sideToMove].slidingPiecesLines),
        _step2;
      try {
        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
          var _step2$value = _slicedToArray(_step2.value, 2),
            _attackingPiece = _step2$value[0],
            attackLine = _step2$value[1];
          var _iterator3 = _createForOfIteratorHelper(attackLine),
            _step3;
          try {
            for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {
              var _attackCoordinates = _step3.value;
              if ((0,_Board_BoardInterface__WEBPACK_IMPORTED_MODULE_1__.compareCoordinates)(_attackCoordinates, royal)) {
                newCoordinates.push((0,_Board_BoardInterface__WEBPACK_IMPORTED_MODULE_1__.stringifyCoordinate)(_attackingPiece));
                break;
              }
            }
          } catch (err) {
            _iterator3.e(err);
          } finally {
            _iterator3.f();
          }
        }
      } catch (err) {
        _iterator2.e(err);
      } finally {
        _iterator2.f();
      }
    }
    baseChecks[baseColor] = newCoordinates;
    return baseChecks;
  }
}
_VariantRule__WEBPACK_IMPORTED_MODULE_2__.VariantRule.initVariantRule(SelfCheck);

/***/ }),

/***/ "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/BoardDecorators/SetupChess.ts":
/*!************************************************************************************************************!*\
  !*** ./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/BoardDecorators/SetupChess.ts ***!
  \************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "SetupChess": () => (/* binding */ SetupChess)
/* harmony export */ });
/* harmony import */ var _moveGeneration_PieceControl_PieceControlInterface__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @moveGeneration/PieceControl/PieceControlInterface */ "./src/main/client/ts/logic/movegen/PieceControl/PieceControlInterface.ts");
/* harmony import */ var _baseTypes__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../../baseTypes */ "./src/main/client/ts/baseTypes.ts");
/* harmony import */ var _Board_Board__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../Board/Board */ "./src/main/client/ts/logic/movegen/Board/Board.ts");
/* harmony import */ var _GameInformation_GameData__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../GameInformation/GameData */ "./src/main/client/ts/logic/movegen/GameInformation/GameData.ts");
/* harmony import */ var _MoveTree_MoveTreeInterface__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../MoveTree/MoveTreeInterface */ "./src/main/client/ts/logic/movegen/MoveTree/MoveTreeInterface.ts");
/* harmony import */ var _VariantRule__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../VariantRule */ "./src/main/client/ts/logic/movegen/VariantRules/VariantRule.ts");
/* harmony import */ var _VariantRuleInterface__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../VariantRuleInterface */ "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleInterface.ts");
/* harmony import */ var _client_fonts_chessGlyphIndex__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @client/fonts/chessGlyphIndex */ "./src/main/client/fonts/chessGlyphIndex.ts");
function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }
function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function _iterableToArrayLimit(arr, i) { var _i = null == arr ? null : "undefined" != typeof Symbol && arr[Symbol.iterator] || arr["@@iterator"]; if (null != _i) { var _s, _e, _x, _r, _arr = [], _n = !0, _d = !1; try { if (_x = (_i = _i.call(arr)).next, 0 === i) { if (Object(_i) !== _i) return; _n = !1; } else for (; !(_n = (_s = _x.call(_i)).done) && (_arr.push(_s.value), _arr.length !== i); _n = !0); } catch (err) { _d = !0, _e = err; } finally { try { if (!_n && null != _i.return && (_r = _i.return(), Object(_r) !== _r)) return; } finally { if (_d) throw _e; } } return _arr; } }
function _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }
function _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e2) { throw _e2; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e3) { didErr = true; err = _e3; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }
function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }
function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }
function _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }
function _toPropertyKey(arg) { var key = _toPrimitive(arg, "string"); return typeof key === "symbol" ? key : String(key); }
function _toPrimitive(input, hint) { if (typeof input !== "object" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || "default"); if (typeof res !== "object") return res; throw new TypeError("@@toPrimitive must return a primitive value."); } return (hint === "string" ? String : Number)(input); }








var tag = "setupChess";
class SetupChess extends _VariantRule__WEBPACK_IMPORTED_MODULE_5__.VariantRule {
  constructor(setupPoints) {
    super();
    _defineProperty(this, "disabled", false);
    _defineProperty(this, "setupPoints", void 0);
    _defineProperty(this, "wereBanksEnabled", [false, false, false, false]);
    _defineProperty(this, "permutationCoordinates", [[], [], [], []]);
    _defineProperty(this, "pawnPermutationCoordinates", [[], [], [], []]);
    if (typeof setupPoints === "number") {
      this.setupPoints = setupPoints;
    } else {
      this.setupPoints = false;
    }
  }
  getDecoratorType() {
    return _Board_Board__WEBPACK_IMPORTED_MODULE_2__.Board;
  }
  getPublicProperties() {
    return {
      parameterValue: this.setupPoints,
      information: {
        name: "Setup Material",
        description: "Set up ".concat(this.setupPoints || 0, " points before the game starts"),
        tag,
        color: _VariantRuleInterface__WEBPACK_IMPORTED_MODULE_6__.variantRuleColors.phased,
        displayIcon: _client_fonts_chessGlyphIndex__WEBPACK_IMPORTED_MODULE_7__.chessGlyphIndex.movePawn
      }
    };
  }
  matchesPGNDeclaration(match) {
    var matchArray = match.match(/^Setup=(\d+)$/);
    if (matchArray) {
      this.setupPoints = Number(matchArray[1]);
      return true;
    } else {
      return false;
    }
  }
  serializeToParsingForm() {
    return "Setup=".concat(this.setupPoints || 0);
  }
  isDisabled() {
    return false;
  }
  getInsufficientMaterialData() {
    return {
      isPartiallyDisabled: false,
      isDisabled: true
    };
  }
  getParametrizedOptions() {
    var options = new Map([["Off", false]]);
    for (var i = 1; i < 50; i++) options.set(String(i), i);
    for (var _i = 50; _i <= 120; _i += 5) options.set(String(_i), _i);
    return options;
  }
  initDecoratorSettings() {
    var _this = this;
    var fenOptions = this.decorator.data.fenOptions;
    var areBanksEnabled = fenOptions.tag("areBanksEnabled"),
      dead = fenOptions.tag("dead"),
      setupComplete = fenOptions.tag("setupComplete"),
      setupPoints = fenOptions.tag("setupPoints"),
      pawnBaseRank = fenOptions.tag("pawnBaseRank"),
      royal = fenOptions.tag("royal"),
      castleKingside = fenOptions.tag("castleKingside"),
      castleQueenside = fenOptions.tag("castleQueenside");
    var areSetupPointsUnset = setupPoints === null;
    var modifyDisplacements = (i, j, color) => {
      var baseDisplacements = [[13 - i, j], [j, i], [i, j], [13 - j, i]];
      return baseDisplacements[color];
    };
    var _iterator = _createForOfIteratorHelper(_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_3__.colors),
      _step;
    try {
      var _loop = function _loop() {
        var color = _step.value;
        var bankEnabled = false;
        if (areBanksEnabled[color]) {
          _this.wereBanksEnabled[color] = true;
          bankEnabled = true;
        } else if (!setupComplete[color]) {
          areBanksEnabled[color] = true;
          bankEnabled = true;
        }
        if (bankEnabled) {
          var files = (0,_baseTypes__WEBPACK_IMPORTED_MODULE_1__.createTupleFromCallback)((_, i) => i, _GameInformation_GameData__WEBPACK_IMPORTED_MODULE_3__.boardDimension);
          var pawnRanks = [pawnBaseRank, pawnBaseRank + 1].filter(rank => rank >= 0 && rank <= 13);
          var ranks = [pawnBaseRank - 1, ...pawnRanks];
          _this.permutationCoordinates[color] = files.flatMap(file => ranks.map(rank => modifyDisplacements(rank, file, color)));
          _this.pawnPermutationCoordinates[color] = files.flatMap(file => pawnRanks.map(rank => modifyDisplacements(rank, file, color)));
        }
        if (!areSetupPointsUnset && !dead[color]) {
          setupPoints[color] = _this.setupPoints === false ? 0 : _this.setupPoints;
        }
        if (!royal[color]) {
          castleKingside[color] = false;
          castleQueenside[color] = false;
        }
      };
      for (_iterator.s(); !(_step = _iterator.n()).done;) {
        _loop();
      }
    } catch (err) {
      _iterator.e(err);
    } finally {
      _iterator.f();
    }
    var _iterator2 = _createForOfIteratorHelper(this.wrappingDecorators),
      _step2;
    try {
      for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
        var _decorator$initDecora;
        var decorator = _step2.value;
        (_decorator$initDecora = decorator.initDecoratorSettings) === null || _decorator$initDecora === void 0 ? void 0 : _decorator$initDecora.call(decorator);
      }
    } catch (err) {
      _iterator2.e(err);
    } finally {
      _iterator2.f();
    }
  }
  getLegalMoves() {
    if (!this.disabled) return [];
    return this.callHandler("getLegalMoves", arguments);
  }
  getCoordinateList(piece) {
    return _moveGeneration_PieceControl_PieceControlInterface__WEBPACK_IMPORTED_MODULE_0__.pieceControlConfigSettings[piece.piece].moveGenerationSettings.isPawn ? this.pawnPermutationCoordinates : this.permutationCoordinates;
  }
  getDroppingMoves(piece) {
    var color = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.decorator.data.sideToMove;
    if (piece.color !== color) return [];
    if (!this.disabled && !this.decorator.data.fenOptions.tag("setupComplete")[color]) {
      var coordinateList = this.getCoordinateList(piece);
      var resultingMoveDrops = [];
      var _iterator3 = _createForOfIteratorHelper(coordinateList[color]),
        _step3;
      try {
        for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {
          var coordinate = _step3.value;
          if (this.decorator.board[coordinate[0]][coordinate[1]].isEmpty()) {
            resultingMoveDrops.push({
              piece,
              endCoordinates: coordinate
            });
          }
        }
      } catch (err) {
        _iterator3.e(err);
      } finally {
        _iterator3.f();
      }
      return resultingMoveDrops;
    } else return this.callHandler("getDroppingMoves", arguments);
  }
  makeMove(move) {
    var ignoreNextMoves = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;
    var fenOptions = this.decorator.data.fenOptions;
    var areBanksEnabled = fenOptions.tag("areBanksEnabled"),
      dead = fenOptions.tag("dead"),
      setupComplete = fenOptions.tag("setupComplete"),
      setupPoints = fenOptions.tag("setupPoints"),
      bank = fenOptions.tag("bank"),
      royal = fenOptions.tag("royal");
    var color = this.decorator.data.sideToMove,
      moveData = move[0];
    var results = this.callHandler("makeMove", arguments);
    if (!this.disabled && !setupComplete[color] && (0,_MoveTree_MoveTreeInterface__WEBPACK_IMPORTED_MODULE_4__.verifyDroppingMove)(moveData) && setupPoints) {
      var pointValue = _moveGeneration_PieceControl_PieceControlInterface__WEBPACK_IMPORTED_MODULE_0__.pieceControlConfigSettings[moveData.piece.piece].points.singlesPoints;
      if (moveData.piece.piece === "K") {
        bank[color].delete(moveData.piece);
        royal[color] = moveData.endCoordinates;
      } else {
        setupPoints[color] -= pointValue;
      }
      var pointsLeft = setupPoints[color];
      var _iterator4 = _createForOfIteratorHelper(bank[color]),
        _step4;
      try {
        for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {
          var _step4$value = _slicedToArray(_step4.value, 1),
            piece = _step4$value[0];
          if (piece.piece !== "K" && pointValue > pointsLeft) {
            bank[color].delete(piece);
          }
        }
      } catch (err) {
        _iterator4.e(err);
      } finally {
        _iterator4.f();
      }
      if (bank[color].size === 0) {
        setupComplete[color] = true;
      } else {
        var coordinateList = this.getCoordinateList(moveData.piece);
        var anyDrop = false;
        var _iterator5 = _createForOfIteratorHelper(coordinateList[color]),
          _step5;
        try {
          for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {
            var coordinate = _step5.value;
            if (this.decorator.board[coordinate[0]][coordinate[1]].isEmpty()) {
              anyDrop = true;
              break;
            }
          }
        } catch (err) {
          _iterator5.e(err);
        } finally {
          _iterator5.f();
        }
        if (!anyDrop) {
          setupComplete[color] = true;
        }
      }
    }
    if (setupComplete.every((v, i) => v || dead[i])) {
      this.disabled = true;
      var _iterator6 = _createForOfIteratorHelper(_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_3__.colors),
        _step6;
      try {
        for (_iterator6.s(); !(_step6 = _iterator6.n()).done;) {
          var _color = _step6.value;
          if (!this.wereBanksEnabled[_color]) {
            areBanksEnabled[_color] = false;
            bank[_color].clear();
          }
        }
      } catch (err) {
        _iterator6.e(err);
      } finally {
        _iterator6.f();
      }
    }
    if (!this.disabled && !ignoreNextMoves && setupComplete[this.decorator.data.sideToMove]) {
      _Board_Board__WEBPACK_IMPORTED_MODULE_2__.Board.prototype.makeMove.call(this.decorator, [{
        type: _MoveTree_MoveTreeInterface__WEBPACK_IMPORTED_MODULE_4__.InternalMoveSignature.Pass
      }]);
    }
    return results;
  }
}
_VariantRule__WEBPACK_IMPORTED_MODULE_5__.VariantRule.initVariantRule(SetupChess);

/***/ }),

/***/ "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/BoardDecorators/Taboo.ts":
/*!*******************************************************************************************************!*\
  !*** ./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/BoardDecorators/Taboo.ts ***!
  \*******************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Taboo": () => (/* binding */ Taboo)
/* harmony export */ });
/* harmony import */ var _Board_Board__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../Board/Board */ "./src/main/client/ts/logic/movegen/Board/Board.ts");
/* harmony import */ var _GameInformation_GameData__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../GameInformation/GameData */ "./src/main/client/ts/logic/movegen/GameInformation/GameData.ts");
/* harmony import */ var _VariantRule__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../VariantRule */ "./src/main/client/ts/logic/movegen/VariantRules/VariantRule.ts");
/* harmony import */ var _VariantRuleInterface__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../VariantRuleInterface */ "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleInterface.ts");
/* harmony import */ var _client_fonts_chessGlyphIndex__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @client/fonts/chessGlyphIndex */ "./src/main/client/fonts/chessGlyphIndex.ts");
function _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }
function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }
function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }





var tag = "taboo";
class Taboo extends _VariantRule__WEBPACK_IMPORTED_MODULE_2__.VariantRule {
  getDecoratorType() {
    return _Board_Board__WEBPACK_IMPORTED_MODULE_0__.Board;
  }
  getPublicProperties() {
    return {
      parameterValue: true,
      information: {
        name: "Taboo",
        description: "Giving check is forbidden",
        tag,
        color: _VariantRuleInterface__WEBPACK_IMPORTED_MODULE_3__.variantRuleColors.widespread,
        displayIcon: _client_fonts_chessGlyphIndex__WEBPACK_IMPORTED_MODULE_4__.chessGlyphIndex.equal
      }
    };
  }
  matchesPGNDeclaration(match) {
    return /^Taboo$/i.test(match);
  }
  serializeToParsingForm() {
    return "Taboo";
  }
  isDisabled() {
    return false;
  }
  isSetupComplex() {
    return true;
  }
  isTheMoveLegal(_, moveData) {
    var initialDead = this.decorator.data.fenOptions.tag("dead").slice();
    var snapshot = this.decorator.createSnapshot();
    try {
      this.decorator.makeMove([moveData], true);
      var newDead = this.decorator.data.fenOptions.tag("dead").slice();
      var _iterator = _createForOfIteratorHelper(_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_1__.colors),
        _step;
      try {
        for (_iterator.s(); !(_step = _iterator.n()).done;) {
          var color = _step.value;
          if (!initialDead[color] && newDead[color] || this.decorator.isKingInCheck(color)) return false;
        }
      } catch (err) {
        _iterator.e(err);
      } finally {
        _iterator.f();
      }
      return true;
    } finally {
      this.decorator.loadSnapshot(snapshot);
    }
  }
}
_VariantRule__WEBPACK_IMPORTED_MODULE_2__.VariantRule.initVariantRule(Taboo);

/***/ }),

/***/ "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/BoardVariantModules/EngineMoveGeneration/Algorithms/ComfuterEvaluation.ts":
/*!********************************************************************************************************************************************************!*\
  !*** ./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/BoardVariantModules/EngineMoveGeneration/Algorithms/ComfuterEvaluation.ts ***!
  \********************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "comfuterAlgorithm": () => (/* binding */ comfuterAlgorithm)
/* harmony export */ });
/* harmony import */ var _client_ts_baseTypes__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @client/ts/baseTypes */ "./src/main/client/ts/baseTypes.ts");
/* harmony import */ var _client_ts_logic_BaseInterfaces__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @client/ts/logic/BaseInterfaces */ "./src/main/client/ts/logic/BaseInterfaces.ts");
/* harmony import */ var _moveGeneration_Board_BoardInterface__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @moveGeneration/Board/BoardInterface */ "./src/main/client/ts/logic/movegen/Board/BoardInterface.ts");
/* harmony import */ var _moveGeneration_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @moveGeneration/GameInformation/GameData */ "./src/main/client/ts/logic/movegen/GameInformation/GameData.ts");
/* harmony import */ var _moveGeneration_GameInformation_GameUnits_PieceString__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @moveGeneration/GameInformation/GameUnits/PieceString */ "./src/main/client/ts/logic/movegen/GameInformation/GameUnits/PieceString.ts");
/* harmony import */ var _moveGeneration_MoveTree_MoveTreeInterface__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @moveGeneration/MoveTree/MoveTreeInterface */ "./src/main/client/ts/logic/movegen/MoveTree/MoveTreeInterface.ts");
/* harmony import */ var _moveGeneration_PieceControl_PieceControlInterface__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @moveGeneration/PieceControl/PieceControlInterface */ "./src/main/client/ts/logic/movegen/PieceControl/PieceControlInterface.ts");
/* harmony import */ var _BotInterface__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../BotInterface */ "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/BoardVariantModules/EngineMoveGeneration/BotInterface.ts");
/* harmony import */ var _RandomEvaluation__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./RandomEvaluation */ "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/BoardVariantModules/EngineMoveGeneration/Algorithms/RandomEvaluation.ts");
function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }
function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function _iterableToArrayLimit(arr, i) { var _i = null == arr ? null : "undefined" != typeof Symbol && arr[Symbol.iterator] || arr["@@iterator"]; if (null != _i) { var _s, _e, _x, _r, _arr = [], _n = !0, _d = !1; try { if (_x = (_i = _i.call(arr)).next, 0 === i) { if (Object(_i) !== _i) return; _n = !1; } else for (; !(_n = (_s = _x.call(_i)).done) && (_arr.push(_s.value), _arr.length !== i); _n = !0); } catch (err) { _d = !0, _e = err; } finally { try { if (!_n && null != _i.return && (_r = _i.return(), Object(_r) !== _r)) return; } finally { if (_d) throw _e; } } return _arr; } }
function _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }
function _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e2) { throw _e2; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e3) { didErr = true; err = _e3; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }
function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }
function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }
function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }
function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }
function _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }
function _toPropertyKey(arg) { var key = _toPrimitive(arg, "string"); return typeof key === "symbol" ? key : String(key); }
function _toPrimitive(input, hint) { if (typeof input !== "object" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || "default"); if (typeof res !== "object") return res; throw new TypeError("@@toPrimitive must return a primitive value."); } return (hint === "string" ? String : Number)(input); }









var onlyUnique = (value, index, self) => self.indexOf(value) === index;
var stringifyKey = (i, j, color) => "".concat(i, ",").concat(j, "/").concat(color !== null && color !== void 0 ? color : "");
function getPieceInFront(i, j, color) {
  switch (color) {
    case 0:
      return [i - 1, j];
    case 1:
      return [i, j + 1];
    case 2:
      return [i + 1, j];
    case 3:
      return [i, j - 1];
  }
}
function createComfuterAlgorithm() {
  var boardAccessors;
  function augmentBoardAccessorsFromBoard(board) {
    return {
      board,
      boardSquares: board.board,
      data: board.data,
      remainingReal: board.data.getRealPlayers(),
      remaining: board.data.fenOptions.tag("dead").map((v, i) => v ? false : i).filter(v => v === false),
      coverage: (0,_client_ts_logic_BaseInterfaces__WEBPACK_IMPORTED_MODULE_1__.initializeBoardSquares)(() => []),
      pieces: board.getPlayerPieces(),
      controls: board.controls,
      royal: board.data.fenOptions.tag("royal"),
      hangingCache: new Map(),
      coverageCache: new Map(),
      pieceValueCache: new Map()
    };
  }
  function initializeBoardAccessorsFromBoard(board) {
    var promotionRank = board.variantData.promotionRank !== false ? [_moveGeneration_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_3__.boardDimension - board.variantData.promotionRank, board.variantData.promotionRank - 1, board.variantData.promotionRank - 1, _moveGeneration_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_3__.boardDimension - board.variantData.promotionRank] : (0,_client_ts_baseTypes__WEBPACK_IMPORTED_MODULE_0__.createTuple)(99, _moveGeneration_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_3__.totalPlayers);
    boardAccessors = _objectSpread(_objectSpread({}, augmentBoardAccessorsFromBoard(board)), {}, {
      variantData: board.variantData,
      promotionRank,
      isFFA: board.gameType.isFFA(),
      isTeams: !board.gameType.isFFA(),
      zombieType: board.data.fenOptions.tag("zombieType"),
      defaultSideToMove: board.data.sideToMove
    });
  }
  function getDistanceFromPromotion(color, i, j) {
    if (i === -1) return 99;
    return Math.abs(boardAccessors.promotionRank[color] - (color & 1 ? i : j)) || 99;
  }
  function getDistanceFromKing(i, j, color) {
    if (i === -1) return 999;
    var royalPiece = boardAccessors.royal[color];
    if (!royalPiece) return 999;
    var x = Math.abs(i - royalPiece[0]),
      y = Math.abs(j - royalPiece[1]);
    if (x === 0 && y === 0) return 999;
    return Math.max(x, y);
  }
  function inspectCoverage() {
    var _boardAccessors = boardAccessors,
      board = _boardAccessors.board,
      boardSquares = _boardAccessors.boardSquares,
      pieces = _boardAccessors.pieces,
      coverage = _boardAccessors.coverage;
    var _iterator = _createForOfIteratorHelper(_moveGeneration_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_3__.colors),
      _step;
    try {
      for (_iterator.s(); !(_step = _iterator.n()).done;) {
        var color = _step.value;
        var _iterator2 = _createForOfIteratorHelper(pieces[color]),
          _step2;
        try {
          for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
            var coordinate = _step2.value;
            var pc = boardSquares[coordinate[0]][coordinate[1]];
            if (!pc.isPiece()) continue;
            var destinations = board.preGeneratedAttacks[color].pieceMovements.get((0,_moveGeneration_Board_BoardInterface__WEBPACK_IMPORTED_MODULE_2__.stringifyCoordinate)(coordinate));
            if (!destinations) continue;
            var _iterator3 = _createForOfIteratorHelper(destinations),
              _step3;
            try {
              for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {
                var dest = _step3.value;
                coverage[dest.move[0]][dest.move[1]].push(coordinate);
              }
            } catch (err) {
              _iterator3.e(err);
            } finally {
              _iterator3.f();
            }
          }
        } catch (err) {
          _iterator2.e(err);
        } finally {
          _iterator2.f();
        }
      }
    } catch (err) {
      _iterator.e(err);
    } finally {
      _iterator.f();
    }
  }
  function getCoverage(i, j, color) {
    var _boardAccessors2 = boardAccessors,
      coverageCache = _boardAccessors2.coverageCache,
      coverage = _boardAccessors2.coverage,
      boardSquares = _boardAccessors2.boardSquares,
      data = _boardAccessors2.data,
      board = _boardAccessors2.board,
      zombieType = _boardAccessors2.zombieType,
      defaultSideToMove = _boardAccessors2.defaultSideToMove;
    var resigned = data.fenOptions.tag("resigned");
    var key = stringifyKey(i, j, color);
    if (coverageCache.has(key)) return coverageCache.get(key);
    var attackers = [],
      defenders = [];
    var cvg = coverage[i][j];
    if (cvg.length) {
      var _iterator4 = _createForOfIteratorHelper(cvg),
        _step4;
      try {
        for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {
          var pieceC = _step4.value;
          var piece = boardSquares[pieceC[0]][pieceC[1]];
          if (!piece.isPiece()) continue;
          var pieceColor = piece.color;
          if (resigned[pieceColor] && zombieType[pieceColor] === _BotInterface__WEBPACK_IMPORTED_MODULE_7__.ZombieType.Rando) continue;
          if (board.gameType.isSameTeam(pieceColor, defaultSideToMove)) {
            defenders.push(pieceC);
          } else {
            attackers.push(pieceC);
          }
        }
      } catch (err) {
        _iterator4.e(err);
      } finally {
        _iterator4.f();
      }
    }
    var cache = color === defaultSideToMove ? {
      attackers,
      defenders
    } : {
      defenders: attackers,
      attackers: defenders
    };
    coverageCache.set(key, cache);
    return cache;
  }
  function getPieceValue(i, j) {
    var _boardAccessors3 = boardAccessors,
      boardSquares = _boardAccessors3.boardSquares,
      pieceValueCache = _boardAccessors3.pieceValueCache,
      isFFA = _boardAccessors3.isFFA,
      isTeams = _boardAccessors3.isTeams,
      remainingReal = _boardAccessors3.remainingReal,
      royal = _boardAccessors3.royal,
      board = _boardAccessors3.board;
    var coordinates = [i, j];
    var pieceString = boardSquares[i][j];
    if (!pieceString.isPiece()) return 0;
    var piece = pieceString.piece;
    var key = "".concat(coordinates[0], ",").concat(coordinates[1], "/").concat(pieceString.color);
    if (pieceValueCache.has(key)) return pieceValueCache.get(key);
    var value = 0;
    var controlSetting = _moveGeneration_PieceControl_PieceControlInterface__WEBPACK_IMPORTED_MODULE_6__.pieceControlConfigSettings[piece];
    if (!controlSetting.moveGenerationSettings.isPawn) {
      value = isTeams ? controlSetting.points.botTeamsValue : controlSetting.points.botFFAValue;
    } else {
      value = isFFA ? 1 : 0.4;
      var promotionDistance = getDistanceFromPromotion(pieceString.color, ...coordinates);
      value += 2 / (getDistanceFromKing(...coordinates, pieceString.color) * 3) * (remainingReal / 4);
      value += 3 / (promotionDistance * 3);
      if (promotionDistance < 2) {
        var inFront = getPieceInFront(...coordinates, pieceString.color);
        var _getCoverage = getCoverage(...inFront, pieceString.color),
          attackers = _getCoverage.attackers,
          defenders = _getCoverage.defenders;
        if (!defenders.length) {
          value += 3 / promotionDistance;
        }
        if (attackers.length < defenders.length) {
          value += 2 / promotionDistance;
        }
      }
    }
    var isRoyal = false;
    var _iterator5 = _createForOfIteratorHelper(royal),
      _step5;
    try {
      for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {
        var royalPiece = _step5.value;
        if (!royalPiece) continue;
        if (royalPiece[0] === coordinates[0] && royalPiece[1] === coordinates[1]) {
          isRoyal = true;
          break;
        }
      }
    } catch (err) {
      _iterator5.e(err);
    } finally {
      _iterator5.f();
    }
    if (!isRoyal && piece !== _moveGeneration_GameInformation_GameUnits_PieceString__WEBPACK_IMPORTED_MODULE_4__.pawnPieceString.piece) {
      var _iterator6 = _createForOfIteratorHelper(_moveGeneration_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_3__.colors),
        _step6;
      try {
        for (_iterator6.s(); !(_step6 = _iterator6.n()).done;) {
          var color = _step6.value;
          if (!board.gameType.isSameTeam(color, pieceString.color)) {
            var d = getDistanceFromKing(...coordinates, color);
            if (d < 3) d = 2;
            value += (5 - remainingReal) / d;
          }
        }
      } catch (err) {
        _iterator6.e(err);
      } finally {
        _iterator6.f();
      }
    }
    pieceValueCache.set(key, value);
    return value;
  }
  function getCoordinationEval(player) {
    var _boardAccessors4 = boardAccessors,
      pieces = _boardAccessors4.pieces,
      remainingReal = _boardAccessors4.remainingReal;
    var e = 0;
    var _iterator7 = _createForOfIteratorHelper(pieces[player]),
      _step7;
    try {
      for (_iterator7.s(); !(_step7 = _iterator7.n()).done;) {
        var piece = _step7.value;
        var _getCoverage2 = getCoverage(piece[0], piece[1], player),
          defenders = _getCoverage2.defenders;
        var _iterator8 = _createForOfIteratorHelper(defenders),
          _step8;
        try {
          for (_iterator8.s(); !(_step8 = _iterator8.n()).done;) {
            var d = _step8.value;
            e += 30 / (getPieceValue(d[0], d[1]) * 2);
          }
        } catch (err) {
          _iterator8.e(err);
        } finally {
          _iterator8.f();
        }
      }
    } catch (err) {
      _iterator7.e(err);
    } finally {
      _iterator7.f();
    }
    if (remainingReal === 2) {
      e *= 0.4;
    } else if (remainingReal === 3) {
      e *= 0.7;
    }
    return e / 55;
  }
  function firstPlayerMovesBefore(p1, p2) {
    var _boardAccessors5 = boardAccessors,
      data = _boardAccessors5.data,
      defaultSideToMove = _boardAccessors5.defaultSideToMove;
    var next = data.nextTurn();
    do {
      if (p1 === next) return true;
      if (p2 === next) return false;
      next = data.nextTurn(next);
    } while (next !== defaultSideToMove);
    return true;
  }
  function canRespondDirectlyToThreat(player, attackers) {
    var _boardAccessors6 = boardAccessors,
      boardSquares = _boardAccessors6.boardSquares;
    var attackingPlayers = [];
    var _iterator9 = _createForOfIteratorHelper(attackers),
      _step9;
    try {
      for (_iterator9.s(); !(_step9 = _iterator9.n()).done;) {
        var pc = _step9.value;
        var square = boardSquares[pc[0]][pc[1]];
        if (!square.isPiece()) continue;
        attackingPlayers.push(square.color);
      }
    } catch (err) {
      _iterator9.e(err);
    } finally {
      _iterator9.f();
    }
    attackingPlayers = attackingPlayers.filter(onlyUnique);
    var _iterator10 = _createForOfIteratorHelper(attackingPlayers),
      _step10;
    try {
      for (_iterator10.s(); !(_step10 = _iterator10.n()).done;) {
        var a = _step10.value;
        if (firstPlayerMovesBefore(player, a)) return false;
      }
    } catch (err) {
      _iterator10.e(err);
    } finally {
      _iterator10.f();
    }
    return true;
  }
  function hanging(i, j) {
    var pieceValue = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : getPieceValue(i, j);
    var _boardAccessors7 = boardAccessors,
      hangingCache = _boardAccessors7.hangingCache,
      boardSquares = _boardAccessors7.boardSquares,
      remaining = _boardAccessors7.remaining,
      data = _boardAccessors7.data;
    var key = stringifyKey(i, j);
    if (hangingCache.has(key)) return hangingCache.get(key);
    var square = boardSquares[i][j];
    if (!square.isPiece()) return 0;
    var _getCoverage3 = getCoverage(i, j, square.color),
      attackers = _getCoverage3.attackers,
      defenders = _getCoverage3.defenders;
    var attackerValue = 999;
    var _iterator11 = _createForOfIteratorHelper(attackers),
      _step11;
    try {
      for (_iterator11.s(); !(_step11 = _iterator11.n()).done;) {
        var _pc = _step11.value;
        attackerValue = Math.min(attackerValue, getPieceValue(_pc[0], _pc[1]));
      }
    } catch (err) {
      _iterator11.e(err);
    } finally {
      _iterator11.f();
    }
    var attackedFromLeft = false;
    var nextTurn = data.nextTurn(square.color);
    if (remaining.length > 2) {
      var _iterator12 = _createForOfIteratorHelper(attackers),
        _step12;
      try {
        for (_iterator12.s(); !(_step12 = _iterator12.n()).done;) {
          var pc = _step12.value;
          if (boardSquares[pc[0]][pc[1]].color === nextTurn) {
            attackedFromLeft = true;
            break;
          }
        }
      } catch (err) {
        _iterator12.e(err);
      } finally {
        _iterator12.f();
      }
    }
    var threatened = pieceValue - attackerValue;
    var pawnDefends;
    var _iterator13 = _createForOfIteratorHelper(defenders),
      _step13;
    try {
      for (_iterator13.s(); !(_step13 = _iterator13.n()).done;) {
        var _pc2 = _step13.value;
        if (boardSquares[_pc2[0]][_pc2[1]].piece === _moveGeneration_GameInformation_GameUnits_PieceString__WEBPACK_IMPORTED_MODULE_4__.pawnPieceString.piece) {
          pawnDefends = _pc2;
          break;
        }
      }
    } catch (err) {
      _iterator13.e(err);
    } finally {
      _iterator13.f();
    }
    var h = 0;
    var underDefended = attackers.length - defenders.length > 0;
    if (underDefended) h = pieceValue;
    if (underDefended && pawnDefends) h = 0;
    if (pawnDefends && attackers.length - defenders.length > 1) {
      h = getPieceValue(pawnDefends[0], pawnDefends[1]);
    }
    if (!h && threatened > 0) h = threatened;
    if (!h && attackedFromLeft && threatened >= -2) {
      h = -threatened;
    }
    if (h && canRespondDirectlyToThreat(square.color, attackers)) {
      h /= 6;
    }
    hangingCache.set(key, h);
    return h;
  }
  function getMobilityEval(player) {
    var _boardAccessors8 = boardAccessors,
      pieces = _boardAccessors8.pieces,
      boardSquares = _boardAccessors8.boardSquares,
      isTeams = _boardAccessors8.isTeams,
      royal = _boardAccessors8.royal,
      defaultSideToMove = _boardAccessors8.defaultSideToMove,
      board = _boardAccessors8.board;
    var e = 0;
    var _iterator14 = _createForOfIteratorHelper(pieces[player]),
      _step14;
    try {
      for (_iterator14.s(); !(_step14 = _iterator14.n()).done;) {
        var _board$preGeneratedAt, _board$preGeneratedAt2;
        var coordinate = _step14.value;
        if (hanging(coordinate[0], coordinate[1]) > 2) continue;
        var piece = boardSquares[coordinate[0]][coordinate[1]];
        if (!piece.isPiece()) continue;
        var destinations = (_board$preGeneratedAt = (_board$preGeneratedAt2 = board.preGeneratedAttacks[player].pieceMovements.get((0,_moveGeneration_Board_BoardInterface__WEBPACK_IMPORTED_MODULE_2__.stringifyCoordinate)(coordinate))) === null || _board$preGeneratedAt2 === void 0 ? void 0 : _board$preGeneratedAt2.length) !== null && _board$preGeneratedAt !== void 0 ? _board$preGeneratedAt : 0;
        if (/[QDAEHΔ]/.test(piece.piece)) destinations /= isTeams ? 2 : 3;
        if (/[RBV]]/.test(piece.piece)) destinations /= isTeams ? 1.5 : 2;
        e += destinations / (isTeams ? 10 : board.gameType.type === _moveGeneration_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_3__.VariantType.Solo ? 21 : 16);
        var isRoyal = false;
        var _iterator15 = _createForOfIteratorHelper(royal),
          _step15;
        try {
          for (_iterator15.s(); !(_step15 = _iterator15.n()).done;) {
            var royalPiece = _step15.value;
            if (!royalPiece) continue;
            if (royalPiece[0] === coordinate[0] && royalPiece[1] === coordinate[1]) {
              isRoyal = true;
              break;
            }
          }
        } catch (err) {
          _iterator15.e(err);
        } finally {
          _iterator15.f();
        }
        if (!isRoyal && !isTeams && piece.piece === _moveGeneration_GameInformation_GameUnits_PieceString__WEBPACK_IMPORTED_MODULE_4__.pawnPieceString.piece) {
          var blockedBy = getPieceInFront(coordinate[0], coordinate[1], player);
          var bSqr = boardSquares[blockedBy[0]][blockedBy[1]];
          if (bSqr.isEmpty()) continue;
          if (!bSqr.isPiece()) {
            e -= 2;
          } else if (board.gameType.isSameTeam(bSqr.color, defaultSideToMove)) {
            e -= 0.5;
          } else if (bSqr.piece === _moveGeneration_GameInformation_GameUnits_PieceString__WEBPACK_IMPORTED_MODULE_4__.pawnPieceString.piece) {
            e -= 1.8;
          } else if (player === bSqr.color) {
            e -= 0.5;
          }
        }
      }
    } catch (err) {
      _iterator14.e(err);
    } finally {
      _iterator14.f();
    }
    return e;
  }
  function getDistFromHill(player) {
    var royalPiece = boardAccessors.royal[player];
    if (!royalPiece) return 999;
    var x = Math.abs(6.5 - royalPiece[0]);
    var y = Math.abs(6.5 - royalPiece[1]);
    var d = (x + y) / 2 + Math.max(x, y) / 2;
    if (!d) return 999;
    return d;
  }
  function getMatesEval() {
    var _boardAccessors9 = boardAccessors,
      board = _boardAccessors9.board,
      variantData = _boardAccessors9.variantData,
      data = _boardAccessors9.data,
      pieces = _boardAccessors9.pieces,
      remainingReal = _boardAccessors9.remainingReal;
    board.data.sideToMove = board.data.previousTurn();
    var _board$getCheckmatesA = board.getCheckmatesAndStalemates(),
      checkmates = _board$getCheckmatesA.checkmates,
      stalemates = _board$getCheckmatesA.stalemates,
      checks = _board$getCheckmatesA.checks;
    board.data.sideToMove = board.data.nextTurn();
    var e = 0;
    var _iterator16 = _createForOfIteratorHelper(_moveGeneration_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_3__.colors),
      _step16;
    try {
      for (_iterator16.s(); !(_step16 = _iterator16.n()).done;) {
        var _color2 = _step16.value;
        if (checkmates[_color2]) {
          e += 500;
        } else if (stalemates[_color2]) e -= 300;
      }
    } catch (err) {
      _iterator16.e(err);
    } finally {
      _iterator16.f();
    }
    var checksLength = checks.filter(Boolean).length;
    if (checksLength === 3) {
      e += 10;
    } else if (checksLength === 2) {
      e += 1;
    } else if (checksLength === 1) {
      var prev = data.previousTurn();
      if (remainingReal > 2 && checks[prev]) {
        e += 1.2;
      } else if (remainingReal === 2) {
        e += 0.1;
      } else {
        e += 0.4;
      }
    }
    if (checksLength && variantData.nCheck) {
      var _iterator17 = _createForOfIteratorHelper(_moveGeneration_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_3__.colors),
        _step17;
      try {
        for (_iterator17.s(); !(_step17 = _iterator17.n()).done;) {
          var color = _step17.value;
          var lives = data.fenOptions.tag("lives")[color];
          if (lives && checks[color]) e += 4 / (lives + 1);
        }
      } catch (err) {
        _iterator17.e(err);
      } finally {
        _iterator17.f();
      }
      e += 0.3;
    }
    if (variantData.barePieceRule) {
      var _iterator18 = _createForOfIteratorHelper(_moveGeneration_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_3__.colors),
        _step18;
      try {
        for (_iterator18.s(); !(_step18 = _iterator18.n()).done;) {
          var _color = _step18.value;
          if (pieces[_color].length <= 1) e += 300;
        }
      } catch (err) {
        _iterator18.e(err);
      } finally {
        _iterator18.f();
      }
    }
    return e;
  }
  function getMaterialEval() {
    var _boardAccessors10 = boardAccessors,
      board = _boardAccessors10.board,
      pieces = _boardAccessors10.pieces,
      isTeams = _boardAccessors10.isTeams,
      remainingReal = _boardAccessors10.remainingReal,
      defaultSideToMove = _boardAccessors10.defaultSideToMove,
      variantData = _boardAccessors10.variantData;
    var myMaterial = 0,
      oppMaterial = 0;
    var _iterator19 = _createForOfIteratorHelper(_moveGeneration_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_3__.colors),
      _step19;
    try {
      for (_iterator19.s(); !(_step19 = _iterator19.n()).done;) {
        var color = _step19.value;
        if (board.gameType.isSameTeam(color, defaultSideToMove)) {
          var _iterator20 = _createForOfIteratorHelper(pieces[color]),
            _step20;
          try {
            for (_iterator20.s(); !(_step20 = _iterator20.n()).done;) {
              var pc = _step20.value;
              var pieceValue = getPieceValue(pc[0], pc[1]);
              pieceValue -= hanging(pc[0], pc[1]);
              myMaterial += pieceValue;
            }
          } catch (err) {
            _iterator20.e(err);
          } finally {
            _iterator20.f();
          }
        } else {
          var _iterator21 = _createForOfIteratorHelper(pieces[color]),
            _step21;
          try {
            for (_iterator21.s(); !(_step21 = _iterator21.n()).done;) {
              var _pc3 = _step21.value;
              var pcVal = getPieceValue(_pc3[0], _pc3[1]);
              if (!isTeams && remainingReal === 4 && Math.abs(color - defaultSideToMove) === 2 && !variantData.giveaway) {
                pcVal /= board.gameType.type === _moveGeneration_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_3__.VariantType.Solo ? 2 : 3;
              }
              pcVal -= hanging(_pc3[0], _pc3[1], pcVal);
              oppMaterial -= pcVal;
            }
          } catch (err) {
            _iterator21.e(err);
          } finally {
            _iterator21.f();
          }
        }
      }
    } catch (err) {
      _iterator19.e(err);
    } finally {
      _iterator19.f();
    }
    if (!isTeams && remainingReal === 4) {
      oppMaterial /= 1.4;
      myMaterial *= 1.2;
    }
    if (!isTeams && remainingReal === 3) {
      oppMaterial /= 1.25;
      myMaterial *= 1.1;
    }
    myMaterial *= 2;
    oppMaterial *= 2;
    return {
      myMaterial,
      oppMaterial
    };
  }
  function getPinsEval() {
    var _boardAccessors11 = boardAccessors,
      board = _boardAccessors11.board,
      royal = _boardAccessors11.royal,
      pieces = _boardAccessors11.pieces,
      defaultSideToMove = _boardAccessors11.defaultSideToMove,
      remainingReal = _boardAccessors11.remainingReal;
    var pinnedEval = 0,
      discovsEval = 0;
    var _iterator22 = _createForOfIteratorHelper(_moveGeneration_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_3__.colors),
      _step22;
    try {
      for (_iterator22.s(); !(_step22 = _iterator22.n()).done;) {
        var i = _step22.value;
        var discovered = [];
        var pins = [];
        var _iterator23 = _createForOfIteratorHelper(pieces[i]),
          _step23;
        try {
          for (_iterator23.s(); !(_step23 = _iterator23.n()).done;) {
            var piece = _step23.value;
            var royalPiece = royal[i];
            if (!royalPiece) break;
            if (royalPiece[0] === piece[0] && royalPiece[1] === piece[1]) continue;
            var _royalPiece = _slicedToArray(royalPiece, 2),
              royalX = _royalPiece[0],
              royalY = _royalPiece[1];
            var pieceX = piece[0],
              pieceY = piece[1];
            var _iterator24 = _createForOfIteratorHelper(board.preGeneratedAttacks[i].slidingPiecesRayTracing),
              _step24;
            try {
              for (_iterator24.s(); !(_step24 = _iterator24.n()).done;) {
                var _step24$value = _slicedToArray(_step24.value, 2),
                  attackPiece = _step24$value[0],
                  attackLine = _step24$value[1];
                var isPieceUnderAttack = false,
                  isRoyalUnderAttack = false;
                var _iterator25 = _createForOfIteratorHelper(attackLine),
                  _step25;
                try {
                  for (_iterator25.s(); !(_step25 = _iterator25.n()).done;) {
                    var _step25$value = _slicedToArray(_step25.value, 2),
                      attackedX = _step25$value[0],
                      attackedY = _step25$value[1];
                    if (!isPieceUnderAttack && attackedX === pieceX && attackedY === pieceY) isPieceUnderAttack = true;
                    if (!isRoyalUnderAttack && attackedX === royalX && attackedY === royalY) isRoyalUnderAttack = true;
                    if (isPieceUnderAttack && isRoyalUnderAttack) {
                      pins.push(piece);
                    } else if (isRoyalUnderAttack && !isPieceUnderAttack) {
                      discovered.push([attackPiece[0], attackPiece[1]]);
                    }
                  }
                } catch (err) {
                  _iterator25.e(err);
                } finally {
                  _iterator25.f();
                }
              }
            } catch (err) {
              _iterator24.e(err);
            } finally {
              _iterator24.f();
            }
          }
        } catch (err) {
          _iterator23.e(err);
        } finally {
          _iterator23.f();
        }
        for (var _i = 0, _pins = pins; _i < _pins.length; _i++) {
          var coordinate = _pins[_i];
          if (hanging(coordinate[0], coordinate[1]) > 2) continue;
          var pieceValue = Math.sqrt(getPieceValue(coordinate[0], coordinate[1]));
          if (!board.gameType.isSameTeam(i, defaultSideToMove)) {
            pinnedEval += pieceValue / 2;
          } else {
            pinnedEval -= pieceValue;
          }
        }
        for (var _i2 = 0, _discovered = discovered; _i2 < _discovered.length; _i2++) {
          var _coordinate = _discovered[_i2];
          if (hanging(_coordinate[0], _coordinate[1]) > 2) continue;
          var _pieceValue = Math.sqrt(getPieceValue(_coordinate[0], _coordinate[1]));
          if (board.gameType.isSameTeam(i, defaultSideToMove)) {
            discovsEval += _pieceValue / 2;
          } else {
            discovsEval -= _pieceValue;
          }
        }
      }
    } catch (err) {
      _iterator22.e(err);
    } finally {
      _iterator22.f();
    }
    pinnedEval *= remainingReal / 6;
    discovsEval *= remainingReal / 6;
    if (discovsEval < 0) discovsEval /= 10;
    return {
      pinnedEval,
      discovsEval
    };
  }
  function getKingSafetyEval(player) {
    var _boardAccessors12 = boardAccessors,
      board = _boardAccessors12.board,
      royal = _boardAccessors12.royal,
      boardSquares = _boardAccessors12.boardSquares,
      remainingReal = _boardAccessors12.remainingReal,
      data = _boardAccessors12.data,
      variantData = _boardAccessors12.variantData,
      defaultSideToMove = _boardAccessors12.defaultSideToMove;
    var kingEval = 0,
      checkableEval = 0,
      exposedEval = 0;
    if (variantData.giveaway) return {
      kingEval,
      checkableEval,
      exposedEval
    };
    var baseReferences = (0,_client_ts_logic_BaseInterfaces__WEBPACK_IMPORTED_MODULE_1__.initializeBoardSquares)(() => []);
    var _iterator26 = _createForOfIteratorHelper(board.preGeneratedAttacks[player].hoppingPieceLines),
      _step26;
    try {
      for (_iterator26.s(); !(_step26 = _iterator26.n()).done;) {
        var _step26$value = _slicedToArray(_step26.value, 2),
          coordinate = _step26$value[0],
          attack = _step26$value[1];
        baseReferences[attack[0]][attack[1]].push([coordinate[0], coordinate[1]]);
      }
    } catch (err) {
      _iterator26.e(err);
    } finally {
      _iterator26.f();
    }
    var _iterator27 = _createForOfIteratorHelper(board.preGeneratedAttacks[player].slidingPiecesLines),
      _step27;
    try {
      for (_iterator27.s(); !(_step27 = _iterator27.n()).done;) {
        var _step27$value = _slicedToArray(_step27.value, 2),
          _coordinate2 = _step27$value[0],
          line = _step27$value[1];
        var _iterator30 = _createForOfIteratorHelper(line),
          _step30;
        try {
          for (_iterator30.s(); !(_step30 = _iterator30.n()).done;) {
            var _attack = _step30.value;
            baseReferences[_attack[0]][_attack[1]].push([_coordinate2[0], _coordinate2[1]]);
          }
        } catch (err) {
          _iterator30.e(err);
        } finally {
          _iterator30.f();
        }
      }
    } catch (err) {
      _iterator27.e(err);
    } finally {
      _iterator27.f();
    }
    var royalPiece = royal[player];
    var squareAccessDefinitions = new Set();
    if (royalPiece) {
      var isChecked = Boolean(board.preGeneratedAttacks[player].slidingPieces[royalPiece[0]][royalPiece[1]] || board.preGeneratedAttacks[player].hoppingPieces[royalPiece[0]][royalPiece[1]]);
      for (var i = 0; i < _moveGeneration_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_3__.boardDimension; i++) {
        for (var j = 0; j < _moveGeneration_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_3__.boardDimension; j++) {
          if (isChecked) {
            var checkableSq = 0;
            if (remainingReal === 2) {
              checkableSq -= 0.8;
            } else {
              var players = baseReferences[i][j].map(coord => {
                var piece = boardSquares[coord[0]][coord[1]];
                if (!piece.isPiece()) return player;
                return piece.color;
              });
              var prev = data.nextTurn(player);
              var next = data.previousTurn(player);
              var _iterator28 = _createForOfIteratorHelper(players),
                _step28;
              try {
                for (_iterator28.s(); !(_step28 = _iterator28.n()).done;) {
                  var _player = _step28.value;
                  if (remainingReal === 3) {
                    checkableSq -= _player === next ? 3 : 2;
                  } else if (remainingReal === 4) {
                    checkableSq -= _player === next ? 5 : _player === prev ? 2 : 3;
                  }
                }
              } catch (err) {
                _iterator28.e(err);
              } finally {
                _iterator28.f();
              }
            }
            var _getCoverage4 = getCoverage(i, j, player),
              defenders = _getCoverage4.defenders;
            if (defenders.length) checkableSq += 2.5;
            if (checkableSq > 0) checkableSq = 0;
            var accessKey = stringifyKey(i, j);
            if (!squareAccessDefinitions.has(accessKey)) {
              exposedEval -= 0.123;
              squareAccessDefinitions.add(accessKey);
            }
            checkableEval += checkableSq;
          }
        }
      }
      var ki = royalPiece[0],
        kj = royalPiece[1];
      for (var d = 1; d < 3; d++) {
        var x = [ki, ki + d, ki - d];
        var y = [kj, kj + d, kj - d];
        for (var _i3 = 0, _x2 = x; _i3 < _x2.length; _i3++) {
          var _i4 = _x2[_i3];
          var _iterator29 = _createForOfIteratorHelper(y),
            _step29;
          try {
            for (_iterator29.s(); !(_step29 = _iterator29.n()).done;) {
              var _boardSquares$_i;
              var _j = _step29.value;
              // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition
              if (!((_boardSquares$_i = boardSquares[_i4]) !== null && _boardSquares$_i !== void 0 && _boardSquares$_i[_j])) continue;
              if (_i4 === ki && _j === kj) continue;
              var pieceString = boardSquares[_i4][_j];
              if (!pieceString.isPiece()) continue;
              if (board.gameType.isSameTeam(pieceString.color, player)) {
                kingEval += pieceString.piece === _moveGeneration_GameInformation_GameUnits_PieceString__WEBPACK_IMPORTED_MODULE_4__.pawnPieceString.piece ? 2 : 1;
              } else {
                kingEval -= getPieceValue(_i4, _j);
              }
            }
          } catch (err) {
            _iterator29.e(err);
          } finally {
            _iterator29.f();
          }
        }
      }
      for (var k = -1; k < 2; k++) {
        for (var h = -1; h < 2; h++) {
          var _boardSquares$_i2;
          var _i5 = ki + k;
          var _j2 = kj + h;
          // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition
          if (!((_boardSquares$_i2 = boardSquares[_i5]) !== null && _boardSquares$_i2 !== void 0 && _boardSquares$_i2[_j2])) continue;
          var _getCoverage5 = getCoverage(_i5, _j2, player),
            attackers = _getCoverage5.attackers,
            _defenders = _getCoverage5.defenders;
          kingEval -= 2 * attackers.length;
          kingEval += 1 * _defenders.length;
        }
      }
      kingEval /= 10;
    }
    if (variantData.nCheck && !board.gameType.isSameTeam(board.data.sideToMove, defaultSideToMove)) {
      var lives = data.fenOptions.tag("lives")[board.data.sideToMove];
      switch (lives) {
        case null:
          break;
        case 2:
          checkableEval *= 1.5;
          break;
        case 1:
          checkableEval *= 3;
          break;
        default:
          checkableEval *= 1.3;
      }
    }
    return {
      kingEval,
      checkableEval,
      exposedEval
    };
  }
  function isZombieEatZombie(move) {
    if (!(0,_moveGeneration_MoveTree_MoveTreeInterface__WEBPACK_IMPORTED_MODULE_5__.verifyStandardMove)(move)) return false;
    var _boardAccessors13 = boardAccessors,
      data = _boardAccessors13.data,
      defaultSideToMove = _boardAccessors13.defaultSideToMove,
      boardSquares = _boardAccessors13.boardSquares,
      variantData = _boardAccessors13.variantData;
    if (variantData.giveaway) return false;
    var resigned = data.fenOptions.tag("resigned");
    if (!resigned[defaultSideToMove]) return false;
    var targetPiece = boardSquares[move.endCoordinates[0]][move.endCoordinates[1]];
    if (!targetPiece.isPiece()) return false;
    if (resigned[targetPiece.color]) return true;
    return false;
  }
  function getEval(move) {
    var totalEval = 0;
    var _boardAccessors14 = boardAccessors,
      board = _boardAccessors14.board,
      data = _boardAccessors14.data,
      defaultSideToMove = _boardAccessors14.defaultSideToMove,
      variantData = _boardAccessors14.variantData,
      royal = _boardAccessors14.royal,
      isTeams = _boardAccessors14.isTeams;
    var snapshot = board.createSnapshot();
    var isKingsideCastle = data.fenOptions.isKingsideCastlingAvailable(data.sideToMove, board),
      isQueensideCastle = data.fenOptions.isQueensideCastlingAvailable(data.sideToMove, board);
    board.makeMove([move], true);
    board.pregenerateAttacks();
    boardAccessors = _objectSpread(_objectSpread({}, boardAccessors), augmentBoardAccessorsFromBoard(board));
    inspectCoverage();
    var _getMaterialEval = getMaterialEval(),
      myMaterial = _getMaterialEval.myMaterial,
      oppMaterial = _getMaterialEval.oppMaterial;
    var hillEval = variantData.kingOfTheHill ? 416 / (3 * getDistFromHill(defaultSideToMove)) : 0;
    if (variantData.giveaway) {
      totalEval = -3 * myMaterial - oppMaterial - getCoordinationEval(defaultSideToMove) * 10 + hillEval;
    } else {
      totalEval += getMatesEval();
      var royalPiece = royal[defaultSideToMove];
      if (royalPiece) {
        var _getCoverage6 = getCoverage(royalPiece[0], royalPiece[1], defaultSideToMove),
          attackers = _getCoverage6.attackers;
        if (attackers.length) totalEval -= 700;
      }
      totalEval += getMobilityEval(defaultSideToMove);
      totalEval += getCoordinationEval(defaultSideToMove);
      if (isTeams) {
        var partner = _moveGeneration_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_3__.colors.find(v => v !== defaultSideToMove && board.gameType.isSameTeam(defaultSideToMove, v));
        if (partner) Object.values(getKingSafetyEval(partner)).forEach(v => totalEval += v);
      }
      Object.values(getPinsEval()).forEach(v => totalEval += v);
      Object.values(getKingSafetyEval(defaultSideToMove)).forEach(v => totalEval += v);
      totalEval += myMaterial + oppMaterial + hillEval;
    }
    var isCastling = "specialType" in move && (move.specialType === _moveGeneration_MoveTree_MoveTreeInterface__WEBPACK_IMPORTED_MODULE_5__.SpecialMove.CastlingKingside || move.specialType === _moveGeneration_MoveTree_MoveTreeInterface__WEBPACK_IMPORTED_MODULE_5__.SpecialMove.CastlingQueenside);
    if (!isCastling && (isKingsideCastle || isQueensideCastle)) totalEval -= 0.5;
    if (isZombieEatZombie(move)) {
      totalEval -= 10000;
    }
    switch (board.moves.getHash(board.moves.constructPreliminaryHashString(board))) {
      case 1:
        totalEval -= 10000;
        break;
      case 2:
        totalEval -= 20000;
        break;
    }
    if (variantData.fiftyMoveRule && variantData.fiftyMoveRule - board.data.plyCount < 8) totalEval -= 150000;
    board.loadSnapshot(snapshot);
    return totalEval;
  }
  return {
    stringifiedType: _BotInterface__WEBPACK_IMPORTED_MODULE_7__.ZombieType.Futer,
    evaluate(moves, board) {
      initializeBoardAccessorsFromBoard(board.createClone());
      var moveValues = new Map();
      var _iterator31 = _createForOfIteratorHelper(moves),
        _step31;
      try {
        for (_iterator31.s(); !(_step31 = _iterator31.n()).done;) {
          var move = _step31.value;
          if ((0,_moveGeneration_MoveTree_MoveTreeInterface__WEBPACK_IMPORTED_MODULE_5__.verifyInternalMove)(move)) {
            switch (move.type) {
              case _moveGeneration_MoveTree_MoveTreeInterface__WEBPACK_IMPORTED_MODULE_5__.InternalMoveSignature.Resign:
              case _moveGeneration_MoveTree_MoveTreeInterface__WEBPACK_IMPORTED_MODULE_5__.InternalMoveSignature.Timeout:
                moveValues.set(move, -Infinity);
                break;
              case _moveGeneration_MoveTree_MoveTreeInterface__WEBPACK_IMPORTED_MODULE_5__.InternalMoveSignature.ClaimWin:
                moveValues.set(move, Infinity);
                break;
            }
          } else moveValues.set(move, getEval(move));
        }
      } catch (err) {
        _iterator31.e(err);
      } finally {
        _iterator31.f();
      }
      return moveValues;
    },
    pickPreferredMove(evaluations) {
      var sorted = [...evaluations.entries()].sort((a, b) => b[1] - a[1]);
      var best = [];
      var _iterator32 = _createForOfIteratorHelper(sorted),
        _step32;
      try {
        for (_iterator32.s(); !(_step32 = _iterator32.n()).done;) {
          var _step32$value = _slicedToArray(_step32.value, 2),
            move = _step32$value[0],
            evaluated = _step32$value[1];
          if (sorted[0][1] - evaluated > 0.5) break;
          best.push(move);
        }
      } catch (err) {
        _iterator32.e(err);
      } finally {
        _iterator32.f();
      }
      if (best.length > 5) best.length = 5;
      var pick = Math.floor(Math.random() * best.length);
      if (pick > 0 && Math.random() > 0.8) pick = 0;
      if (pick > 1 && Math.random() > 0.8) pick = 1;
      if (pick > 2 && Math.random() > 0.8) pick = 2;
      return (0,_RandomEvaluation__WEBPACK_IMPORTED_MODULE_8__.randomlyPickNextChainedMoves)(best[pick]);
    }
  };
}
var comfuterAlgorithm = (0,_BotInterface__WEBPACK_IMPORTED_MODULE_7__.createBotAlgorithm)(createComfuterAlgorithm());

/***/ }),

/***/ "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/BoardVariantModules/EngineMoveGeneration/Algorithms/ComfuterEvaluationExtensions.ts":
/*!******************************************************************************************************************************************************************!*\
  !*** ./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/BoardVariantModules/EngineMoveGeneration/Algorithms/ComfuterEvaluationExtensions.ts ***!
  \******************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "comfuterCheckerAlgorithm": () => (/* binding */ comfuterCheckerAlgorithm),
/* harmony export */   "comfuterMuncherAlgorithm": () => (/* binding */ comfuterMuncherAlgorithm),
/* harmony export */   "comfuterPusherAlgorithm": () => (/* binding */ comfuterPusherAlgorithm),
/* harmony export */   "createComfuterBasedAlgorithm": () => (/* binding */ createComfuterBasedAlgorithm),
/* harmony export */   "patzerAlgorithm": () => (/* binding */ patzerAlgorithm)
/* harmony export */ });
/* harmony import */ var _moveGeneration_MoveTree_MoveTreeInterface__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @moveGeneration/MoveTree/MoveTreeInterface */ "./src/main/client/ts/logic/movegen/MoveTree/MoveTreeInterface.ts");
/* harmony import */ var _moveGeneration_PieceControl_PieceControlInterface__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @moveGeneration/PieceControl/PieceControlInterface */ "./src/main/client/ts/logic/movegen/PieceControl/PieceControlInterface.ts");
/* harmony import */ var _BotInterface__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../BotInterface */ "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/BoardVariantModules/EngineMoveGeneration/BotInterface.ts");
/* harmony import */ var _ComfuterEvaluation__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./ComfuterEvaluation */ "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/BoardVariantModules/EngineMoveGeneration/Algorithms/ComfuterEvaluation.ts");
function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }
function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function _iterableToArrayLimit(arr, i) { var _i = null == arr ? null : "undefined" != typeof Symbol && arr[Symbol.iterator] || arr["@@iterator"]; if (null != _i) { var _s, _e, _x, _r, _arr = [], _n = !0, _d = !1; try { if (_x = (_i = _i.call(arr)).next, 0 === i) { if (Object(_i) !== _i) return; _n = !1; } else for (; !(_n = (_s = _x.call(_i)).done) && (_arr.push(_s.value), _arr.length !== i); _n = !0); } catch (err) { _d = !0, _e = err; } finally { try { if (!_n && null != _i.return && (_r = _i.return(), Object(_r) !== _r)) return; } finally { if (_d) throw _e; } } return _arr; } }
function _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }
function _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e2) { throw _e2; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e3) { didErr = true; err = _e3; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }
function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }
function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }
function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }
function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }
function _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }
function _toPropertyKey(arg) { var key = _toPrimitive(arg, "string"); return typeof key === "symbol" ? key : String(key); }
function _toPrimitive(input, hint) { if (typeof input !== "object" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || "default"); if (typeof res !== "object") return res; throw new TypeError("@@toPrimitive must return a primitive value."); } return (hint === "string" ? String : Number)(input); }




var createComfuterBasedAlgorithm = algorithm => _objectSpread(_objectSpread({}, algorithm), {}, {
  pickPreferredMove() {
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }
    return _ComfuterEvaluation__WEBPACK_IMPORTED_MODULE_3__.comfuterAlgorithm.pickPreferredMove.apply(this, args);
  }
});
var comfuterCheckerAlgorithm = (0,_BotInterface__WEBPACK_IMPORTED_MODULE_2__.createBotAlgorithm)(createComfuterBasedAlgorithm({
  stringifiedType: _BotInterface__WEBPACK_IMPORTED_MODULE_2__.ZombieType.F_Checker,
  evaluate(moves, board) {
    var baseEvaluations = _ComfuterEvaluation__WEBPACK_IMPORTED_MODULE_3__.comfuterAlgorithm.evaluate.call(this, moves, board);
    var _iterator = _createForOfIteratorHelper(baseEvaluations),
      _step;
    try {
      for (_iterator.s(); !(_step = _iterator.n()).done;) {
        var _step$value = _slicedToArray(_step.value, 2),
          move = _step$value[0],
          evaluation = _step$value[1];
        if ((0,_moveGeneration_MoveTree_MoveTreeInterface__WEBPACK_IMPORTED_MODULE_0__.verifyInternalMove)(move)) continue;
        var snapshot = board.createSnapshot();
        var _board$makeMove = board.makeMove([move]),
          checks = _board$makeMove.checks,
          checkmates = _board$makeMove.checkmates;
        var checksLength = checks.filter(Boolean).length;
        baseEvaluations.set(move, evaluation + (checkmates.includes(true) ? checksLength * 500 : checksLength * 1500));
        board.moves.deleteMove(board.moves.currentMove);
        board.loadSnapshot(snapshot);
      }
    } catch (err) {
      _iterator.e(err);
    } finally {
      _iterator.f();
    }
    return baseEvaluations;
  }
}));
var comfuterMuncherAlgorithm = (0,_BotInterface__WEBPACK_IMPORTED_MODULE_2__.createBotAlgorithm)(createComfuterBasedAlgorithm({
  stringifiedType: _BotInterface__WEBPACK_IMPORTED_MODULE_2__.ZombieType.F_Muncher,
  evaluate(moves, board) {
    var baseEvaluations = _ComfuterEvaluation__WEBPACK_IMPORTED_MODULE_3__.comfuterAlgorithm.evaluate.call(this, moves, board);
    var _iterator2 = _createForOfIteratorHelper(baseEvaluations),
      _step2;
    try {
      for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
        var _step2$value = _slicedToArray(_step2.value, 2),
          move = _step2$value[0],
          evaluation = _step2$value[1];
        if (!(0,_moveGeneration_MoveTree_MoveTreeInterface__WEBPACK_IMPORTED_MODULE_0__.verifyStandardMove)(move)) continue;
        if (move.specialType === _moveGeneration_MoveTree_MoveTreeInterface__WEBPACK_IMPORTED_MODULE_0__.SpecialMove.EnPassant || board.board[move.endCoordinates[0]][move.endCoordinates[1]].isEmpty()) continue;
        baseEvaluations.set(move, evaluation + 5000);
      }
    } catch (err) {
      _iterator2.e(err);
    } finally {
      _iterator2.f();
    }
    return baseEvaluations;
  }
}));
var comfuterPusherAlgorithm = (0,_BotInterface__WEBPACK_IMPORTED_MODULE_2__.createBotAlgorithm)(createComfuterBasedAlgorithm({
  stringifiedType: _BotInterface__WEBPACK_IMPORTED_MODULE_2__.ZombieType.F_Pusher,
  evaluate(moves, board) {
    var baseEvaluations = _ComfuterEvaluation__WEBPACK_IMPORTED_MODULE_3__.comfuterAlgorithm.evaluate.call(this, moves, board);
    var _iterator3 = _createForOfIteratorHelper(baseEvaluations),
      _step3;
    try {
      for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {
        var _step3$value = _slicedToArray(_step3.value, 2),
          move = _step3$value[0],
          evaluation = _step3$value[1];
        if (!(0,_moveGeneration_MoveTree_MoveTreeInterface__WEBPACK_IMPORTED_MODULE_0__.verifyStandardMove)(move)) continue;
        var pieceString = board.board[move.startCoordinates[0]][move.startCoordinates[1]];
        if (pieceString.isPiece() && !_moveGeneration_PieceControl_PieceControlInterface__WEBPACK_IMPORTED_MODULE_1__.pieceControlConfigSettings[pieceString.piece].moveGenerationSettings.isPawn) {
          baseEvaluations.set(move, evaluation + 5000);
        }
      }
    } catch (err) {
      _iterator3.e(err);
    } finally {
      _iterator3.f();
    }
    return baseEvaluations;
  }
}));
var patzerAlgorithm = (0,_BotInterface__WEBPACK_IMPORTED_MODULE_2__.createBotAlgorithm)(createComfuterBasedAlgorithm({
  stringifiedType: _BotInterface__WEBPACK_IMPORTED_MODULE_2__.ZombieType.Patzer,
  evaluate(moves, defaultBoard) {
    var baseEvaluations = _ComfuterEvaluation__WEBPACK_IMPORTED_MODULE_3__.comfuterAlgorithm.evaluate.call(this, moves, defaultBoard);
    var _iterator4 = _createForOfIteratorHelper(baseEvaluations),
      _step4;
    try {
      for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {
        var _step4$value = _slicedToArray(_step4.value, 2),
          move = _step4$value[0],
          evaluation = _step4$value[1];
        baseEvaluations.set(move, -evaluation);
      }
    } catch (err) {
      _iterator4.e(err);
    } finally {
      _iterator4.f();
    }
    return baseEvaluations;
  }
}));

/***/ }),

/***/ "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/BoardVariantModules/EngineMoveGeneration/Algorithms/MixedAlgorithms.ts":
/*!*****************************************************************************************************************************************************!*\
  !*** ./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/BoardVariantModules/EngineMoveGeneration/Algorithms/MixedAlgorithms.ts ***!
  \*****************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "RanterAlgorithm": () => (/* binding */ RanterAlgorithm)
/* harmony export */ });
/* harmony import */ var _BotInterface__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../BotInterface */ "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/BoardVariantModules/EngineMoveGeneration/BotInterface.ts");
/* harmony import */ var _ComfuterEvaluation__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ComfuterEvaluation */ "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/BoardVariantModules/EngineMoveGeneration/Algorithms/ComfuterEvaluation.ts");
/* harmony import */ var _ComfuterEvaluationExtensions__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./ComfuterEvaluationExtensions */ "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/BoardVariantModules/EngineMoveGeneration/Algorithms/ComfuterEvaluationExtensions.ts");
/* harmony import */ var _RandomEvaluation__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./RandomEvaluation */ "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/BoardVariantModules/EngineMoveGeneration/Algorithms/RandomEvaluation.ts");




var RanterAlgorithm = (0,_BotInterface__WEBPACK_IMPORTED_MODULE_0__.createBotAlgorithm)((0,_ComfuterEvaluationExtensions__WEBPACK_IMPORTED_MODULE_2__.createComfuterBasedAlgorithm)({
  stringifiedType: _BotInterface__WEBPACK_IMPORTED_MODULE_0__.ZombieType.Ranter,
  evaluate() {
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }
    if (Math.random() < 0.5) {
      return _RandomEvaluation__WEBPACK_IMPORTED_MODULE_3__.randoBotAlgorithm.evaluate.apply(this, args);
    } else return _ComfuterEvaluation__WEBPACK_IMPORTED_MODULE_1__.comfuterAlgorithm.evaluate.apply(this, args);
  }
}));

/***/ }),

/***/ "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/BoardVariantModules/EngineMoveGeneration/Algorithms/RandomEvaluation.ts":
/*!******************************************************************************************************************************************************!*\
  !*** ./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/BoardVariantModules/EngineMoveGeneration/Algorithms/RandomEvaluation.ts ***!
  \******************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "randoBotAlgorithm": () => (/* binding */ randoBotAlgorithm),
/* harmony export */   "randomlyPickNextChainedMoves": () => (/* binding */ randomlyPickNextChainedMoves)
/* harmony export */ });
/* harmony import */ var _moveGeneration_MoveTree_MoveTreeInterface__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @moveGeneration/MoveTree/MoveTreeInterface */ "./src/main/client/ts/logic/movegen/MoveTree/MoveTreeInterface.ts");
/* harmony import */ var _BotInterface__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../BotInterface */ "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/BoardVariantModules/EngineMoveGeneration/BotInterface.ts");
function _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }
function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }
function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }


function randomlyPickNextChainedMoves(move) {
  var resultingMove = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];
  var newMove = [...resultingMove, move];
  if (move.nextChainedMoves && !move.isForcedContinuation && Math.random() > 0.5) {
    return randomlyPickNextChainedMoves(move.nextChainedMoves[Math.floor(Math.random() * move.nextChainedMoves.length)], newMove);
  } else {
    if (!(0,_moveGeneration_MoveTree_MoveTreeInterface__WEBPACK_IMPORTED_MODULE_0__.verifyRequiredMove)(newMove)) throw new Error("Required move length is 0");
    return newMove;
  }
}
var randoBotAlgorithm = (0,_BotInterface__WEBPACK_IMPORTED_MODULE_1__.createBotAlgorithm)({
  stringifiedType: _BotInterface__WEBPACK_IMPORTED_MODULE_1__.ZombieType.Rando,
  evaluate(moves, board) {
    var copyOfMoves = moves.slice();
    for (var i = moves.length - 1; i > 0; i--) {
      var j = Math.floor(Math.random() * (i + 1));
      var _ref = [moves[j], moves[i]];
      copyOfMoves[i] = _ref[0];
      copyOfMoves[j] = _ref[1];
    }
    var data = board.data,
      boardSquares = board.board;
    var zombieEatZombieMoves = [];
    var otherMoves = [];
    var _iterator = _createForOfIteratorHelper(copyOfMoves),
      _step;
    try {
      for (_iterator.s(); !(_step = _iterator.n()).done;) {
        var move = _step.value;
        if ((0,_moveGeneration_MoveTree_MoveTreeInterface__WEBPACK_IMPORTED_MODULE_0__.verifyStandardMove)(move)) {
          var targetPiece = boardSquares[move.endCoordinates[1]][move.endCoordinates[0]];
          if (targetPiece.isPiece() && data.fenOptions.tag("resigned")[targetPiece.color]) {
            zombieEatZombieMoves.push(move);
            continue;
          }
        }
        otherMoves.push(move);
      }
    } catch (err) {
      _iterator.e(err);
    } finally {
      _iterator.f();
    }
    var startingEvaluation = 0;
    return new Map([...otherMoves.reduce((p, n) => (p.push([n, --startingEvaluation]), p), []), ...zombieEatZombieMoves.reduce((p, n) => (p.push([n, --startingEvaluation / 2]), p), [])]);
  },
  pickPreferredMove(evaluations) {
    return randomlyPickNextChainedMoves([...evaluations.entries()].reduce((p, n) => n[1] > p[1] ? n : p)[0]);
  }
});

/***/ }),

/***/ "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/BoardVariantModules/EngineMoveGeneration/Algorithms/RandomEvaluationExtensions.ts":
/*!****************************************************************************************************************************************************************!*\
  !*** ./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/BoardVariantModules/EngineMoveGeneration/Algorithms/RandomEvaluationExtensions.ts ***!
  \****************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "checkerAlgorithm": () => (/* binding */ checkerAlgorithm),
/* harmony export */   "createRandomBasedAlgorithm": () => (/* binding */ createRandomBasedAlgorithm),
/* harmony export */   "muncherAlgorithm": () => (/* binding */ muncherAlgorithm),
/* harmony export */   "pusherAlgorithm": () => (/* binding */ pusherAlgorithm)
/* harmony export */ });
/* harmony import */ var _moveGeneration_MoveTree_MoveTreeInterface__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @moveGeneration/MoveTree/MoveTreeInterface */ "./src/main/client/ts/logic/movegen/MoveTree/MoveTreeInterface.ts");
/* harmony import */ var _moveGeneration_PieceControl_PieceControlInterface__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @moveGeneration/PieceControl/PieceControlInterface */ "./src/main/client/ts/logic/movegen/PieceControl/PieceControlInterface.ts");
/* harmony import */ var _BotInterface__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../BotInterface */ "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/BoardVariantModules/EngineMoveGeneration/BotInterface.ts");
/* harmony import */ var _RandomEvaluation__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./RandomEvaluation */ "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/BoardVariantModules/EngineMoveGeneration/Algorithms/RandomEvaluation.ts");
function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }
function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function _iterableToArrayLimit(arr, i) { var _i = null == arr ? null : "undefined" != typeof Symbol && arr[Symbol.iterator] || arr["@@iterator"]; if (null != _i) { var _s, _e, _x, _r, _arr = [], _n = !0, _d = !1; try { if (_x = (_i = _i.call(arr)).next, 0 === i) { if (Object(_i) !== _i) return; _n = !1; } else for (; !(_n = (_s = _x.call(_i)).done) && (_arr.push(_s.value), _arr.length !== i); _n = !0); } catch (err) { _d = !0, _e = err; } finally { try { if (!_n && null != _i.return && (_r = _i.return(), Object(_r) !== _r)) return; } finally { if (_d) throw _e; } } return _arr; } }
function _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }
function _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e2) { throw _e2; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e3) { didErr = true; err = _e3; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }
function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }
function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }
function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }
function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }
function _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }
function _toPropertyKey(arg) { var key = _toPrimitive(arg, "string"); return typeof key === "symbol" ? key : String(key); }
function _toPrimitive(input, hint) { if (typeof input !== "object" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || "default"); if (typeof res !== "object") return res; throw new TypeError("@@toPrimitive must return a primitive value."); } return (hint === "string" ? String : Number)(input); }




var createRandomBasedAlgorithm = algorithm => _objectSpread(_objectSpread({}, algorithm), {}, {
  pickPreferredMove() {
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }
    return _RandomEvaluation__WEBPACK_IMPORTED_MODULE_3__.randoBotAlgorithm.pickPreferredMove.apply(this, args);
  }
});
var checkerAlgorithm = (0,_BotInterface__WEBPACK_IMPORTED_MODULE_2__.createBotAlgorithm)(createRandomBasedAlgorithm({
  stringifiedType: _BotInterface__WEBPACK_IMPORTED_MODULE_2__.ZombieType.Checker,
  evaluate(moves, board) {
    var baseEvaluations = _RandomEvaluation__WEBPACK_IMPORTED_MODULE_3__.randoBotAlgorithm.evaluate.call(this, moves, board);
    var _iterator = _createForOfIteratorHelper(baseEvaluations),
      _step;
    try {
      var _loop = function _loop() {
        var _step$value = _slicedToArray(_step.value, 2),
          move = _step$value[0],
          evaluation = _step$value[1];
        var snapshot = board.createSnapshot();
        var _board$makeMove = board.makeMove([move]),
          checks = _board$makeMove.checks,
          checkmates = _board$makeMove.checkmates;
        if (checks.filter((c, i) => c && !checkmates[i] === c).length === 0) {
          baseEvaluations.set(move, evaluation / (evaluation / 2));
        }
        board.loadSnapshot(snapshot);
      };
      for (_iterator.s(); !(_step = _iterator.n()).done;) {
        _loop();
      }
    } catch (err) {
      _iterator.e(err);
    } finally {
      _iterator.f();
    }
    return baseEvaluations;
  }
}));
var muncherAlgorithm = (0,_BotInterface__WEBPACK_IMPORTED_MODULE_2__.createBotAlgorithm)(createRandomBasedAlgorithm({
  stringifiedType: _BotInterface__WEBPACK_IMPORTED_MODULE_2__.ZombieType.Muncher,
  evaluate(moves, board) {
    var baseEvaluations = _RandomEvaluation__WEBPACK_IMPORTED_MODULE_3__.randoBotAlgorithm.evaluate.call(this, moves, board);
    var _iterator2 = _createForOfIteratorHelper(baseEvaluations),
      _step2;
    try {
      for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
        var _step2$value = _slicedToArray(_step2.value, 2),
          move = _step2$value[0],
          evaluation = _step2$value[1];
        if (!(0,_moveGeneration_MoveTree_MoveTreeInterface__WEBPACK_IMPORTED_MODULE_0__.verifyStandardMove)(move)) continue;
        if (move.specialType === _moveGeneration_MoveTree_MoveTreeInterface__WEBPACK_IMPORTED_MODULE_0__.SpecialMove.EnPassant || board.board[move.endCoordinates[0]][move.endCoordinates[1]].isEmpty()) continue;
        baseEvaluations.set(move, evaluation / (evaluation / 2));
      }
    } catch (err) {
      _iterator2.e(err);
    } finally {
      _iterator2.f();
    }
    return baseEvaluations;
  }
}));
var pusherAlgorithm = (0,_BotInterface__WEBPACK_IMPORTED_MODULE_2__.createBotAlgorithm)(createRandomBasedAlgorithm({
  stringifiedType: _BotInterface__WEBPACK_IMPORTED_MODULE_2__.ZombieType.Pusher,
  evaluate(moves, board) {
    var baseEvaluations = _RandomEvaluation__WEBPACK_IMPORTED_MODULE_3__.randoBotAlgorithm.evaluate.call(this, moves, board);
    var _iterator3 = _createForOfIteratorHelper(baseEvaluations),
      _step3;
    try {
      for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {
        var _step3$value = _slicedToArray(_step3.value, 2),
          move = _step3$value[0],
          evaluation = _step3$value[1];
        if (!(0,_moveGeneration_MoveTree_MoveTreeInterface__WEBPACK_IMPORTED_MODULE_0__.verifyStandardMove)(move)) continue;
        var pieceString = board.board[move.startCoordinates[0]][move.startCoordinates[1]];
        if (pieceString.isPiece() && !_moveGeneration_PieceControl_PieceControlInterface__WEBPACK_IMPORTED_MODULE_1__.pieceControlConfigSettings[pieceString.piece].moveGenerationSettings.isPawn) {
          baseEvaluations.set(move, evaluation / (evaluation / 2));
        }
      }
    } catch (err) {
      _iterator3.e(err);
    } finally {
      _iterator3.f();
    }
    return baseEvaluations;
  }
}));

/***/ }),

/***/ "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/BoardVariantModules/EngineMoveGeneration/BotInterface.ts":
/*!***************************************************************************************************************************************!*\
  !*** ./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/BoardVariantModules/EngineMoveGeneration/BotInterface.ts ***!
  \***************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ZombieType": () => (/* binding */ ZombieType),
/* harmony export */   "botAlgorithms": () => (/* binding */ botAlgorithms),
/* harmony export */   "createBotAlgorithm": () => (/* binding */ createBotAlgorithm),
/* harmony export */   "verifyZombieType": () => (/* binding */ verifyZombieType)
/* harmony export */ });
var ZombieType = /*#__PURE__*/function (ZombieType) {
  ZombieType["Rando"] = "rando";
  ZombieType["Futer"] = "comfuter";
  ZombieType["Ranter"] = "ranter";
  ZombieType["Patzer"] = "patzer";
  ZombieType["Pusher"] = "pusher";
  ZombieType["Checker"] = "checker";
  ZombieType["Muncher"] = "muncher";
  ZombieType["F_Pusher"] = "pusher_comfuter";
  ZombieType["F_Checker"] = "checker_comfuter";
  ZombieType["F_Muncher"] = "muncher_comfuter";
  return ZombieType;
}({});
var verifyZombieType = zombieType => zombieType in ZombieType;
var botAlgorithms = new Map();
function createBotAlgorithm(algorithm) {
  botAlgorithms.set(algorithm.stringifiedType, algorithm);
  return algorithm;
}

/***/ }),

/***/ "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/BoardVariantModules/InsufficientMaterial/InsufficientMaterialChecker.ts":
/*!******************************************************************************************************************************************************!*\
  !*** ./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/BoardVariantModules/InsufficientMaterial/InsufficientMaterialChecker.ts ***!
  \******************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "InsufficientMaterialChecker": () => (/* binding */ InsufficientMaterialChecker)
/* harmony export */ });
/* harmony import */ var _InsufficientMaterialConstructor__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./InsufficientMaterialConstructor */ "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/BoardVariantModules/InsufficientMaterial/InsufficientMaterialConstructor.ts");
/* harmony import */ var _client_ts_baseTypes__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @client/ts/baseTypes */ "./src/main/client/ts/baseTypes.ts");
/* harmony import */ var _moveGeneration_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @moveGeneration/GameInformation/GameData */ "./src/main/client/ts/logic/movegen/GameInformation/GameData.ts");
/* harmony import */ var _FENDataDecorators_StalemateOptions__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../FENDataDecorators/StalemateOptions */ "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/FENDataDecorators/StalemateOptions.ts");
/* harmony import */ var _moveGeneration_PieceControl_PieceControlInterface__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @moveGeneration/PieceControl/PieceControlInterface */ "./src/main/client/ts/logic/movegen/PieceControl/PieceControlInterface.ts");
/* harmony import */ var _PieceControlDecorators_PromotionRank__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../PieceControlDecorators/PromotionRank */ "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/PieceControlDecorators/PromotionRank.ts");
/* harmony import */ var _moveGeneration_Board_BoardInterface__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @moveGeneration/Board/BoardInterface */ "./src/main/client/ts/logic/movegen/Board/BoardInterface.ts");
function _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }
function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }
function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }
function _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }
function _toPropertyKey(arg) { var key = _toPrimitive(arg, "string"); return typeof key === "symbol" ? key : String(key); }
function _toPrimitive(input, hint) { if (typeof input !== "object" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || "default"); if (typeof res !== "object") return res; throw new TypeError("@@toPrimitive must return a primitive value."); } return (hint === "string" ? String : Number)(input); }







class InsufficientMaterialChecker {
  constructor(state, board) {
    _defineProperty(this, "noRoyalsToMate", false);
    _defineProperty(this, "isDisabled", false);
    _defineProperty(this, "promotionPieces", void 0);
    _defineProperty(this, "hasPromotion", void 0);
    this.state = state;
    var _iterator = _createForOfIteratorHelper(board.variantRules),
      _step;
    try {
      for (_iterator.s(); !(_step = _iterator.n()).done;) {
        var variantRule = _step.value;
        var _variantRule$getInsuf = variantRule.getInsufficientMaterialData(),
          isDisabled = _variantRule$getInsuf.isDisabled,
          isPartiallyDisabled = _variantRule$getInsuf.isPartiallyDisabled;
        if (isDisabled) {
          this.isDisabled = true;
          break;
        } else if (isPartiallyDisabled) this.noRoyalsToMate = true;
      }
    } catch (err) {
      _iterator.e(err);
    } finally {
      _iterator.f();
    }
    this.hasPromotion = board.variantData.promotionRank !== _PieceControlDecorators_PromotionRank__WEBPACK_IMPORTED_MODULE_5__.disabledRank;
    this.promotionPieces = board.variantData.promotionPieces || [];
  }
  getRoyalPieceMedians(board) {
    var _this$state = this.state,
      walls = _this$state.walls,
      royalMoveMedians = _this$state.royalMoveMedians,
      royal = board.data.fenOptions.tag("royal"),
      variantData = board.variantData,
      boardSquares = board.board;
    var extraWalls = boardSquares.reduce((accumulator, row, i) => {
      return accumulator + row.reduce((accumulator, square, j) => {
        if (square.isWall() && !walls[i][j]) {
          return accumulator + 1;
        } else return accumulator;
      }, 0);
    }, 0);
    return royalMoveMedians.map((median, i) => {
      if (!royal[i]) return;
      var minimumMedian;
      if (variantData.stalemateOptions === _FENDataDecorators_StalemateOptions__WEBPACK_IMPORTED_MODULE_3__.stalemateOptionsValues.stalemateLoses) {
        minimumMedian = 1;
        median--;
      } else {
        median++;
        minimumMedian = 2;
      }
      median -= extraWalls;
      if (median < minimumMedian) median = minimumMedian;
      return median;
    });
  }
  obtainPieceSymbolFromCoordinate(board, coordinate) {
    var _this$state2 = this.state,
      optimizedPieces = _this$state2.optimizedPieces,
      pieceSquareMedians = _this$state2.pieceSquareMedians,
      backwardsPieceRegistry = _this$state2.backwardsPieceRegistry;
    var piece = board.board[coordinate[0]][coordinate[1]];
    if (_moveGeneration_PieceControl_PieceControlInterface__WEBPACK_IMPORTED_MODULE_4__.pieceControlConfigSettings[piece.piece].moveGenerationSettings.isPawn && this.hasPromotion) {
      var availableSymbols = [...optimizedPieces].filter(p => (0,_moveGeneration_PieceControl_PieceControlInterface__WEBPACK_IMPORTED_MODULE_4__.verifyPieceLetter)(p) && !_moveGeneration_PieceControl_PieceControlInterface__WEBPACK_IMPORTED_MODULE_4__.pieceControlConfigSettings[p].moveGenerationSettings.isPawn).map(p => pieceSquareMedians[p]);
      if (availableSymbols.length === 0) {
        return {
          selectedSymbol: _InsufficientMaterialConstructor__WEBPACK_IMPORTED_MODULE_0__.InsufficientMaterialConstructor.NON_INDEXED_PIECE_SYMBOL,
          piece
        };
      } else {
        var candidates = availableSymbols.map(s => {
          return s[Object.getOwnPropertySymbols(s)[0]].reduce((p, n) => p + (n !== null && n !== void 0 ? n : 0), 0);
        });
        var candidateIndex = candidates.indexOf(Math.max(...candidates));
        var symbol = Object.getOwnPropertySymbols(availableSymbols[candidateIndex])[0];
        return {
          selectedSymbol: symbol,
          piece
        };
      }
    } else {
      var _availableSymbols = Object.getOwnPropertySymbols(pieceSquareMedians[piece.piece]);
      var selectedSymbol = _availableSymbols.length === 1 ? _availableSymbols[0] : backwardsPieceRegistry[piece.piece][coordinate[0]][coordinate[1]];
      (0,_client_ts_baseTypes__WEBPACK_IMPORTED_MODULE_1__.assertNonUndefined)(selectedSymbol);
      return {
        selectedSymbol,
        piece
      };
    }
  }
  getPartialIntersection(parameters) {
    var pieceSquareMedians = this.state.pieceSquareMedians,
      board = parameters.board,
      army = parameters.army,
      pieces = parameters.pieces,
      royalColor = parameters.royalColor;
    var _iterator2 = _createForOfIteratorHelper(army),
      _step2;
    try {
      for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
        var coordinate = _step2.value;
        var _this$obtainPieceSymb = this.obtainPieceSymbolFromCoordinate(board, coordinate),
          piece = _this$obtainPieceSymb.piece,
          selectedSymbol = _this$obtainPieceSymb.selectedSymbol;
        var symbolsLength = Object.getOwnPropertySymbols(pieceSquareMedians[piece.piece]).length;
        if (symbolsLength > 1 || _moveGeneration_PieceControl_PieceControlInterface__WEBPACK_IMPORTED_MODULE_4__.pieceControlConfigSettings[piece.piece].moveGenerationSettings.isColorBound) {
          var _iterator3 = _createForOfIteratorHelper(pieces[royalColor]),
            _step3;
          try {
            for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {
              var enemyCoordinate = _step3.value;
              var _this$obtainPieceSymb2 = this.obtainPieceSymbolFromCoordinate(board, enemyCoordinate),
                enemySymbol = _this$obtainPieceSymb2.selectedSymbol;
              if (selectedSymbol === enemySymbol) return Infinity;
            }
          } catch (err) {
            _iterator3.e(err);
          } finally {
            _iterator3.f();
          }
        } else return Infinity;
      }
    } catch (err) {
      _iterator2.e(err);
    } finally {
      _iterator2.f();
    }
    return -1;
  }
  checkCurrentState(board) {
    var _this = this;
    var fenOptions = board.data.fenOptions;
    var dead = fenOptions.tag("dead"),
      royal = fenOptions.tag("royal");
    var pieces = board.getPlayerPieces(),
      resultingInsufficientPieces = (0,_client_ts_baseTypes__WEBPACK_IMPORTED_MODULE_1__.createTuple)(false, _moveGeneration_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_2__.totalPlayers);
    if (this.isDisabled) return resultingInsufficientPieces;
    var royalPieceMedians = this.getRoyalPieceMedians(board),
      _this$state3 = this.state,
      oppositionMedians = _this$state3.oppositionMedians,
      pieceSquareMedians = _this$state3.pieceSquareMedians;
    var squaresPlayerCanOutrange = (0,_client_ts_baseTypes__WEBPACK_IMPORTED_MODULE_1__.createTupleFromCallback)(() => (0,_client_ts_baseTypes__WEBPACK_IMPORTED_MODULE_1__.createTuple)(0, _moveGeneration_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_2__.totalPlayers), _moveGeneration_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_2__.totalPlayers);
    var _iterator4 = _createForOfIteratorHelper(_moveGeneration_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_2__.colors),
      _step4;
    try {
      for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {
        var color = _step4.value;
        var army = pieces[color];
        if (dead[color]) continue;
        var _iterator6 = _createForOfIteratorHelper(_moveGeneration_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_2__.colors),
          _step6;
        try {
          var _loop = function _loop() {
            var royalColor = _step6.value;
            if (color === royalColor || dead[royalColor]) return "continue";
            if (!royal[royalColor] || _this.noRoyalsToMate) {
              squaresPlayerCanOutrange[royalColor][color] = _this.getPartialIntersection({
                board,
                army,
                pieces,
                royalColor
              });
            } else {
              var royalSquares = royalPieceMedians[royalColor];
              if (royalSquares === undefined) return "continue";
              var fenRoyal = royal[color],
                currentColorBounds = [];
              var _iterator7 = _createForOfIteratorHelper(army),
                _step7;
              try {
                for (_iterator7.s(); !(_step7 = _iterator7.n()).done;) {
                  var coordinate = _step7.value;
                  if (fenRoyal && (0,_moveGeneration_Board_BoardInterface__WEBPACK_IMPORTED_MODULE_6__.compareCoordinates)(coordinate, fenRoyal)) {
                    if (board.variantData.royalsCannotCapture) {
                      squaresPlayerCanOutrange[color][royalColor]++;
                    } else {
                      squaresPlayerCanOutrange[color][royalColor] += oppositionMedians[color][royalColor];
                    }
                  } else {
                    var _this$obtainPieceSymb3 = _this.obtainPieceSymbolFromCoordinate(board, coordinate),
                      piece = _this$obtainPieceSymb3.piece,
                      selectedSymbol = _this$obtainPieceSymb3.selectedSymbol;
                    if (_this.hasPromotion && _moveGeneration_PieceControl_PieceControlInterface__WEBPACK_IMPORTED_MODULE_4__.pieceControlConfigSettings[piece.piece].moveGenerationSettings.isPawn) {
                      var medians = _this.promotionPieces.map(piece => {
                        var _pieceSquareMedians$p;
                        var subSymbol = Object.getOwnPropertySymbols(pieceSquareMedians[piece])[0];
                        return (_pieceSquareMedians$p = pieceSquareMedians[piece][subSymbol][royalColor]) !== null && _pieceSquareMedians$p !== void 0 ? _pieceSquareMedians$p : 0;
                      });
                      squaresPlayerCanOutrange[color][royalColor] += Math.max(...medians);
                    } else {
                      var _pieceSquareMedians$p2;
                      if (_moveGeneration_PieceControl_PieceControlInterface__WEBPACK_IMPORTED_MODULE_4__.pieceControlConfigSettings[piece.piece].moveGenerationSettings.isColorBound) {
                        if (currentColorBounds.includes(selectedSymbol)) continue;
                        currentColorBounds.push(selectedSymbol);
                      }
                      squaresPlayerCanOutrange[color][royalColor] += (_pieceSquareMedians$p2 = pieceSquareMedians[piece.piece][selectedSymbol][royalColor]) !== null && _pieceSquareMedians$p2 !== void 0 ? _pieceSquareMedians$p2 : 0;
                    }
                  }
                }
              } catch (err) {
                _iterator7.e(err);
              } finally {
                _iterator7.f();
              }
              squaresPlayerCanOutrange[color][royalColor] += pieces[royalColor].length - 1;
            }
          };
          for (_iterator6.s(); !(_step6 = _iterator6.n()).done;) {
            var _ret = _loop();
            if (_ret === "continue") continue;
          }
        } catch (err) {
          _iterator6.e(err);
        } finally {
          _iterator6.f();
        }
      }
    } catch (err) {
      _iterator4.e(err);
    } finally {
      _iterator4.f();
    }
    var _iterator5 = _createForOfIteratorHelper(_moveGeneration_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_2__.colors),
      _step5;
    try {
      for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {
        var _color = _step5.value;
        if (dead[_color]) continue;
        var sum = 0;
        for (var i = 0; i < _moveGeneration_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_2__.totalPlayers; i++) {
          if (i === _color) continue;
          sum += squaresPlayerCanOutrange[i][_color];
        }
        var _royal = royalPieceMedians[_color];
        if (_royal !== undefined && sum <= _royal || sum < 0) resultingInsufficientPieces[_color] = true;
      }
    } catch (err) {
      _iterator5.e(err);
    } finally {
      _iterator5.f();
    }
    return resultingInsufficientPieces;
  }
}

/***/ }),

/***/ "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/BoardVariantModules/InsufficientMaterial/InsufficientMaterialConstructor.ts":
/*!**********************************************************************************************************************************************************!*\
  !*** ./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/BoardVariantModules/InsufficientMaterial/InsufficientMaterialConstructor.ts ***!
  \**********************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "InsufficientMaterialConstructor": () => (/* binding */ InsufficientMaterialConstructor)
/* harmony export */ });
/* harmony import */ var _client_ts_baseTypes__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @client/ts/baseTypes */ "./src/main/client/ts/baseTypes.ts");
/* harmony import */ var _client_ts_logic_BaseInterfaces__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @client/ts/logic/BaseInterfaces */ "./src/main/client/ts/logic/BaseInterfaces.ts");
/* harmony import */ var _moveGeneration_Board_Board__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @moveGeneration/Board/Board */ "./src/main/client/ts/logic/movegen/Board/Board.ts");
/* harmony import */ var _moveGeneration_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @moveGeneration/GameInformation/GameData */ "./src/main/client/ts/logic/movegen/GameInformation/GameData.ts");
/* harmony import */ var _moveGeneration_GameInformation_GameUnits_PieceString__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @moveGeneration/GameInformation/GameUnits/PieceString */ "./src/main/client/ts/logic/movegen/GameInformation/GameUnits/PieceString.ts");
/* harmony import */ var _moveGeneration_PieceControl_PieceControlInterface__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @moveGeneration/PieceControl/PieceControlInterface */ "./src/main/client/ts/logic/movegen/PieceControl/PieceControlInterface.ts");
/* harmony import */ var _Utilities__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./Utilities */ "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/BoardVariantModules/InsufficientMaterial/Utilities.ts");
/* harmony import */ var _PieceControlDecorators_PromotionRank__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../PieceControlDecorators/PromotionRank */ "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/PieceControlDecorators/PromotionRank.ts");
/* harmony import */ var _moveGeneration_Board_BoardInterface__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @moveGeneration/Board/BoardInterface */ "./src/main/client/ts/logic/movegen/Board/BoardInterface.ts");
/* harmony import */ var _utils_NumberUtils__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @utils/NumberUtils */ "./src/main/client/ts/utils/NumberUtils.ts");
function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }
function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function _iterableToArrayLimit(arr, i) { var _i = null == arr ? null : "undefined" != typeof Symbol && arr[Symbol.iterator] || arr["@@iterator"]; if (null != _i) { var _s, _e, _x, _r, _arr = [], _n = !0, _d = !1; try { if (_x = (_i = _i.call(arr)).next, 0 === i) { if (Object(_i) !== _i) return; _n = !1; } else for (; !(_n = (_s = _x.call(_i)).done) && (_arr.push(_s.value), _arr.length !== i); _n = !0); } catch (err) { _d = !0, _e = err; } finally { try { if (!_n && null != _i.return && (_r = _i.return(), Object(_r) !== _r)) return; } finally { if (_d) throw _e; } } return _arr; } }
function _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }
function _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e2) { throw _e2; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e3) { didErr = true; err = _e3; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }
function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }
function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }
function _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }
function _toPropertyKey(arg) { var key = _toPrimitive(arg, "string"); return typeof key === "symbol" ? key : String(key); }
function _toPrimitive(input, hint) { if (typeof input !== "object" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || "default"); if (typeof res !== "object") return res; throw new TypeError("@@toPrimitive must return a primitive value."); } return (hint === "string" ? String : Number)(input); }










class InsufficientMaterialConstructor {
  constructor(board, callback) {
    _defineProperty(this, "board", void 0);
    _defineProperty(this, "emptyBoard", void 0);
    _defineProperty(this, "pieceMoveRegistry", {});
    _defineProperty(this, "possibleRoyals", (0,_client_ts_baseTypes__WEBPACK_IMPORTED_MODULE_0__.createTupleFromCallback)(() => [], _moveGeneration_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_3__.totalPlayers));
    _defineProperty(this, "boardDestinations", new Map());
    _defineProperty(this, "royalPieceSets", (0,_client_ts_baseTypes__WEBPACK_IMPORTED_MODULE_0__.createTupleFromCallback)(() => new Set(), _moveGeneration_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_3__.totalPlayers));
    _defineProperty(this, "state", void 0);
    this.callback = callback;
    this.board = board.createClone();
    this.emptyBoard = this.board.board.map(row => row.map(square => square.isWall() ? square : _moveGeneration_GameInformation_GameUnits_PieceString__WEBPACK_IMPORTED_MODULE_4__.emptyPieceString));
    this.state = {
      walls: this.emptyBoard.map(row => row.map(square => square.isWall())),
      backwardsPieceRegistry: {},
      royalMoveMedians: (0,_client_ts_baseTypes__WEBPACK_IMPORTED_MODULE_0__.createTuple)(0, _moveGeneration_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_3__.totalPlayers),
      pieceSquareMedians: {
        [_moveGeneration_PieceControl_PieceControlInterface__WEBPACK_IMPORTED_MODULE_5__.grasshopperPieceLetter]: {
          [InsufficientMaterialConstructor.NON_INDEXED_PIECE_SYMBOL]: [2, 2, 2, 2]
        }
      },
      optimizedPieces: (0,_Utilities__WEBPACK_IMPORTED_MODULE_6__.optimizePieceSet)(this.board.variantData.promotionPieces || [], true),
      oppositionMedians: (0,_client_ts_baseTypes__WEBPACK_IMPORTED_MODULE_0__.createTupleFromCallback)(() => (0,_client_ts_baseTypes__WEBPACK_IMPORTED_MODULE_0__.createTuple)(0, _moveGeneration_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_3__.totalPlayers), _moveGeneration_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_3__.totalPlayers)
    };
  }
  initializeRoyals() {
    var boardSquares = this.board.board,
      promotionPieces = this.board.variantData.promotionPieces || [];
    this.board.data.fenOptions.tag("royal").forEach((royal, color) => {
      if (royal) {
        var piece = boardSquares[royal[0]][royal[1]].piece;
        if (_moveGeneration_PieceControl_PieceControlInterface__WEBPACK_IMPORTED_MODULE_5__.pieceControlConfigSettings[piece].moveGenerationSettings.isPawn) {
          this.possibleRoyals[color] = [piece, ...promotionPieces];
        } else this.possibleRoyals[color] = [piece];
      } else if (promotionPieces.includes(_moveGeneration_PieceControl_PieceControlInterface__WEBPACK_IMPORTED_MODULE_5__.defaultPieces.king)) {
        this.possibleRoyals[color] = [_moveGeneration_PieceControl_PieceControlInterface__WEBPACK_IMPORTED_MODULE_5__.defaultPieces.king];
      }
    });
    var _iterator = _createForOfIteratorHelper(_moveGeneration_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_3__.colors),
      _step;
    try {
      for (_iterator.s(); !(_step = _iterator.n()).done;) {
        var color = _step.value;
        if (this.possibleRoyals[color].length > 1) {
          this.royalPieceSets[color] = (0,_Utilities__WEBPACK_IMPORTED_MODULE_6__.optimizePieceSet)(this.possibleRoyals[color], false);
        } else if (this.possibleRoyals[color].length === 1) {
          this.royalPieceSets[color].add(this.possibleRoyals[color][0]);
        }
      }
    } catch (err) {
      _iterator.e(err);
    } finally {
      _iterator.f();
    }
  }
  recurseThroughSquares(i, j, piece) {
    var emptyBoard = this.emptyBoard,
      controls = this.board.controls,
      pieceMoveRegistry = this.pieceMoveRegistry;
    var currentSquares = new Set(),
      unvisitedSquares = new Set();
    if (!piece.isPiece()) throw new TypeError("Wrong piece signature detected at ".concat(piece.value));
    var baseBuilder = controls[piece.piece]().setColor(piece.color).setBoard(emptyBoard).setBaseImmunePieces(_moveGeneration_Board_Board__WEBPACK_IMPORTED_MODULE_2__.baseImmunes);
    var registryResult = (0,_client_ts_logic_BaseInterfaces__WEBPACK_IMPORTED_MODULE_1__.initializeBoardSquares)(() => new Uint16Array(_moveGeneration_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_3__.boardDimension).fill(_Utilities__WEBPACK_IMPORTED_MODULE_6__.oneBitMask));
    function recurse(x, y) {
      var control = baseBuilder.setCoordinates(x, y).constructPieceControl();
      var moves = control.getPseudoLegalMoves(),
        moveLength = moves.length;
      if (moveLength === 0) return;
      for (var _i = 0; _i < moveLength; _i++) {
        var move = moves[_i].move;
        var moveString = (0,_moveGeneration_Board_BoardInterface__WEBPACK_IMPORTED_MODULE_8__.stringifyCoordinate)(move);
        registryResult[x][y][move[0]] |= _Utilities__WEBPACK_IMPORTED_MODULE_6__.binaryMasks[move[1]];
        if (!currentSquares.has(moveString)) {
          unvisitedSquares.add(moveString);
        }
      }
      var _iterator2 = _createForOfIteratorHelper(unvisitedSquares),
        _step2;
      try {
        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
          var value = _step2.value;
          var _value$split = value.split(":"),
            _value$split2 = _slicedToArray(_value$split, 2),
            _x2 = _value$split2[0],
            _y = _value$split2[1];
          if (!currentSquares.has(value)) {
            currentSquares.add(value);
            recurse(parseInt(_x2, 10), parseInt(_y, 10));
          }
        }
      } catch (err) {
        _iterator2.e(err);
      } finally {
        _iterator2.f();
      }
    }
    recurse(i, j);
    if (!(piece.piece in pieceMoveRegistry)) pieceMoveRegistry[piece.piece] = {};
    pieceMoveRegistry[piece.piece][Symbol()] = registryResult;
    var permutations = new Uint16Array(14).fill(_Utilities__WEBPACK_IMPORTED_MODULE_6__.oneBitMask);
    currentSquares.forEach(value => {
      var valueArr = value.split(":");
      permutations[parseInt(valueArr[0], 10)] |= _Utilities__WEBPACK_IMPORTED_MODULE_6__.binaryMasks[parseInt(valueArr[1], 10)];
    });
    unvisitedSquares.forEach(value => {
      var valueArr = value.split(":");
      permutations[parseInt(valueArr[0], 10)] |= _Utilities__WEBPACK_IMPORTED_MODULE_6__.binaryMasks[parseInt(valueArr[1], 10)];
    });
    return permutations;
  }
  addToBoardDestinations(i, j, piece) {
    var permutations = this.recurseThroughSquares(i, j, piece);
    var boardPiece = this.boardDestinations.get(piece.piece);
    if (boardPiece) {
      this.boardDestinations.set(piece.piece, boardPiece.concat(permutations));
    } else {
      this.boardDestinations.set(piece.piece, [permutations]);
    }
  }
  getBoardDestinations() {
    var boardSquares = this.board.board,
      promotionRank = this.board.variantData.promotionRank || _PieceControlDecorators_PromotionRank__WEBPACK_IMPORTED_MODULE_7__.disabledRank,
      promotionPieces = this.board.variantData.promotionPieces || [];
    for (var i = 0; i < _moveGeneration_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_3__.boardDimension; i++) {
      for (var j = 0; j < _moveGeneration_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_3__.boardDimension; j++) {
        if (boardSquares[i][j].isPiece()) this.addToBoardDestinations(i, j, boardSquares[i][j]);
      }
    }
    var hasPromotion = promotionRank !== _PieceControlDecorators_PromotionRank__WEBPACK_IMPORTED_MODULE_7__.disabledRank && promotionPieces.some(p => (0,_moveGeneration_PieceControl_PieceControlInterface__WEBPACK_IMPORTED_MODULE_5__.verifyPieceLetter)(p));
    var promotionRanks = [_moveGeneration_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_3__.boardDimension - promotionRank, promotionRank - 1, promotionRank - 1, _moveGeneration_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_3__.boardDimension - promotionRank];
    var optimizedPieces = (0,_Utilities__WEBPACK_IMPORTED_MODULE_6__.optimizePieceSet)(promotionPieces, true);
    if (hasPromotion) {
      var _iterator3 = _createForOfIteratorHelper(_moveGeneration_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_3__.colors),
        _step3;
      try {
        for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {
          var color = _step3.value;
          color &= 1;
          for (var x = 0; x < _moveGeneration_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_3__.boardDimension; x++) {
            var _i2 = color ? promotionRanks[color] : x,
              _j = color ? x : promotionRanks[color];
            if (this.state.walls[_i2][_j]) continue;
            var _iterator4 = _createForOfIteratorHelper(optimizedPieces),
              _step4;
            try {
              for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {
                var piece = _step4.value;
                this.addToBoardDestinations(_i2, _j, (0,_moveGeneration_GameInformation_GameUnits_PieceString__WEBPACK_IMPORTED_MODULE_4__.createPieceFromData)(0, piece));
              }
            } catch (err) {
              _iterator4.e(err);
            } finally {
              _iterator4.f();
            }
          }
        }
      } catch (err) {
        _iterator3.e(err);
      } finally {
        _iterator3.f();
      }
    }
  }
  initializeBackwardsPieceRegistry() {
    var _this = this;
    var entries = this.boardDestinations.entries(),
      backwardsPieceRegistry = this.state.backwardsPieceRegistry,
      pieceMoveRegistry = this.pieceMoveRegistry;
    var _iterator5 = _createForOfIteratorHelper(entries),
      _step5;
    try {
      var _loop = function _loop() {
        var _step5$value = _slicedToArray(_step5.value, 2),
          entry = _step5$value[0],
          uintArray = _step5$value[1];
        if (_moveGeneration_PieceControl_PieceControlInterface__WEBPACK_IMPORTED_MODULE_5__.pieceControlConfigSettings[entry].moveGenerationSettings.isPawn || entry === _moveGeneration_PieceControl_PieceControlInterface__WEBPACK_IMPORTED_MODULE_5__.grasshopperPieceLetter || !(0,_moveGeneration_PieceControl_PieceControlInterface__WEBPACK_IMPORTED_MODULE_5__.verifyPieceLetter)(entry)) return "continue";
        var isAlwaysIntersecting = true;
        var permutationArray = [];
        var _iterator6 = _createForOfIteratorHelper(uintArray),
          _step6;
        try {
          var _loop2 = function _loop2() {
            var permutationEntry = _step6.value;
            if (permutationArray.length === 0) {
              permutationArray.push(permutationEntry);
            } else {
              var index = permutationArray.findIndex(uintArr => {
                if (typeof uintArr !== "number") return uintArr.every((n, j) => n === permutationEntry[j]);
                return false;
              });
              if (~index) {
                permutationArray.push(index);
              } else {
                permutationArray.push(permutationEntry);
                isAlwaysIntersecting = false;
              }
            }
          };
          for (_iterator6.s(); !(_step6 = _iterator6.n()).done;) {
            _loop2();
          }
        } catch (err) {
          _iterator6.e(err);
        } finally {
          _iterator6.f();
        }
        if (isAlwaysIntersecting) {
          pieceMoveRegistry[entry] = {
            [Symbol()]: pieceMoveRegistry[entry][Object.getOwnPropertySymbols(pieceMoveRegistry[entry])[0]]
          };
        } else {
          if (!(entry in backwardsPieceRegistry)) {
            backwardsPieceRegistry[entry] = (0,_client_ts_logic_BaseInterfaces__WEBPACK_IMPORTED_MODULE_1__.initializeBoardSquares)(() => null);
          }
          var remappedSymbols = [];
          var _iterator7 = _createForOfIteratorHelper(permutationArray),
            _step7;
          try {
            for (_iterator7.s(); !(_step7 = _iterator7.n()).done;) {
              var squares = _step7.value;
              var remappedSymbol = void 0;
              if (typeof squares === "number") {
                remappedSymbols.push(squares);
                continue;
              }
              for (var _i3 = 0; _i3 < _moveGeneration_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_3__.boardDimension; _i3++) {
                for (var j = 0; j < _moveGeneration_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_3__.boardDimension; j++) {
                  if (squares[_i3] & _Utilities__WEBPACK_IMPORTED_MODULE_6__.binaryMasks[j] ^ _Utilities__WEBPACK_IMPORTED_MODULE_6__.oneBitMask) {
                    var _this$state$backwards, _j2, _this$state$backwards2;
                    if (!remappedSymbol) {
                      remappedSymbol = Symbol();
                      remappedSymbols.push(remappedSymbol);
                    }
                    (_this$state$backwards2 = (_this$state$backwards = _this.state.backwardsPieceRegistry[entry][_i3])[_j2 = j]) !== null && _this$state$backwards2 !== void 0 ? _this$state$backwards2 : _this$state$backwards[_j2] = remappedSymbol;
                  }
                }
              }
            }
          } catch (err) {
            _iterator7.e(err);
          } finally {
            _iterator7.f();
          }
          var uintValues = Object.getOwnPropertySymbols(pieceMoveRegistry[entry]).map(sym => pieceMoveRegistry[entry][sym]);
          pieceMoveRegistry[entry] = {};
          for (var i = 0; i < uintValues.length; i++) {
            var remapped = remappedSymbols[i];
            if (typeof remapped === "number") continue;
            if (typeof remapped === "undefined") break;
            pieceMoveRegistry[entry][remapped] = uintValues[i];
          }
        }
      };
      for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {
        var _ret = _loop();
        if (_ret === "continue") continue;
      }
    } catch (err) {
      _iterator5.e(err);
    } finally {
      _iterator5.f();
    }
  }
  generateOppositionSquares() {
    var boardSquares = this.board.board,
      controls = this.board.controls,
      emptyBoard = this.emptyBoard;
    var royalMoves = (0,_client_ts_baseTypes__WEBPACK_IMPORTED_MODULE_0__.createTuple)((0,_client_ts_logic_BaseInterfaces__WEBPACK_IMPORTED_MODULE_1__.initializeBoardSquares)(() => new Uint16Array(_moveGeneration_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_3__.boardDimension).fill(_Utilities__WEBPACK_IMPORTED_MODULE_6__.oneBitMask)), _moveGeneration_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_3__.totalPlayers);
    var oppositionRowEchelon = (0,_client_ts_baseTypes__WEBPACK_IMPORTED_MODULE_0__.createTuple)(undefined, _moveGeneration_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_3__.totalPlayers);
    this.board.data.fenOptions.tag("royal").forEach((royal, color) => {
      if (!royal) return;
      var royalPiece = boardSquares[royal[0]][royal[1]];
      var controlBuilder = controls[royalPiece.piece];
      var builder = controlBuilder().setColor(0).setBaseImmunePieces(_moveGeneration_Board_Board__WEBPACK_IMPORTED_MODULE_2__.baseImmunes).setBoard(emptyBoard);
      var finalArray = (0,_client_ts_logic_BaseInterfaces__WEBPACK_IMPORTED_MODULE_1__.initializeBoardSquares)(() => new Uint16Array(14).fill(_Utilities__WEBPACK_IMPORTED_MODULE_6__.oneBitMask));
      for (var i = 0; i < boardSquares.length; i++) {
        for (var j = 0; j < boardSquares[0].length; j++) {
          if (emptyBoard[i][j].isWall()) continue;
          var control = builder.setCoordinates(i, j).constructPieceControl();
          var moves = control.getPseudoLegalMoves();
          var permutationArray = new Uint16Array(_moveGeneration_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_3__.boardDimension).fill(_Utilities__WEBPACK_IMPORTED_MODULE_6__.oneBitMask);
          var _iterator8 = _createForOfIteratorHelper(moves),
            _step8;
          try {
            for (_iterator8.s(); !(_step8 = _iterator8.n()).done;) {
              var move = _step8.value.move;
              permutationArray[move[0]] |= _Utilities__WEBPACK_IMPORTED_MODULE_6__.binaryMasks[move[1]];
            }
          } catch (err) {
            _iterator8.e(err);
          } finally {
            _iterator8.f();
          }
          finalArray[i][j] = permutationArray;
          royalMoves[color][i][j] = permutationArray;
        }
      }
      oppositionRowEchelon[color] = finalArray;
    });
    var _iterator9 = _createForOfIteratorHelper(_moveGeneration_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_3__.colors),
      _step9;
    try {
      for (_iterator9.s(); !(_step9 = _iterator9.n()).done;) {
        var color = _step9.value;
        this.state.royalMoveMedians[color] = (0,_Utilities__WEBPACK_IMPORTED_MODULE_6__.findMinimumOnBoardSquares)(royalMoves[color]);
      }
    } catch (err) {
      _iterator9.e(err);
    } finally {
      _iterator9.f();
    }
    return {
      oppositionRowEchelon,
      royalMoves
    };
  }
  generateOppositeMedians(rowEchelon) {
    var emptyBoard = this.emptyBoard,
      oppositionMedians = this.state.oppositionMedians,
      royals = this.board.data.fenOptions.tag("royal");
    for (var i = 0; i < _moveGeneration_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_3__.totalPlayers; i++) {
      for (var j = 0; j < _moveGeneration_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_3__.totalPlayers; j++) {
        if (i === j || rowEchelon[i] === undefined) continue;
        var royalPieceA = royals[i],
          royalPieceB = royals[j];
        if (!royalPieceA || !royalPieceB) continue;
        var finalArray = Array.from({
          length: 14
        }, () => Array.from({
          length: 14
        }, () => 0));
        var _loop3 = function _loop3(i2) {
          var _loop4 = function _loop4(_j3) {
            var _jjIndex$toString, _iiIndex$toString;
            if (emptyBoard[i2][_j3].isWall()) return "continue";
            var jjIndex = rowEchelon[j];
            var iiIndex = rowEchelon[i];
            if (!jjIndex || !iiIndex) throw new Error("Central opposition matrix indexes are undefined: ".concat((_jjIndex$toString = jjIndex === null || jjIndex === void 0 ? void 0 : jjIndex.toString()) !== null && _jjIndex$toString !== void 0 ? _jjIndex$toString : "undefined", "  ").concat((_iiIndex$toString = iiIndex === null || iiIndex === void 0 ? void 0 : iiIndex.toString()) !== null && _iiIndex$toString !== void 0 ? _iiIndex$toString : "undefined"));
            if (jjIndex[i2][_j3][royalPieceA[1]] & _Utilities__WEBPACK_IMPORTED_MODULE_6__.binaryMasks[royalPieceA[0]] ^ _Utilities__WEBPACK_IMPORTED_MODULE_6__.oneBitMask && iiIndex[i2][_j3][royalPieceB[1]] & _Utilities__WEBPACK_IMPORTED_MODULE_6__.binaryMasks[royalPieceB[0]] ^ _Utilities__WEBPACK_IMPORTED_MODULE_6__.oneBitMask) {
              return "continue";
            }
            var uintArray = jjIndex[i2][_j3].map((e, x) => e & iiIndex[i2][_j3][x]);
            var newResultingSquares = 0;
            for (var dimSquare = 0; dimSquare < _moveGeneration_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_3__.boardDimension; dimSquare++) {
              newResultingSquares += (0,_utils_NumberUtils__WEBPACK_IMPORTED_MODULE_9__.bitCount)(uintArray[dimSquare]) - 1;
            }
            finalArray[i2][_j3] = newResultingSquares;
          };
          for (var _j3 = 0; _j3 < _moveGeneration_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_3__.boardDimension; _j3++) {
            var _ret2 = _loop4(_j3);
            if (_ret2 === "continue") continue;
          }
        };
        for (var i2 = 0; i2 < _moveGeneration_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_3__.boardDimension; i2++) {
          _loop3(i2);
        }
        var minimum = Infinity;
        for (var _i4 = 0; _i4 < _moveGeneration_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_3__.boardDimension; _i4++) {
          for (var j2 = 0; j2 < _moveGeneration_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_3__.boardDimension; j2++) {
            if (finalArray[_i4][j2] !== 0 && finalArray[_i4][j2] < minimum) {
              minimum = finalArray[_i4][j2];
            }
          }
        }
        oppositionMedians[i][j] = minimum - 1;
      }
    }
  }
  generatePieceMoveMedians(royalMoves) {
    var _this2 = this;
    var pieceMoveRegistry = this.pieceMoveRegistry,
      _this$state = this.state,
      pieceSquareMedians = _this$state.pieceSquareMedians,
      walls = _this$state.walls,
      royalPieceSets = this.royalPieceSets;
    var currentMessages = 0,
      requiredMessages = 0;
    var _loop5 = function _loop5(pieceLetter) {
      if (!(0,_moveGeneration_PieceControl_PieceControlInterface__WEBPACK_IMPORTED_MODULE_5__.verifyPieceLetter)(pieceLetter) || !Object.prototype.hasOwnProperty.call(pieceMoveRegistry, pieceLetter)) return "continue";
      if (pieceLetter in pieceSquareMedians) return "continue";
      pieceSquareMedians[pieceLetter] = {};
      var registeredSymbols = Object.getOwnPropertySymbols(pieceMoveRegistry[pieceLetter]);
      var _iterator10 = _createForOfIteratorHelper(registeredSymbols),
        _step10;
      try {
        var _loop6 = function _loop6() {
          var registeredSymbol = _step10.value;
          var pieceMedianCounter = new Worker(new URL(/* worker import */ __webpack_require__.p + __webpack_require__.u(2), __webpack_require__.b));
          pieceMedianCounter.postMessage({
            walls,
            moveRegistryArray: pieceMoveRegistry[pieceLetter][registeredSymbol].map(r => r.map(uint => uint.buffer)),
            royalMoves: royalMoves.map(board => board.map(r => r.map(uint => uint.buffer))),
            royalPieceSet: royalPieceSets.map(s => [...s])
          });
          requiredMessages++;
          pieceMedianCounter.onmessage = e => {
            pieceSquareMedians[pieceLetter][registeredSymbol] = e.data;
            pieceMedianCounter.terminate();
            if (requiredMessages === ++currentMessages) {
              _this2.callback(_this2.state);
            }
          };
        };
        for (_iterator10.s(); !(_step10 = _iterator10.n()).done;) {
          _loop6();
        }
      } catch (err) {
        _iterator10.e(err);
      } finally {
        _iterator10.f();
      }
    };
    for (var pieceLetter in pieceMoveRegistry) {
      var _ret3 = _loop5(pieceLetter);
      if (_ret3 === "continue") continue;
    }
  }
  generateInsufficientMaterialState() {
    this.initializeRoyals();
    this.getBoardDestinations();
    this.initializeBackwardsPieceRegistry();
    var _this$generateOpposit = this.generateOppositionSquares(),
      royalMoves = _this$generateOpposit.royalMoves,
      oppositionRowEchelon = _this$generateOpposit.oppositionRowEchelon;
    this.generateOppositeMedians(oppositionRowEchelon);
    this.generatePieceMoveMedians(royalMoves);
  }
}
_defineProperty(InsufficientMaterialConstructor, "NON_INDEXED_PIECE_SYMBOL", Symbol());

/***/ }),

/***/ "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/BoardVariantModules/InsufficientMaterial/StateSerializer.ts":
/*!******************************************************************************************************************************************!*\
  !*** ./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/BoardVariantModules/InsufficientMaterial/StateSerializer.ts ***!
  \******************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "deserializeInsufficientMaterialState": () => (/* binding */ deserializeInsufficientMaterialState),
/* harmony export */   "serializeInsufficientMaterialState": () => (/* binding */ serializeInsufficientMaterialState)
/* harmony export */ });
function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }
function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }
function _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }
function _toPropertyKey(arg) { var key = _toPrimitive(arg, "string"); return typeof key === "symbol" ? key : String(key); }
function _toPrimitive(input, hint) { if (typeof input !== "object" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || "default"); if (typeof res !== "object") return res; throw new TypeError("@@toPrimitive must return a primitive value."); } return (hint === "string" ? String : Number)(input); }
function _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }
function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }
function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }
function serializeInsufficientMaterialState(state) {
  var backwardsPieceRegistry = {};
  var counters = {};
  var individualCounter = 0;
  var key;
  for (key in state.backwardsPieceRegistry) {
    if (!Object.prototype.hasOwnProperty.call(state.backwardsPieceRegistry, key)) continue;
    backwardsPieceRegistry[key] = state.backwardsPieceRegistry[key].map(r => r.map(e => {
      if (e !== null) {
        if (e in counters) {
          return counters[e];
        } else {
          counters[e] = individualCounter++;
          return counters[e];
        }
      } else return e;
    }));
  }
  var pieceSquareMedians = {};
  for (key in state.pieceSquareMedians) {
    if (!Object.prototype.hasOwnProperty.call(state.pieceSquareMedians, key)) continue;
    var result = {};
    var _iterator = _createForOfIteratorHelper(Object.getOwnPropertySymbols(state.pieceSquareMedians[key])),
      _step;
    try {
      for (_iterator.s(); !(_step = _iterator.n()).done;) {
        var symbol = _step.value;
        if (symbol in counters) {
          result[counters[symbol]] = state.pieceSquareMedians[key][symbol];
        } else result[individualCounter--] = state.pieceSquareMedians[key][symbol];
      }
    } catch (err) {
      _iterator.e(err);
    } finally {
      _iterator.f();
    }
    pieceSquareMedians[key] = result;
  }
  return _objectSpread(_objectSpread({}, state), {}, {
    backwardsPieceRegistry,
    pieceSquareMedians,
    optimizedPieces: [...state.optimizedPieces]
  });
}
function deserializeInsufficientMaterialState(state) {
  var backwardsPieceRegistry = {};
  var counters = {};
  var key;
  for (key in state.backwardsPieceRegistry) {
    if (!Object.prototype.hasOwnProperty.call(state.backwardsPieceRegistry, key)) continue;
    counters[key] = {};
    backwardsPieceRegistry[key] = state.backwardsPieceRegistry[key].map(r => r.map(e => {
      if (e !== null) {
        if (!(e in counters[key])) counters[key][e] = Symbol();
        return counters[key][e];
      } else return e;
    }));
  }
  var pieceSquareMedians = {};
  for (key in state.pieceSquareMedians) {
    if (!Object.prototype.hasOwnProperty.call(state.pieceSquareMedians, key)) continue;
    var result = {};
    for (var numericKey in state.pieceSquareMedians[key]) {
      if (!Object.prototype.hasOwnProperty.call(state.pieceSquareMedians[key], numericKey)) continue;
      var indexingNumber = Number(numericKey);
      if (key in counters && indexingNumber in counters[key]) {
        result[counters[key][indexingNumber]] = state.pieceSquareMedians[key][indexingNumber];
      } else result[Symbol()] = state.pieceSquareMedians[key][indexingNumber];
    }
    pieceSquareMedians[key] = result;
  }
  return _objectSpread(_objectSpread({}, state), {}, {
    backwardsPieceRegistry,
    pieceSquareMedians,
    optimizedPieces: new Set(state.optimizedPieces)
  });
}

/***/ }),

/***/ "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/FENDataDecorators/Atomic.ts":
/*!**********************************************************************************************************!*\
  !*** ./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/FENDataDecorators/Atomic.ts ***!
  \**********************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Atomic": () => (/* binding */ Atomic)
/* harmony export */ });
/* harmony import */ var _moveGeneration_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @moveGeneration/GameInformation/GameData */ "./src/main/client/ts/logic/movegen/GameInformation/GameData.ts");
/* harmony import */ var _moveGeneration_PieceControl_PieceControlInterface__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @moveGeneration/PieceControl/PieceControlInterface */ "./src/main/client/ts/logic/movegen/PieceControl/PieceControlInterface.ts");
/* harmony import */ var _FENData_FENData__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../FENData/FENData */ "./src/main/client/ts/logic/movegen/FENData/FENData.ts");
/* harmony import */ var _VariantRule__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../VariantRule */ "./src/main/client/ts/logic/movegen/VariantRules/VariantRule.ts");
/* harmony import */ var _VariantRuleInterface__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../VariantRuleInterface */ "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleInterface.ts");
/* harmony import */ var _PieceControlDecorators_RoyalsCannotCapture__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../PieceControlDecorators/RoyalsCannotCapture */ "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/PieceControlDecorators/RoyalsCannotCapture.ts");
/* harmony import */ var _client_fonts_chessGlyphIndex__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @client/fonts/chessGlyphIndex */ "./src/main/client/fonts/chessGlyphIndex.ts");
function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }
function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function _iterableToArrayLimit(arr, i) { var _i = null == arr ? null : "undefined" != typeof Symbol && arr[Symbol.iterator] || arr["@@iterator"]; if (null != _i) { var _s, _e, _x, _r, _arr = [], _n = !0, _d = !1; try { if (_x = (_i = _i.call(arr)).next, 0 === i) { if (Object(_i) !== _i) return; _n = !1; } else for (; !(_n = (_s = _x.call(_i)).done) && (_arr.push(_s.value), _arr.length !== i); _n = !0); } catch (err) { _d = !0, _e = err; } finally { try { if (!_n && null != _i.return && (_r = _i.return(), Object(_r) !== _r)) return; } finally { if (_d) throw _e; } } return _arr; } }
function _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }
function _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e2) { throw _e2; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e3) { didErr = true; err = _e3; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }
function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }
function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }
function _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }
function _toPropertyKey(arg) { var key = _toPrimitive(arg, "string"); return typeof key === "symbol" ? key : String(key); }
function _toPrimitive(input, hint) { if (typeof input !== "object" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || "default"); if (typeof res !== "object") return res; throw new TypeError("@@toPrimitive must return a primitive value."); } return (hint === "string" ? String : Number)(input); }







var tag = "atomic";
class Atomic extends _VariantRule__WEBPACK_IMPORTED_MODULE_3__.VariantRule {
  constructor() {
    super(...arguments);
    _defineProperty(this, "dependencies", new Map([[_PieceControlDecorators_RoyalsCannotCapture__WEBPACK_IMPORTED_MODULE_5__.RoyalsCannotCapture, []]]));
  }
  getDecoratorType() {
    return _FENData_FENData__WEBPACK_IMPORTED_MODULE_2__.FENData;
  }
  getPublicProperties() {
    return {
      parameterValue: true,
      information: {
        name: "Atomic",
        description: "Captures cause all surrounding pieces except pawns to explode",
        tag,
        color: _VariantRuleInterface__WEBPACK_IMPORTED_MODULE_4__.variantRuleColors.extending,
        displayIcon: _client_fonts_chessGlyphIndex__WEBPACK_IMPORTED_MODULE_6__.chessGlyphIndex.atomic
      }
    };
  }
  matchesPGNDeclaration(match) {
    return /^Atomic$/i.test(match);
  }
  serializeToParsingForm() {
    return "Atomic";
  }
  isDisabled() {
    return false;
  }
  isComplexEvaluation() {
    return true;
  }
  getCapturedPieces(moveData) {
    var baseCoordinates = this.callHandler("getCapturedPieces", arguments);
    var addCoordinate = (disI, disJ) => {
      var coordinateI = moveData.endCoordinates[0] + disI;
      var coordinateJ = moveData.endCoordinates[1] + disJ;
      if (coordinateI >= 0 && coordinateI <= _moveGeneration_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_0__.boardDimension && coordinateJ >= 0 && coordinateJ <= _moveGeneration_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_0__.boardDimension) {
        var pieceString = this.decorator.board.board[coordinateI][coordinateJ];
        if ((pieceString.isPiece() || pieceString.isDead()) && !_moveGeneration_PieceControl_PieceControlInterface__WEBPACK_IMPORTED_MODULE_1__.pieceControlConfigSettings[pieceString.piece].moveGenerationSettings.isPawn) {
          baseCoordinates.push([coordinateI, coordinateJ]);
        }
      }
    };
    if (baseCoordinates.length !== 0) {
      var _iterator = _createForOfIteratorHelper(Atomic.atomicCoordinates),
        _step;
      try {
        for (_iterator.s(); !(_step = _iterator.n()).done;) {
          var _step$value = _slicedToArray(_step.value, 2),
            i = _step$value[0],
            j = _step$value[1];
          addCoordinate(i, j);
        }
      } catch (err) {
        _iterator.e(err);
      } finally {
        _iterator.f();
      }
      baseCoordinates.push([...moveData.startCoordinates]);
    }
    return baseCoordinates;
  }
}
_VariantRule__WEBPACK_IMPORTED_MODULE_3__.VariantRule.initVariantRule(Atomic);
_defineProperty(Atomic, "atomicCoordinates", [[-1, -1], [-1, 0], [0, -1], [-1, 1], [1, -1], [1, 0], [0, 1], [1, 1]]);

/***/ }),

/***/ "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/FENDataDecorators/DeadKingWalking.ts":
/*!*******************************************************************************************************************!*\
  !*** ./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/FENDataDecorators/DeadKingWalking.ts ***!
  \*******************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "DeadKingWalking": () => (/* binding */ DeadKingWalking)
/* harmony export */ });
/* harmony import */ var _moveGeneration_FENData_FENData__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @moveGeneration/FENData/FENData */ "./src/main/client/ts/logic/movegen/FENData/FENData.ts");
/* harmony import */ var _moveGeneration_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @moveGeneration/GameInformation/GameData */ "./src/main/client/ts/logic/movegen/GameInformation/GameData.ts");
/* harmony import */ var _moveGeneration_GameInformation_GameUnits_GameUnits__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @moveGeneration/GameInformation/GameUnits/GameUnits */ "./src/main/client/ts/logic/movegen/GameInformation/GameUnits/GameUnits.ts");
/* harmony import */ var _moveGeneration_GameInformation_GameUnits_PieceString__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @moveGeneration/GameInformation/GameUnits/PieceString */ "./src/main/client/ts/logic/movegen/GameInformation/GameUnits/PieceString.ts");
/* harmony import */ var _moveGeneration_MoveTree_MoveTreeInterface__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @moveGeneration/MoveTree/MoveTreeInterface */ "./src/main/client/ts/logic/movegen/MoveTree/MoveTreeInterface.ts");
/* harmony import */ var _moveGeneration_PieceControl_PieceControlInterface__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @moveGeneration/PieceControl/PieceControlInterface */ "./src/main/client/ts/logic/movegen/PieceControl/PieceControlInterface.ts");
/* harmony import */ var _moveGeneration_VariantRules_VariantRule__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @moveGeneration/VariantRules/VariantRule */ "./src/main/client/ts/logic/movegen/VariantRules/VariantRule.ts");
/* harmony import */ var _moveGeneration_VariantRules_VariantRuleInterface__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @moveGeneration/VariantRules/VariantRuleInterface */ "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleInterface.ts");
function _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }
function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }
function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }








var tag = "deadKingWalking";
class DeadKingWalking extends _moveGeneration_VariantRules_VariantRule__WEBPACK_IMPORTED_MODULE_6__.VariantRule {
  getDecoratorType() {
    return _moveGeneration_FENData_FENData__WEBPACK_IMPORTED_MODULE_0__.FENData;
  }
  getPublicProperties() {
    return {
      parameterValue: true,
      information: {
        name: "Zombies",
        description: "Resigned players are controlled by a bot",
        tag,
        color: _moveGeneration_VariantRules_VariantRuleInterface__WEBPACK_IMPORTED_MODULE_7__.variantRuleColors.autogenous,
        displayIcon: ""
      }
    };
  }
  matchesPGNDeclaration(match) {
    return /^DeadKingWalking$/i.test(match);
  }
  serializeToParsingForm() {
    return "DeadKingWalking";
  }
  isDisabled(_ref) {
    var variantDataRules = _ref.variantDataRules,
      gameType = _ref.gameType,
      fenTags = _ref.fenTags;
    return gameType === _moveGeneration_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_1__.VariantType.Teams || fenTags.dead.value.reduce((p, n, i) => p + Number(n || fenTags.resigned.value[i]), 0) <= _moveGeneration_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_1__.totalPlayers - 1 || variantDataRules.pointsForMate !== false && variantDataRules.pointsForMate < 6;
  }
  processInternalMove(internalMove) {
    if (internalMove.type === _moveGeneration_MoveTree_MoveTreeInterface__WEBPACK_IMPORTED_MODULE_4__.InternalMoveSignature.Resign || internalMove.type === _moveGeneration_MoveTree_MoveTreeInterface__WEBPACK_IMPORTED_MODULE_4__.InternalMoveSignature.ClaimWin || internalMove.type === _moveGeneration_MoveTree_MoveTreeInterface__WEBPACK_IMPORTED_MODULE_4__.InternalMoveSignature.Timeout) {
      var _this$decorator = this.decorator,
        sideToMove = _this$decorator.sideToMove,
        fenOptions = _this$decorator.fenOptions,
        board = _this$decorator.board;
      var dead = fenOptions.tag("dead"),
        resigned = fenOptions.tag("resigned");
      resigned[sideToMove] = true;
      dead[sideToMove] = true;
      var _iterator = _createForOfIteratorHelper(board.getPlayerPieces()[sideToMove]),
        _step;
      try {
        for (_iterator.s(); !(_step = _iterator.n()).done;) {
          var coordinate = _step.value;
          var piece = board.board[coordinate[0]][coordinate[1]].piece;
          if (_moveGeneration_PieceControl_PieceControlInterface__WEBPACK_IMPORTED_MODULE_5__.pieceControlConfigSettings[piece].moveGenerationSettings.isPawn) {
            board.board[coordinate[0]][coordinate[1]] = (0,_moveGeneration_GameInformation_GameUnits_PieceString__WEBPACK_IMPORTED_MODULE_3__.createPieceFromData)(_moveGeneration_GameInformation_GameUnits_PieceString__WEBPACK_IMPORTED_MODULE_3__.deadColorIndex, piece);
          }
        }
      } catch (err) {
        _iterator.e(err);
      } finally {
        _iterator.f();
      }
      var deadPlayers = dead.map((d, i) => d || resigned[i]).filter(Boolean);
      if (deadPlayers.length === _moveGeneration_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_1__.totalPlayers - 1) {
        var alivePlayer = deadPlayers.findIndex(d => !d);
        if ((0,_moveGeneration_GameInformation_GameUnits_GameUnits__WEBPACK_IMPORTED_MODULE_2__.verifyNumericColor)(alivePlayer)) {
          this.decorator.assignPoints(alivePlayer, this.decorator.countTotalPointsOnBoard().reduce((p, n, i) => p + (i === alivePlayer ? n : 0), 0));
        }
      }
      return {
        stalemates: [false, false, false, false]
      };
    } else return this.callHandler("processInternalMove", arguments);
  }
}
_moveGeneration_VariantRules_VariantRule__WEBPACK_IMPORTED_MODULE_6__.VariantRule.initVariantRule(DeadKingWalking);

/***/ }),

/***/ "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/FENDataDecorators/EnPassant.ts":
/*!*************************************************************************************************************!*\
  !*** ./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/FENDataDecorators/EnPassant.ts ***!
  \*************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "EnPassant": () => (/* binding */ EnPassant)
/* harmony export */ });
/* harmony import */ var _MoveTree_MoveTreeInterface__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../MoveTree/MoveTreeInterface */ "./src/main/client/ts/logic/movegen/MoveTree/MoveTreeInterface.ts");
/* harmony import */ var _FENData_FENData__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../FENData/FENData */ "./src/main/client/ts/logic/movegen/FENData/FENData.ts");
/* harmony import */ var _GameInformation_GameUnits_PieceString__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../GameInformation/GameUnits/PieceString */ "./src/main/client/ts/logic/movegen/GameInformation/GameUnits/PieceString.ts");
/* harmony import */ var _VariantRule__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../VariantRule */ "./src/main/client/ts/logic/movegen/VariantRules/VariantRule.ts");
/* harmony import */ var _VariantRuleInterface__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../VariantRuleInterface */ "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleInterface.ts");
/* harmony import */ var _moveGeneration_PieceControl_PieceControlInterface__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @moveGeneration/PieceControl/PieceControlInterface */ "./src/main/client/ts/logic/movegen/PieceControl/PieceControlInterface.ts");
/* harmony import */ var _GameInformation_GameUnits_GameUnits__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../GameInformation/GameUnits/GameUnits */ "./src/main/client/ts/logic/movegen/GameInformation/GameUnits/GameUnits.ts");
/* harmony import */ var _client_ts_baseTypes__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @client/ts/baseTypes */ "./src/main/client/ts/baseTypes.ts");
/* harmony import */ var _client_ts_logic_BaseInterfaces__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @client/ts/logic/BaseInterfaces */ "./src/main/client/ts/logic/BaseInterfaces.ts");
/* harmony import */ var _client_fonts_chessGlyphIndex__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @client/fonts/chessGlyphIndex */ "./src/main/client/fonts/chessGlyphIndex.ts");
function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }
function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }
function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }
function _iterableToArrayLimit(arr, i) { var _i = null == arr ? null : "undefined" != typeof Symbol && arr[Symbol.iterator] || arr["@@iterator"]; if (null != _i) { var _s, _e, _x, _r, _arr = [], _n = !0, _d = !1; try { if (_x = (_i = _i.call(arr)).next, 0 === i) { if (Object(_i) !== _i) return; _n = !1; } else for (; !(_n = (_s = _x.call(_i)).done) && (_arr.push(_s.value), _arr.length !== i); _n = !0); } catch (err) { _d = !0, _e = err; } finally { try { if (!_n && null != _i.return && (_r = _i.return(), Object(_r) !== _r)) return; } finally { if (_d) throw _e; } } return _arr; } }
function _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }










var tag = "enPassant";
class EnPassant extends _VariantRule__WEBPACK_IMPORTED_MODULE_3__.VariantRule {
  getDecoratorType() {
    return _FENData_FENData__WEBPACK_IMPORTED_MODULE_1__.FENData;
  }
  getPublicProperties() {
    return {
      parameterValue: true,
      information: {
        name: "En Passant",
        description: "Pawns can capture en passant",
        tag,
        color: _VariantRuleInterface__WEBPACK_IMPORTED_MODULE_4__.variantRuleColors.minor,
        displayIcon: _client_fonts_chessGlyphIndex__WEBPACK_IMPORTED_MODULE_9__.chessGlyphIndex.pawnConnection
      }
    };
  }
  matchesPGNDeclaration(match) {
    return /^EnPassant$/i.test(match);
  }
  serializeToParsingForm() {
    return "EnPassant";
  }
  isDisabled() {
    return false;
  }
  processStandardMove(moveData) {
    var enPassants = this.decorator.fenOptions.tag("enPassant");
    var _moveData$startCoordi = _slicedToArray(moveData.startCoordinates, 2),
      startI = _moveData$startCoordi[0],
      startJ = _moveData$startCoordi[1],
      _moveData$endCoordina = _slicedToArray(moveData.endCoordinates, 2),
      endI = _moveData$endCoordina[0],
      endJ = _moveData$endCoordina[1];
    if (moveData.specialType === _MoveTree_MoveTreeInterface__WEBPACK_IMPORTED_MODULE_0__.SpecialMove.EnPassant) {
      var eligibleEnPassants = [];
      enPassants.forEach((e, i) => {
        if (!e) return;
        if (e[0][0] === endI && e[0][1] === endJ) eligibleEnPassants.push(i);
      });
      for (var _i2 = 0, _eligibleEnPassants = eligibleEnPassants; _i2 < _eligibleEnPassants.length; _i2++) {
        var enPassantCoordinate = _eligibleEnPassants[_i2];
        var enPassant = enPassants[enPassantCoordinate];
        (0,_client_ts_baseTypes__WEBPACK_IMPORTED_MODULE_7__.assertNonUndefined)(enPassant);
        this.decorator.board.board[enPassant[1][0]][enPassant[1][1]] = _GameInformation_GameUnits_PieceString__WEBPACK_IMPORTED_MODULE_2__.emptyPieceString;
        enPassants[enPassantCoordinate] = null;
      }
    } else {
      var pieceString = this.decorator.board.board[startI][startJ];
      if (!pieceString.isEmpty() && pieceString.piece !== _GameInformation_GameUnits_GameUnits__WEBPACK_IMPORTED_MODULE_6__.nonPlayablePieces.duck) {
        enPassants[this.decorator.sideToMove] = null;
        var setting = _moveGeneration_PieceControl_PieceControlInterface__WEBPACK_IMPORTED_MODULE_5__.pieceControlConfigSettings[pieceString.piece];
        if (setting.moveGenerationSettings.isPawn && Math.abs((0,_client_ts_logic_BaseInterfaces__WEBPACK_IMPORTED_MODULE_8__.isVerticalPlacement)(this.decorator.sideToMove) ? startI - endI : startJ - endJ) === 2) {
          var enPassantInfo = [[Math.ceil((startI + endI) / 2), Math.ceil((startJ + endJ) / 2)], [endI, endJ]];
          enPassants[this.decorator.sideToMove] = enPassantInfo;
        }
      }
    }
    return this.callHandler("processStandardMove", arguments);
  }
}
_VariantRule__WEBPACK_IMPORTED_MODULE_3__.VariantRule.initVariantRule(EnPassant);

/***/ }),

/***/ "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/FENDataDecorators/FatalCapture.ts":
/*!****************************************************************************************************************!*\
  !*** ./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/FENDataDecorators/FatalCapture.ts ***!
  \****************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "FatalCapture": () => (/* binding */ FatalCapture)
/* harmony export */ });
/* harmony import */ var _baseTypes__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../../baseTypes */ "./src/main/client/ts/baseTypes.ts");
/* harmony import */ var _FENData_FENData__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../FENData/FENData */ "./src/main/client/ts/logic/movegen/FENData/FENData.ts");
/* harmony import */ var _GameInformation_GameData__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../GameInformation/GameData */ "./src/main/client/ts/logic/movegen/GameInformation/GameData.ts");
/* harmony import */ var _GameInformation_GameUnits_PieceString__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../GameInformation/GameUnits/PieceString */ "./src/main/client/ts/logic/movegen/GameInformation/GameUnits/PieceString.ts");
/* harmony import */ var _VariantRule__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../VariantRule */ "./src/main/client/ts/logic/movegen/VariantRules/VariantRule.ts");
/* harmony import */ var _VariantRuleInterface__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../VariantRuleInterface */ "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleInterface.ts");
/* harmony import */ var _PieceControlDecorators_RoyalsCannotCapture__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../PieceControlDecorators/RoyalsCannotCapture */ "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/PieceControlDecorators/RoyalsCannotCapture.ts");
/* harmony import */ var _moveGeneration_PieceControl_PieceControlInterface__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @moveGeneration/PieceControl/PieceControlInterface */ "./src/main/client/ts/logic/movegen/PieceControl/PieceControlInterface.ts");
/* harmony import */ var _MoveTree_MoveTreeInterface__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../MoveTree/MoveTreeInterface */ "./src/main/client/ts/logic/movegen/MoveTree/MoveTreeInterface.ts");
/* harmony import */ var _client_fonts_chessGlyphIndex__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @client/fonts/chessGlyphIndex */ "./src/main/client/fonts/chessGlyphIndex.ts");
function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }
function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }
function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }
function _iterableToArrayLimit(arr, i) { var _i = null == arr ? null : "undefined" != typeof Symbol && arr[Symbol.iterator] || arr["@@iterator"]; if (null != _i) { var _s, _e, _x, _r, _arr = [], _n = !0, _d = !1; try { if (_x = (_i = _i.call(arr)).next, 0 === i) { if (Object(_i) !== _i) return; _n = !1; } else for (; !(_n = (_s = _x.call(_i)).done) && (_arr.push(_s.value), _arr.length !== i); _n = !0); } catch (err) { _d = !0, _e = err; } finally { try { if (!_n && null != _i.return && (_r = _i.return(), Object(_r) !== _r)) return; } finally { if (_d) throw _e; } } return _arr; } }
function _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }
function _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }
function _toPropertyKey(arg) { var key = _toPrimitive(arg, "string"); return typeof key === "symbol" ? key : String(key); }
function _toPrimitive(input, hint) { if (typeof input !== "object" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || "default"); if (typeof res !== "object") return res; throw new TypeError("@@toPrimitive must return a primitive value."); } return (hint === "string" ? String : Number)(input); }










var tag = "fatalCapture";
class FatalCapture extends _VariantRule__WEBPACK_IMPORTED_MODULE_4__.VariantRule {
  constructor() {
    super(...arguments);
    _defineProperty(this, "dependencies", new Map([[_PieceControlDecorators_RoyalsCannotCapture__WEBPACK_IMPORTED_MODULE_6__.RoyalsCannotCapture, []]]));
  }
  getDecoratorType() {
    return _FENData_FENData__WEBPACK_IMPORTED_MODULE_1__.FENData;
  }
  getPublicProperties() {
    return {
      parameterValue: true,
      information: {
        name: "Fatal Capture",
        description: "Pieces (but not pawns) die when they capture",
        tag,
        color: _VariantRuleInterface__WEBPACK_IMPORTED_MODULE_5__.variantRuleColors.extending,
        displayIcon: _client_fonts_chessGlyphIndex__WEBPACK_IMPORTED_MODULE_9__.chessGlyphIndex.trashBin
      }
    };
  }
  matchesPGNDeclaration(match) {
    return /^FatalCapture$/i.test(match);
  }
  serializeToParsingForm() {
    return "FatalCapture";
  }
  isDisabled() {
    return false;
  }
  affectOptions(move) {
    var endCaptureCoordinates;
    if ((0,_MoveTree_MoveTreeInterface__WEBPACK_IMPORTED_MODULE_8__.verifyStandardMove)(move)) {
      var _move$startCoordinate = _slicedToArray(move.startCoordinates, 2),
        startI = _move$startCoordinate[0],
        startJ = _move$startCoordinate[1],
        _move$endCoordinates = _slicedToArray(move.endCoordinates, 2),
        endI = _move$endCoordinates[0],
        endJ = _move$endCoordinates[1];
      var isCapture = this.decorator.board.board[endI][endJ].isPiece();
      var royal = this.decorator.fenOptions.tag("royal")[this.decorator.sideToMove];
      if (royal && startI === royal[0] && startJ === royal[1] && isCapture) {
        return {
          checkmates: this.decorator.board.gameType.getBaseColors(this.decorator.sideToMove),
          checks: (0,_baseTypes__WEBPACK_IMPORTED_MODULE_0__.createTuple)(false, _GameInformation_GameData__WEBPACK_IMPORTED_MODULE_2__.totalPlayers),
          stalemates: (0,_baseTypes__WEBPACK_IMPORTED_MODULE_0__.createTuple)(false, _GameInformation_GameData__WEBPACK_IMPORTED_MODULE_2__.totalPlayers)
        };
      }
      endCaptureCoordinates = isCapture ? move.endCoordinates : undefined;
    }
    var returnType = this.callHandler("affectOptions", arguments);
    if (endCaptureCoordinates) {
      var pieceString = this.decorator.board.board[endCaptureCoordinates[0]][endCaptureCoordinates[1]];
      if (!_moveGeneration_PieceControl_PieceControlInterface__WEBPACK_IMPORTED_MODULE_7__.pieceControlConfigSettings[pieceString.piece].moveGenerationSettings.isPawn) {
        this.decorator.board.board[endCaptureCoordinates[0]][endCaptureCoordinates[1]] = (0,_GameInformation_GameUnits_PieceString__WEBPACK_IMPORTED_MODULE_3__.createPieceFromData)(_GameInformation_GameUnits_PieceString__WEBPACK_IMPORTED_MODULE_3__.deadColorIndex, this.decorator.board.board[endCaptureCoordinates[0]][endCaptureCoordinates[1]].piece);
      }
    }
    return returnType;
  }
}
_VariantRule__WEBPACK_IMPORTED_MODULE_4__.VariantRule.initVariantRule(FatalCapture);

/***/ }),

/***/ "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/FENDataDecorators/FiftyMoveRule.ts":
/*!*****************************************************************************************************************!*\
  !*** ./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/FENDataDecorators/FiftyMoveRule.ts ***!
  \*****************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "FiftyMoveRule": () => (/* binding */ FiftyMoveRule)
/* harmony export */ });
/* harmony import */ var _FENData_FENData__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../FENData/FENData */ "./src/main/client/ts/logic/movegen/FENData/FENData.ts");
/* harmony import */ var _GameInformation_GameData__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../GameInformation/GameData */ "./src/main/client/ts/logic/movegen/GameInformation/GameData.ts");
/* harmony import */ var _VariantRule__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../VariantRule */ "./src/main/client/ts/logic/movegen/VariantRules/VariantRule.ts");
function _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }
function _toPropertyKey(arg) { var key = _toPrimitive(arg, "string"); return typeof key === "symbol" ? key : String(key); }
function _toPrimitive(input, hint) { if (typeof input !== "object" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || "default"); if (typeof res !== "object") return res; throw new TypeError("@@toPrimitive must return a primitive value."); } return (hint === "string" ? String : Number)(input); }



var tag = "fiftyMoveRule";
class FiftyMoveRule extends _VariantRule__WEBPACK_IMPORTED_MODULE_2__.VariantRule {
  constructor(fullMoves) {
    super();
    _defineProperty(this, "totalFullMoves", void 0);
    if (typeof fullMoves === "number" && fullMoves > 0) {
      this.totalFullMoves = fullMoves;
    } else {
      this.totalFullMoves = 50;
    }
  }
  getDecoratorType() {
    return _FENData_FENData__WEBPACK_IMPORTED_MODULE_0__.FENData;
  }
  getPublicProperties() {
    var isDisabled = this.totalFullMoves === Infinity;
    return {
      parameterValue: this.totalFullMoves,
      information: {
        name: "N Move Rule",
        textualForm: "",
        description: isDisabled ? "50 move rule disabled" : "After ".concat(this.totalFullMoves, " full moves without captures or pawn pushes game is over"),
        tag
      }
    };
  }
  matchesPGNDeclaration(match) {
    var matchArray = match.match(/^FiftyMoveRule=((?:\d+)|(?:Infinity))$/i);
    if (matchArray) {
      this.totalFullMoves = Number(matchArray[1]);
      return true;
    } else {
      return false;
    }
  }
  serializeToParsingForm() {
    return "FiftyMoveRule=".concat(this.totalFullMoves);
  }
  isDisabled() {
    return false;
  }
  getParametrizedOptions() {
    var options = new Map();
    for (var _i = 0, _arr = [50, 150, 200, 25, 10]; _i < _arr.length; _i++) {
      var value = _arr[_i];
      options.set("".concat(value, " Move rule"), value);
    }
    options.set("Unlimited", Infinity);
    return options;
  }
  processStandardMove(moveData) {
    if (this.decorator.getCapturedPieces(moveData).length > 0) {
      this.decorator.plyCount = 0;
    }
    return this.callHandler("processStandardMove", arguments);
  }
  affectOptions(move) {
    var results = this.callHandler("affectOptions", arguments);
    if (move.isIrreversible) {
      this.decorator.plyCount = 0;
    } else {
      this.decorator.plyCount++;
    }
    var alivePlayers = _GameInformation_GameData__WEBPACK_IMPORTED_MODULE_1__.totalPlayers - this.decorator.fenOptions.tag("dead").filter(Boolean).length;
    if (alivePlayers > 0 && Math.floor(this.decorator.plyCount / alivePlayers) > this.totalFullMoves) {
      this.decorator.assignGeneralTermination("50-move Rule");
      this.injectIntoBaseClass(function () {
        this.spreadPointsBetweenPlayersEvenly();
      })();
    }
    return results;
  }
}
_VariantRule__WEBPACK_IMPORTED_MODULE_2__.VariantRule.initVariantRule(FiftyMoveRule);

/***/ }),

/***/ "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/FENDataDecorators/Giveaway.ts":
/*!************************************************************************************************************!*\
  !*** ./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/FENDataDecorators/Giveaway.ts ***!
  \************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Giveaway": () => (/* binding */ Giveaway)
/* harmony export */ });
/* harmony import */ var _FENData_FENData__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../FENData/FENData */ "./src/main/client/ts/logic/movegen/FENData/FENData.ts");
/* harmony import */ var _GameInformation_GameData__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../GameInformation/GameData */ "./src/main/client/ts/logic/movegen/GameInformation/GameData.ts");
/* harmony import */ var _VariantRule__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../VariantRule */ "./src/main/client/ts/logic/movegen/VariantRules/VariantRule.ts");
/* harmony import */ var _VariantRuleInterface__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../VariantRuleInterface */ "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleInterface.ts");
/* harmony import */ var _BoardDecorators_ForcedCapture__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../BoardDecorators/ForcedCapture */ "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/BoardDecorators/ForcedCapture.ts");
/* harmony import */ var _StalemateOptions__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./StalemateOptions */ "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/FENDataDecorators/StalemateOptions.ts");
/* harmony import */ var _client_fonts_chessGlyphIndex__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @client/fonts/chessGlyphIndex */ "./src/main/client/fonts/chessGlyphIndex.ts");
function _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }
function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }
function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }
function _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }
function _toPropertyKey(arg) { var key = _toPrimitive(arg, "string"); return typeof key === "symbol" ? key : String(key); }
function _toPrimitive(input, hint) { if (typeof input !== "object" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || "default"); if (typeof res !== "object") return res; throw new TypeError("@@toPrimitive must return a primitive value."); } return (hint === "string" ? String : Number)(input); }







var tag = "giveaway";
class Giveaway extends _VariantRule__WEBPACK_IMPORTED_MODULE_2__.VariantRule {
  constructor() {
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }
    super(...args);
    _defineProperty(this, "dependencies", new Map([[_BoardDecorators_ForcedCapture__WEBPACK_IMPORTED_MODULE_4__.ForcedCapture, []], [_StalemateOptions__WEBPACK_IMPORTED_MODULE_5__.StalemateOptions, [_StalemateOptions__WEBPACK_IMPORTED_MODULE_5__.stalemateOptionsValues.stalemateWins]]]));
    _defineProperty(this, "initiallyAliveColors", _GameInformation_GameData__WEBPACK_IMPORTED_MODULE_1__.totalPlayers);
  }
  getDecoratorType() {
    return _FENData_FENData__WEBPACK_IMPORTED_MODULE_0__.FENData;
  }
  getPublicProperties() {
    return {
      parameterValue: true,
      information: {
        name: "Giveaway",
        description: "First to lose all pieces or stalemate wins",
        tag,
        color: _VariantRuleInterface__WEBPACK_IMPORTED_MODULE_3__.variantRuleColors.widespread,
        displayIcon: _client_fonts_chessGlyphIndex__WEBPACK_IMPORTED_MODULE_6__.chessGlyphIndex.gift
      }
    };
  }
  matchesPGNDeclaration(match) {
    return /^Giveaway$/i.test(match);
  }
  serializeToParsingForm() {
    return "Giveaway";
  }
  isDisabled(_ref) {
    var variantDataRules = _ref.variantDataRules;
    return variantDataRules.taboo;
  }
  initDecoratorSettings() {
    this.decorator.fenOptions.setTag("royal", [null, null, null, null]);
    this.initiallyAliveColors = this.decorator.fenOptions.tag("dead").map((d, i) => d || this.decorator.fenOptions.tag("resigned")[i]).filter(Boolean).length;
    var _iterator = _createForOfIteratorHelper(this.wrappingDecorators),
      _step;
    try {
      for (_iterator.s(); !(_step = _iterator.n()).done;) {
        var _decorator$initDecora;
        var decorator = _step.value;
        (_decorator$initDecora = decorator.initDecoratorSettings) === null || _decorator$initDecora === void 0 ? void 0 : _decorator$initDecora.call(decorator);
      }
    } catch (err) {
      _iterator.e(err);
    } finally {
      _iterator.f();
    }
  }
  processStandardMove(moveData) {
    var capturedPieces = this.decorator.getCapturedPieces(moveData);
    var board = this.decorator.board.board;
    var _iterator2 = _createForOfIteratorHelper(capturedPieces),
      _step2;
    try {
      for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
        var capturedPiece = _step2.value;
        var pieceString = board[capturedPiece[0]][capturedPiece[1]];
        if (pieceString.isPiece()) {
          this.assignPoints(pieceString.color, Giveaway.pointsForPiece, true);
        }
      }
    } catch (err) {
      _iterator2.e(err);
    } finally {
      _iterator2.f();
    }
    this.callHandler("processStandardMove", arguments);
    return {
      endPiece: []
    };
  }
  affectOptions() {
    var returnType = this.callHandler("affectOptions", arguments);
    this.decorator.fenOptions.setTag("royal", [null, null, null, null]);
    return returnType;
  }
  obtainPointsForMate() {
    // Checkmates do not exist, so the only scenario in which this gets called is stalemate
    var aliveColors = this.decorator.fenOptions.tag("dead").filter(Boolean).length;
    switch (aliveColors) {
      case 1:
        if (this.initiallyAliveColors === _GameInformation_GameData__WEBPACK_IMPORTED_MODULE_1__.totalPlayers) {
          return Giveaway.stalematePoints[1];
        }
      // * Fallthrough
      case 2:
        if (this.initiallyAliveColors >= _GameInformation_GameData__WEBPACK_IMPORTED_MODULE_1__.totalPlayers - 1) {
          return Giveaway.stalematePoints[2];
        }
      // * Fallthrough
      case 3:
        return Giveaway.stalematePoints[3];
      default:
        console.error("Unexpected players length ".concat(aliveColors));
        return 0;
    }
  }
  assignPoints(sideToMove, points) {
    var isGiveawayAssigned = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;
    if (isGiveawayAssigned) {
      var _iterator3 = _createForOfIteratorHelper(this.wrappingDecorators),
        _step3;
      try {
        for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {
          var decorator = _step3.value;
          if (decorator.assignPoints) {
            decorator.assignPoints(sideToMove, points);
            return;
          }
        }
      } catch (err) {
        _iterator3.e(err);
      } finally {
        _iterator3.f();
      }
      _FENData_FENData__WEBPACK_IMPORTED_MODULE_0__.FENData.prototype.assignPoints.call(this.decorator, sideToMove, points);
    }
  }
}
_VariantRule__WEBPACK_IMPORTED_MODULE_2__.VariantRule.initVariantRule(Giveaway);
_defineProperty(Giveaway, "pointsForPiece", 3);
_defineProperty(Giveaway, "stalematePoints", {
  [1]: 200,
  [2]: 400,
  [3]: 600
});

/***/ }),

/***/ "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/FENDataDecorators/KingOfTheHill.ts":
/*!*****************************************************************************************************************!*\
  !*** ./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/FENDataDecorators/KingOfTheHill.ts ***!
  \*****************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "KingOfTheHill": () => (/* binding */ KingOfTheHill)
/* harmony export */ });
/* harmony import */ var _client_ts_utils_ArrayUtils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @client/ts/utils/ArrayUtils */ "./src/main/client/ts/utils/ArrayUtils.ts");
/* harmony import */ var _Board_BoardInterface__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../Board/BoardInterface */ "./src/main/client/ts/logic/movegen/Board/BoardInterface.ts");
/* harmony import */ var _FENData_FENData__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../FENData/FENData */ "./src/main/client/ts/logic/movegen/FENData/FENData.ts");
/* harmony import */ var _GameInformation_GameData__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../GameInformation/GameData */ "./src/main/client/ts/logic/movegen/GameInformation/GameData.ts");
/* harmony import */ var _MoveTree_MoveTreeInterface__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../MoveTree/MoveTreeInterface */ "./src/main/client/ts/logic/movegen/MoveTree/MoveTreeInterface.ts");
/* harmony import */ var _VariantRule__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../VariantRule */ "./src/main/client/ts/logic/movegen/VariantRules/VariantRule.ts");
/* harmony import */ var _VariantRuleInterface__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../VariantRuleInterface */ "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleInterface.ts");
/* harmony import */ var _client_ts_logic_utils_Tags_Utils__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @client/ts/logic/utils/Tags/Utils */ "./src/main/client/ts/logic/utils/Tags/Utils.ts");
/* harmony import */ var _client_fonts_chessGlyphIndex__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @client/fonts/chessGlyphIndex */ "./src/main/client/fonts/chessGlyphIndex.ts");
function _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }
function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }
function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }
function _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }
function _toPropertyKey(arg) { var key = _toPrimitive(arg, "string"); return typeof key === "symbol" ? key : String(key); }
function _toPrimitive(input, hint) { if (typeof input !== "object" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || "default"); if (typeof res !== "object") return res; throw new TypeError("@@toPrimitive must return a primitive value."); } return (hint === "string" ? String : Number)(input); }









var tag = "kingOfTheHill";
class KingOfTheHill extends _VariantRule__WEBPACK_IMPORTED_MODULE_5__.VariantRule {
  constructor(hillSquares) {
    super();
    _defineProperty(this, "hillSquares", void 0);
    if (Array.isArray(hillSquares) && hillSquares.every(c => Array.isArray(c) && c.length === 2 && c.every(n => typeof n === "number"))) {
      this.hillSquares = hillSquares;
    } else {
      this.hillSquares = KingOfTheHill.defaultCoordinates;
    }
  }
  getDecoratorType() {
    return _FENData_FENData__WEBPACK_IMPORTED_MODULE_2__.FENData;
  }
  getPublicProperties() {
    return {
      parameterValue: this.hillSquares,
      information: {
        name: "King of the Hill",
        description: "A king reaching the hill will checkmate all opponents",
        tag,
        color: _VariantRuleInterface__WEBPACK_IMPORTED_MODULE_6__.variantRuleColors.autogenous,
        displayIcon: _client_fonts_chessGlyphIndex__WEBPACK_IMPORTED_MODULE_8__.chessGlyphIndex.kingOfTheHill
      }
    };
  }
  matchesPGNDeclaration(match) {
    var matchArray = match.toLowerCase().match(/^KotH(?:=(.+))?$/i);
    if (matchArray) {
      if (matchArray[1]) {
        var coordinatesArray = [];
        var presumedOption = matchArray[1].split(",");
        var _iterator = _createForOfIteratorHelper(presumedOption),
          _step;
        try {
          for (_iterator.s(); !(_step = _iterator.n()).done;) {
            var coordinate = _step.value;
            var parsedCoordinate = (0,_client_ts_logic_utils_Tags_Utils__WEBPACK_IMPORTED_MODULE_7__.parseSingleCoordinate)(coordinate);
            if (parsedCoordinate) {
              coordinatesArray.push(parsedCoordinate);
            }
          }
        } catch (err) {
          _iterator.e(err);
        } finally {
          _iterator.f();
        }
        if (coordinatesArray.length > 0) {
          this.hillSquares = coordinatesArray;
        }
      }
      return true;
    } else {
      return false;
    }
  }
  serializeToParsingForm() {
    if ((0,_client_ts_utils_ArrayUtils__WEBPACK_IMPORTED_MODULE_0__.compareArrays)(this.hillSquares, KingOfTheHill.defaultCoordinates)) {
      return "KotH";
    } else {
      return "KotH=".concat(this.hillSquares.map(c => (0,_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_3__.convertCoordinateToPGN4)(c)).join(","));
    }
  }
  isDisabled() {
    return false;
  }
  getInsufficientMaterialData() {
    return {
      isPartiallyDisabled: true,
      isDisabled: true
    };
  }
  affectOptions() {
    var _this$decorator = this.decorator,
      board = _this$decorator.board,
      sideToMove = _this$decorator.sideToMove,
      fenOptions = _this$decorator.fenOptions;
    var returnValues = this.callHandler("affectOptions", arguments);
    var royal = fenOptions.tag("royal")[sideToMove],
      dead = fenOptions.tag("dead"),
      wb = fenOptions.tag("wb");
    if (board.variantData.giveaway && this.hillSquares.some(c => {
      var pieceString = board.board[c[0]][c[1]];
      return pieceString.isPiece() && pieceString.piece === KingOfTheHill.defaultRoyal;
    })) {
      this.decorator.processInternalMove({
        type: _MoveTree_MoveTreeInterface__WEBPACK_IMPORTED_MODULE_4__.InternalMoveSignature.Stalemate
      });
      returnValues.stalemates[sideToMove] = true;
    } else if (royal && this.hillSquares.some(c => (0,_Board_BoardInterface__WEBPACK_IMPORTED_MODULE_1__.compareCoordinates)(c, royal))) {
      var pointsForMate = this.decorator.obtainPointsForMate();
      var _iterator2 = _createForOfIteratorHelper(_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_3__.colors),
        _step2;
      try {
        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
          var color = _step2.value;
          if (color === sideToMove) continue;
          if (!dead[color]) {
            dead[color] = true;
            this.decorator.assignPoints(sideToMove, pointsForMate);
          }
        }
      } catch (err) {
        _iterator2.e(err);
      } finally {
        _iterator2.f();
      }
      if (this.decorator.board.variantData.taboo) {
        this.decorator.gameOver = "".concat((0,_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_3__.getPlayerNameFromColor)(sideToMove, wb).toUpperCase(), " WON THE RACE!");
      } else {
        this.decorator.assignGeneralTermination("King of the Hill");
      }
    }
    return returnValues;
  }
}
_VariantRule__WEBPACK_IMPORTED_MODULE_5__.VariantRule.initVariantRule(KingOfTheHill);
_defineProperty(KingOfTheHill, "defaultCoordinates", [[7, 7], [7, 6], [6, 7], [6, 6]]);
_defineProperty(KingOfTheHill, "defaultRoyal", "K");

/***/ }),

/***/ "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/FENDataDecorators/NCheck.ts":
/*!**********************************************************************************************************!*\
  !*** ./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/FENDataDecorators/NCheck.ts ***!
  \**********************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "NCheck": () => (/* binding */ NCheck)
/* harmony export */ });
/* harmony import */ var _client_ts_baseTypes__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @client/ts/baseTypes */ "./src/main/client/ts/baseTypes.ts");
/* harmony import */ var _Board_BoardInterface__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../Board/BoardInterface */ "./src/main/client/ts/logic/movegen/Board/BoardInterface.ts");
/* harmony import */ var _FENData_FENData__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../FENData/FENData */ "./src/main/client/ts/logic/movegen/FENData/FENData.ts");
/* harmony import */ var _FENData_FENDataInterface__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../FENData/FENDataInterface */ "./src/main/client/ts/logic/movegen/FENData/FENDataInterface.ts");
/* harmony import */ var _GameInformation_GameData__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../GameInformation/GameData */ "./src/main/client/ts/logic/movegen/GameInformation/GameData.ts");
/* harmony import */ var _MoveTree_MoveTreeInterface__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../MoveTree/MoveTreeInterface */ "./src/main/client/ts/logic/movegen/MoveTree/MoveTreeInterface.ts");
/* harmony import */ var _VariantRule__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../VariantRule */ "./src/main/client/ts/logic/movegen/VariantRules/VariantRule.ts");
function _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }
function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }
function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }
function _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }
function _toPropertyKey(arg) { var key = _toPrimitive(arg, "string"); return typeof key === "symbol" ? key : String(key); }
function _toPrimitive(input, hint) { if (typeof input !== "object" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || "default"); if (typeof res !== "object") return res; throw new TypeError("@@toPrimitive must return a primitive value."); } return (hint === "string" ? String : Number)(input); }







var tag = "nCheck";
class NCheck extends _VariantRule__WEBPACK_IMPORTED_MODULE_6__.VariantRule {
  constructor(defaultChecks) {
    super();
    _defineProperty(this, "defaultChecks", void 0);
    if (Array.isArray(defaultChecks) && (0,_client_ts_baseTypes__WEBPACK_IMPORTED_MODULE_0__.verifyTupleType)(defaultChecks, _GameInformation_GameData__WEBPACK_IMPORTED_MODULE_4__.totalPlayers) && defaultChecks.every(check => typeof check === "number")) {
      this.defaultChecks = defaultChecks;
    } else {
      this.defaultChecks = (0,_client_ts_baseTypes__WEBPACK_IMPORTED_MODULE_0__.createTuple)(3, _GameInformation_GameData__WEBPACK_IMPORTED_MODULE_4__.totalPlayers);
    }
  }
  getDecoratorType() {
    return _FENData_FENData__WEBPACK_IMPORTED_MODULE_2__.FENData;
  }
  getPublicProperties() {
    var checks = this.defaultChecks.filter(Boolean).reduce((p, n, i, arr) => p + (arr[i - 1] === arr[i] ? "" : "-".concat(n)), "").slice(1);
    return {
      parameterValue: this.defaultChecks,
      information: {
        name: "N-Check",
        textualForm: "".concat(checks, "+"),
        description: "Checking a king ".concat(checks, " times is checkmate"),
        tag
      }
    };
  }
  matchesPGNDeclaration(match) {
    var matchArray = match.toLowerCase().match(/^(\d\d?\d?(?:-\d\d?\d?){0,3})-check$/i);
    if (matchArray) {
      var checks = matchArray[1].split("-");
      for (var i = 0; i <= checks.length; i++) {
        if (checks[i]) {
          this.defaultChecks[i] = Number(checks[i]);
        } else {
          while (i !== _GameInformation_GameData__WEBPACK_IMPORTED_MODULE_4__.totalPlayers) {
            this.defaultChecks[i] = this.defaultChecks[i - 1];
            i++;
          }
        }
      }
      return true;
    } else {
      return false;
    }
  }
  serializeToParsingForm() {
    return "".concat(this.defaultChecks.join("-"), "-check");
  }
  isDisabled(_ref) {
    var variantDataRules = _ref.variantDataRules;
    return variantDataRules.giveaway;
  }
  getInsufficientMaterialData() {
    return {
      isPartiallyDisabled: true,
      isDisabled: false
    };
  }
  getParametrizedOptions() {
    var resultingMap = new Map([["N+ Off", false]]);
    for (var i = 1; i < 10; i++) resultingMap.set("".concat(i, "+"), (0,_client_ts_baseTypes__WEBPACK_IMPORTED_MODULE_0__.createTuple)(i, _GameInformation_GameData__WEBPACK_IMPORTED_MODULE_4__.totalPlayers));
    for (var _i = 0, _arr = [12, 15, 20, 30, 50]; _i < _arr.length; _i++) {
      var value = _arr[_i];
      resultingMap.set("".concat(value, "+"), (0,_client_ts_baseTypes__WEBPACK_IMPORTED_MODULE_0__.createTuple)(value, _GameInformation_GameData__WEBPACK_IMPORTED_MODULE_4__.totalPlayers));
    }
    return resultingMap;
  }
  initDecoratorSettings() {
    var lives = this.decorator.fenOptions.tag("lives");
    var _iterator = _createForOfIteratorHelper(_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_4__.colors),
      _step;
    try {
      for (_iterator.s(); !(_step = _iterator.n()).done;) {
        var color = _step.value;
        if (lives[color] === null) {
          lives[color] = this.defaultChecks[color];
        }
      }
    } catch (err) {
      _iterator.e(err);
    } finally {
      _iterator.f();
    }
    var _iterator2 = _createForOfIteratorHelper(this.wrappingDecorators),
      _step2;
    try {
      for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
        var _decorator$initDecora;
        var decorator = _step2.value;
        (_decorator$initDecora = decorator.initDecoratorSettings) === null || _decorator$initDecora === void 0 ? void 0 : _decorator$initDecora.call(decorator);
      }
    } catch (err) {
      _iterator2.e(err);
    } finally {
      _iterator2.f();
    }
  }
  affectOptions(move) {
    var settings = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : (0,_FENData_FENDataInterface__WEBPACK_IMPORTED_MODULE_3__.createDefaultFENEffectSettings)();
    var _this$decorator = this.decorator,
      board = _this$decorator.board,
      sideToMove = _this$decorator.sideToMove;
    var currentChecks = board.getCurrentChecks().map(arr => new Set(arr));
    var isNCheckValidated = !settings.ignoreCheckmateChecks && !settings.ignoreNextTurn;
    var royal = this.decorator.fenOptions.tag("royal"),
      lives = this.decorator.fenOptions.tag("lives");
    var results = this.callHandler("affectOptions", arguments);
    var isStandardMove = (0,_MoveTree_MoveTreeInterface__WEBPACK_IMPORTED_MODULE_5__.verifyStandardMove)(move);
    if (isNCheckValidated) {
      var updatedChecks = board.getCurrentChecks(sideToMove);
      var playerChecks = (0,_client_ts_baseTypes__WEBPACK_IMPORTED_MODULE_0__.createTuple)(0, _GameInformation_GameData__WEBPACK_IMPORTED_MODULE_4__.totalPlayers);
      var _iterator3 = _createForOfIteratorHelper(_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_4__.colors),
        _step3;
      try {
        for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {
          var _color = _step3.value;
          var _iterator5 = _createForOfIteratorHelper(updatedChecks[_color]),
            _step5;
          try {
            for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {
              var coordinate = _step5.value;
              var royalPiece = royal[_color];
              if (!currentChecks[_color].has(coordinate) || royalPiece && isStandardMove && (0,_Board_BoardInterface__WEBPACK_IMPORTED_MODULE_1__.compareCoordinates)(move.endCoordinates, royalPiece)) {
                playerChecks[_color]++;
              }
            }
          } catch (err) {
            _iterator5.e(err);
          } finally {
            _iterator5.f();
          }
        }
      } catch (err) {
        _iterator3.e(err);
      } finally {
        _iterator3.f();
      }
      if (lives.every(live => live !== null)) {
        var _iterator4 = _createForOfIteratorHelper(_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_4__.colors),
          _step4;
        try {
          for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {
            var color = _step4.value;
            lives[color] -= playerChecks[color];
            if (lives[color] <= 0) {
              this.decorator.assignPoints(sideToMove, this.decorator.obtainPointsForMate());
              this.decorator.turnPiecesDead(color);
              lives[color] = 0;
            }
          }
        } catch (err) {
          _iterator4.e(err);
        } finally {
          _iterator4.f();
        }
      }
      if (this.decorator.getRealPlayers() > 1) {
        this.decorator.sideToMove = this.decorator.nextTurn(sideToMove);
        board.pregenerateAttacks();
      }
    }
    return results;
  }
}
_VariantRule__WEBPACK_IMPORTED_MODULE_6__.VariantRule.initVariantRule(NCheck);

/***/ }),

/***/ "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/FENDataDecorators/OppositeMultiplier.ts":
/*!**********************************************************************************************************************!*\
  !*** ./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/FENDataDecorators/OppositeMultiplier.ts ***!
  \**********************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "OppositeMultiplier": () => (/* binding */ OppositeMultiplier)
/* harmony export */ });
/* harmony import */ var _FENData_FENData__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../FENData/FENData */ "./src/main/client/ts/logic/movegen/FENData/FENData.ts");
/* harmony import */ var _GameInformation_GameData__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../GameInformation/GameData */ "./src/main/client/ts/logic/movegen/GameInformation/GameData.ts");
/* harmony import */ var _PieceControl_PieceControlInterface__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../PieceControl/PieceControlInterface */ "./src/main/client/ts/logic/movegen/PieceControl/PieceControlInterface.ts");
/* harmony import */ var _VariantRule__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../VariantRule */ "./src/main/client/ts/logic/movegen/VariantRules/VariantRule.ts");
function _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }
function _toPropertyKey(arg) { var key = _toPrimitive(arg, "string"); return typeof key === "symbol" ? key : String(key); }
function _toPrimitive(input, hint) { if (typeof input !== "object" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || "default"); if (typeof res !== "object") return res; throw new TypeError("@@toPrimitive must return a primitive value."); } return (hint === "string" ? String : Number)(input); }




var tag = "oppositeMultiplier";
class OppositeMultiplier extends _VariantRule__WEBPACK_IMPORTED_MODULE_3__.VariantRule {
  constructor() {
    super(...arguments);
    _defineProperty(this, "oppositeMultiplierValue", 2);
  }
  getDecoratorType() {
    return _FENData_FENData__WEBPACK_IMPORTED_MODULE_0__.FENData;
  }
  getPublicProperties() {
    return {
      parameterValue: this.oppositeMultiplierValue,
      information: {
        name: "Opposite's piece value",
        textualForm: "Ox".concat(this.oppositeMultiplierValue),
        description: "Opposite's pieces are worth ".concat(this.oppositeMultiplierValue, " times their normal points value until one player is eliminated"),
        tag
      }
    };
  }
  matchesPGNDeclaration(match) {
    var matchArray = match.toLowerCase().match(/^OppX=(\d)$/i);
    if (matchArray) {
      var numericValue = Number(matchArray[1]);
      if (numericValue <= 0 || numericValue > OppositeMultiplier.MAXIMUM_MULTIPLIER) return false;
      this.oppositeMultiplierValue = numericValue;
      return true;
    } else {
      return false;
    }
  }
  serializeToParsingForm() {
    return "OppX=".concat(this.oppositeMultiplierValue);
  }
  isDisabled(_ref) {
    var variantDataRules = _ref.variantDataRules,
      gameType = _ref.gameType,
      fenTags = _ref.fenTags;
    return gameType === _GameInformation_GameData__WEBPACK_IMPORTED_MODULE_1__.VariantType.Teams || variantDataRules.giveaway || fenTags.dead.value.reduce((p, n, i) => p + Number(n || fenTags.resigned.value[i]), 0) <= _GameInformation_GameData__WEBPACK_IMPORTED_MODULE_1__.totalPlayers - 1;
  }
  getParametrizedOptions() {
    var options = new Map([["Ox Off", false]]);
    for (var i = 1; i <= OppositeMultiplier.MAXIMUM_MULTIPLIER; i++) options.set("Ox".concat(i), i);
    return options;
  }
  getPointsForPiece(pieceString) {
    var dead = this.decorator.fenOptions.tag("dead"),
      resigned = this.decorator.fenOptions.tag("resigned");
    var aliveColors = dead.map((d, i) => d || resigned[i]).filter(Boolean).length;
    if (aliveColors === _GameInformation_GameData__WEBPACK_IMPORTED_MODULE_1__.totalPlayers && pieceString.isPiece() && pieceString.color === (0,_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_1__.getOppositePlacedColor)(this.decorator.sideToMove)) {
      return _PieceControl_PieceControlInterface__WEBPACK_IMPORTED_MODULE_2__.pieceControlConfigSettings[pieceString.piece].points.singlesPoints * this.oppositeMultiplierValue;
    } else return this.callHandler("getPointsForPiece", arguments);
  }
}
_defineProperty(OppositeMultiplier, "MAXIMUM_MULTIPLIER", 6);
_VariantRule__WEBPACK_IMPORTED_MODULE_3__.VariantRule.initVariantRule(OppositeMultiplier);

/***/ }),

/***/ "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/FENDataDecorators/OppositeSideCastling.ts":
/*!************************************************************************************************************************!*\
  !*** ./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/FENDataDecorators/OppositeSideCastling.ts ***!
  \************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "OppositeSideCastling": () => (/* binding */ OppositeSideCastling)
/* harmony export */ });
/* harmony import */ var _MoveTree_MoveTreeInterface__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../MoveTree/MoveTreeInterface */ "./src/main/client/ts/logic/movegen/MoveTree/MoveTreeInterface.ts");
/* harmony import */ var _FENData_FENData__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../FENData/FENData */ "./src/main/client/ts/logic/movegen/FENData/FENData.ts");
/* harmony import */ var _VariantRule__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../VariantRule */ "./src/main/client/ts/logic/movegen/VariantRules/VariantRule.ts");
/* harmony import */ var _VariantRuleInterface__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../VariantRuleInterface */ "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleInterface.ts");
/* harmony import */ var _GameInformation_GameData__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../GameInformation/GameData */ "./src/main/client/ts/logic/movegen/GameInformation/GameData.ts");





var tag = "oppositeSideCastling";
class OppositeSideCastling extends _VariantRule__WEBPACK_IMPORTED_MODULE_2__.VariantRule {
  getDecoratorType() {
    return _FENData_FENData__WEBPACK_IMPORTED_MODULE_1__.FENData;
  }
  getPublicProperties() {
    return {
      parameterValue: true,
      information: {
        name: "Opposite-side Castling",
        description: "Once your opponent has castled, you can only castle to the opposite side",
        tag,
        color: _VariantRuleInterface__WEBPACK_IMPORTED_MODULE_3__.variantRuleColors.minor,
        displayIcon: "ὸ"
      }
    };
  }
  matchesPGNDeclaration(match) {
    return /^OppositeSideCastling$/i.test(match);
  }
  serializeToParsingForm() {
    return "OppositeSideCastling";
  }
  isDisabled() {
    return false;
  }
  processStandardMove(moveData) {
    var result = this.callHandler("processStandardMove", arguments);
    if ("specialType" in moveData) {
      var castlingDataReference;
      if (moveData.specialType === _MoveTree_MoveTreeInterface__WEBPACK_IMPORTED_MODULE_0__.SpecialMove.CastlingKingside) {
        castlingDataReference = this.decorator.fenOptions.tag("castleKingside");
      } else if (moveData.specialType === _MoveTree_MoveTreeInterface__WEBPACK_IMPORTED_MODULE_0__.SpecialMove.CastlingQueenside) {
        castlingDataReference = this.decorator.fenOptions.tag("castleQueenside");
      }
      if (castlingDataReference) {
        castlingDataReference[(0,_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_4__.getOppositePlacedColor)(this.decorator.sideToMove)] = false;
      }
    }
    return result;
  }
}
_VariantRule__WEBPACK_IMPORTED_MODULE_2__.VariantRule.initVariantRule(OppositeSideCastling);

/***/ }),

/***/ "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/FENDataDecorators/PiecesGoToBanks.ts":
/*!*******************************************************************************************************************!*\
  !*** ./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/FENDataDecorators/PiecesGoToBanks.ts ***!
  \*******************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "PiecesGoToBanks": () => (/* binding */ PiecesGoToBanks)
/* harmony export */ });
/* harmony import */ var _FENData_FENData__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../FENData/FENData */ "./src/main/client/ts/logic/movegen/FENData/FENData.ts");
/* harmony import */ var _GameInformation_GameUnits_PieceString__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../GameInformation/GameUnits/PieceString */ "./src/main/client/ts/logic/movegen/GameInformation/GameUnits/PieceString.ts");
/* harmony import */ var _VariantRule__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../VariantRule */ "./src/main/client/ts/logic/movegen/VariantRules/VariantRule.ts");
/* harmony import */ var _VariantRuleInterface__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../VariantRuleInterface */ "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleInterface.ts");
/* harmony import */ var _MoveTree_MoveTreeInterface__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../MoveTree/MoveTreeInterface */ "./src/main/client/ts/logic/movegen/MoveTree/MoveTreeInterface.ts");
/* harmony import */ var _client_fonts_chessGlyphIndex__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @client/fonts/chessGlyphIndex */ "./src/main/client/fonts/chessGlyphIndex.ts");
function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }
function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function _iterableToArrayLimit(arr, i) { var _i = null == arr ? null : "undefined" != typeof Symbol && arr[Symbol.iterator] || arr["@@iterator"]; if (null != _i) { var _s, _e, _x, _r, _arr = [], _n = !0, _d = !1; try { if (_x = (_i = _i.call(arr)).next, 0 === i) { if (Object(_i) !== _i) return; _n = !1; } else for (; !(_n = (_s = _x.call(_i)).done) && (_arr.push(_s.value), _arr.length !== i); _n = !0); } catch (err) { _d = !0, _e = err; } finally { try { if (!_n && null != _i.return && (_r = _i.return(), Object(_r) !== _r)) return; } finally { if (_d) throw _e; } } return _arr; } }
function _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }
function _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e2) { throw _e2; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e3) { didErr = true; err = _e3; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }
function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }
function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }






var tag = "piecesGoToBanks";
class PiecesGoToBanks extends _VariantRule__WEBPACK_IMPORTED_MODULE_2__.VariantRule {
  getDecoratorType() {
    return _FENData_FENData__WEBPACK_IMPORTED_MODULE_0__.FENData;
  }
  getPublicProperties() {
    return {
      parameterValue: true,
      information: {
        name: "Bank Captures",
        description: "Captured pieces go to banks",
        tag,
        color: _VariantRuleInterface__WEBPACK_IMPORTED_MODULE_3__.variantRuleColors.extending,
        displayIcon: _client_fonts_chessGlyphIndex__WEBPACK_IMPORTED_MODULE_5__.chessGlyphIndex.copyToClipboard
      }
    };
  }
  matchesPGNDeclaration(match) {
    return /^Crazy(?:house|wan)$/i.test(match);
  }
  serializeToParsingForm() {
    return "";
  }
  isDisabled() {
    return false;
  }
  processStandardMove(moveData) {
    var promotedFrom = this.decorator.fenOptions.tag("promotedFrom");
    if (moveData.promotion) {
      var pieceLetter = this.decorator.board.board[moveData.startCoordinates[0]][moveData.startCoordinates[1]].piece;
      promotedFrom.set(moveData.endCoordinates, pieceLetter);
    } else {
      var _iterator = _createForOfIteratorHelper(promotedFrom),
        _step;
      try {
        for (_iterator.s(); !(_step = _iterator.n()).done;) {
          var _step$value = _slicedToArray(_step.value, 2),
            key = _step$value[0],
            value = _step$value[1];
          if (key[0] === moveData.startCoordinates[0] && key[1] === moveData.endCoordinates[1]) {
            promotedFrom.delete(key);
            promotedFrom.set(moveData.endCoordinates, value);
            break;
          }
        }
      } catch (err) {
        _iterator.e(err);
      } finally {
        _iterator.f();
      }
    }
    return this.callHandler("processStandardMove", arguments);
  }
  affectOptions(move) {
    var fenOptions = this.decorator.fenOptions;
    var areBanksEnabled = fenOptions.tag("areBanksEnabled"),
      bank = fenOptions.tag("bank"),
      promotedFrom = fenOptions.tag("promotedFrom");
    if (areBanksEnabled[this.decorator.sideToMove]) {
      if (!(0,_MoveTree_MoveTreeInterface__WEBPACK_IMPORTED_MODULE_4__.verifyInternalMove)(move)) {
        if ((0,_MoveTree_MoveTreeInterface__WEBPACK_IMPORTED_MODULE_4__.verifyStandardMove)(move)) {
          var captures = this.decorator.getCapturedPieces(move);
          var sideToMove = this.decorator.sideToMove;
          var addPieceToBank = piece => {
            var _iterator2 = _createForOfIteratorHelper(bank[sideToMove]),
              _step2;
            try {
              for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
                var _step2$value = _slicedToArray(_step2.value, 2),
                  key = _step2$value[0],
                  value = _step2$value[1];
                if (key.piece === piece && key.color === sideToMove) {
                  bank[sideToMove].set(key, value + 1);
                  return;
                }
              }
            } catch (err) {
              _iterator2.e(err);
            } finally {
              _iterator2.f();
            }
            bank[sideToMove].set((0,_GameInformation_GameUnits_PieceString__WEBPACK_IMPORTED_MODULE_1__.createPieceFromData)(sideToMove, piece), 1);
          };
          captures.forEach(c => {
            var _iterator3 = _createForOfIteratorHelper(promotedFrom),
              _step3;
            try {
              for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {
                var _step3$value = _slicedToArray(_step3.value, 2),
                  key = _step3$value[0],
                  value = _step3$value[1];
                if (key[0] === c[0] && key[1] === c[1]) {
                  promotedFrom.delete(key);
                  addPieceToBank(value);
                  return;
                }
              }
            } catch (err) {
              _iterator3.e(err);
            } finally {
              _iterator3.f();
            }
            addPieceToBank(this.decorator.board.board[c[0]][c[1]].piece);
          });
        }
      }
    }
    return this.callHandler("affectOptions", arguments);
  }
}

/***/ }),

/***/ "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/FENDataDecorators/PlayForMate.ts":
/*!***************************************************************************************************************!*\
  !*** ./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/FENDataDecorators/PlayForMate.ts ***!
  \***************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "PlayForMate": () => (/* binding */ PlayForMate)
/* harmony export */ });
/* harmony import */ var _client_fonts_chessGlyphIndex__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @client/fonts/chessGlyphIndex */ "./src/main/client/fonts/chessGlyphIndex.ts");
/* harmony import */ var _FENData_FENData__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../FENData/FENData */ "./src/main/client/ts/logic/movegen/FENData/FENData.ts");
/* harmony import */ var _GameInformation_GameData__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../GameInformation/GameData */ "./src/main/client/ts/logic/movegen/GameInformation/GameData.ts");
/* harmony import */ var _VariantRule__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../VariantRule */ "./src/main/client/ts/logic/movegen/VariantRules/VariantRule.ts");
/* harmony import */ var _VariantRuleInterface__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../VariantRuleInterface */ "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleInterface.ts");
function _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }
function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }
function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }
function _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }
function _toPropertyKey(arg) { var key = _toPrimitive(arg, "string"); return typeof key === "symbol" ? key : String(key); }
function _toPrimitive(input, hint) { if (typeof input !== "object" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || "default"); if (typeof res !== "object") return res; throw new TypeError("@@toPrimitive must return a primitive value."); } return (hint === "string" ? String : Number)(input); }





var tag = "playForMate";
class PlayForMate extends _VariantRule__WEBPACK_IMPORTED_MODULE_3__.VariantRule {
  constructor() {
    super(...arguments);
    _defineProperty(this, "initiallyAliveColors", _GameInformation_GameData__WEBPACK_IMPORTED_MODULE_2__.totalPlayers);
  }
  getDecoratorType() {
    return _FENData_FENData__WEBPACK_IMPORTED_MODULE_1__.FENData;
  }
  getPublicProperties() {
    return {
      parameterValue: true,
      information: {
        name: "Play for mate",
        description: "No points for pieces, only checkmates matter",
        tag,
        color: _VariantRuleInterface__WEBPACK_IMPORTED_MODULE_4__.variantRuleColors.pointsAlternation,
        displayIcon: _client_fonts_chessGlyphIndex__WEBPACK_IMPORTED_MODULE_0__.chessGlyphIndex.hashtag
      }
    };
  }
  matchesPGNDeclaration(match) {
    return /^Play4Mate$/i.test(match);
  }
  serializeToParsingForm() {
    return "Play4Mate";
  }
  isDisabled(_ref) {
    var gameType = _ref.gameType;
    return gameType === _GameInformation_GameData__WEBPACK_IMPORTED_MODULE_2__.VariantType.Teams;
  }
  initDecoratorSettings() {
    this.initiallyAliveColors = this.decorator.fenOptions.tag("dead").map((d, i) => d || this.decorator.fenOptions.tag("resigned")[i]).filter(Boolean).length;
    var _iterator = _createForOfIteratorHelper(this.wrappingDecorators),
      _step;
    try {
      for (_iterator.s(); !(_step = _iterator.n()).done;) {
        var _decorator$initDecora;
        var decorator = _step.value;
        (_decorator$initDecora = decorator.initDecoratorSettings) === null || _decorator$initDecora === void 0 ? void 0 : _decorator$initDecora.call(decorator);
      }
    } catch (err) {
      _iterator.e(err);
    } finally {
      _iterator.f();
    }
  }
  obtainPointsForMate() {
    var aliveColors = this.decorator.fenOptions.tag("dead").filter(Boolean).length;
    switch (aliveColors) {
      case 1:
        if (this.initiallyAliveColors === _GameInformation_GameData__WEBPACK_IMPORTED_MODULE_2__.totalPlayers) {
          return PlayForMate.checkmatePoints[1];
        }
      // * Fallthrough
      case 2:
        if (this.initiallyAliveColors >= _GameInformation_GameData__WEBPACK_IMPORTED_MODULE_2__.totalPlayers - 1) {
          return PlayForMate.checkmatePoints[2];
        }
      // * Fallthrough
      case 3:
        return PlayForMate.checkmatePoints[3];
      default:
        console.error("Unexpected players length ".concat(aliveColors));
        return 0;
    }
  }
  getPointsForPiece() {
    return 0;
  }
}
_VariantRule__WEBPACK_IMPORTED_MODULE_3__.VariantRule.initVariantRule(PlayForMate);
_defineProperty(PlayForMate, "checkmatePoints", {
  [1]: 24,
  [2]: 32,
  [3]: 48
});

/***/ }),

/***/ "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/FENDataDecorators/PointsForMate.ts":
/*!*****************************************************************************************************************!*\
  !*** ./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/FENDataDecorators/PointsForMate.ts ***!
  \*****************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "PointsForMate": () => (/* binding */ PointsForMate)
/* harmony export */ });
/* harmony import */ var _moveGeneration_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @moveGeneration/GameInformation/GameData */ "./src/main/client/ts/logic/movegen/GameInformation/GameData.ts");
/* harmony import */ var _FENData_FENData__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../FENData/FENData */ "./src/main/client/ts/logic/movegen/FENData/FENData.ts");
/* harmony import */ var _VariantRule__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../VariantRule */ "./src/main/client/ts/logic/movegen/VariantRules/VariantRule.ts");
function _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }
function _toPropertyKey(arg) { var key = _toPrimitive(arg, "string"); return typeof key === "symbol" ? key : String(key); }
function _toPrimitive(input, hint) { if (typeof input !== "object" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || "default"); if (typeof res !== "object") return res; throw new TypeError("@@toPrimitive must return a primitive value."); } return (hint === "string" ? String : Number)(input); }



var tag = "pointsForMate";
class PointsForMate extends _VariantRule__WEBPACK_IMPORTED_MODULE_2__.VariantRule {
  constructor(pointsForMate) {
    super();
    _defineProperty(this, "pointsForMate", void 0);
    if (typeof pointsForMate === "number") {
      this.pointsForMate = pointsForMate;
    } else {
      this.pointsForMate = 20;
    }
  }
  getDecoratorType() {
    return _FENData_FENData__WEBPACK_IMPORTED_MODULE_1__.FENData;
  }
  getPublicProperties() {
    return {
      parameterValue: this.pointsForMate,
      information: {
        name: "Points for Mate",
        textualForm: "+".concat(this.pointsForMate),
        description: "Checkmates & king captures are worth ".concat(this.pointsForMate, " points"),
        tag
      }
    };
  }
  matchesPGNDeclaration(match) {
    var matchArray = match.match(/^PointsForMate=(3|5|10|40)$/i);
    if (matchArray) {
      this.pointsForMate = Number(matchArray[1]);
      return true;
    } else {
      return false;
    }
  }
  serializeToParsingForm() {
    return "PointsForMate=".concat(this.pointsForMate);
  }
  isDisabled(_ref) {
    var variantDataRules = _ref.variantDataRules,
      gameType = _ref.gameType;
    return variantDataRules.giveaway || variantDataRules.playForMate || gameType === _moveGeneration_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_0__.VariantType.Teams;
  }
  getParametrizedOptions() {
    var options = new Map();
    for (var _i = 0, _arr = [20, 3, 5, 10, 40]; _i < _arr.length; _i++) {
      var value = _arr[_i];
      options.set("+".concat(value), value);
    }
    return options;
  }
  obtainPointsForMate() {
    return this.pointsForMate;
  }
}
_VariantRule__WEBPACK_IMPORTED_MODULE_2__.VariantRule.initVariantRule(PointsForMate);

/***/ }),

/***/ "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/FENDataDecorators/StalemateOptions.ts":
/*!********************************************************************************************************************!*\
  !*** ./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/FENDataDecorators/StalemateOptions.ts ***!
  \********************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "StalemateOptions": () => (/* binding */ StalemateOptions),
/* harmony export */   "stalemateOptionsValues": () => (/* binding */ stalemateOptionsValues),
/* harmony export */   "verifyCustomStalemateValue": () => (/* binding */ verifyCustomStalemateValue)
/* harmony export */ });
/* harmony import */ var _client_ts_baseTypes__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @client/ts/baseTypes */ "./src/main/client/ts/baseTypes.ts");
/* harmony import */ var _FENData_FENData__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../FENData/FENData */ "./src/main/client/ts/logic/movegen/FENData/FENData.ts");
/* harmony import */ var _MoveTree_MoveTreeInterface__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../MoveTree/MoveTreeInterface */ "./src/main/client/ts/logic/movegen/MoveTree/MoveTreeInterface.ts");
/* harmony import */ var _VariantRule__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../VariantRule */ "./src/main/client/ts/logic/movegen/VariantRules/VariantRule.ts");
/* harmony import */ var _VariantRuleInterface__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../VariantRuleInterface */ "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleInterface.ts");
/* harmony import */ var _client_fonts_chessGlyphIndex__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @client/fonts/chessGlyphIndex */ "./src/main/client/fonts/chessGlyphIndex.ts");
function _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }
function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }
function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }
function _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }
function _toPropertyKey(arg) { var key = _toPrimitive(arg, "string"); return typeof key === "symbol" ? key : String(key); }
function _toPrimitive(input, hint) { if (typeof input !== "object" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || "default"); if (typeof res !== "object") return res; throw new TypeError("@@toPrimitive must return a primitive value."); } return (hint === "string" ? String : Number)(input); }






var tag = "stalemateOptions";
var stalemateOptionsValues = {
  stalemateLoses: "loss",
  stalemateWins: "win",
  stalemateDraws: "draw"
};
var verifyCustomStalemateValue = v => Object.values(stalemateOptionsValues).includes(v);
class StalemateOptions extends _VariantRule__WEBPACK_IMPORTED_MODULE_3__.VariantRule {
  constructor(type) {
    super();
    _defineProperty(this, "type", void 0);
    _defineProperty(this, "isFFA", false);
    if (typeof type === "string" && verifyCustomStalemateValue(type)) {
      this.type = type;
    } else {
      this.type = undefined;
    }
  }
  getDecoratorType() {
    return _FENData_FENData__WEBPACK_IMPORTED_MODULE_1__.FENData;
  }
  getPublicProperties() {
    var description = this.type === "draw" ? "Stalemate is a draw" : this.isFFA ? "The remaining players share the points" : "The stalemated player ".concat(this.type === "loss" ? "loses" : "wins");
    return {
      parameterValue: this.type,
      information: {
        name: "Stalemate",
        description,
        tag,
        color: _VariantRuleInterface__WEBPACK_IMPORTED_MODULE_4__.variantRuleColors.minor,
        displayIcon: _client_fonts_chessGlyphIndex__WEBPACK_IMPORTED_MODULE_5__.chessGlyphIndex.dollarSign
      }
    };
  }
  matchesPGNDeclaration(match) {
    var matchArray = match.toLowerCase().match(/^Stalemate=(.+)$/i);
    if (matchArray) {
      var presumedOption = matchArray[1];
      if (verifyCustomStalemateValue(presumedOption)) {
        this.type = presumedOption;
      }
      return true;
    } else {
      return false;
    }
  }
  serializeToParsingForm() {
    var _this$type;
    return "Stalemate=".concat((_this$type = this.type) !== null && _this$type !== void 0 ? _this$type : "draw");
  }
  isDisabled() {
    return false;
  }
  getParametrizedOptions() {
    return new Map([["Draw", stalemateOptionsValues.stalemateDraws], ["The stalemated player loses", stalemateOptionsValues.stalemateLoses], ["The stalemated player wins", stalemateOptionsValues.stalemateWins]]);
  }
  initDecoratorSettings() {
    if (this.type === undefined) {
      if (this.decorator.board.gameType.isFFA() && this.decorator.fenOptions.tag("dead").filter(Boolean).length > 2) {
        this.type = "win";
        this.isFFA = true;
      } else {
        this.type = "draw";
        this.isFFA = false;
      }
    }
    var _iterator = _createForOfIteratorHelper(this.wrappingDecorators),
      _step;
    try {
      for (_iterator.s(); !(_step = _iterator.n()).done;) {
        var _decorator$initDecora;
        var decorator = _step.value;
        (_decorator$initDecora = decorator.initDecoratorSettings) === null || _decorator$initDecora === void 0 ? void 0 : _decorator$initDecora.call(decorator);
      }
    } catch (err) {
      _iterator.e(err);
    } finally {
      _iterator.f();
    }
  }
  processInternalMove(internalMove) {
    var currentTurn = this.decorator.sideToMove;
    var returnValues = this.callHandler("processInternalMove", arguments);
    if (internalMove.type === _MoveTree_MoveTreeInterface__WEBPACK_IMPORTED_MODULE_2__.InternalMoveSignature.Stalemate) {
      var pointsForMate = this.decorator.obtainPointsForMate();
      switch (this.type) {
        case "loss":
          if (!this.isFFA) {
            this.decorator.points[currentTurn] += pointsForMate;
            break;
          }
        // * Fallthrough
        case "draw":
          this.injectIntoBaseClass(function () {
            this.spreadPointsBetweenPlayersEvenly();
          })();
          break;
        case "win":
          this.decorator.points[this.decorator.sideToMove] += pointsForMate;
          break;
        case undefined:
          break;
        default:
          (0,_client_ts_baseTypes__WEBPACK_IMPORTED_MODULE_0__.throwOnNever)(this.type);
      }
      if (this.decorator.getRealPlayers() === 1) {
        this.decorator.assignGeneralTermination("Stalemate", currentTurn);
      }
    }
    return returnValues;
  }
}
_VariantRule__WEBPACK_IMPORTED_MODULE_3__.VariantRule.initVariantRule(StalemateOptions);

/***/ }),

/***/ "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/FENDataDecorators/Takeover.ts":
/*!************************************************************************************************************!*\
  !*** ./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/FENDataDecorators/Takeover.ts ***!
  \************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Takeover": () => (/* binding */ Takeover)
/* harmony export */ });
/* harmony import */ var _Board_BoardInterface__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../Board/BoardInterface */ "./src/main/client/ts/logic/movegen/Board/BoardInterface.ts");
/* harmony import */ var _FENData_FENData__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../FENData/FENData */ "./src/main/client/ts/logic/movegen/FENData/FENData.ts");
/* harmony import */ var _GameInformation_GameData__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../GameInformation/GameData */ "./src/main/client/ts/logic/movegen/GameInformation/GameData.ts");
/* harmony import */ var _GameInformation_GameUnits_PieceString__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../GameInformation/GameUnits/PieceString */ "./src/main/client/ts/logic/movegen/GameInformation/GameUnits/PieceString.ts");
/* harmony import */ var _PieceControl_PieceControlInterface__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../PieceControl/PieceControlInterface */ "./src/main/client/ts/logic/movegen/PieceControl/PieceControlInterface.ts");
/* harmony import */ var _VariantRule__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../VariantRule */ "./src/main/client/ts/logic/movegen/VariantRules/VariantRule.ts");
/* harmony import */ var _VariantRuleInterface__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../VariantRuleInterface */ "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleInterface.ts");
/* harmony import */ var _DeadKingWalking__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./DeadKingWalking */ "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/FENDataDecorators/DeadKingWalking.ts");
/* harmony import */ var _client_fonts_chessGlyphIndex__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @client/fonts/chessGlyphIndex */ "./src/main/client/fonts/chessGlyphIndex.ts");
function _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }
function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }
function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }
function _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }
function _toPropertyKey(arg) { var key = _toPrimitive(arg, "string"); return typeof key === "symbol" ? key : String(key); }
function _toPrimitive(input, hint) { if (typeof input !== "object" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || "default"); if (typeof res !== "object") return res; throw new TypeError("@@toPrimitive must return a primitive value."); } return (hint === "string" ? String : Number)(input); }









var tag = "takeover";
class Takeover extends _VariantRule__WEBPACK_IMPORTED_MODULE_5__.VariantRule {
  constructor() {
    super(...arguments);
    _defineProperty(this, "dependencies", new Map([[_DeadKingWalking__WEBPACK_IMPORTED_MODULE_7__.DeadKingWalking, []]]));
  }
  getDecoratorType() {
    return _FENData_FENData__WEBPACK_IMPORTED_MODULE_1__.FENData;
  }
  getPublicProperties() {
    return {
      parameterValue: true,
      information: {
        name: "Takeover",
        description: "Checkmate players to take control of their pieces",
        tag,
        color: _VariantRuleInterface__WEBPACK_IMPORTED_MODULE_6__.variantRuleColors.phased,
        displayIcon: _client_fonts_chessGlyphIndex__WEBPACK_IMPORTED_MODULE_8__.chessGlyphIndex.exchange
      }
    };
  }
  matchesPGNDeclaration(match) {
    return /^Takeover$/i.test(match);
  }
  serializeToParsingForm() {
    return "Takeover";
  }
  isDisabled(_ref) {
    var gameType = _ref.gameType;
    return gameType === _GameInformation_GameData__WEBPACK_IMPORTED_MODULE_2__.VariantType.Teams;
  }
  affectOptions() {
    var sideToMove = this.decorator.sideToMove,
      detectedPieces = this.decorator.board.getPlayerPieces();
    var results = this.callHandler("affectOptions", arguments);
    var _iterator = _createForOfIteratorHelper(_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_2__.colors),
      _step;
    try {
      for (_iterator.s(); !(_step = _iterator.n()).done;) {
        var color = _step.value;
        if (!results.checkmates[color]) continue;
        var _iterator2 = _createForOfIteratorHelper(detectedPieces[sideToMove]),
          _step2;
        try {
          for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
            var piece = _step2.value;
            var pieceString = this.decorator.board.board[piece[0]][piece[1]];
            if (!pieceString.isDead() || _PieceControl_PieceControlInterface__WEBPACK_IMPORTED_MODULE_4__.pieceControlConfigSettings[pieceString.piece].moveGenerationSettings.isPawn) continue;
            this.decorator.board.board[piece[0]][piece[1]] = (0,_GameInformation_GameUnits_PieceString__WEBPACK_IMPORTED_MODULE_3__.createPieceFromData)(sideToMove, pieceString.piece);
          }
        } catch (err) {
          _iterator2.e(err);
        } finally {
          _iterator2.f();
        }
      }
    } catch (err) {
      _iterator.e(err);
    } finally {
      _iterator.f();
    }
    return results;
  }
  countTotalPointsOnBoard() {
    var zombieImmune = this.decorator.fenOptions.tag("zombieImmune"),
      royals = this.decorator.fenOptions.tag("royal");
    var resultingPoints = [0, 0, 0, 0];
    this.decorator.board.getPlayerPieces().forEach((army, color) => {
      if (zombieImmune[color]) return;
      var royal = royals[color];
      var _iterator3 = _createForOfIteratorHelper(army),
        _step3;
      try {
        for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {
          var coordinate = _step3.value;
          if (royal && (0,_Board_BoardInterface__WEBPACK_IMPORTED_MODULE_0__.compareCoordinates)(coordinate, royal)) {
            resultingPoints[color] += this.decorator.obtainPointsForMate();
          } else {
            var piece = this.decorator.board.board[coordinate[0]][coordinate[1]].piece;
            resultingPoints[color] += _PieceControl_PieceControlInterface__WEBPACK_IMPORTED_MODULE_4__.pieceControlConfigSettings[piece].points.singlesPoints;
          }
        }
      } catch (err) {
        _iterator3.e(err);
      } finally {
        _iterator3.f();
      }
    });
    return resultingPoints;
  }
}
_VariantRule__WEBPACK_IMPORTED_MODULE_5__.VariantRule.initVariantRule(Takeover);

/***/ }),

/***/ "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/FENDataDecorators/ThreefoldRepetition.ts":
/*!***********************************************************************************************************************!*\
  !*** ./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/FENDataDecorators/ThreefoldRepetition.ts ***!
  \***********************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ThreefoldRepetition": () => (/* binding */ ThreefoldRepetition)
/* harmony export */ });
/* harmony import */ var _FENData_FENData__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../FENData/FENData */ "./src/main/client/ts/logic/movegen/FENData/FENData.ts");
/* harmony import */ var _VariantRule__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../VariantRule */ "./src/main/client/ts/logic/movegen/VariantRules/VariantRule.ts");
function _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }
function _toPropertyKey(arg) { var key = _toPrimitive(arg, "string"); return typeof key === "symbol" ? key : String(key); }
function _toPrimitive(input, hint) { if (typeof input !== "object" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || "default"); if (typeof res !== "object") return res; throw new TypeError("@@toPrimitive must return a primitive value."); } return (hint === "string" ? String : Number)(input); }


var tag = "threefoldRepetition";
class ThreefoldRepetition extends _VariantRule__WEBPACK_IMPORTED_MODULE_1__.VariantRule {
  constructor(totalRepetitions) {
    super();
    _defineProperty(this, "totalRepetitionsRequired", void 0);
    if (typeof totalRepetitions === "number" && totalRepetitions > 0) {
      this.totalRepetitionsRequired = totalRepetitions;
    } else {
      this.totalRepetitionsRequired = 3;
    }
  }
  getDecoratorType() {
    return _FENData_FENData__WEBPACK_IMPORTED_MODULE_0__.FENData;
  }
  getPublicProperties() {
    var isDisabled = this.totalRepetitionsRequired === Infinity;
    return {
      parameterValue: this.totalRepetitionsRequired,
      information: {
        name: "N-fold Repetition",
        textualForm: "",
        description: isDisabled ? "3-fold repetition disabled" : "After position repeats ".concat(this.totalRepetitionsRequired, " times game is over"),
        tag
      }
    };
  }
  matchesPGNDeclaration(match) {
    var matchArray = match.match(/^ThreefoldRepetition=((?:\d+)|(?:Infinity))$/i);
    if (matchArray) {
      this.totalRepetitionsRequired = Number(matchArray[1]);
      return true;
    } else {
      return false;
    }
  }
  serializeToParsingForm() {
    return "ThreefoldRepetition=".concat(this.totalRepetitionsRequired);
  }
  isDisabled() {
    return false;
  }
  getParametrizedOptions() {
    var options = new Map();
    for (var _i = 0, _arr = [3, 2, 5]; _i < _arr.length; _i++) {
      var value = _arr[_i];
      options.set("".concat(value, "-fold"), value);
    }
    options.set("Unlimited", Infinity);
    return options;
  }
  affectOptions() {
    var results = this.callHandler("affectOptions", arguments);
    var repetitions = this.decorator.board.moves.getHash(this.decorator.board.moves.constructPreliminaryHashString(this.decorator.board));
    if (repetitions + 1 >= this.totalRepetitionsRequired) {
      this.decorator.assignGeneralTermination("Threefold Repetition");
      this.injectIntoBaseClass(function () {
        this.spreadPointsBetweenPlayersEvenly();
      })();
    }
    return results;
  }
}
_VariantRule__WEBPACK_IMPORTED_MODULE_1__.VariantRule.initVariantRule(ThreefoldRepetition);

/***/ }),

/***/ "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/PieceControlDecorators/AnyCapture.ts":
/*!*******************************************************************************************************************!*\
  !*** ./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/PieceControlDecorators/AnyCapture.ts ***!
  \*******************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "AnyCapture": () => (/* binding */ AnyCapture)
/* harmony export */ });
/* harmony import */ var _baseTypes__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../../baseTypes */ "./src/main/client/ts/baseTypes.ts");
/* harmony import */ var _GameInformation_GameData__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../GameInformation/GameData */ "./src/main/client/ts/logic/movegen/GameInformation/GameData.ts");
/* harmony import */ var _PieceControl_PieceControl__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../PieceControl/PieceControl */ "./src/main/client/ts/logic/movegen/PieceControl/PieceControl.ts");
/* harmony import */ var _VariantRule__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../VariantRule */ "./src/main/client/ts/logic/movegen/VariantRules/VariantRule.ts");
/* harmony import */ var _VariantRuleInterface__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../VariantRuleInterface */ "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleInterface.ts");
/* harmony import */ var _client_fonts_chessGlyphIndex__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @client/fonts/chessGlyphIndex */ "./src/main/client/fonts/chessGlyphIndex.ts");
function _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }
function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }
function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }
function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }
function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }
function _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }
function _toPropertyKey(arg) { var key = _toPrimitive(arg, "string"); return typeof key === "symbol" ? key : String(key); }
function _toPrimitive(input, hint) { if (typeof input !== "object" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || "default"); if (typeof res !== "object") return res; throw new TypeError("@@toPrimitive must return a primitive value."); } return (hint === "string" ? String : Number)(input); }






var tag = "anyCapture";
class AnyCapture extends _VariantRule__WEBPACK_IMPORTED_MODULE_3__.VariantRule {
  getDecoratorType() {
    return _PieceControl_PieceControl__WEBPACK_IMPORTED_MODULE_2__.PieceControl;
  }
  getPublicProperties() {
    return {
      parameterValue: true,
      information: {
        name: "Any Capture",
        description: "You can capture your own pieces",
        tag,
        color: _VariantRuleInterface__WEBPACK_IMPORTED_MODULE_4__.variantRuleColors.autogenous,
        displayIcon: _client_fonts_chessGlyphIndex__WEBPACK_IMPORTED_MODULE_5__.chessGlyphIndex.captureAnything
      }
    };
  }
  matchesPGNDeclaration(match) {
    return /^AnyCapture$/i.test(match);
  }
  serializeToParsingForm() {
    return "AnyCapture";
  }
  isDisabled() {
    return false;
  }
  configure(configuration) {
    var modifiedConfiguration = _objectSpread(_objectSpread({}, configuration), {}, {
      immunePieces: (0,_baseTypes__WEBPACK_IMPORTED_MODULE_0__.createTuple)(false, _GameInformation_GameData__WEBPACK_IMPORTED_MODULE_1__.totalPlayers)
    });
    var _iterator = _createForOfIteratorHelper(this.wrappingDecorators),
      _step;
    try {
      for (_iterator.s(); !(_step = _iterator.n()).done;) {
        var decorator = _step.value;
        if (decorator.configure) return decorator.configure(modifiedConfiguration);
      }
    } catch (err) {
      _iterator.e(err);
    } finally {
      _iterator.f();
    }
    return _PieceControl_PieceControl__WEBPACK_IMPORTED_MODULE_2__.PieceControl.prototype.configure.call(this.decorator, modifiedConfiguration);
  }
}
_VariantRule__WEBPACK_IMPORTED_MODULE_3__.VariantRule.initVariantRule(AnyCapture);

/***/ }),

/***/ "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/PieceControlDecorators/PromoteTo.ts":
/*!******************************************************************************************************************!*\
  !*** ./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/PieceControlDecorators/PromoteTo.ts ***!
  \******************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "PromoteTo": () => (/* binding */ PromoteTo)
/* harmony export */ });
/* harmony import */ var _moveGeneration_PieceControl_PieceControlInterface__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @moveGeneration/PieceControl/PieceControlInterface */ "./src/main/client/ts/logic/movegen/PieceControl/PieceControlInterface.ts");
/* harmony import */ var _client_ts_utils_StringFormatUtils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @client/ts/utils/StringFormatUtils */ "./src/main/client/ts/utils/StringFormatUtils.ts");
/* harmony import */ var _PieceControl_PieceControl__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../PieceControl/PieceControl */ "./src/main/client/ts/logic/movegen/PieceControl/PieceControl.ts");
/* harmony import */ var _VariantRule__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../VariantRule */ "./src/main/client/ts/logic/movegen/VariantRules/VariantRule.ts");
function _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }
function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }
function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }
function _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }
function _toPropertyKey(arg) { var key = _toPrimitive(arg, "string"); return typeof key === "symbol" ? key : String(key); }
function _toPrimitive(input, hint) { if (typeof input !== "object" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || "default"); if (typeof res !== "object") return res; throw new TypeError("@@toPrimitive must return a primitive value."); } return (hint === "string" ? String : Number)(input); }




var tag = "promotionPieces";
class PromoteTo extends _VariantRule__WEBPACK_IMPORTED_MODULE_3__.VariantRule {
  static filterPromotionPieceString(pieces) {
    var inputPromotion = pieces.split("").filter(p => (0,_moveGeneration_PieceControl_PieceControlInterface__WEBPACK_IMPORTED_MODULE_0__.verifyPieceLetter)(p));
    return inputPromotion.length ? inputPromotion : [_moveGeneration_PieceControl_PieceControlInterface__WEBPACK_IMPORTED_MODULE_0__.defaultPieces.queen, _moveGeneration_PieceControl_PieceControlInterface__WEBPACK_IMPORTED_MODULE_0__.defaultPieces.rook, _moveGeneration_PieceControl_PieceControlInterface__WEBPACK_IMPORTED_MODULE_0__.defaultPieces.bishop, _moveGeneration_PieceControl_PieceControlInterface__WEBPACK_IMPORTED_MODULE_0__.defaultPieces.knight];
  }
  constructor(promotionPieces) {
    super();
    _defineProperty(this, "promotionPieces", void 0);
    this.promotionPieces = Array.isArray(promotionPieces) && promotionPieces.every(p => typeof p === "string" && (0,_moveGeneration_PieceControl_PieceControlInterface__WEBPACK_IMPORTED_MODULE_0__.verifyPieceLetter)(p)) ? promotionPieces : [_moveGeneration_PieceControl_PieceControlInterface__WEBPACK_IMPORTED_MODULE_0__.defaultPieces.queen, _moveGeneration_PieceControl_PieceControlInterface__WEBPACK_IMPORTED_MODULE_0__.defaultPieces.rook, _moveGeneration_PieceControl_PieceControlInterface__WEBPACK_IMPORTED_MODULE_0__.defaultPieces.bishop, _moveGeneration_PieceControl_PieceControlInterface__WEBPACK_IMPORTED_MODULE_0__.defaultPieces.knight];
  }
  getDecoratorType() {
    return _PieceControl_PieceControl__WEBPACK_IMPORTED_MODULE_2__.PieceControl;
  }
  getPublicProperties() {
    var pieceNames = this.promotionPieces.reduce((p, c) => {
      var pieceName = _moveGeneration_PieceControl_PieceControlInterface__WEBPACK_IMPORTED_MODULE_0__.pieceControlConfigSettings[c].naming.name;
      return [...p, pieceName];
    }, []);
    return {
      parameterValue: this.promotionPieces,
      information: {
        name: "Pawns promote to",
        textualForm: "",
        description: "Pawns promote to ".concat((0,_client_ts_utils_StringFormatUtils__WEBPACK_IMPORTED_MODULE_1__.prefixWithIndefiniteArticle)((0,_client_ts_utils_StringFormatUtils__WEBPACK_IMPORTED_MODULE_1__.compileEnumeration)(pieceNames))),
        tag
      }
    };
  }
  matchesPGNDeclaration(match) {
    var matchArray = match.match(/^PromoteTo=([A-ZxΘ]+)$/i);
    if (matchArray) {
      this.promotionPieces = PromoteTo.filterPromotionPieceString(matchArray[1]);
      return true;
    } else {
      return false;
    }
  }
  serializeToParsingForm() {
    return "PromoteTo=".concat(this.promotionPieces.join(""));
  }
  isDisabled() {
    return false;
  }
  initDecoratorSettings() {
    if (this.decorator.hooks.usePawnLogic) {
      this.decorator.hooks.usePawnLogic.promotionPieces = this.promotionPieces;
    }
    var _iterator = _createForOfIteratorHelper(this.wrappingDecorators),
      _step;
    try {
      for (_iterator.s(); !(_step = _iterator.n()).done;) {
        var _decorator$initDecora;
        var decorator = _step.value;
        (_decorator$initDecora = decorator.initDecoratorSettings) === null || _decorator$initDecora === void 0 ? void 0 : _decorator$initDecora.call(decorator);
      }
    } catch (err) {
      _iterator.e(err);
    } finally {
      _iterator.f();
    }
  }
}
_VariantRule__WEBPACK_IMPORTED_MODULE_3__.VariantRule.initVariantRule(PromoteTo);

/***/ }),

/***/ "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/PieceControlDecorators/PromotionRank.ts":
/*!**********************************************************************************************************************!*\
  !*** ./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/PieceControlDecorators/PromotionRank.ts ***!
  \**********************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "PromotionRank": () => (/* binding */ PromotionRank),
/* harmony export */   "disabledRank": () => (/* binding */ disabledRank)
/* harmony export */ });
/* harmony import */ var _client_ts_utils_StringFormatUtils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @client/ts/utils/StringFormatUtils */ "./src/main/client/ts/utils/StringFormatUtils.ts");
/* harmony import */ var _GameInformation_GameData__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../GameInformation/GameData */ "./src/main/client/ts/logic/movegen/GameInformation/GameData.ts");
/* harmony import */ var _PieceControl_PieceControl__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../PieceControl/PieceControl */ "./src/main/client/ts/logic/movegen/PieceControl/PieceControl.ts");
/* harmony import */ var _VariantRule__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../VariantRule */ "./src/main/client/ts/logic/movegen/VariantRules/VariantRule.ts");
function _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }
function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }
function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }
function _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }
function _toPropertyKey(arg) { var key = _toPrimitive(arg, "string"); return typeof key === "symbol" ? key : String(key); }
function _toPrimitive(input, hint) { if (typeof input !== "object" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || "default"); if (typeof res !== "object") return res; throw new TypeError("@@toPrimitive must return a primitive value."); } return (hint === "string" ? String : Number)(input); }




var tag = "promotionRank";
var disabledRank = 99;
class PromotionRank extends _VariantRule__WEBPACK_IMPORTED_MODULE_3__.VariantRule {
  constructor(promotionRank) {
    super();
    _defineProperty(this, "promotionRank", void 0);
    this.promotionRank = typeof promotionRank === "number" ? promotionRank : 8;
  }
  getDecoratorType() {
    return _PieceControl_PieceControl__WEBPACK_IMPORTED_MODULE_2__.PieceControl;
  }
  getPublicProperties() {
    return {
      parameterValue: this.promotionRank,
      information: {
        name: "Promotion Rank",
        textualForm: "",
        description: "on the ".concat(this.promotionRank).concat((0,_client_ts_utils_StringFormatUtils__WEBPACK_IMPORTED_MODULE_0__.formatOrdinalNumber)(this.promotionRank), " rank"),
        tag
      }
    };
  }
  matchesPGNDeclaration(match) {
    var matchArray = match.match(/^Prom=(\d\d?)$/i);
    if (matchArray) {
      this.promotionRank = Number(matchArray[1]);
      return true;
    } else {
      return false;
    }
  }
  serializeToParsingForm() {
    return "Prom=".concat(this.promotionRank);
  }
  isDisabled() {
    return false;
  }
  getParametrizedOptions() {
    var resultingMap = new Map();
    for (var i = 1; i <= _GameInformation_GameData__WEBPACK_IMPORTED_MODULE_1__.boardDimension; i++) {
      resultingMap.set(String(i) + (0,_client_ts_utils_StringFormatUtils__WEBPACK_IMPORTED_MODULE_0__.formatOrdinalNumber)(i), i);
    }
    resultingMap.set("No promotion", disabledRank);
    return resultingMap;
  }
  initDecoratorSettings() {
    if (this.decorator.hooks.usePawnLogic) {
      this.decorator.hooks.usePawnLogic.promotionRanks = [_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_1__.boardDimension - this.promotionRank, this.promotionRank - 1, this.promotionRank - 1, _GameInformation_GameData__WEBPACK_IMPORTED_MODULE_1__.boardDimension - this.promotionRank];
    }
    var _iterator = _createForOfIteratorHelper(this.wrappingDecorators),
      _step;
    try {
      for (_iterator.s(); !(_step = _iterator.n()).done;) {
        var _decorator$initDecora;
        var decorator = _step.value;
        (_decorator$initDecora = decorator.initDecoratorSettings) === null || _decorator$initDecora === void 0 ? void 0 : _decorator$initDecora.call(decorator);
      }
    } catch (err) {
      _iterator.e(err);
    } finally {
      _iterator.f();
    }
  }
}
_VariantRule__WEBPACK_IMPORTED_MODULE_3__.VariantRule.initVariantRule(PromotionRank);

/***/ }),

/***/ "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/PieceControlDecorators/RoyalsCannotCapture.ts":
/*!****************************************************************************************************************************!*\
  !*** ./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/PieceControlDecorators/RoyalsCannotCapture.ts ***!
  \****************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "RoyalsCannotCapture": () => (/* binding */ RoyalsCannotCapture)
/* harmony export */ });
/* harmony import */ var _client_fonts_chessGlyphIndex__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @client/fonts/chessGlyphIndex */ "./src/main/client/fonts/chessGlyphIndex.ts");
/* harmony import */ var _PieceControl_PieceControl__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../PieceControl/PieceControl */ "./src/main/client/ts/logic/movegen/PieceControl/PieceControl.ts");
/* harmony import */ var _PieceControl_PieceControlInterface__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../PieceControl/PieceControlInterface */ "./src/main/client/ts/logic/movegen/PieceControl/PieceControlInterface.ts");
/* harmony import */ var _VariantRule__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../VariantRule */ "./src/main/client/ts/logic/movegen/VariantRules/VariantRule.ts");
/* harmony import */ var _VariantRuleInterface__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../VariantRuleInterface */ "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleInterface.ts");
function _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }
function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }
function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }





var tag = "royalsCannotCapture";
class RoyalsCannotCapture extends _VariantRule__WEBPACK_IMPORTED_MODULE_3__.VariantRule {
  getDecoratorType() {
    return _PieceControl_PieceControl__WEBPACK_IMPORTED_MODULE_1__.PieceControl;
  }
  getPublicProperties() {
    return {
      parameterValue: true,
      information: {
        name: "Royals Cannot Capture",
        description: "Royal pieces cannot capture pieces.",
        tag,
        color: _VariantRuleInterface__WEBPACK_IMPORTED_MODULE_4__.variantRuleColors.autogenous,
        displayIcon: _client_fonts_chessGlyphIndex__WEBPACK_IMPORTED_MODULE_0__.chessGlyphIndex.handshake
      }
    };
  }
  matchesPGNDeclaration() {
    return false;
  }
  serializeToParsingForm() {
    return "";
  }
  isDisabled() {
    return false;
  }
  getMovePossibility(configuration) {
    var royal = this.decorator.fenData.fenOptions.tag("royal")[this.decorator.color];
    if (royal && royal[0] === this.decorator.i && royal[1] === this.decorator.j) {
      configuration.special = _PieceControl_PieceControlInterface__WEBPACK_IMPORTED_MODULE_2__.AttackType.MoveOnly;
    }
    var _iterator = _createForOfIteratorHelper(this.wrappingDecorators),
      _step;
    try {
      for (_iterator.s(); !(_step = _iterator.n()).done;) {
        var decorator = _step.value;
        if (decorator.getMovePossibility) return decorator.getMovePossibility(configuration);
      }
    } catch (err) {
      _iterator.e(err);
    } finally {
      _iterator.f();
    }
    return _PieceControl_PieceControl__WEBPACK_IMPORTED_MODULE_1__.PieceControl.prototype.getMovePossibility.call(this.decorator, configuration);
  }
}

/***/ }),

/***/ "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/PieceControlDecorators/Sideways.ts":
/*!*****************************************************************************************************************!*\
  !*** ./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/PieceControlDecorators/Sideways.ts ***!
  \*****************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Sideways": () => (/* binding */ Sideways)
/* harmony export */ });
/* harmony import */ var _moveGeneration_PieceControl_PieceControlInterface__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @moveGeneration/PieceControl/PieceControlInterface */ "./src/main/client/ts/logic/movegen/PieceControl/PieceControlInterface.ts");
/* harmony import */ var _PieceControl_PieceControl__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../PieceControl/PieceControl */ "./src/main/client/ts/logic/movegen/PieceControl/PieceControl.ts");
/* harmony import */ var _VariantRule__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../VariantRule */ "./src/main/client/ts/logic/movegen/VariantRules/VariantRule.ts");
/* harmony import */ var _VariantRuleInterface__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../VariantRuleInterface */ "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleInterface.ts");
/* harmony import */ var _client_fonts_chessGlyphIndex__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @client/fonts/chessGlyphIndex */ "./src/main/client/fonts/chessGlyphIndex.ts");
function _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }
function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }
function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }





var tag = "sideways";
class Sideways extends _VariantRule__WEBPACK_IMPORTED_MODULE_2__.VariantRule {
  getDecoratorType() {
    return _PieceControl_PieceControl__WEBPACK_IMPORTED_MODULE_1__.PieceControl;
  }
  getPublicProperties() {
    return {
      parameterValue: true,
      information: {
        name: "Sideways",
        description: "Pawns can also move one square sideways",
        tag,
        color: _VariantRuleInterface__WEBPACK_IMPORTED_MODULE_3__.variantRuleColors.autogenous,
        displayIcon: _client_fonts_chessGlyphIndex__WEBPACK_IMPORTED_MODULE_4__.chessGlyphIndex.pawnSideways
      }
    };
  }
  matchesPGNDeclaration(match) {
    return /^Sideways$/i.test(match);
  }
  serializeToParsingForm() {
    return "Sideways";
  }
  isDisabled() {
    return false;
  }
  getPossibleCells() {
    if (this.decorator.hooks.usePawnLogic) {
      this.injectIntoBaseClass(function () {
        this.generateJumpAttack({
          displacement: [0, -1],
          special: _moveGeneration_PieceControl_PieceControlInterface__WEBPACK_IMPORTED_MODULE_0__.AttackType.MoveOnly
        });
        this.generateJumpAttack({
          displacement: [0, 1],
          special: _moveGeneration_PieceControl_PieceControlInterface__WEBPACK_IMPORTED_MODULE_0__.AttackType.MoveOnly
        });
      })();
    }
    var _iterator = _createForOfIteratorHelper(this.wrappingDecorators),
      _step;
    try {
      for (_iterator.s(); !(_step = _iterator.n()).done;) {
        var decorator = _step.value;
        if (decorator.getPossibleCells) return decorator.getPossibleCells();
      }
      // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment
    } catch (err) {
      _iterator.e(err);
    } finally {
      _iterator.f();
    }
    var prototype = Object.getPrototypeOf(this.decorator);
    prototype.getPossibleCells.call(this.decorator);
  }
}
_VariantRule__WEBPACK_IMPORTED_MODULE_2__.VariantRule.initVariantRule(Sideways);

/***/ }),

/***/ "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/PieceControlDecorators/Stonewall.ts":
/*!******************************************************************************************************************!*\
  !*** ./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/PieceControlDecorators/Stonewall.ts ***!
  \******************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Stonewall": () => (/* binding */ Stonewall)
/* harmony export */ });
/* harmony import */ var _PieceControl_PieceControl__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../PieceControl/PieceControl */ "./src/main/client/ts/logic/movegen/PieceControl/PieceControl.ts");
/* harmony import */ var _PieceControl_PieceControlInterface__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../PieceControl/PieceControlInterface */ "./src/main/client/ts/logic/movegen/PieceControl/PieceControlInterface.ts");
/* harmony import */ var _VariantRule__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../VariantRule */ "./src/main/client/ts/logic/movegen/VariantRules/VariantRule.ts");
function _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e2) { throw _e2; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e3) { didErr = true; err = _e3; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }
function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }
function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }
function _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }
function _toPropertyKey(arg) { var key = _toPrimitive(arg, "string"); return typeof key === "symbol" ? key : String(key); }
function _toPrimitive(input, hint) { if (typeof input !== "object" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || "default"); if (typeof res !== "object") return res; throw new TypeError("@@toPrimitive must return a primitive value."); } return (hint === "string" ? String : Number)(input); }
function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }
function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }
function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }
function _iterableToArrayLimit(arr, i) { var _i = null == arr ? null : "undefined" != typeof Symbol && arr[Symbol.iterator] || arr["@@iterator"]; if (null != _i) { var _s, _e, _x, _r, _arr = [], _n = !0, _d = !1; try { if (_x = (_i = _i.call(arr)).next, 0 === i) { if (Object(_i) !== _i) return; _n = !1; } else for (; !(_n = (_s = _x.call(_i)).done) && (_arr.push(_s.value), _arr.length !== i); _n = !0); } catch (err) { _d = !0, _e = err; } finally { try { if (!_n && null != _i.return && (_r = _i.return(), Object(_r) !== _r)) return; } finally { if (_d) throw _e; } } return _arr; } }
function _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }



var tag = "stonewall";
class Stonewall extends _VariantRule__WEBPACK_IMPORTED_MODULE_2__.VariantRule {
  getDecoratorType() {
    return _PieceControl_PieceControl__WEBPACK_IMPORTED_MODULE_0__.PieceControl;
  }
  getPublicProperties() {
    return {
      parameterValue: true,
      information: {
        name: "Stonewall",
        textualForm: "",
        description: "Dead pieces cannot be captured",
        tag
      }
    };
  }
  matchesPGNDeclaration(match) {
    return /^Deadwall$/i.test(match);
  }
  serializeToParsingForm() {
    return "Deadwall";
  }
  isDisabled() {
    return false;
  }
  getMovePossibility(configuration) {
    var _configuration$displa = _slicedToArray(configuration.displacement, 2),
      i = _configuration$displa[0],
      j = _configuration$displa[1],
      special = configuration.special;
    var modifiedConfiguration = configuration;
    if ((special === _PieceControl_PieceControlInterface__WEBPACK_IMPORTED_MODULE_1__.AttackType.AttackOnly || special === _PieceControl_PieceControlInterface__WEBPACK_IMPORTED_MODULE_1__.AttackType.Normal || special === _PieceControl_PieceControlInterface__WEBPACK_IMPORTED_MODULE_1__.AttackType.RayGen) && this.decorator.board[i] && this.decorator.board[i][j] && this.decorator.board[i][j].isDead()) {
      modifiedConfiguration = _objectSpread(_objectSpread({}, configuration), {}, {
        special: _PieceControl_PieceControlInterface__WEBPACK_IMPORTED_MODULE_1__.AttackType.MoveOnly
      });
    }
    var _iterator = _createForOfIteratorHelper(this.wrappingDecorators),
      _step;
    try {
      for (_iterator.s(); !(_step = _iterator.n()).done;) {
        var decorator = _step.value;
        if (decorator.getMovePossibility) return decorator.getMovePossibility(configuration);
      }
    } catch (err) {
      _iterator.e(err);
    } finally {
      _iterator.f();
    }
    return _PieceControl_PieceControl__WEBPACK_IMPORTED_MODULE_0__.PieceControl.prototype.getMovePossibility.call(this.decorator, modifiedConfiguration);
  }
}
_VariantRule__WEBPACK_IMPORTED_MODULE_2__.VariantRule.initVariantRule(Stonewall);

/***/ }),

/***/ "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/PieceControlDecorators/Torpedo.ts":
/*!****************************************************************************************************************!*\
  !*** ./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/PieceControlDecorators/Torpedo.ts ***!
  \****************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Torpedo": () => (/* binding */ Torpedo)
/* harmony export */ });
/* harmony import */ var _PieceControl_PieceControl__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../PieceControl/PieceControl */ "./src/main/client/ts/logic/movegen/PieceControl/PieceControl.ts");
/* harmony import */ var _VariantRule__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../VariantRule */ "./src/main/client/ts/logic/movegen/VariantRules/VariantRule.ts");
/* harmony import */ var _VariantRuleInterface__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../VariantRuleInterface */ "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleInterface.ts");
/* harmony import */ var _client_fonts_chessGlyphIndex__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @client/fonts/chessGlyphIndex */ "./src/main/client/fonts/chessGlyphIndex.ts");
function _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }
function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }
function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }
function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }
function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }
function _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }
function _toPropertyKey(arg) { var key = _toPrimitive(arg, "string"); return typeof key === "symbol" ? key : String(key); }
function _toPrimitive(input, hint) { if (typeof input !== "object" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || "default"); if (typeof res !== "object") return res; throw new TypeError("@@toPrimitive must return a primitive value."); } return (hint === "string" ? String : Number)(input); }




var tag = "torpedo";
class Torpedo extends _VariantRule__WEBPACK_IMPORTED_MODULE_1__.VariantRule {
  getDecoratorType() {
    return _PieceControl_PieceControl__WEBPACK_IMPORTED_MODULE_0__.PieceControl;
  }
  getPublicProperties() {
    return {
      parameterValue: true,
      information: {
        name: "Torpedo",
        description: "Pawns can always jump two squares",
        tag,
        color: _VariantRuleInterface__WEBPACK_IMPORTED_MODULE_2__.variantRuleColors.autogenous,
        displayIcon: _client_fonts_chessGlyphIndex__WEBPACK_IMPORTED_MODULE_3__.chessGlyphIndex.torpedo
      }
    };
  }
  matchesPGNDeclaration(match) {
    return /^Torpedo$/i.test(match);
  }
  serializeToParsingForm() {
    return "Torpedo";
  }
  isDisabled() {
    return false;
  }
  configure(configuration) {
    var modifiedConfiguration = _objectSpread(_objectSpread({}, configuration), {}, {
      baseRank: true
    });
    var _iterator = _createForOfIteratorHelper(this.wrappingDecorators),
      _step;
    try {
      for (_iterator.s(); !(_step = _iterator.n()).done;) {
        var decorator = _step.value;
        if (decorator.configure) return decorator.configure(modifiedConfiguration);
      }
    } catch (err) {
      _iterator.e(err);
    } finally {
      _iterator.f();
    }
    _PieceControl_PieceControl__WEBPACK_IMPORTED_MODULE_0__.PieceControl.prototype.configure.call(this.decorator, modifiedConfiguration);
  }
}
_VariantRule__WEBPACK_IMPORTED_MODULE_1__.VariantRule.initVariantRule(Torpedo);

/***/ }),

/***/ "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleInterface.ts":
/*!*******************************************************************************!*\
  !*** ./src/main/client/ts/logic/movegen/VariantRules/VariantRuleInterface.ts ***!
  \*******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "variantRuleColors": () => (/* binding */ variantRuleColors)
/* harmony export */ });
/* harmony import */ var _client_ts_interfaces_Colors__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @client/ts/interfaces/Colors */ "./src/main/client/ts/interfaces/Colors.ts");

var variantRuleColors = {
  minor: (0,_client_ts_interfaces_Colors__WEBPACK_IMPORTED_MODULE_0__.createHexColor)("#e01492"),
  visual: (0,_client_ts_interfaces_Colors__WEBPACK_IMPORTED_MODULE_0__.createHexColor)("#ad5709"),
  autogenous: (0,_client_ts_interfaces_Colors__WEBPACK_IMPORTED_MODULE_0__.createHexColor)("#f2791e"),
  metadata: (0,_client_ts_interfaces_Colors__WEBPACK_IMPORTED_MODULE_0__.createHexColor)("#89a5d3"),
  startingPosition: (0,_client_ts_interfaces_Colors__WEBPACK_IMPORTED_MODULE_0__.createHexColor)("#7030a0"),
  extending: (0,_client_ts_interfaces_Colors__WEBPACK_IMPORTED_MODULE_0__.createHexColor)("#fbaa07"),
  widespread: (0,_client_ts_interfaces_Colors__WEBPACK_IMPORTED_MODULE_0__.createHexColor)("#d40c0c"),
  pointsAlternation: (0,_client_ts_interfaces_Colors__WEBPACK_IMPORTED_MODULE_0__.createHexColor)("#00b0f0"),
  phased: (0,_client_ts_interfaces_Colors__WEBPACK_IMPORTED_MODULE_0__.createHexColor)("#00b050")
};

/***/ }),

/***/ "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleSetup.ts":
/*!***************************************************************************!*\
  !*** ./src/main/client/ts/logic/movegen/VariantRules/VariantRuleSetup.ts ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "compileVariantRuleData": () => (/* binding */ compileVariantRuleData),
/* harmony export */   "copyVariantRules": () => (/* binding */ copyVariantRules),
/* harmony export */   "createBaseParsingTypes": () => (/* binding */ createBaseParsingTypes),
/* harmony export */   "parseVariantRules": () => (/* binding */ parseVariantRules),
/* harmony export */   "validateVariantRules": () => (/* binding */ validateVariantRules)
/* harmony export */ });
/* harmony import */ var _Board_Board__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Board/Board */ "./src/main/client/ts/logic/movegen/Board/Board.ts");
/* harmony import */ var _FENData_FENData__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../FENData/FENData */ "./src/main/client/ts/logic/movegen/FENData/FENData.ts");
/* harmony import */ var _PieceControl_PieceControl__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../PieceControl/PieceControl */ "./src/main/client/ts/logic/movegen/PieceControl/PieceControl.ts");
/* harmony import */ var _VariantRuleDefinitions_BoardDecorators_ForcedCapture__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./VariantRuleDefinitions/BoardDecorators/ForcedCapture */ "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/BoardDecorators/ForcedCapture.ts");
/* harmony import */ var _VariantRuleDefinitions_BoardDecorators_SeirawanSetup__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./VariantRuleDefinitions/BoardDecorators/SeirawanSetup */ "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/BoardDecorators/SeirawanSetup.ts");
/* harmony import */ var _VariantRuleDefinitions_BoardDecorators_SetupChess__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./VariantRuleDefinitions/BoardDecorators/SetupChess */ "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/BoardDecorators/SetupChess.ts");
/* harmony import */ var _VariantRuleDefinitions_BoardDecorators_Taboo__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./VariantRuleDefinitions/BoardDecorators/Taboo */ "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/BoardDecorators/Taboo.ts");
/* harmony import */ var _VariantRuleDefinitions_FENDataDecorators_FiftyMoveRule__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./VariantRuleDefinitions/FENDataDecorators/FiftyMoveRule */ "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/FENDataDecorators/FiftyMoveRule.ts");
/* harmony import */ var _VariantRuleDefinitions_FENDataDecorators_Giveaway__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./VariantRuleDefinitions/FENDataDecorators/Giveaway */ "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/FENDataDecorators/Giveaway.ts");
/* harmony import */ var _VariantRuleDefinitions_FENDataDecorators_StalemateOptions__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./VariantRuleDefinitions/FENDataDecorators/StalemateOptions */ "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/FENDataDecorators/StalemateOptions.ts");
/* harmony import */ var _VariantRuleDefinitions_FENDataDecorators_ThreefoldRepetition__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./VariantRuleDefinitions/FENDataDecorators/ThreefoldRepetition */ "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/FENDataDecorators/ThreefoldRepetition.ts");
/* harmony import */ var _VariantRuleDefinitions_PieceControlDecorators_PromoteTo__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./VariantRuleDefinitions/PieceControlDecorators/PromoteTo */ "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/PieceControlDecorators/PromoteTo.ts");
/* harmony import */ var _VariantRuleDefinitions_PieceControlDecorators_PromotionRank__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./VariantRuleDefinitions/PieceControlDecorators/PromotionRank */ "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/PieceControlDecorators/PromotionRank.ts");
/* harmony import */ var _VariantRule__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./VariantRule */ "./src/main/client/ts/logic/movegen/VariantRules/VariantRule.ts");
function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }
function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }
function _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }
function _toPropertyKey(arg) { var key = _toPrimitive(arg, "string"); return typeof key === "symbol" ? key : String(key); }
function _toPrimitive(input, hint) { if (typeof input !== "object" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || "default"); if (typeof res !== "object") return res; throw new TypeError("@@toPrimitive must return a primitive value."); } return (hint === "string" ? String : Number)(input); }
function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }
function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function _iterableToArrayLimit(arr, i) { var _i = null == arr ? null : "undefined" != typeof Symbol && arr[Symbol.iterator] || arr["@@iterator"]; if (null != _i) { var _s, _e, _x, _r, _arr = [], _n = !0, _d = !1; try { if (_x = (_i = _i.call(arr)).next, 0 === i) { if (Object(_i) !== _i) return; _n = !1; } else for (; !(_n = (_s = _x.call(_i)).done) && (_arr.push(_s.value), _arr.length !== i); _n = !0); } catch (err) { _d = !0, _e = err; } finally { try { if (!_n && null != _i.return && (_r = _i.return(), Object(_r) !== _r)) return; } finally { if (_d) throw _e; } } return _arr; } }
function _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }
function _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e2) { throw _e2; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e3) { didErr = true; err = _e3; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }
function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }
function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }
function _regeneratorRuntime() { "use strict"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return exports; }; var exports = {}, Op = Object.prototype, hasOwn = Op.hasOwnProperty, defineProperty = Object.defineProperty || function (obj, key, desc) { obj[key] = desc.value; }, $Symbol = "function" == typeof Symbol ? Symbol : {}, iteratorSymbol = $Symbol.iterator || "@@iterator", asyncIteratorSymbol = $Symbol.asyncIterator || "@@asyncIterator", toStringTagSymbol = $Symbol.toStringTag || "@@toStringTag"; function define(obj, key, value) { return Object.defineProperty(obj, key, { value: value, enumerable: !0, configurable: !0, writable: !0 }), obj[key]; } try { define({}, ""); } catch (err) { define = function define(obj, key, value) { return obj[key] = value; }; } function wrap(innerFn, outerFn, self, tryLocsList) { var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator, generator = Object.create(protoGenerator.prototype), context = new Context(tryLocsList || []); return defineProperty(generator, "_invoke", { value: makeInvokeMethod(innerFn, self, context) }), generator; } function tryCatch(fn, obj, arg) { try { return { type: "normal", arg: fn.call(obj, arg) }; } catch (err) { return { type: "throw", arg: err }; } } exports.wrap = wrap; var ContinueSentinel = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var IteratorPrototype = {}; define(IteratorPrototype, iteratorSymbol, function () { return this; }); var getProto = Object.getPrototypeOf, NativeIteratorPrototype = getProto && getProto(getProto(values([]))); NativeIteratorPrototype && NativeIteratorPrototype !== Op && hasOwn.call(NativeIteratorPrototype, iteratorSymbol) && (IteratorPrototype = NativeIteratorPrototype); var Gp = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(IteratorPrototype); function defineIteratorMethods(prototype) { ["next", "throw", "return"].forEach(function (method) { define(prototype, method, function (arg) { return this._invoke(method, arg); }); }); } function AsyncIterator(generator, PromiseImpl) { function invoke(method, arg, resolve, reject) { var record = tryCatch(generator[method], generator, arg); if ("throw" !== record.type) { var result = record.arg, value = result.value; return value && "object" == typeof value && hasOwn.call(value, "__await") ? PromiseImpl.resolve(value.__await).then(function (value) { invoke("next", value, resolve, reject); }, function (err) { invoke("throw", err, resolve, reject); }) : PromiseImpl.resolve(value).then(function (unwrapped) { result.value = unwrapped, resolve(result); }, function (error) { return invoke("throw", error, resolve, reject); }); } reject(record.arg); } var previousPromise; defineProperty(this, "_invoke", { value: function value(method, arg) { function callInvokeWithMethodAndArg() { return new PromiseImpl(function (resolve, reject) { invoke(method, arg, resolve, reject); }); } return previousPromise = previousPromise ? previousPromise.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(innerFn, self, context) { var state = "suspendedStart"; return function (method, arg) { if ("executing" === state) throw new Error("Generator is already running"); if ("completed" === state) { if ("throw" === method) throw arg; return doneResult(); } for (context.method = method, context.arg = arg;;) { var delegate = context.delegate; if (delegate) { var delegateResult = maybeInvokeDelegate(delegate, context); if (delegateResult) { if (delegateResult === ContinueSentinel) continue; return delegateResult; } } if ("next" === context.method) context.sent = context._sent = context.arg;else if ("throw" === context.method) { if ("suspendedStart" === state) throw state = "completed", context.arg; context.dispatchException(context.arg); } else "return" === context.method && context.abrupt("return", context.arg); state = "executing"; var record = tryCatch(innerFn, self, context); if ("normal" === record.type) { if (state = context.done ? "completed" : "suspendedYield", record.arg === ContinueSentinel) continue; return { value: record.arg, done: context.done }; } "throw" === record.type && (state = "completed", context.method = "throw", context.arg = record.arg); } }; } function maybeInvokeDelegate(delegate, context) { var methodName = context.method, method = delegate.iterator[methodName]; if (undefined === method) return context.delegate = null, "throw" === methodName && delegate.iterator.return && (context.method = "return", context.arg = undefined, maybeInvokeDelegate(delegate, context), "throw" === context.method) || "return" !== methodName && (context.method = "throw", context.arg = new TypeError("The iterator does not provide a '" + methodName + "' method")), ContinueSentinel; var record = tryCatch(method, delegate.iterator, context.arg); if ("throw" === record.type) return context.method = "throw", context.arg = record.arg, context.delegate = null, ContinueSentinel; var info = record.arg; return info ? info.done ? (context[delegate.resultName] = info.value, context.next = delegate.nextLoc, "return" !== context.method && (context.method = "next", context.arg = undefined), context.delegate = null, ContinueSentinel) : info : (context.method = "throw", context.arg = new TypeError("iterator result is not an object"), context.delegate = null, ContinueSentinel); } function pushTryEntry(locs) { var entry = { tryLoc: locs[0] }; 1 in locs && (entry.catchLoc = locs[1]), 2 in locs && (entry.finallyLoc = locs[2], entry.afterLoc = locs[3]), this.tryEntries.push(entry); } function resetTryEntry(entry) { var record = entry.completion || {}; record.type = "normal", delete record.arg, entry.completion = record; } function Context(tryLocsList) { this.tryEntries = [{ tryLoc: "root" }], tryLocsList.forEach(pushTryEntry, this), this.reset(!0); } function values(iterable) { if (iterable) { var iteratorMethod = iterable[iteratorSymbol]; if (iteratorMethod) return iteratorMethod.call(iterable); if ("function" == typeof iterable.next) return iterable; if (!isNaN(iterable.length)) { var i = -1, next = function next() { for (; ++i < iterable.length;) if (hasOwn.call(iterable, i)) return next.value = iterable[i], next.done = !1, next; return next.value = undefined, next.done = !0, next; }; return next.next = next; } } return { next: doneResult }; } function doneResult() { return { value: undefined, done: !0 }; } return GeneratorFunction.prototype = GeneratorFunctionPrototype, defineProperty(Gp, "constructor", { value: GeneratorFunctionPrototype, configurable: !0 }), defineProperty(GeneratorFunctionPrototype, "constructor", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, toStringTagSymbol, "GeneratorFunction"), exports.isGeneratorFunction = function (genFun) { var ctor = "function" == typeof genFun && genFun.constructor; return !!ctor && (ctor === GeneratorFunction || "GeneratorFunction" === (ctor.displayName || ctor.name)); }, exports.mark = function (genFun) { return Object.setPrototypeOf ? Object.setPrototypeOf(genFun, GeneratorFunctionPrototype) : (genFun.__proto__ = GeneratorFunctionPrototype, define(genFun, toStringTagSymbol, "GeneratorFunction")), genFun.prototype = Object.create(Gp), genFun; }, exports.awrap = function (arg) { return { __await: arg }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, asyncIteratorSymbol, function () { return this; }), exports.AsyncIterator = AsyncIterator, exports.async = function (innerFn, outerFn, self, tryLocsList, PromiseImpl) { void 0 === PromiseImpl && (PromiseImpl = Promise); var iter = new AsyncIterator(wrap(innerFn, outerFn, self, tryLocsList), PromiseImpl); return exports.isGeneratorFunction(outerFn) ? iter : iter.next().then(function (result) { return result.done ? result.value : iter.next(); }); }, defineIteratorMethods(Gp), define(Gp, toStringTagSymbol, "Generator"), define(Gp, iteratorSymbol, function () { return this; }), define(Gp, "toString", function () { return "[object Generator]"; }), exports.keys = function (val) { var object = Object(val), keys = []; for (var key in object) keys.push(key); return keys.reverse(), function next() { for (; keys.length;) { var key = keys.pop(); if (key in object) return next.value = key, next.done = !1, next; } return next.done = !0, next; }; }, exports.values = values, Context.prototype = { constructor: Context, reset: function reset(skipTempReset) { if (this.prev = 0, this.next = 0, this.sent = this._sent = undefined, this.done = !1, this.delegate = null, this.method = "next", this.arg = undefined, this.tryEntries.forEach(resetTryEntry), !skipTempReset) for (var name in this) "t" === name.charAt(0) && hasOwn.call(this, name) && !isNaN(+name.slice(1)) && (this[name] = undefined); }, stop: function stop() { this.done = !0; var rootRecord = this.tryEntries[0].completion; if ("throw" === rootRecord.type) throw rootRecord.arg; return this.rval; }, dispatchException: function dispatchException(exception) { if (this.done) throw exception; var context = this; function handle(loc, caught) { return record.type = "throw", record.arg = exception, context.next = loc, caught && (context.method = "next", context.arg = undefined), !!caught; } for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i], record = entry.completion; if ("root" === entry.tryLoc) return handle("end"); if (entry.tryLoc <= this.prev) { var hasCatch = hasOwn.call(entry, "catchLoc"), hasFinally = hasOwn.call(entry, "finallyLoc"); if (hasCatch && hasFinally) { if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0); if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc); } else if (hasCatch) { if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0); } else { if (!hasFinally) throw new Error("try statement without catch or finally"); if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc); } } } }, abrupt: function abrupt(type, arg) { for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i]; if (entry.tryLoc <= this.prev && hasOwn.call(entry, "finallyLoc") && this.prev < entry.finallyLoc) { var finallyEntry = entry; break; } } finallyEntry && ("break" === type || "continue" === type) && finallyEntry.tryLoc <= arg && arg <= finallyEntry.finallyLoc && (finallyEntry = null); var record = finallyEntry ? finallyEntry.completion : {}; return record.type = type, record.arg = arg, finallyEntry ? (this.method = "next", this.next = finallyEntry.finallyLoc, ContinueSentinel) : this.complete(record); }, complete: function complete(record, afterLoc) { if ("throw" === record.type) throw record.arg; return "break" === record.type || "continue" === record.type ? this.next = record.arg : "return" === record.type ? (this.rval = this.arg = record.arg, this.method = "return", this.next = "end") : "normal" === record.type && afterLoc && (this.next = afterLoc), ContinueSentinel; }, finish: function finish(finallyLoc) { for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i]; if (entry.finallyLoc === finallyLoc) return this.complete(entry.completion, entry.afterLoc), resetTryEntry(entry), ContinueSentinel; } }, catch: function _catch(tryLoc) { for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i]; if (entry.tryLoc === tryLoc) { var record = entry.completion; if ("throw" === record.type) { var thrown = record.arg; resetTryEntry(entry); } return thrown; } } throw new Error("illegal catch attempt"); }, delegateYield: function delegateYield(iterable, resultName, nextLoc) { return this.delegate = { iterator: values(iterable), resultName: resultName, nextLoc: nextLoc }, "next" === this.method && (this.arg = undefined), ContinueSentinel; } }, exports; }














var createBaseParsingTypes = () => ({
  boardDecorators: [],
  pieceControlDecorators: [],
  fenDataDecorators: [],
  [Symbol.iterator]() {
    var _this = this;
    return /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {
      var _i, _arr, rv, variantRule;
      return _regeneratorRuntime().wrap(function _callee$(_context) {
        while (1) switch (_context.prev = _context.next) {
          case 0:
            _i = 0, _arr = [..._this.boardDecorators, ..._this.pieceControlDecorators, ..._this.fenDataDecorators];
          case 1:
            if (!(_i < _arr.length)) {
              _context.next = 9;
              break;
            }
            rv = _arr[_i];
            variantRule = rv;
            _context.next = 6;
            return variantRule;
          case 6:
            _i++;
            _context.next = 1;
            break;
          case 9:
          case "end":
            return _context.stop();
        }
      }, _callee);
    })();
  }
});
var variantRulePriorities = [_VariantRuleDefinitions_BoardDecorators_SetupChess__WEBPACK_IMPORTED_MODULE_5__.SetupChess, _VariantRuleDefinitions_BoardDecorators_ForcedCapture__WEBPACK_IMPORTED_MODULE_3__.ForcedCapture, _VariantRuleDefinitions_BoardDecorators_Taboo__WEBPACK_IMPORTED_MODULE_6__.Taboo, _VariantRuleDefinitions_BoardDecorators_SeirawanSetup__WEBPACK_IMPORTED_MODULE_4__.SeirawanSetup, _VariantRuleDefinitions_PieceControlDecorators_PromoteTo__WEBPACK_IMPORTED_MODULE_11__.PromoteTo, _VariantRuleDefinitions_PieceControlDecorators_PromotionRank__WEBPACK_IMPORTED_MODULE_12__.PromotionRank, _VariantRuleDefinitions_FENDataDecorators_Giveaway__WEBPACK_IMPORTED_MODULE_8__.Giveaway].reverse();
function differentiateDecoratorMethods(variant, methods) {
  var verifyDecorator = (rv, type) => rv.getDecoratorType() === type;
  if (verifyDecorator(variant, _Board_Board__WEBPACK_IMPORTED_MODULE_0__.Board)) {
    methods.boardDecorators(variant);
  } else if (verifyDecorator(variant, _PieceControl_PieceControl__WEBPACK_IMPORTED_MODULE_2__.PieceControl)) {
    methods.pieceControlDecorators(variant);
  } else if (verifyDecorator(variant, _FENData_FENData__WEBPACK_IMPORTED_MODULE_1__.FENData)) {
    methods.fenDataDecorators(variant);
  }
}
function parseVariantRules(rules) {
  var variantClasses = new Set();
  var variantRuleList = new Set();
  var forcedRules = [_VariantRuleDefinitions_PieceControlDecorators_PromotionRank__WEBPACK_IMPORTED_MODULE_12__.PromotionRank, _VariantRuleDefinitions_PieceControlDecorators_PromoteTo__WEBPACK_IMPORTED_MODULE_11__.PromoteTo, _VariantRuleDefinitions_FENDataDecorators_StalemateOptions__WEBPACK_IMPORTED_MODULE_9__.StalemateOptions, _VariantRuleDefinitions_FENDataDecorators_FiftyMoveRule__WEBPACK_IMPORTED_MODULE_7__.FiftyMoveRule, _VariantRuleDefinitions_FENDataDecorators_ThreefoldRepetition__WEBPACK_IMPORTED_MODULE_10__.ThreefoldRepetition];
  var _iterator = _createForOfIteratorHelper(_VariantRule__WEBPACK_IMPORTED_MODULE_13__.VariantRule.variantRuleList),
    _step;
  try {
    for (_iterator.s(); !(_step = _iterator.n()).done;) {
      var variantRule = _step.value;
      var rv = new variantRule();
      variantRuleList.add(rv);
      variantClasses.add(variantRule);
    }
  } catch (err) {
    _iterator.e(err);
  } finally {
    _iterator.f();
  }
  var finalList = createBaseParsingTypes();
  var rulesStrings = rules.split(/\s+/);
  var insertVariantRule = variant => {
    differentiateDecoratorMethods(variant, {
      boardDecorators: variant => {
        finalList.boardDecorators.push(variant);
      },
      pieceControlDecorators: variant => {
        finalList.pieceControlDecorators.push(variant);
      },
      fenDataDecorators: variant => {
        finalList.fenDataDecorators.push(variant);
      }
    });
    var _iterator2 = _createForOfIteratorHelper(variant.dependencies),
      _step2;
    try {
      var _loop = function _loop() {
        var _step2$value = _slicedToArray(_step2.value, 2),
          dependency = _step2$value[0],
          dependencyArgs = _step2$value[1];
        if (!Object.values(finalList).some(decorators => decorators.some(rv => rv instanceof dependency))) {
          insertVariantRule(new dependency(...dependencyArgs));
        }
      };
      for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
        _loop();
      }
    } catch (err) {
      _iterator2.e(err);
    } finally {
      _iterator2.f();
    }
  };
  var _iterator3 = _createForOfIteratorHelper(variantRuleList),
    _step3;
  try {
    for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {
      var variant = _step3.value;
      var _iterator5 = _createForOfIteratorHelper(rulesStrings),
        _step5;
      try {
        for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {
          var ruleString = _step5.value;
          if (variant.matchesPGNDeclaration(ruleString)) {
            insertVariantRule(variant);
            variantRuleList.delete(variant);
          }
        }
      } catch (err) {
        _iterator5.e(err);
      } finally {
        _iterator5.f();
      }
    }
  } catch (err) {
    _iterator3.e(err);
  } finally {
    _iterator3.f();
  }
  var _loop2 = function _loop2() {
    var forcedRule = _forcedRules[_i2];
    var variant = new forcedRule();
    differentiateDecoratorMethods(variant, {
      boardDecorators: variant => {
        if (!finalList.boardDecorators.some(rule => rule instanceof forcedRule)) {
          finalList.boardDecorators.push(variant);
        }
      },
      pieceControlDecorators: variant => {
        if (!finalList.pieceControlDecorators.some(rule => rule instanceof forcedRule)) {
          finalList.pieceControlDecorators.push(variant);
        }
      },
      fenDataDecorators: variant => {
        if (!finalList.fenDataDecorators.some(rule => rule instanceof forcedRule)) {
          finalList.fenDataDecorators.push(variant);
        }
      }
    });
  };
  for (var _i2 = 0, _forcedRules = forcedRules; _i2 < _forcedRules.length; _i2++) {
    _loop2();
  }
  var _iterator4 = _createForOfIteratorHelper(variantRulePriorities),
    _step4;
  try {
    var _loop3 = function _loop3() {
      var rule = _step4.value;
      var resultingRule = new rule();
      differentiateDecoratorMethods(resultingRule, {
        boardDecorators: () => {
          var index = finalList.boardDecorators.findIndex(c => c instanceof rule);
          if (index !== -1) {
            finalList.boardDecorators.unshift(finalList.boardDecorators.splice(index, 1)[0]);
          }
        },
        pieceControlDecorators: () => {
          var index = finalList.pieceControlDecorators.findIndex(c => c instanceof rule);
          if (index !== -1) {
            finalList.pieceControlDecorators.unshift(finalList.pieceControlDecorators.splice(index, 1)[0]);
          }
        },
        fenDataDecorators: () => {
          var index = finalList.fenDataDecorators.findIndex(c => c instanceof rule);
          if (index !== -1) {
            finalList.fenDataDecorators.unshift(finalList.fenDataDecorators.splice(index, 1)[0]);
          }
        }
      });
    };
    for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {
      _loop3();
    }
  } catch (err) {
    _iterator4.e(err);
  } finally {
    _iterator4.f();
  }
  return finalList;
}
function compileVariantRuleData(rules) {
  var finalObject = {};
  var variantRuleList = _VariantRule__WEBPACK_IMPORTED_MODULE_13__.VariantRule.variantRuleList.map(rv => new rv());
  var _iterator6 = _createForOfIteratorHelper(variantRuleList),
    _step6;
  try {
    for (_iterator6.s(); !(_step6 = _iterator6.n()).done;) {
      var rule = _step6.value;
      finalObject[rule.getPublicProperties().information.tag] = false;
    }
  } catch (err) {
    _iterator6.e(err);
  } finally {
    _iterator6.f();
  }
  var setFinalObjectProperty = properties => {
    finalObject[properties.information.tag] = properties.parameterValue;
  };
  var _iterator7 = _createForOfIteratorHelper(rules),
    _step7;
  try {
    for (_iterator7.s(); !(_step7 = _iterator7.n()).done;) {
      var _rule = _step7.value;
      setFinalObjectProperty(_rule.getPublicProperties());
    }
  } catch (err) {
    _iterator7.e(err);
  } finally {
    _iterator7.f();
  }
  return finalObject;
}
function copyVariantRules(rvs) {
  return rvs.map(rv => {
    var parameterValue = rv.getPublicProperties().parameterValue;
    var parameterArray = parameterValue !== false ? [parameterValue] : [];
    return new rv.constructor(parameterArray);
  });
}
function validateVariantRules(board) {
  var configuration = {
    variantDataRules: board.variantData,
    gameType: board.gameType.type,
    fenTags: board.data.fenOptions.tags
  };
  return _objectSpread(_objectSpread({}, board.variantRules), {}, {
    boardDecorators: board.variantRules.boardDecorators.filter(rv => !rv.isDisabled(configuration)),
    pieceControlDecorators: board.variantRules.pieceControlDecorators.filter(rv => !rv.isDisabled(configuration)),
    fenDataDecorators: board.variantRules.fenDataDecorators.filter(rv => !rv.isDisabled(configuration))
  });
}

/***/ }),

/***/ "./src/main/client/ts/logic/utils/Tags/InputOutputProcessing.ts":
/*!**********************************************************************!*\
  !*** ./src/main/client/ts/logic/utils/Tags/InputOutputProcessing.ts ***!
  \**********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "parsePGN4": () => (/* binding */ parsePGN4),
/* harmony export */   "serializeBoard": () => (/* binding */ serializeBoard)
/* harmony export */ });
/* harmony import */ var _moveGeneration_GameInformation_GameUnits_GameUnits__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @moveGeneration/GameInformation/GameUnits/GameUnits */ "./src/main/client/ts/logic/movegen/GameInformation/GameUnits/GameUnits.ts");
/* harmony import */ var _moveGeneration_VariantRules_VariantRuleSetup__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @moveGeneration/VariantRules/VariantRuleSetup */ "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleSetup.ts");
/* harmony import */ var _Moves_ParsePGNMoves__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Moves/ParsePGNMoves */ "./src/main/client/ts/logic/utils/Tags/Moves/ParsePGNMoves.ts");
/* harmony import */ var _Moves_SerializePGNMoves__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Moves/SerializePGNMoves */ "./src/main/client/ts/logic/utils/Tags/Moves/SerializePGNMoves.ts");
/* harmony import */ var _TagInterface__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./TagInterface */ "./src/main/client/ts/logic/utils/Tags/TagInterface.ts");
function _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }
function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }
function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }





function parsePGN4(pgn4) {
  var pgn4Tags,
    pgn4Moves = "";
  var match = pgn4.match(/(?=1\.\s*?[xA-ZΑ-ωa-n0-9-])/);
  if (match !== null && match !== void 0 && match.index) {
    pgn4Moves = pgn4.substring(match.index);
    pgn4Tags = pgn4.substring(0, match.index).split("]").map(t => t.trim());
  } else {
    pgn4Tags = pgn4.split("]").map(t => t.trim());
  }
  var moves = pgn4Moves.length ? (0,_Moves_ParsePGNMoves__WEBPACK_IMPORTED_MODULE_2__.parsePGN4Moves)(pgn4Moves) : [];
  var variantTags = (0,_TagInterface__WEBPACK_IMPORTED_MODULE_4__.createDefaultVariantTags)();
  var wasFEN4set = false;
  var _iterator = _createForOfIteratorHelper(pgn4Tags),
    _step;
  try {
    for (_iterator.s(); !(_step = _iterator.n()).done;) {
      var input = _step.value;
      var variantTag = void 0;
      for (variantTag in variantTags) {
        var tag = variantTags[variantTag];
        if (Object.prototype.hasOwnProperty.call(variantTags, variantTag) && tag.verifyTagInParsing(input)) {
          if (variantTag === "startingPosition") wasFEN4set = true;
          tag.currentValue = tag.parseTag(input);
          break;
        }
      }
    }
  } catch (err) {
    _iterator.e(err);
  } finally {
    _iterator.f();
  }
  if (!wasFEN4set) variantTags.startingPosition.currentValue.fenData.fenOptions.setTag("noCorners", true);
  var gameData = {
    site: variantTags.site.currentValue,
    gameNumber: variantTags.gameNumber.currentValue,
    date: variantTags.date.currentValue,
    timeControl: variantTags.timeControl.currentValue,
    players: variantTags.playerData.currentValue,
    termination: variantTags.termination.currentValue,
    result: undefined
  };
  var variantRuleData = (0,_moveGeneration_VariantRules_VariantRuleSetup__WEBPACK_IMPORTED_MODULE_1__.compileVariantRuleData)(variantTags.variantRules.currentValue);
  var promotionPieces = Array.isArray(variantRuleData.promotionPieces) ? variantRuleData.promotionPieces : [];
  var nonPlayablePieceValues = Object.values(_moveGeneration_GameInformation_GameUnits_GameUnits__WEBPACK_IMPORTED_MODULE_0__.nonPlayablePieces);
  return {
    gameData,
    gameType: variantTags.variantType.currentValue,
    variantRules: variantTags.variantRules.currentValue,
    variantRuleData,
    board: variantTags.startingPosition.currentValue.board,
    fenData: variantTags.startingPosition.currentValue.fenData,
    pieceSet: new Set([...variantTags.startingPosition.currentValue.pieceSet, ...promotionPieces].filter(e => !nonPlayablePieceValues.includes(e))),
    moves
  };
}
var defaultTags = (0,_TagInterface__WEBPACK_IMPORTED_MODULE_4__.createDefaultVariantTags)();
function serializeBoard(board) {
  return {
    board: Object.values(defaultTags).map(t => t.serialize(board)).filter(v => v !== undefined).join("\n"),
    moves: (0,_Moves_SerializePGNMoves__WEBPACK_IMPORTED_MODULE_3__.serializePGNMoves)(board.moves)
  };
}

/***/ }),

/***/ "./src/main/client/ts/logic/utils/Tags/Moves/ParsePGNMoves.ts":
/*!********************************************************************!*\
  !*** ./src/main/client/ts/logic/utils/Tags/Moves/ParsePGNMoves.ts ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "PGN4_SYNTAX": () => (/* binding */ PGN4_SYNTAX),
/* harmony export */   "parsePGN4Moves": () => (/* binding */ parsePGN4Moves)
/* harmony export */ });
/* harmony import */ var _client_ts_baseTypes__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @client/ts/baseTypes */ "./src/main/client/ts/baseTypes.ts");
/* harmony import */ var _moveGeneration_GameInformation_GameUnits_GameUnits__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @moveGeneration/GameInformation/GameUnits/GameUnits */ "./src/main/client/ts/logic/movegen/GameInformation/GameUnits/GameUnits.ts");
/* harmony import */ var _moveGeneration_GameInformation_GameUnits_PieceString__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @moveGeneration/GameInformation/GameUnits/PieceString */ "./src/main/client/ts/logic/movegen/GameInformation/GameUnits/PieceString.ts");
/* harmony import */ var _moveGeneration_MoveTree_MoveTreeInterface__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @moveGeneration/MoveTree/MoveTreeInterface */ "./src/main/client/ts/logic/movegen/MoveTree/MoveTreeInterface.ts");
/* harmony import */ var _moveGeneration_PieceControl_PieceControlInterface__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @moveGeneration/PieceControl/PieceControlInterface */ "./src/main/client/ts/logic/movegen/PieceControl/PieceControlInterface.ts");
/* harmony import */ var _Utils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../Utils */ "./src/main/client/ts/logic/utils/Tags/Utils.ts");
function _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e2) { throw _e2; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e3) { didErr = true; err = _e3; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }
function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }
function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }
function _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }
function _toPropertyKey(arg) { var key = _toPrimitive(arg, "string"); return typeof key === "symbol" ? key : String(key); }
function _toPrimitive(input, hint) { if (typeof input !== "object" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || "default"); if (typeof res !== "object") return res; throw new TypeError("@@toPrimitive must return a primitive value."); } return (hint === "string" ? String : Number)(input); }
function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }
function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }
function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }
function _iterableToArrayLimit(arr, i) { var _i = null == arr ? null : "undefined" != typeof Symbol && arr[Symbol.iterator] || arr["@@iterator"]; if (null != _i) { var _s, _e, _x, _r, _arr = [], _n = !0, _d = !1; try { if (_x = (_i = _i.call(arr)).next, 0 === i) { if (Object(_i) !== _i) return; _n = !1; } else for (; !(_n = (_s = _x.call(_i)).done) && (_arr.push(_s.value), _arr.length !== i); _n = !0); } catch (err) { _d = !0, _e = err; } finally { try { if (!_n && null != _i.return && (_r = _i.return(), Object(_r) !== _r)) return; } finally { if (_d) throw _e; } } return _arr; } }
function _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }






var PGN4_SYNTAX = {
  SPLIT: ".",
  PIECE_REGEX: /[xA-ZΑ-ωa-nrbyg0-9-=+#@]/,
  PIECE_REGEX_SIMPLIFIED: /[A-ZΑ-ωa-n0-9-]/,
  MOVE_CAPTURING_REGEX: /^[A-ZΑ-ω]?([a-n]\d{1,2})(?:-|x[A-ZΑ-ω]?)[A-ZΑ-ω]?([a-n]\d{1,2})/,
  DUCK_MOVE_CAPTURING_REGEX: /Θ([a-n]\d{1,2})?-([a-n]\d{1,2})/,
  DROPPING_MOVE_CAPTURING_REGEX: /Θ?@([a-z])([A-ZΑ-ω])-([a-n]\d{1,2})/,
  BRACKETS: {
    COMMENT_START: "{",
    COMMENT_END: "}",
    VARIATION_START: "(",
    VARIATION_END: ")"
  },
  COORDINATE_REGEX: /[a-n](?:(?:1[0-4])|(?:[1-9]))/,
  COMMENT_SYNTAXES: {
    CLOCK: /\[%timestamp (-?\d+?)]/,
    ARROWS: /\[%cal ((?:R|B|Y|G).+?)]/,
    SQUARES: /\[%csl ((?:R|B|Y|G).+?)]/,
    ANNOTATION: /\[%ann (.+?)]/
  }
};
function obtainDuckMove(move) {
  var match = move.match(PGN4_SYNTAX.DUCK_MOVE_CAPTURING_REGEX);
  if (match) {
    if (match[1]) {
      var startCoordinates = (0,_Utils__WEBPACK_IMPORTED_MODULE_5__.parseSingleCoordinate)(match[1]);
      var endCoordinates = (0,_Utils__WEBPACK_IMPORTED_MODULE_5__.parseSingleCoordinate)(match[2]);
      if (!startCoordinates || !endCoordinates) return;
      return {
        startCoordinates,
        endCoordinates
      };
    } else {
      var _endCoordinates = (0,_Utils__WEBPACK_IMPORTED_MODULE_5__.parseSingleCoordinate)(match[2]);
      if (!_endCoordinates) return;
      return {
        piece: _moveGeneration_GameInformation_GameUnits_PieceString__WEBPACK_IMPORTED_MODULE_2__.duckPieceString,
        endCoordinates: _endCoordinates
      };
    }
  } else return;
}
function obtainInternalType(type) {
  var internalMove;
  for (internalMove in _moveGeneration_MoveTree_MoveTreeInterface__WEBPACK_IMPORTED_MODULE_3__.InternalMoveSignature) {
    if (Object.prototype.hasOwnProperty.call(_moveGeneration_MoveTree_MoveTreeInterface__WEBPACK_IMPORTED_MODULE_3__.InternalMoveSignature, internalMove)) {
      if (_moveGeneration_MoveTree_MoveTreeInterface__WEBPACK_IMPORTED_MODULE_3__.InternalMoveSignature[internalMove] === type) return {
        type: _moveGeneration_MoveTree_MoveTreeInterface__WEBPACK_IMPORTED_MODULE_3__.InternalMoveSignature[internalMove]
      };
    }
  }
}
function obtainDroppingMove(move) {
  var match = move.match(PGN4_SYNTAX.DROPPING_MOVE_CAPTURING_REGEX);
  if (match) {
    var _match = _slicedToArray(match, 4),
      color = _match[1],
      piece = _match[2],
      coordinate = _match[3];
    if (!(0,_moveGeneration_GameInformation_GameUnits_GameUnits__WEBPACK_IMPORTED_MODULE_1__.verifyColorEnumValue)(color) || !(0,_moveGeneration_PieceControl_PieceControlInterface__WEBPACK_IMPORTED_MODULE_4__.verifyPieceLetter)(piece)) return;
    var endCoordinates = (0,_Utils__WEBPACK_IMPORTED_MODULE_5__.parseSingleCoordinate)(coordinate);
    if (!endCoordinates) return;
    return {
      piece: (0,_moveGeneration_GameInformation_GameUnits_PieceString__WEBPACK_IMPORTED_MODULE_2__.createPieceFromData)(_moveGeneration_GameInformation_GameUnits_GameUnits__WEBPACK_IMPORTED_MODULE_1__.colorEnum[color], piece),
      endCoordinates
    };
  } else return;
}
function obtainStandardMove(move) {
  var moveData = {
    startCoordinates: [-1, -1],
    endCoordinates: [-1, -1]
  };
  var promotionMatch = move.match(/.*?=([A-Zx])/);
  if (promotionMatch !== null && promotionMatch !== void 0 && promotionMatch[1]) {
    moveData.promotion = [(0,_moveGeneration_GameInformation_GameUnits_PieceString__WEBPACK_IMPORTED_MODULE_2__.createPieceFromData)(_moveGeneration_GameInformation_GameUnits_PieceString__WEBPACK_IMPORTED_MODULE_2__.deadColorIndex, promotionMatch[1].charAt(0))];
  }
  var moveCoordinates = move.match(PGN4_SYNTAX.MOVE_CAPTURING_REGEX);
  if (moveCoordinates) {
    var startCoordinate = (0,_Utils__WEBPACK_IMPORTED_MODULE_5__.parseSingleCoordinate)(moveCoordinates[1]);
    var endCoordinate = (0,_Utils__WEBPACK_IMPORTED_MODULE_5__.parseSingleCoordinate)(moveCoordinates[2]);
    (0,_client_ts_baseTypes__WEBPACK_IMPORTED_MODULE_0__.assertNonUndefined)(startCoordinate);
    (0,_client_ts_baseTypes__WEBPACK_IMPORTED_MODULE_0__.assertNonUndefined)(endCoordinate);
    moveData.startCoordinates = startCoordinate;
    moveData.endCoordinates = endCoordinate;
    return moveData;
  } else {
    if (/O-O-O.*/.test(move)) {
      return _objectSpread(_objectSpread({}, moveData), {}, {
        specialType: _moveGeneration_MoveTree_MoveTreeInterface__WEBPACK_IMPORTED_MODULE_3__.SpecialMove.CastlingQueenside
      });
    } else if (/O-O.*/.test(move)) {
      return _objectSpread(_objectSpread({}, moveData), {}, {
        specialType: _moveGeneration_MoveTree_MoveTreeInterface__WEBPACK_IMPORTED_MODULE_3__.SpecialMove.CastlingKingside
      });
    }
  }
}
function cloneMoveData(move) {
  if (!(0,_moveGeneration_MoveTree_MoveTreeInterface__WEBPACK_IMPORTED_MODULE_3__.verifyInternalMove)(move)) {
    if ("startCoordinates" in move) {
      var newMove = {
        startCoordinates: [...move.startCoordinates],
        endCoordinates: [...move.endCoordinates]
      };
      if ("specialType" in move) {
        newMove.specialType = move.specialType;
      }
      if ("promotion" in move) {
        newMove.promotion = move.promotion;
      }
      return newMove;
    } else {
      return {
        endCoordinates: move.endCoordinates,
        piece: move.piece
      };
    }
  } else {
    return {
      type: move.type
    };
  }
}
var parsePGN4Moves = moves => {
  var parseMoves = (selectedMove, path) => {
    var moveList = [];
    var currentPath = path;
    function getMoveIndexes(mI) {
      while (selectedMove[mI] && PGN4_SYNTAX.PIECE_REGEX.test(selectedMove[mI])) mI++;
      return mI;
    }
    function parseComment(mI) {
      while (selectedMove[mI] && selectedMove[mI] !== PGN4_SYNTAX.BRACKETS.COMMENT_END) mI++;
      return mI;
    }
    function getEnumeratorIndex(mI) {
      while (selectedMove[mI] && /\d|\./.test(selectedMove[mI])) mI++;
      return --mI;
    }
    function findBracketIndex(i) {
      var depth = 0;
      for (; i < selectedMove.length; i++) {
        switch (selectedMove[i]) {
          case PGN4_SYNTAX.BRACKETS.COMMENT_START:
            i = parseComment(i);
            break;
          case PGN4_SYNTAX.BRACKETS.VARIATION_START:
            depth++;
            break;
          case PGN4_SYNTAX.BRACKETS.VARIATION_END:
            if (--depth === 0) {
              return i;
            }
            break;
        }
      }
      throw new TypeError("No matching parentheses for input " + selectedMove);
    }
    function processMoveDataInsertion() {
      if (currentMoveData) {
        var _currentMove$comment, _currentMove$comment3, _currentMove$comment5, _currentMove$comment7;
        currentPath.push(++increment);
        currentMove.path = currentPath.slice();
        currentPath.pop();
        currentMove.moveData = currentMoveData.map(m => cloneMoveData(m));
        currentMove.metadata = (0,_moveGeneration_MoveTree_MoveTreeInterface__WEBPACK_IMPORTED_MODULE_3__.createDummyMoveMetadata)();
        var clockSyntax = (_currentMove$comment = currentMove.comment) === null || _currentMove$comment === void 0 ? void 0 : _currentMove$comment.match(PGN4_SYNTAX.COMMENT_SYNTAXES.CLOCK);
        if (clockSyntax && !isNaN(Number(clockSyntax[1]))) {
          var _currentMove$comment2;
          currentMove.comment = (_currentMove$comment2 = currentMove.comment) === null || _currentMove$comment2 === void 0 ? void 0 : _currentMove$comment2.replace(PGN4_SYNTAX.COMMENT_SYNTAXES.CLOCK, "");
          currentMove.metadata.playerClock = Number(clockSyntax[1]);
        }
        var arrowSyntax = (_currentMove$comment3 = currentMove.comment) === null || _currentMove$comment3 === void 0 ? void 0 : _currentMove$comment3.match(PGN4_SYNTAX.COMMENT_SYNTAXES.ARROWS);
        if (arrowSyntax) {
          var _currentMove$comment4;
          var arrows = arrowSyntax[1].split(",");
          var _iterator = _createForOfIteratorHelper(arrows),
            _step;
          try {
            for (_iterator.s(); !(_step = _iterator.n()).done;) {
              var arrow = _step.value;
              var _ref = [arrow[0], arrow.slice(1)],
                color = _ref[0],
                coordinate = _ref[1];
              var numericColor = color.toLowerCase(),
                arrowCoordinates = (0,_Utils__WEBPACK_IMPORTED_MODULE_5__.parseEnPassantCoordinates)(coordinate);
              if (!(0,_moveGeneration_GameInformation_GameUnits_GameUnits__WEBPACK_IMPORTED_MODULE_1__.verifyColorEnumValue)(numericColor) || !arrowCoordinates) continue;
              currentMove.metadata.highlightedArrows.push([_moveGeneration_GameInformation_GameUnits_GameUnits__WEBPACK_IMPORTED_MODULE_1__.colorEnum[numericColor], ...arrowCoordinates]);
            }
          } catch (err) {
            _iterator.e(err);
          } finally {
            _iterator.f();
          }
          currentMove.comment = (_currentMove$comment4 = currentMove.comment) === null || _currentMove$comment4 === void 0 ? void 0 : _currentMove$comment4.replace(PGN4_SYNTAX.COMMENT_SYNTAXES.ARROWS, "");
        }
        var squareSyntax = (_currentMove$comment5 = currentMove.comment) === null || _currentMove$comment5 === void 0 ? void 0 : _currentMove$comment5.match(PGN4_SYNTAX.COMMENT_SYNTAXES.SQUARES);
        if (squareSyntax) {
          var _currentMove$comment6;
          var squares = squareSyntax[1].split(",");
          var _iterator2 = _createForOfIteratorHelper(squares),
            _step2;
          try {
            for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
              var square = _step2.value;
              var _ref2 = [square[0], square.slice(1)],
                _color = _ref2[0],
                inputCoordinate = _ref2[1];
              var _numericColor = _color.toLowerCase(),
                _coordinate = (0,_Utils__WEBPACK_IMPORTED_MODULE_5__.parseSingleCoordinate)(inputCoordinate);
              if (!(0,_moveGeneration_GameInformation_GameUnits_GameUnits__WEBPACK_IMPORTED_MODULE_1__.verifyColorEnumValue)(_numericColor) || !_coordinate) continue;
              currentMove.metadata.highlightedSquares.push([_moveGeneration_GameInformation_GameUnits_GameUnits__WEBPACK_IMPORTED_MODULE_1__.colorEnum[_numericColor], _coordinate]);
            }
          } catch (err) {
            _iterator2.e(err);
          } finally {
            _iterator2.f();
          }
          currentMove.comment = (_currentMove$comment6 = currentMove.comment) === null || _currentMove$comment6 === void 0 ? void 0 : _currentMove$comment6.replace(PGN4_SYNTAX.COMMENT_SYNTAXES.SQUARES, "");
        }
        var annotationMatch = (_currentMove$comment7 = currentMove.comment) === null || _currentMove$comment7 === void 0 ? void 0 : _currentMove$comment7.match(PGN4_SYNTAX.COMMENT_SYNTAXES.ANNOTATION);
        if (annotationMatch) {
          var _currentMove$comment8;
          currentMove.metadata.annotation = annotationMatch[1];
          currentMove.comment = (_currentMove$comment8 = currentMove.comment) === null || _currentMove$comment8 === void 0 ? void 0 : _currentMove$comment8.replace(PGN4_SYNTAX.COMMENT_SYNTAXES.ANNOTATION, "");
        }
        if ((0,_moveGeneration_MoveTree_MoveTreeInterface__WEBPACK_IMPORTED_MODULE_3__.verifyMoveWrapperProperties)(currentMove)) {
          moveList.push(Object.assign({}, currentMove));
        } else {
          console.error("Not all properties of move wrapper are filled out: ".concat(JSON.stringify(currentMove)));
        }
        currentMove = {
          alternativeLines: [],
          comment: ""
        };
        currentMoveData = undefined;
      }
    }
    function obtainMoveFromInfo(info) {
      var currentMove = [];
      var internalType = obtainInternalType(info[0]);
      if (info.length === 1 && internalType !== undefined) {
        return [internalType];
      }
      var standardMove = obtainStandardMove(info);
      if (standardMove) currentMove.push(standardMove);
      var droppingMove = obtainDroppingMove(info);
      if (droppingMove) currentMove.push(droppingMove);
      var duckMove = obtainDuckMove(info);
      if (duckMove) currentMove.push(duckMove);
      if ((0,_moveGeneration_MoveTree_MoveTreeInterface__WEBPACK_IMPORTED_MODULE_3__.verifyRequiredMove)(currentMove)) {
        return currentMove;
      } else throw new Error("Move length is 0 for string ".concat(info));
    }
    var currentMoveData;
    var currentMove = {
      alternativeLines: [],
      comment: ""
    };
    var increment = -1,
      variationIncrement = -1;
    try {
      for (var i = 0; i < selectedMove.length; i++) {
        var isNumNaN = isNaN(Number(selectedMove[i]));
        if (isNumNaN && !/\s/.test(selectedMove[i]) && selectedMove[i] !== PGN4_SYNTAX.SPLIT) {
          if (PGN4_SYNTAX.PIECE_REGEX_SIMPLIFIED.test(selectedMove[i])) {
            var index = getMoveIndexes(i);
            currentMoveData = obtainMoveFromInfo(selectedMove.substring(i, index));
            i = index;
          } else if (moves[i] === PGN4_SYNTAX.BRACKETS.COMMENT_START) {
            var _index = parseComment(i);
            currentMove.comment = moves.substring(i + 1, _index);
            i = _index;
          } else if (moves[i] === PGN4_SYNTAX.BRACKETS.VARIATION_START) {
            var _currentMove$alternat;
            var _index2 = findBracketIndex(i);
            currentPath.push(increment + 1, ++variationIncrement);
            (_currentMove$alternat = currentMove.alternativeLines) === null || _currentMove$alternat === void 0 ? void 0 : _currentMove$alternat.push([...parseMoves(moves.substring(i + 1, _index2), currentPath.slice())]);
            i = _index2;
          }
        } else if (selectedMove[i] === PGN4_SYNTAX.SPLIT && moves[i + 1] && moves[i + 1] === PGN4_SYNTAX.SPLIT || moves[i].trim() && !isNumNaN && moves[i + 1] && (moves[i + 1] === PGN4_SYNTAX.SPLIT || !isNaN(Number(moves[i + 1])))) {
          if (!isNumNaN) i = getEnumeratorIndex(i);
          if (currentMoveData) {
            processMoveDataInsertion();
          }
        }
      }
    } finally {
      processMoveDataInsertion();
      currentPath.push(increment + 1);
      currentMove.path = currentPath.slice();
      if ((0,_moveGeneration_MoveTree_MoveTreeInterface__WEBPACK_IMPORTED_MODULE_3__.verifyMoveWrapperProperties)(currentMove)) {
        moveList.push(Object.assign({}, currentMove));
      }
    }
    return moveList;
  };
  return parseMoves(moves, []);
};

/***/ }),

/***/ "./src/main/client/ts/logic/utils/Tags/Moves/SerializePGNMoves.ts":
/*!************************************************************************!*\
  !*** ./src/main/client/ts/logic/utils/Tags/Moves/SerializePGNMoves.ts ***!
  \************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "serializePGNMoves": () => (/* binding */ serializePGNMoves)
/* harmony export */ });
function _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }
function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }
function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }
function serializePGNMoves(moveTree) {
  var resultingString = "";
  var traverse = moves => {
    var _iterator = _createForOfIteratorHelper(moves),
      _step;
    try {
      for (_iterator.s(); !(_step = _iterator.n()).done;) {
        var moveWrapper = _step.value;
        if (moveWrapper.metadata.currentFullMove) {
          resultingString = resultingString.replace(/\s\.\.\s$/, "");
          resultingString += " ".concat(moveWrapper.metadata.currentFullMove, ". ");
        }
        resultingString += moveWrapper.cachedNames.fullMoveNotation;
        if (moveWrapper.comment) resultingString += " {".concat(moveWrapper.comment, "}");
        resultingString += " .. ";
        var _iterator2 = _createForOfIteratorHelper(moveWrapper.alternativeLines),
          _step2;
        try {
          for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
            var alternativeLine = _step2.value;
            resultingString += "(.. ";
            traverse(alternativeLine);
            resultingString += " )";
          }
        } catch (err) {
          _iterator2.e(err);
        } finally {
          _iterator2.f();
        }
      }
    } catch (err) {
      _iterator.e(err);
    } finally {
      _iterator.f();
    }
    resultingString = resultingString.replace(/\s\.\.\s$/, "");
  };
  traverse(moveTree.moves);
  return resultingString;
}

/***/ }),

/***/ "./src/main/client/ts/logic/utils/Tags/TagInterface.ts":
/*!*************************************************************!*\
  !*** ./src/main/client/ts/logic/utils/Tags/TagInterface.ts ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "createDefaultVariantTags": () => (/* binding */ createDefaultVariantTags)
/* harmony export */ });
/* harmony import */ var _TagLogic_FENDataTag__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./TagLogic/FENDataTag */ "./src/main/client/ts/logic/utils/Tags/TagLogic/FENDataTag.ts");
/* harmony import */ var _TagLogic_GameMetadataTags__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./TagLogic/GameMetadataTags */ "./src/main/client/ts/logic/utils/Tags/TagLogic/GameMetadataTags.ts");
/* harmony import */ var _TagLogic_VariantRulesTag__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./TagLogic/VariantRulesTag */ "./src/main/client/ts/logic/utils/Tags/TagLogic/VariantRulesTag.ts");



var createDefaultVariantTags = () => ({
  variantType: _TagLogic_GameMetadataTags__WEBPACK_IMPORTED_MODULE_1__.createVariantTypeTag(),
  startingPosition: (0,_TagLogic_FENDataTag__WEBPACK_IMPORTED_MODULE_0__.createFENDataTag)(),
  variantRules: (0,_TagLogic_VariantRulesTag__WEBPACK_IMPORTED_MODULE_2__.createVariantRulesTag)(),
  date: _TagLogic_GameMetadataTags__WEBPACK_IMPORTED_MODULE_1__.createDateTag(),
  site: _TagLogic_GameMetadataTags__WEBPACK_IMPORTED_MODULE_1__.createSiteTag(),
  timeControl: _TagLogic_GameMetadataTags__WEBPACK_IMPORTED_MODULE_1__.createTimeControlTag(),
  termination: _TagLogic_GameMetadataTags__WEBPACK_IMPORTED_MODULE_1__.createTerminationTag(),
  gameNumber: _TagLogic_GameMetadataTags__WEBPACK_IMPORTED_MODULE_1__.createGameNumberTag(),
  playerData: _TagLogic_GameMetadataTags__WEBPACK_IMPORTED_MODULE_1__.createPlayerDataTag(),
  results: _TagLogic_GameMetadataTags__WEBPACK_IMPORTED_MODULE_1__.createResultsTag()
});

/***/ }),

/***/ "./src/main/client/ts/logic/utils/Tags/TagLogic/FENDataTag.ts":
/*!********************************************************************!*\
  !*** ./src/main/client/ts/logic/utils/Tags/TagLogic/FENDataTag.ts ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "checkDimensionIntersection": () => (/* binding */ checkDimensionIntersection),
/* harmony export */   "createFENDataTag": () => (/* binding */ createFENDataTag)
/* harmony export */ });
/* harmony import */ var _client_ts_baseTypes__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @client/ts/baseTypes */ "./src/main/client/ts/baseTypes.ts");
/* harmony import */ var _client_ts_logic_BaseInterfaces__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @client/ts/logic/BaseInterfaces */ "./src/main/client/ts/logic/BaseInterfaces.ts");
/* harmony import */ var _moveGeneration_FENData_FENData__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @moveGeneration/FENData/FENData */ "./src/main/client/ts/logic/movegen/FENData/FENData.ts");
/* harmony import */ var _moveGeneration_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @moveGeneration/GameInformation/GameData */ "./src/main/client/ts/logic/movegen/GameInformation/GameData.ts");
/* harmony import */ var _moveGeneration_GameInformation_GameUnits_GameUnits__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @moveGeneration/GameInformation/GameUnits/GameUnits */ "./src/main/client/ts/logic/movegen/GameInformation/GameUnits/GameUnits.ts");
/* harmony import */ var _moveGeneration_GameInformation_GameUnits_PieceString__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @moveGeneration/GameInformation/GameUnits/PieceString */ "./src/main/client/ts/logic/movegen/GameInformation/GameUnits/PieceString.ts");
/* harmony import */ var _Utils__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../Utils */ "./src/main/client/ts/logic/utils/Tags/Utils.ts");
function _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e2) { throw _e2; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e3) { didErr = true; err = _e3; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }
function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }
function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }
function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }
function _iterableToArrayLimit(arr, i) { var _i = null == arr ? null : "undefined" != typeof Symbol && arr[Symbol.iterator] || arr["@@iterator"]; if (null != _i) { var _s, _e, _x, _r, _arr = [], _n = !0, _d = !1; try { if (_x = (_i = _i.call(arr)).next, 0 === i) { if (Object(_i) !== _i) return; _n = !1; } else for (; !(_n = (_s = _x.call(_i)).done) && (_arr.push(_s.value), _arr.length !== i); _n = !0); } catch (err) { _d = !0, _e = err; } finally { try { if (!_n && null != _i.return && (_r = _i.return(), Object(_r) !== _r)) return; } finally { if (_d) throw _e; } } return _arr; } }
function _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }







function checkDimensionIntersection(dimension, _ref) {
  var _ref2 = _slicedToArray(_ref, 2),
    i = _ref2[0],
    j = _ref2[1];
  var dimensionI = (_moveGeneration_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_3__.boardDimension - dimension[0]) / 2,
    dimensionJ = (_moveGeneration_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_3__.boardDimension - dimension[1]) / 2;
  return i < dimensionI || i >= dimensionI + dimension[0] || j < dimensionJ || j >= dimensionJ + dimension[1];
}
function serializeFENOptions(fenOptions) {
  var resultingStrings = [];
  var key;
  for (key in fenOptions.tags) {
    if (!Object.prototype.hasOwnProperty.call(fenOptions.tags, key)) continue;
    var serializedForm = fenOptions.tags[key].serialize();
    if (serializedForm) resultingStrings.push(serializedForm);
  }
  return "{".concat(resultingStrings.join(","), "}");
}
function modifyFourBooleanParameter(part, fenDataArrayRef) {
  var booleans = part.split(",").map(e => Boolean(Number(e)));
  if ((0,_client_ts_baseTypes__WEBPACK_IMPORTED_MODULE_0__.verifyTupleType)(booleans, _moveGeneration_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_3__.totalPlayers)) {
    fenDataArrayRef.forEach((_, i, arr) => arr[i] = booleans[i]);
  } else {
    console.error("Incorrect amount of arguments for the boolean parameter length in FENData: " + part);
    console.trace("Expected ".concat(_moveGeneration_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_3__.totalPlayers, " arguments, but got ").concat(booleans.length));
  }
}
var predefinedFENpositions = {
  "4PC": "R-0,0,0,0-1,1,1,1-1,1,1,1-0,0,0,0-0-x,x,x,yR,yN,yB,yK,yQ,yB,yN,yR,x,x,x/x,x,x,yP,yP,yP,yP,yP,yP,yP,yP,x,x,x/x,x,x,8,x,x,x/bR,bP,10,gP,gR/bN,bP,10,gP,gN/bB,bP,10,gP,gB/bQ,bP,10,gP,gK/bK,bP,10,gP,gQ/bB,bP,10,gP,gB/bN,bP,10,gP,gN/bR,bP,10,gP,gR/x,x,x,8,x,x,x/x,x,x,rP,rP,rP,rP,rP,rP,rP,rP,x,x,x/x,x,x,rR,rN,rB,rQ,rK,rB,rN,rR,x,x,x",
  "4PCo": "R-0,0,0,0-1,1,1,1-1,1,1,1-0,0,0,0-0-x,x,x,yR,yN,yB,yK,yQ,yB,yN,yR,x,x,x/x,x,x,yP,yP,yP,yP,yP,yP,yP,yP,x,x,x/x,x,x,8,x,x,x/bR,bP,10,gP,gR/bN,bP,10,gP,gN/bB,bP,10,gP,gB/bK,bP,10,gP,gQ/bQ,bP,10,gP,gK/bB,bP,10,gP,gB/bN,bP,10,gP,gN/bR,bP,10,gP,gR/x,x,x,8,x,x,x/x,x,x,rP,rP,rP,rP,rP,rP,rP,rP,x,x,x/x,x,x,rR,rN,rB,rQ,rK,rB,rN,rR,x,x,x",
  "4PCb": "R-0,0,0,0-1,1,1,1-1,1,1,1-0,0,0,0-0-x,x,x,yR,yN,yB,yQ,yK,yB,yN,yR,x,x,x/x,x,x,yP,yP,yP,yP,yP,yP,yP,yP,x,x,x/x,x,x,8,x,x,x/bR,bP,10,gP,gR/bN,bP,10,gP,gN/bB,bP,10,gP,gB/bQ,bP,10,gP,gQ/bK,bP,10,gP,gK/bB,bP,10,gP,gB/bN,bP,10,gP,gN/bR,bP,10,gP,gR/x,x,x,8,x,x,x/x,x,x,rP,rP,rP,rP,rP,rP,rP,rP,x,x,x/x,x,x,rR,rN,rB,rQ,rK,rB,rN,rR,x,x,x",
  "4PCn": "R-0,0,0,0-1,1,1,1-1,1,1,1-0,0,0,0-0-x,x,x,yR,yN,yB,yQ,yK,yB,yN,yR,x,x,x/x,x,x,yP,yP,yP,yP,yP,yP,yP,yP,x,x,x/x,x,x,8,x,x,x/bR,bP,10,gP,gR/bN,bP,10,gP,gN/bB,bP,10,gP,gB/bQ,bP,10,gP,gK/bK,bP,10,gP,gQ/bB,bP,10,gP,gB/bN,bP,10,gP,gN/bR,bP,10,gP,gR/x,x,x,8,x,x,x/x,x,x,rP,rP,rP,rP,rP,rP,rP,rP,x,x,x/x,x,x,rR,rN,rB,rQ,rK,rB,rN,rR,x,x,x",
  "2PC": "R-0,1,0,1-1,1,1,1-1,1,1,1-0,0,0,0-0-{'pawnBaseRank':5,'wb':true,'dim':'8x8'}-x,x,x,x,x,x,x,x,x,x,x,x,x,x/x,x,x,x,x,x,x,x,x,x,x,x,x,x/x,x,x,x,x,x,x,x,x,x,x,x,x,x/x,x,x,yR,yN,yB,yQ,yK,yB,yN,yR,x,x,x/x,x,x,yP,yP,yP,yP,yP,yP,yP,yP,x,x,x/x,x,x,8,x,x,x/x,x,x,8,x,x,x/x,x,x,8,x,x,x/x,x,x,8,x,x,x/x,x,x,rP,rP,rP,rP,rP,rP,rP,rP,x,x,x/x,x,x,rR,rN,rB,rQ,rK,rB,rN,rR,x,x,x/x,x,x,x,x,x,x,x,x,x,x,x,x,x/x,x,x,x,x,x,x,x,x,x,x,x,x,x/x,x,x,x,x,x,x,x,x,x,x,x,x,x"
};
var verifyPredefinedFENPosition = fenShorthand => fenShorthand in predefinedFENpositions;
var fenDataTag = "StartFen4";
var createFENDataTag = () => ({
  tag: "startingPosition",
  currentValue: {
    board: (0,_client_ts_logic_BaseInterfaces__WEBPACK_IMPORTED_MODULE_1__.initializeBoardSquares)(() => _moveGeneration_GameInformation_GameUnits_PieceString__WEBPACK_IMPORTED_MODULE_5__.emptyPieceString),
    fenData: new _moveGeneration_FENData_FENData__WEBPACK_IMPORTED_MODULE_2__.FENData(),
    pieceSet: new Set()
  },
  verifyTagInParsing(inputTag) {
    return (0,_Utils__WEBPACK_IMPORTED_MODULE_6__.tagNamesEqual)(inputTag, fenDataTag);
  },
  parseTag(inputTag) {
    var tagContents = (0,_Utils__WEBPACK_IMPORTED_MODULE_6__.unwrapTag)(inputTag, fenDataTag);
    var fenDataString = verifyPredefinedFENPosition(tagContents) ? predefinedFENpositions[tagContents] : tagContents;
    var fenData = new _moveGeneration_FENData_FENData__WEBPACK_IMPORTED_MODULE_2__.FENData();
    var board = (0,_client_ts_logic_BaseInterfaces__WEBPACK_IMPORTED_MODULE_1__.initializeBoardSquares)(() => _moveGeneration_GameInformation_GameUnits_PieceString__WEBPACK_IMPORTED_MODULE_5__.emptyPieceString);
    var pieceSet = new Set();
    var transparentWall = (0,_moveGeneration_GameInformation_GameUnits_PieceString__WEBPACK_IMPORTED_MODULE_5__.createPieceFromString)("x");
    var parts = fenDataString.split("-");
    if (parts.length < 7 || parts[parts.length - 1].split("/").length !== _moveGeneration_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_3__.boardDimension) {
      console.warn("FEN has less than 7 parts: " + fenDataString);
    } else {
      var sideToMove = parts[0].charAt(0).toLowerCase();
      if ((0,_moveGeneration_GameInformation_GameUnits_GameUnits__WEBPACK_IMPORTED_MODULE_4__.verifyColorEnumValue)(sideToMove)) {
        fenData.sideToMove = _moveGeneration_GameInformation_GameUnits_GameUnits__WEBPACK_IMPORTED_MODULE_4__.colorEnum[sideToMove];
      } else {
        console.warn("FEN option 1: side to move is not an alphabetic color: " + sideToMove);
      }
      modifyFourBooleanParameter(parts[1], fenData.fenOptions.tag("dead"));
      modifyFourBooleanParameter(parts[2], fenData.fenOptions.tag("castleKingside"));
      modifyFourBooleanParameter(parts[3], fenData.fenOptions.tag("castleQueenside"));
      var points = parts[4].split(",").map(e => Number(e));
      if ((0,_client_ts_baseTypes__WEBPACK_IMPORTED_MODULE_0__.verifyTupleType)(points, _moveGeneration_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_3__.totalPlayers)) {
        fenData.points = points;
      } else {
        console.warn("FEN option 5: points is of incorrect length: ".concat(points.join(",")));
      }
      fenData.plyCount = Number(parts[5]);
      var royals = (0,_client_ts_baseTypes__WEBPACK_IMPORTED_MODULE_0__.createTuple)(null, _moveGeneration_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_3__.totalPlayers);
      var verifyKeyInTags = key => key in fenData.fenOptions.tags;
      if (parts[6].startsWith("{")) {
        var initialParsing = JSON.parse(parts[6].replaceAll("(", "[").replaceAll(")", "]").replaceAll("'", '"'));
        if (typeof initialParsing !== "object" || initialParsing === null) throw new Error("Unexpected object definition syntax for " + String(initialParsing));
        for (var _i2 = 0, _Object$entries = Object.entries(initialParsing); _i2 < _Object$entries.length; _i2++) {
          var _Object$entries$_i = _slicedToArray(_Object$entries[_i2], 2),
            key = _Object$entries$_i[0],
            value = _Object$entries$_i[1];
          if (!verifyKeyInTags(key)) continue;
          var tag = fenData.fenOptions.tags[key];
          tag.value = tag.parse(value);
        }
      }
      var position = parts[parts.length - 1].split("/"),
        dimension = fenData.fenOptions.tag("dim");
      position.forEach((line, i) => {
        var j = 0;
        var _iterator = _createForOfIteratorHelper(line.split(",")),
          _step;
        try {
          for (_iterator.s(); !(_step = _iterator.n()).done;) {
            var pieceStr = _step.value;
            if (pieceStr.endsWith('"')) pieceStr = pieceStr.slice(0, -1);
            if (isNaN(Number(pieceStr))) {
              try {
                if (!checkDimensionIntersection(dimension, [i, j])) {
                  var pieceString = (0,_moveGeneration_GameInformation_GameUnits_PieceString__WEBPACK_IMPORTED_MODULE_5__.createPieceFromString)(pieceStr);
                  board[i][j] = pieceString;
                  if (pieceString.isPiece()) {
                    if (pieceString.piece === "K" && !royals[pieceString.color]) {
                      royals[pieceString.color] = [i, j];
                    }
                    pieceSet.add(pieceString.piece);
                  }
                }
              } finally {
                j++;
              }
            } else j += Number(pieceStr);
          }
        } catch (err) {
          _iterator.e(err);
        } finally {
          _iterator.f();
        }
      });
      var _iterator2 = _createForOfIteratorHelper(_moveGeneration_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_3__.colors),
        _step2;
      try {
        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
          var color = _step2.value;
          var _iterator3 = _createForOfIteratorHelper(fenData.fenOptions.tag("bank")[color]),
            _step3;
          try {
            for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {
              var _step3$value = _slicedToArray(_step3.value, 1),
                piece = _step3$value[0];
              if (piece.piece in _moveGeneration_GameInformation_GameUnits_GameUnits__WEBPACK_IMPORTED_MODULE_4__.nonPlayablePieces) continue;
              pieceSet.add(piece.piece);
            }
          } catch (err) {
            _iterator3.e(err);
          } finally {
            _iterator3.f();
          }
        }
      } catch (err) {
        _iterator2.e(err);
      } finally {
        _iterator2.f();
      }
      fenData.fenOptions.setTag("royal", royals);
      for (var i = 0; i < _moveGeneration_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_3__.boardDimension; i++) {
        for (var j = 0; j < _moveGeneration_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_3__.boardDimension; j++) {
          if (checkDimensionIntersection(dimension, [i, j])) board[i][j] = transparentWall;
        }
      }
    }
    if (!fenData.fenOptions.tag("noCorners")) {
      var cornerAreaSize = 3,
        arrayDimension = _moveGeneration_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_3__.boardDimension - 1;
      baseLoop: for (var _i3 = 0; _i3 < cornerAreaSize; _i3++) {
        for (var _j = 0; _j < cornerAreaSize; _j++) {
          var squares = [[_i3, _j], [arrayDimension - _i3, _j], [_i3, arrayDimension - _j], [arrayDimension - _i3, arrayDimension - _j]];
          for (var _i4 = 0, _squares = squares; _i4 < _squares.length; _i4++) {
            var square = _squares[_i4];
            var pieceString = board[square[0]][square[1]];
            if (!pieceString.isWall() || pieceString.piece !== transparentWall.piece) {
              fenData.fenOptions.setTag("noCorners", true);
              break baseLoop;
            }
          }
        }
      }
    }
    return {
      fenData,
      board,
      pieceSet
    };
  },
  serialize(baseBoard) {
    var board = baseBoard.board,
      data = baseBoard.data;
    var resultingString = "";
    resultingString += "".concat(_moveGeneration_GameInformation_GameUnits_GameUnits__WEBPACK_IMPORTED_MODULE_4__.stringColorEnum[data.sideToMove].toUpperCase(), "-");
    resultingString += "".concat(data.fenOptions.tag("dead").map(d => Number(d)).join(","), "-");
    resultingString += "".concat(data.fenOptions.tag("castleKingside").map(d => Number(d)).join(","), "-");
    resultingString += "".concat(data.fenOptions.tag("castleQueenside").map(d => Number(d)).join(","), "-");
    resultingString += "".concat(data.points.join(","), "-");
    resultingString += "".concat(data.plyCount, "-");
    resultingString += "".concat(serializeFENOptions(data.fenOptions), "-");
    var currentEmptySquares = 0;
    var _iterator4 = _createForOfIteratorHelper(board),
      _step4;
    try {
      for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {
        var row = _step4.value;
        var _iterator5 = _createForOfIteratorHelper(row),
          _step5;
        try {
          for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {
            var pieceString = _step5.value;
            if (pieceString.isEmpty()) {
              currentEmptySquares++;
              continue;
            }
            if (currentEmptySquares !== 0) {
              resultingString += "".concat(currentEmptySquares, ",");
              currentEmptySquares = 0;
            }
            resultingString += "".concat(pieceString.value, ",");
          }
        } catch (err) {
          _iterator5.e(err);
        } finally {
          _iterator5.f();
        }
        if (currentEmptySquares !== 0) {
          resultingString += "".concat(currentEmptySquares, "/");
          currentEmptySquares = 0;
        } else {
          resultingString = resultingString.slice(0, -1);
          resultingString += "/";
        }
      }
    } catch (err) {
      _iterator4.e(err);
    } finally {
      _iterator4.f();
    }
    resultingString = resultingString.slice(0, -1);
    return (0,_Utils__WEBPACK_IMPORTED_MODULE_6__.wrapTag)(fenDataTag, resultingString);
  }
});

/***/ }),

/***/ "./src/main/client/ts/logic/utils/Tags/TagLogic/GameMetadataTags.ts":
/*!**************************************************************************!*\
  !*** ./src/main/client/ts/logic/utils/Tags/TagLogic/GameMetadataTags.ts ***!
  \**************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "createDateTag": () => (/* binding */ createDateTag),
/* harmony export */   "createGameNumberTag": () => (/* binding */ createGameNumberTag),
/* harmony export */   "createPlayerDataTag": () => (/* binding */ createPlayerDataTag),
/* harmony export */   "createResultsTag": () => (/* binding */ createResultsTag),
/* harmony export */   "createSiteTag": () => (/* binding */ createSiteTag),
/* harmony export */   "createTerminationTag": () => (/* binding */ createTerminationTag),
/* harmony export */   "createTimeControlTag": () => (/* binding */ createTimeControlTag),
/* harmony export */   "createVariantTypeTag": () => (/* binding */ createVariantTypeTag)
/* harmony export */ });
/* harmony import */ var _client_ts_baseTypes__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @client/ts/baseTypes */ "./src/main/client/ts/baseTypes.ts");
/* harmony import */ var _moveGeneration_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @moveGeneration/GameInformation/GameData */ "./src/main/client/ts/logic/movegen/GameInformation/GameData.ts");
/* harmony import */ var _utils_NumberUtils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @utils/NumberUtils */ "./src/main/client/ts/utils/NumberUtils.ts");
/* harmony import */ var _Utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../Utils */ "./src/main/client/ts/logic/utils/Tags/Utils.ts");
function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }
function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }
function _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }
function _toPropertyKey(arg) { var key = _toPrimitive(arg, "string"); return typeof key === "symbol" ? key : String(key); }
function _toPrimitive(input, hint) { if (typeof input !== "object" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || "default"); if (typeof res !== "object") return res; throw new TypeError("@@toPrimitive must return a primitive value."); } return (hint === "string" ? String : Number)(input); }
function _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e2) { throw _e2; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e3) { didErr = true; err = _e3; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }
function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }
function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }
function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }
function _iterableToArrayLimit(arr, i) { var _i = null == arr ? null : "undefined" != typeof Symbol && arr[Symbol.iterator] || arr["@@iterator"]; if (null != _i) { var _s, _e, _x, _r, _arr = [], _n = !0, _d = !1; try { if (_x = (_i = _i.call(arr)).next, 0 === i) { if (Object(_i) !== _i) return; _n = !1; } else for (; !(_n = (_s = _x.call(_i)).done) && (_arr.push(_s.value), _arr.length !== i); _n = !0); } catch (err) { _d = !0, _e = err; } finally { try { if (!_n && null != _i.return && (_r = _i.return(), Object(_r) !== _r)) return; } finally { if (_d) throw _e; } } return _arr; } }
function _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }




var variantTypeTag = "Variant";
var createVariantTypeTag = () => ({
  tag: "variantType",
  currentValue: _moveGeneration_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_1__.VariantType.FFA,
  verifyTagInParsing(inputTag) {
    return (0,_Utils__WEBPACK_IMPORTED_MODULE_3__.tagNamesEqual)(inputTag, variantTypeTag);
  },
  parseTag(inputTag) {
    var tagContents = (0,_Utils__WEBPACK_IMPORTED_MODULE_3__.unwrapTag)(inputTag, variantTypeTag);
    for (var _i = 0, _Object$values = Object.values(_moveGeneration_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_1__.VariantType); _i < _Object$values.length; _i++) {
      var type = _Object$values[_i];
      if (tagContents === type) return type;
    }
    return _moveGeneration_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_1__.VariantType.FFA;
  },
  serialize(board) {
    return (0,_Utils__WEBPACK_IMPORTED_MODULE_3__.wrapTag)(variantTypeTag, board.gameType.type);
  }
});
var variantDateTag = "Date";
var createDateTag = () => ({
  tag: "date",
  currentValue: new Date(),
  verifyTagInParsing(inputTag) {
    return (0,_Utils__WEBPACK_IMPORTED_MODULE_3__.tagNamesEqual)(inputTag, variantDateTag);
  },
  parseTag(tagContents) {
    return new Date((0,_Utils__WEBPACK_IMPORTED_MODULE_3__.unwrapTag)(tagContents, variantDateTag));
  },
  serialize(board) {
    if (!board.gameData.date) return;
    if (typeof board.gameData.date === "object") {
      return (0,_Utils__WEBPACK_IMPORTED_MODULE_3__.wrapTag)(variantDateTag, board.gameData.date.toUTCString());
    } else {
      return (0,_Utils__WEBPACK_IMPORTED_MODULE_3__.wrapTag)(variantDateTag, board.gameData.date);
    }
  }
});
var variantSiteTag = "Site";
var createSiteTag = () => ({
  tag: "site",
  currentValue: "",
  verifyTagInParsing(inputTag) {
    return (0,_Utils__WEBPACK_IMPORTED_MODULE_3__.tagNamesEqual)(inputTag, variantSiteTag);
  },
  parseTag(tagContents) {
    return (0,_Utils__WEBPACK_IMPORTED_MODULE_3__.unwrapTag)(tagContents, variantSiteTag);
  },
  serialize(board) {
    if (!board.gameData.site) return;
    return (0,_Utils__WEBPACK_IMPORTED_MODULE_3__.wrapTag)(variantSiteTag, board.gameData.site);
  }
});
var variantTimeControlTag = "TimeControl",
  getDefaultTimeControl = () => ({
    baseTime: 180,
    increment: 2,
    isDelay: false
  });
var createTimeControlTag = () => ({
  tag: "timeControl",
  currentValue: getDefaultTimeControl(),
  verifyTagInParsing(inputTag) {
    return (0,_Utils__WEBPACK_IMPORTED_MODULE_3__.tagNamesEqual)(inputTag, variantTimeControlTag);
  },
  parseTag(inputTag) {
    var _unwrapTag$match;
    var defaultTC = getDefaultTimeControl();
    var matchArray = (_unwrapTag$match = (0,_Utils__WEBPACK_IMPORTED_MODULE_3__.unwrapTag)(inputTag, variantTimeControlTag).match(/^((?:0\.\d\d?)?|(?:\d\d?s?))(?:(?:(?:\+|\|)(\d\d?)(D?))|(\smin))$/)) === null || _unwrapTag$match === void 0 ? void 0 : _unwrapTag$match.slice(1);
    if (matchArray) {
      var _matchArray = _slicedToArray(matchArray, 3),
        minutesMatch = _matchArray[0],
        secondsMatch = _matchArray[1],
        delay = _matchArray[2];
      if (!secondsMatch) return defaultTC;
      defaultTC.isDelay = delay ? true : false;
      if (/\smin/.test(secondsMatch)) {
        defaultTC.increment = 0;
      } else {
        defaultTC.increment = Number(secondsMatch);
      }
      if (minutesMatch.endsWith("s")) {
        defaultTC.baseTime = Math.round(Number(minutesMatch.slice(0, -1)));
      } else {
        defaultTC.baseTime = Number(minutesMatch) * 60;
      }
    }
    return defaultTC;
  },
  serialize(board) {
    var timeControl = board.gameData.timeControl;
    var noIncrement = timeControl.increment === 0;
    var timeControlString = "";
    if (timeControl.baseTime < 60) {
      timeControlString += noIncrement ? "".concat(timeControl.baseTime * 60, " sec") : "".concat(timeControl.baseTime * 60, "s");
    } else if (timeControl.baseTime > 60 && noIncrement) {
      timeControlString += "".concat((0,_utils_NumberUtils__WEBPACK_IMPORTED_MODULE_2__.truncateNumber)(timeControl.baseTime / 60, 1), " min");
    } else {
      timeControlString += (0,_utils_NumberUtils__WEBPACK_IMPORTED_MODULE_2__.truncateNumber)(timeControl.baseTime / 60, 1);
    }
    if (!noIncrement) {
      timeControlString += "|";
      timeControlString += timeControl.increment;
    }
    if (timeControl.isDelay) {
      timeControlString += "D";
    }
    return (0,_Utils__WEBPACK_IMPORTED_MODULE_3__.wrapTag)(variantTimeControlTag, timeControlString);
  }
});
var variantTerminationTag = "Termination";
var createTerminationTag = () => ({
  tag: "termination",
  currentValue: undefined,
  verifyTagInParsing(inputTag) {
    return (0,_Utils__WEBPACK_IMPORTED_MODULE_3__.tagNamesEqual)(inputTag, variantTerminationTag);
  },
  parseTag(inputTag) {
    var tagContents = (0,_Utils__WEBPACK_IMPORTED_MODULE_3__.unwrapTag)(inputTag, variantTerminationTag);
    return (0,_moveGeneration_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_1__.validateTerminationString)(tagContents) ? tagContents : undefined;
  },
  serialize(board) {
    if (!board.gameData.termination) return;
    return (0,_Utils__WEBPACK_IMPORTED_MODULE_3__.wrapTag)(variantTerminationTag, board.gameData.termination);
  }
});
var variantGameId = "GameNr";
var createGameNumberTag = () => ({
  tag: "gameNumber",
  currentValue: undefined,
  verifyTagInParsing(inputTag) {
    return (0,_Utils__WEBPACK_IMPORTED_MODULE_3__.tagNamesEqual)(inputTag, variantGameId);
  },
  parseTag(inputTag) {
    var id = Number((0,_Utils__WEBPACK_IMPORTED_MODULE_3__.unwrapTag)(inputTag, variantGameId));
    return isNaN(id) ? undefined : id;
  },
  serialize(board) {
    if (!board.gameData.gameNumber) return;
    return (0,_Utils__WEBPACK_IMPORTED_MODULE_3__.wrapTag)(variantGameId, board.gameData.gameNumber.toString());
  }
});
var createPlayerDataTag = () => ({
  tag: "playerData",
  currentValue: (0,_client_ts_baseTypes__WEBPACK_IMPORTED_MODULE_0__.createTupleFromCallback)(() => ({}), _moveGeneration_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_1__.totalPlayers),
  verifyTagInParsing(inputTag) {
    var _iterator = _createForOfIteratorHelper(_moveGeneration_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_1__.colors),
      _step;
    try {
      for (_iterator.s(); !(_step = _iterator.n()).done;) {
        var color = _step.value;
        var playerName = (0,_moveGeneration_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_1__.getPlayerNameFromColor)(color);
        if ((0,_Utils__WEBPACK_IMPORTED_MODULE_3__.tagNamesEqual)(inputTag, playerName) || (0,_Utils__WEBPACK_IMPORTED_MODULE_3__.tagNamesEqual)(inputTag, "".concat(playerName, "Elo"))) return true;
      }
    } catch (err) {
      _iterator.e(err);
    } finally {
      _iterator.f();
    }
    return false;
  },
  parseTag(inputTag) {
    var _iterator2 = _createForOfIteratorHelper(_moveGeneration_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_1__.colors),
      _step2;
    try {
      for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
        var color = _step2.value;
        var playerName = (0,_moveGeneration_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_1__.getPlayerNameFromColor)(color);
        var newCurrentValue = [...this.currentValue];
        if ((0,_Utils__WEBPACK_IMPORTED_MODULE_3__.tagNamesEqual)(inputTag, playerName)) {
          var name = (0,_Utils__WEBPACK_IMPORTED_MODULE_3__.unwrapTag)(inputTag, playerName);
          if (name) newCurrentValue[color] = _objectSpread(_objectSpread({}, newCurrentValue[color]), {}, {
            name
          });
          return newCurrentValue;
        } else if ((0,_Utils__WEBPACK_IMPORTED_MODULE_3__.tagNamesEqual)(inputTag, "".concat(playerName, "Elo"))) {
          var elo = Number((0,_Utils__WEBPACK_IMPORTED_MODULE_3__.unwrapTag)(inputTag, playerName));
          if (!isNaN(elo)) newCurrentValue[color] = _objectSpread(_objectSpread({}, newCurrentValue[color]), {}, {
            elo
          });
          return newCurrentValue;
        }
      }
    } catch (err) {
      _iterator2.e(err);
    } finally {
      _iterator2.f();
    }
    throw new Error("Tag does not match any player data signature");
  },
  serialize(board) {
    var uniqueResultingTags = [];
    var _iterator3 = _createForOfIteratorHelper(_moveGeneration_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_1__.colors),
      _step3;
    try {
      for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {
        var color = _step3.value;
        var playerData = board.gameData.players[color];
        if (playerData.elo) {
          uniqueResultingTags.push((0,_Utils__WEBPACK_IMPORTED_MODULE_3__.wrapTag)("".concat(_moveGeneration_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_1__.playerNames[color], "Elo"), String(playerData.elo)));
        }
        if (playerData.name) {
          uniqueResultingTags.push((0,_Utils__WEBPACK_IMPORTED_MODULE_3__.wrapTag)("".concat(_moveGeneration_GameInformation_GameData__WEBPACK_IMPORTED_MODULE_1__.playerNames[color]), String(playerData.name)));
        }
      }
    } catch (err) {
      _iterator3.e(err);
    } finally {
      _iterator3.f();
    }
    return uniqueResultingTags.join("\n");
  }
});
var resultsTag = "Results";
var createResultsTag = () => ({
  tag: "results",
  currentValue: "",
  verifyTagInParsing(inputTag) {
    return (0,_Utils__WEBPACK_IMPORTED_MODULE_3__.tagNamesEqual)(inputTag, resultsTag);
  },
  parseTag(tagContents) {
    return (0,_Utils__WEBPACK_IMPORTED_MODULE_3__.unwrapTag)(tagContents, resultsTag);
  },
  serialize(board) {
    if (!board.gameData.result) return;
    return (0,_Utils__WEBPACK_IMPORTED_MODULE_3__.wrapTag)(resultsTag, board.gameData.result);
  }
});

/***/ }),

/***/ "./src/main/client/ts/logic/utils/Tags/TagLogic/VariantRulesTag.ts":
/*!*************************************************************************!*\
  !*** ./src/main/client/ts/logic/utils/Tags/TagLogic/VariantRulesTag.ts ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "createVariantRulesTag": () => (/* binding */ createVariantRulesTag)
/* harmony export */ });
/* harmony import */ var _moveGeneration_VariantRules_VariantRuleSetup__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @moveGeneration/VariantRules/VariantRuleSetup */ "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleSetup.ts");
/* harmony import */ var _Utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Utils */ "./src/main/client/ts/logic/utils/Tags/Utils.ts");
function _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }
function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }
function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }


var variantRulesTag = "RuleVariants";
var createVariantRulesTag = () => ({
  tag: "variantRules",
  currentValue: (0,_moveGeneration_VariantRules_VariantRuleSetup__WEBPACK_IMPORTED_MODULE_0__.createBaseParsingTypes)(),
  verifyTagInParsing(inputTag) {
    return (0,_Utils__WEBPACK_IMPORTED_MODULE_1__.tagNamesEqual)(inputTag, variantRulesTag);
  },
  parseTag(tagContents) {
    return (0,_moveGeneration_VariantRules_VariantRuleSetup__WEBPACK_IMPORTED_MODULE_0__.parseVariantRules)((0,_Utils__WEBPACK_IMPORTED_MODULE_1__.unwrapTag)(tagContents, variantRulesTag));
  },
  serialize(board) {
    var resultingRuleList = [];
    var _iterator = _createForOfIteratorHelper(board.variantRules),
      _step;
    try {
      for (_iterator.s(); !(_step = _iterator.n()).done;) {
        var rule = _step.value;
        var serializedForm = rule.serializeToParsingForm();
        if (serializedForm) {
          resultingRuleList.push(serializedForm);
        }
      }
    } catch (err) {
      _iterator.e(err);
    } finally {
      _iterator.f();
    }
    return (0,_Utils__WEBPACK_IMPORTED_MODULE_1__.wrapTag)(variantRulesTag, resultingRuleList.join(" "));
  }
});

/***/ }),

/***/ "./src/main/client/ts/logic/utils/Tags/Utils.ts":
/*!******************************************************!*\
  !*** ./src/main/client/ts/logic/utils/Tags/Utils.ts ***!
  \******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "parseEnPassantCoordinates": () => (/* binding */ parseEnPassantCoordinates),
/* harmony export */   "parseSingleCoordinate": () => (/* binding */ parseSingleCoordinate),
/* harmony export */   "tagNamesEqual": () => (/* binding */ tagNamesEqual),
/* harmony export */   "unwrapTag": () => (/* binding */ unwrapTag),
/* harmony export */   "wrapTag": () => (/* binding */ wrapTag)
/* harmony export */ });
function parseSingleCoordinate(coordinate) {
  if (coordinate.length === 0) return;
  var parsedCoordinate = [14 - Number(coordinate.slice(1)), coordinate.charCodeAt(0) - 97];
  if (Number.isNaN(parsedCoordinate[0]) || Number.isNaN(parsedCoordinate[1])) return;
  if (parsedCoordinate[0] < 0 || parsedCoordinate[0] > 13 || parsedCoordinate[1] < 0 || parsedCoordinate[1] > 13) return;
  return parsedCoordinate;
}
function parseEnPassantCoordinates(coordinates) {
  if (coordinates.length === 0) return;
  var coordinatesArray = coordinates.split(":");
  return [[14 - Number(coordinatesArray[0].slice(1)), coordinatesArray[0].charCodeAt(0) - 97], [14 - Number(coordinatesArray[1].slice(1)), coordinatesArray[1].charCodeAt(0) - 97]];
}
var wrapTag = (baseTag, content) => "[".concat(baseTag, " \"").concat(content, "\"]");
var tagNamesEqual = (baseTag, definedTag) => baseTag.toLowerCase().startsWith("[".concat(definedTag.toLowerCase(), " \""));
var unwrapTag = (baseTag, definedTag) => baseTag.replace("[".concat(definedTag, " \""), "").slice(0, -1);

/***/ }),

/***/ "./src/main/client/ts/utils/ObjectUtils.ts":
/*!*************************************************!*\
  !*** ./src/main/client/ts/utils/ObjectUtils.ts ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "copyClass": () => (/* binding */ copyClass),
/* harmony export */   "verifyObjectType": () => (/* binding */ verifyObjectType),
/* harmony export */   "verifyPropertiesInObject": () => (/* binding */ verifyPropertiesInObject)
/* harmony export */ });
function _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }
function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }
function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }
function copyClass(instance, baseClass) {
  var customProperties = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;
  var prototype = Object.getPrototypeOf(instance);
  if (typeof prototype !== "object") throw new Error("Expected prototype to be an object");
  var properties = Object.create(prototype);
  if (typeof properties !== "object" || properties === null) throw new Error("Expected prototype to be an object");
  var copy = Object.assign(properties, customProperties ? {} : instance);
  if (!(copy instanceof baseClass)) throw new Error("Expected prototype to not be overridden");
  return copy;
}
var verifyObjectType = v => typeof v === "object" && v !== null;
function verifyPropertiesInObject(obj, keys) {
  var _iterator = _createForOfIteratorHelper(keys),
    _step;
  try {
    for (_iterator.s(); !(_step = _iterator.n()).done;) {
      var key = _step.value;
      if (!Object.prototype.hasOwnProperty.call(obj, key)) return false;
    }
  } catch (err) {
    _iterator.e(err);
  } finally {
    _iterator.f();
  }
  return true;
}

/***/ }),

/***/ "./src/main/client/ts/utils/StringFormatUtils.ts":
/*!*******************************************************!*\
  !*** ./src/main/client/ts/utils/StringFormatUtils.ts ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "compileEnumeration": () => (/* binding */ compileEnumeration),
/* harmony export */   "convertCamelCaseToKebabCase": () => (/* binding */ convertCamelCaseToKebabCase),
/* harmony export */   "convertSecondsToFlexibleHoursMinutesSeconds": () => (/* binding */ convertSecondsToFlexibleHoursMinutesSeconds),
/* harmony export */   "formatOrdinalNumber": () => (/* binding */ formatOrdinalNumber),
/* harmony export */   "hashString": () => (/* binding */ hashString),
/* harmony export */   "prefixWithIndefiniteArticle": () => (/* binding */ prefixWithIndefiniteArticle)
/* harmony export */ });
function formatOrdinalNumber(num) {
  var lastTwoDigits = Number(String(num).slice(-2));
  if (lastTwoDigits > 3 && lastTwoDigits < 21) return "th";
  switch (lastTwoDigits % 10) {
    case 1:
      return "st";
    case 2:
      return "nd";
    case 3:
      return "rd";
    default:
      return "th";
  }
}
function compileEnumeration(list) {
  if (list.length === 0) return "";
  if (list.length === 1) return list[0];
  var result = "";
  for (var i = 0; i < list.length; i++) {
    if (i === list.length - 2) {
      result += " ".concat(list[i], " or ");
    } else if (i === list.length - 1) {
      result += list[i];
    } else {
      result += list[i] + ", ";
    }
  }
  return result;
}
function prefixWithIndefiniteArticle(str) {
  var vowels = /[AEUIO]/i;
  return vowels.test(str.charAt(0)) ? "an " + str : "a " + str;
}
function convertSecondsToFlexibleHoursMinutesSeconds(seconds) {
  if (seconds >= 3600) {
    return new Date(seconds * 1000).toISOString().substring(11, 16);
  } else {
    return new Date(seconds * 1000).toISOString().substring(14, 19);
  }
}
function convertCamelCaseToKebabCase(baseString) {
  return baseString.replace(/([a-z])([A-Z])/g, "$1-$2").toLowerCase();
}
function hashString(string) {
  var hash = 0;
  for (var i = 0; i < string.length; i++) {
    var char = string.charCodeAt(i);
    hash = (hash << 5) - hash + char;
    hash |= 0;
  }
  return hash;
}

/***/ }),

/***/ "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions sync recursive \\.ts$":
/*!******************************************************************************************!*\
  !*** ./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/ sync \.ts$ ***!
  \******************************************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var map = {
	"./BoardDecorators/AllowPassing.ts": "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/BoardDecorators/AllowPassing.ts",
	"./BoardDecorators/AlternativeTeams.ts": "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/BoardDecorators/AlternativeTeams.ts",
	"./BoardDecorators/BarePieceRule.ts": "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/BoardDecorators/BarePieceRule.ts",
	"./BoardDecorators/Blindfold.ts": "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/BoardDecorators/Blindfold.ts",
	"./BoardDecorators/CaptureTheKing.ts": "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/BoardDecorators/CaptureTheKing.ts",
	"./BoardDecorators/Chess960.ts": "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/BoardDecorators/Chess960.ts",
	"./BoardDecorators/Crazyhouse.ts": "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/BoardDecorators/Crazyhouse.ts",
	"./BoardDecorators/DuckChess.ts": "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/BoardDecorators/DuckChess.ts",
	"./BoardDecorators/FogOfWar.ts": "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/BoardDecorators/FogOfWar.ts",
	"./BoardDecorators/ForcedCapture.ts": "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/BoardDecorators/ForcedCapture.ts",
	"./BoardDecorators/GameMetadataRules.ts": "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/BoardDecorators/GameMetadataRules.ts",
	"./BoardDecorators/Ghostboard.ts": "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/BoardDecorators/Ghostboard.ts",
	"./BoardDecorators/ParadigmChess30.ts": "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/BoardDecorators/ParadigmChess30.ts",
	"./BoardDecorators/PiecesFaceCenter.ts": "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/BoardDecorators/PiecesFaceCenter.ts",
	"./BoardDecorators/SeirawanSetup.ts": "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/BoardDecorators/SeirawanSetup.ts",
	"./BoardDecorators/SelfCheck.ts": "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/BoardDecorators/SelfCheck.ts",
	"./BoardDecorators/SetupChess.ts": "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/BoardDecorators/SetupChess.ts",
	"./BoardDecorators/Taboo.ts": "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/BoardDecorators/Taboo.ts",
	"./BoardVariantModules/EngineMoveGeneration/Algorithms/ComfuterEvaluation.ts": "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/BoardVariantModules/EngineMoveGeneration/Algorithms/ComfuterEvaluation.ts",
	"./BoardVariantModules/EngineMoveGeneration/Algorithms/ComfuterEvaluationExtensions.ts": "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/BoardVariantModules/EngineMoveGeneration/Algorithms/ComfuterEvaluationExtensions.ts",
	"./BoardVariantModules/EngineMoveGeneration/Algorithms/MixedAlgorithms.ts": "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/BoardVariantModules/EngineMoveGeneration/Algorithms/MixedAlgorithms.ts",
	"./BoardVariantModules/EngineMoveGeneration/Algorithms/RandomEvaluation.ts": "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/BoardVariantModules/EngineMoveGeneration/Algorithms/RandomEvaluation.ts",
	"./BoardVariantModules/EngineMoveGeneration/Algorithms/RandomEvaluationExtensions.ts": "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/BoardVariantModules/EngineMoveGeneration/Algorithms/RandomEvaluationExtensions.ts",
	"./BoardVariantModules/EngineMoveGeneration/BotInterface.ts": "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/BoardVariantModules/EngineMoveGeneration/BotInterface.ts",
	"./BoardVariantModules/InsufficientMaterial/InsufficientMaterialChecker.ts": "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/BoardVariantModules/InsufficientMaterial/InsufficientMaterialChecker.ts",
	"./BoardVariantModules/InsufficientMaterial/InsufficientMaterialConstructor.ts": "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/BoardVariantModules/InsufficientMaterial/InsufficientMaterialConstructor.ts",
	"./BoardVariantModules/InsufficientMaterial/PieceMedianCounter.ts": "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/BoardVariantModules/InsufficientMaterial/PieceMedianCounter.ts",
	"./BoardVariantModules/InsufficientMaterial/StateSerializer.ts": "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/BoardVariantModules/InsufficientMaterial/StateSerializer.ts",
	"./BoardVariantModules/InsufficientMaterial/Utilities.ts": "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/BoardVariantModules/InsufficientMaterial/Utilities.ts",
	"./FENDataDecorators/Atomic.ts": "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/FENDataDecorators/Atomic.ts",
	"./FENDataDecorators/DeadKingWalking.ts": "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/FENDataDecorators/DeadKingWalking.ts",
	"./FENDataDecorators/EnPassant.ts": "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/FENDataDecorators/EnPassant.ts",
	"./FENDataDecorators/FatalCapture.ts": "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/FENDataDecorators/FatalCapture.ts",
	"./FENDataDecorators/FiftyMoveRule.ts": "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/FENDataDecorators/FiftyMoveRule.ts",
	"./FENDataDecorators/Giveaway.ts": "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/FENDataDecorators/Giveaway.ts",
	"./FENDataDecorators/KingOfTheHill.ts": "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/FENDataDecorators/KingOfTheHill.ts",
	"./FENDataDecorators/NCheck.ts": "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/FENDataDecorators/NCheck.ts",
	"./FENDataDecorators/OppositeMultiplier.ts": "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/FENDataDecorators/OppositeMultiplier.ts",
	"./FENDataDecorators/OppositeSideCastling.ts": "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/FENDataDecorators/OppositeSideCastling.ts",
	"./FENDataDecorators/PiecesGoToBanks.ts": "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/FENDataDecorators/PiecesGoToBanks.ts",
	"./FENDataDecorators/PlayForMate.ts": "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/FENDataDecorators/PlayForMate.ts",
	"./FENDataDecorators/PointsForMate.ts": "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/FENDataDecorators/PointsForMate.ts",
	"./FENDataDecorators/StalemateOptions.ts": "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/FENDataDecorators/StalemateOptions.ts",
	"./FENDataDecorators/Takeover.ts": "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/FENDataDecorators/Takeover.ts",
	"./FENDataDecorators/ThreefoldRepetition.ts": "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/FENDataDecorators/ThreefoldRepetition.ts",
	"./PieceControlDecorators/AnyCapture.ts": "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/PieceControlDecorators/AnyCapture.ts",
	"./PieceControlDecorators/PromoteTo.ts": "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/PieceControlDecorators/PromoteTo.ts",
	"./PieceControlDecorators/PromotionRank.ts": "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/PieceControlDecorators/PromotionRank.ts",
	"./PieceControlDecorators/RoyalsCannotCapture.ts": "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/PieceControlDecorators/RoyalsCannotCapture.ts",
	"./PieceControlDecorators/Sideways.ts": "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/PieceControlDecorators/Sideways.ts",
	"./PieceControlDecorators/Stonewall.ts": "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/PieceControlDecorators/Stonewall.ts",
	"./PieceControlDecorators/Torpedo.ts": "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions/PieceControlDecorators/Torpedo.ts"
};


function webpackContext(req) {
	var id = webpackContextResolve(req);
	return __webpack_require__(id);
}
function webpackContextResolve(req) {
	if(!__webpack_require__.o(map, req)) {
		var e = new Error("Cannot find module '" + req + "'");
		e.code = 'MODULE_NOT_FOUND';
		throw e;
	}
	return map[req];
}
webpackContext.keys = function webpackContextKeys() {
	return Object.keys(map);
};
webpackContext.resolve = webpackContextResolve;
module.exports = webpackContext;
webpackContext.id = "./src/main/client/ts/logic/movegen/VariantRules/VariantRuleDefinitions sync recursive \\.ts$";

/***/ })

}]);
//# sourceMappingURL=src_main_client_ts_logic_index_GameBoardWorker_ts.react-app.js.map