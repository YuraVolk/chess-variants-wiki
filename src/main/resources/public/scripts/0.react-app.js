(self.webpackChunkspring_react_app=self.webpackChunkspring_react_app||[]).push([[0,5],{3:(e,t,r)=>{"use strict";r.d(t,{w:()=>n});var n={doubleBackwardArrow:"!",downloadIcon:'"',endBackwardArrow:"#",forwardDoubleArrow:"α",userSearch:"$",userConnection:"%",notAllowed:"&",clock:"'",extraInformation:"(",authorshipNotice:")",draw:"+",backwardArrow:",",userInformation:"-",smallBackwardArrow:"/",leaderBoard:";",equal:"=",downwardArrow:"<",upperArrow:">",endForwardArrow:"@",urlAttached:"A",crossMark:"B",rightOutwardsArrow:"C",hashtag:"D",newspaper:"E",twitter:"F",checkMark:"G",camera:"H",alternativeLine:"I",play:"J",pause:"K",reload:"L",world:"M",points:"N",medal:"O",soundOff:"P",circleCrossMark:"Q",steadyEvaluation:"R",facebook:"S",circle:"T",soundOn:"U",plus:"V",openEye:"W",copyToClipboard:"X",wavingFlag:"Y",editText:"Z",fullArrowLeft:"[",fullArrowRight:"]",smallArrowForward:"\\",goBackArrow:"_",youtube:"`",calendar:"a",user:"b",chat:"c",lock:"d",box:"e",circularArrows:"f",lightBulb:"g",briefcase:"h",board:"i",knightArrows:"j",newMessage:"k",drawing:"l",twoUsers:"m",twoUsers2:"n",openingBook:"o",disclaimer:"p",ringingBell:"q",list:"r",rookAndPawn:"s",hamburgerList:"t",mail:"u",userExtraInformation:"v",house:"w",sheetAndPencil:"x",openMail:"y",chatBox:"z",fullArrowDown:"{",smallArrowUp:"|",fullArrowUp:"}",arrowIntoBox:"¡",key:"¢",file:"£",books:"¤",sharing:"¥",userNotAllowed:"¦",userCrossMark:"§",questionMark:"©",boardWithCircle:"«",googlePlus:"®",reset:"°",reddit:"±",openBook:"´",userPlus:"¶",cog:"·",pin:"»",suitcase:"¼",mark:"½",cake:"¾",openLink:"¿",bishopStroke:"Ä",linkedin:"Å",knight:"Ç",threeCheck:"Ë",chess960rapid:"Ñ",connection:"Õ",quotes:"Ö",exit:"×",crossedBinoculars:"Þ",leaderBoardReversed:"ß",bishopFull:"ä",printer:"å",verticalEvaluation:"ç",t:"ë",pawn:"í",twoPawns:"î",unrated:"ð",elite:"ñ",bug:"õ",cpu:"ö",forwardArrowCircle:"÷",squareCrossMark:"ü",android:"þ",twoUsersPlus:"ÿ",crossedArrows:"Đ",king:"Ā",kingFull:"ā",bishop:"Ă",twoFullRooks:"ă",kingStrokes:"Ą",fullKnight2:"ą",chess960:"Č",leaderBoardAscent:"č",crazyhouse:"Ď",checklist:"ď",target:"đ",pawnAndHalfRook:"Ē",halfRookAndPawn:"ē",knightStrokes:"Ė",pawnLogo:"Ę",queenFull:"ę",exchange:"Ě",userNext:"Ğ",userPrevious:"Ġ",compass:"ġ",pawnStrokes:"Ģ",rookStrokes:"ģ",screenDisplays:"Ħ",kingOfTheHill:"Ī",antichess:"ī",queen:"Į",threePawns:"į",queenStrokes:"Ķ",rookSmallStrokes:"Ļ",rookSmall:"Ľ",bishopPair:"Ł",rookPair:"Ņ",knightPair:"Ň",twoUsersSearch:"Ŋ",shield:"ŋ",kingSmall:"Ō",bishopSmall:"Ő",knightSmall:"Ŗ",userNoConnection:"Ř",userStream:"v",queenAlternative:"Ş",pawnAlternative:"Š",threePawnsAlternative:"Ţ",twoPawnsAlternative:"Ť",rookAlternative:"Ŧ",knightPairFull:"Ż",bishopPairFull:"Ž",addBoard:"ˆ",diamond:"Ͱ",scales:"ͱ",pawn3d:"Ͳ",userShieldPlus:"ͳ",gold:"Ͷ",ellipsis:"Ώ",analysis:"Δ",archive:"Θ",arrowBottomIntoBox:"Ξ",disclaimerEditor:"Σ",sendTrophy:"Υ",addCheckMark:"Φ",checkMarkSquare:"Ψ",squareStaircase:"ά",arrowsUpBottom:"έ",star:"ή",verticalDash:"ί",shieldCheckMark:"β",top3:"ε",addImage:"ζ",chessStream:"η",removeTrophy:"κ",importantMail:"λ",arrowLeave:"μ",donut:"ν",computerAnalysis:"ξ",checkMarkSquareSmall:"ο",diagonalExpandArrows:"π",leaderBoardHorizontal:"ρ",checkMarkAsCircle:"χ",arrowFromBox:"ϊ",boxArrowBottom:"ό",boxArrowLeft:"ύ",boxArrowRight:"ώ",fourArrowsCentral:"Ϙ",clashingSwords:"τ",ratingOffset:"υ",smilingFace:"ς",fileCabinet:"σ",editClock:"ϙ",userShield:"Ϛ",homeFilled:"ϛ",paymentCard:"Ϝ",fourArrowsOutwards:"ϝ",puzzle:"Ϟ",addPhoto:"ϟ",arrowWallLeft:"Ϡ",arrowWallRight:"ϡ",boardConfiguration:"Ϸ",fourBlocks:"ϸ",sandglass:"Ϻ",crown:"ϻ",cloudUpload:"Ẹ",webChatBox:"ẹ",puzzleRush:"Ẻ",knightHops:"ẻ",instagram:"ἀ",squarePlus:"ἁ",squareMinus:"ἂ",squareEqual:"ἃ",square:"ἄ",fireFull:"ἅ",pawnRecycle:"ἆ",noEngine:"ἇ",google:"Ἀ",fourPlayer:"Ἁ",pieceMeal:"Ἂ",arrowBoldUp:"Ἃ",arrowBoldDown:"Ἄ",blunder:"Ἅ",mistake:"Ἆ",videoChatBox:"Ἇ",bonesCrossed:"ἐ",displays:"ἑ",arrowEnter:"ἒ",newspaperHalf:"ἓ",bookmark:"ἔ",puzzleLarge:"ἕ",movePawn:"Ἐ",pawn3dLarge:"Ἑ",sun:"Ἒ",rapid:"Ἓ",blitz:"Ἔ",bullet:"Ἕ",mortarboard:"ἠ",laptop:"ἡ",resetWidth:"ἢ",pawnConnection:"ἣ",copyToClipboardFromText:"ἤ",fire:"ἥ",crownSmall:"ἦ",orderedList:"ἧ",chess960daily:"Ἠ",arrowWallBottom:"Ἡ",pawn3dBold:"Ἢ",plusInCircle:"Ἣ",lightCorner:"Ἤ",darkCorner:"Ἥ",steepCurve:"Ἦ",heart:"Ἧ",checkMarkThin:"ἰ",connectionDiagonal:"ἱ",diadem:"ἲ",plusMinus:"ἳ",recycling:"ἴ",metrics:"ἵ",top1:"ἶ",engineCheckMark:"ἷ",wikipedia:"Ἰ",tournament:"Ἱ",houseConfiguration:"Ἲ",computerHindsight:"Ἳ",computerCheckMark:"Ἴ",lightDarkTheme:"Ἵ",whistlingBell:"Ἶ",crossMarkCompact:"Ἷ",eyeCrossed:"ὀ",fide:"ὁ",favorite:"ὂ",tShirtPawn:"ὃ",addSmile:"ὄ",library:"ὅ",discord:"Ὀ",analysisCheckMark:"Ὁ",versusComputer:"Ὂ",dollarSign:"Ὃ",bestMove:"Ὄ",gift:"Ὅ",evaluationLinear:"ὐ",evaluationThrowaway:"ὑ",evaluationEqual:"ὒ",evaluationDead:"ὓ",evaluationSharp:"ὔ",evaluationPerplexing:"ὕ",evaluationSmooth:"ὖ",libraryAdd:"ὗ",selfPartner:"Ὑ",fourPlayerConfiguration:"Ὓ",listDownFlow:"Ὕ",puzzleBattle:"Ὗ",hyperbullet:"ὠ",gameLink:"ὡ",gameStudy:"ὢ",evaluationCrazy:"ὣ",engine:"ὤ",crossedSwordsInCircle:"ὥ",hallmark:"ὦ",like:"ὧ",boardTwoPlayers:"Ὠ",fourPlayerChess:"Ὡ",variants:"Ὢ",cloudUploadCompact:"Ὣ",clockIncrement:"Ὤ",videoCamera:"Ὥ",inaccuracy:"Ὧ",bot:"ὰ",torpedo:"ά",vk:"ὲ",blindfold:"έ",customSettings:"ή",captureAnything:"ὶ",pawnSideways:"ί",noCastling:"ὸ",fogOfWar:"ό",automate:"ὺ",atomic:"ύ",pawnCounterfeit:"ὼ",elephant:"ώ",fullBlock:"ᾀ",fourFullBlocks:"ᾁ",nineFullBlocks:"ᾂ",nineFullBlocksCrossed:"ᾃ",hamburgerMenuCompact:"ᾄ",listCompact:"ᾅ",geoMark:"ᾆ",crossedDonut:"ᾇ",handshake:"ᾈ",verified:"ᾉ",sandglassRunningOut:"ᾊ",rapidLowOnTime:"ᾋ",tourneyBanner:"ᾌ",noCloud:"ᾍ",fork:"ᾎ",donutTarget:"ᾏ",newCalendarDay:"ᾐ",cornerInfiltration:"ᾑ",hastTagCompact:"ᾒ",chatterbox:"ᾓ",circleStar:"ᾔ",targetPractice:"ᾕ",pawnPromotion:"ᾖ",flagProgression:"ᾗ",pawnDoubleAttack:"ᾘ",kingAndRook:"ᾙ",specialMedal:"ᾚ",pawnBanner:"ᾛ",userSquare:"ᾜ",verifiedCandidate:"ᾝ",saveFile:"ᾞ",duck:"ᾟ",addBanner:"ᾠ",qrCode:"ᾡ",noAnalysis:"ᾢ",dualPawn:"ᾣ",gameEscape:"ᾤ",tournamentCup:"ᾥ",noExchanges:"ᾦ",tikTok:"ᾰ",pieChart:"ᾱ",search:"–",binoculars:"—",largeBoard:"’",exclamation:"†",tournamentCupIcon:"‡",trashBin:"•",arrowForwardBoldCompact:"…",giftDiamond:"‹",filter:"›",noChat:"⁄",newSheet:"€",xml:"∞",blockUser:"∫",facebookLike:"≤",facebookDislike:"≥",apple:"◊",phone:""}},84:(e,t,r)=>{"use strict";r.d(t,{CG:()=>o,VS:()=>a,fJ:()=>n,fi:()=>i,h0:()=>l,lM:()=>s,s8:()=>c});var n=e=>"function"==typeof e,a=(e,t)=>Array.from({length:t}).fill(e),i=(e,t)=>Array.from({length:t},e),o=(e,t)=>e.length===t;function s(e){if(null==e)throw Error("Expected the data above to be anything but null or undefined")}function l(e){throw new TypeError("Unexpected argument that is supposed to be of type never")}function c(e){e.keys().forEach(e)}},552:(e,t,r)=>{"use strict";r.d(t,{TG:()=>a});var n=/^#(?:[0-9a-fA-F]{3}){1,2}$/,a=e=>{if(n.test(e))return e;throw new TypeError("The supplied hex color is not a hex color: "+e)}},12:(e,t,r)=>{"use strict";r.d(t,{BD:()=>i,ft:()=>s,sC:()=>o,x_:()=>l});var n=r(84),a=r(0),i=e=>(0,n.fi)((()=>(0,n.fi)(e,a.iJ)),a.iJ),o=e=>e%2==0;function s(e){var t=e%2;if(0!==t&&1!==t)throw Error("Invalid number passed: ".concat(e));return t}function l(e){var t=e%2^1;if(0!==t&&1!==t)throw Error("Invalid number passed: ".concat(e));return t}},66:(e,t,r)=>{"use strict";r(117);var n=r(9),a=r(0),i=r(7),o=r(5),s=r(1),l=r(95),c=r(75),u=r(84),f=r(8);function d(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return p(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return p(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw i}}}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function h(e,t){var r,n=t[0];if((0,o.$j)(n))r=e.getLegalMoves(n.startCoordinates[0],n.startCoordinates[1]);else if((0,o.x7)(n))r=e.getDroppingMoves(n.piece);else{if(!(0,o.LR)(n))throw Error("Unexpected move signature encountered: ".concat(JSON.stringify(t)));r=e.getAllowedInternalMoves()}var a={hasEnPassant:!1};if(e.variantData.duckChess&&1===t.length)return!1;var i,s=d(t);try{var l=function(){var e=i.value,t=r.find((t=>(0,o.JG)(t,e)));if(!t)return{v:!1};(0,o.$j)(t)&&t.specialType===o.uj.EnPassant&&(a.hasEnPassant=!0),t.nextChainedMoves&&(r=t.nextChainedMoves)};for(s.s();!(i=s.n()).done;){var c=l();if("object"==typeof c)return c.v}}catch(e){s.e(e)}finally{s.f()}return a}var v=r(23);function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){g(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function g(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function b(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return P(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return P(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw i}}}}function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function w(e,t){var r=e.createClone();r.moves=(0,v.g7)(r.createSnapshot()),r.pregenerateAttacks();var n=Math.max(...r.data.fenOptions.tag("dim"));return function t(s){for(var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,f=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(0,u.VS)(e.gameData.timeControl.baseTime,a.q3),d=-1,p=0;p<s.length;p++){var y=s[p],g=y.moveData,P=y.path,w=y.alternativeLines,S=(0,o.Zp)({moveData:g,path:P.slice()},{comment:y.comment}),C=void 0;try{if(!(C=h(r,g)||void 0))break;S.moveData=g}catch(e){break}var O,A=!1,T=b(g);try{for(T.s();!(O=T.n()).done;){var M=O.value;(0,o.$j)(M)&&(M.promotion&&(M.promotion=M.promotion.map((e=>e.isWall()?e:(0,i.HC)(r.data.sideToMove,e.piece)))),A||(S.metadata.movingPiece=r.board[M.startCoordinates[0]][M.startCoordinates[1]],A=!0),C.hasEnPassant&&(M.specialType=o.uj.EnPassant,C.hasEnPassant=!1,S.metadata.isCapture=!0),r.data.getCapturedPieces(M).length>0&&(S.metadata.isCapture=!0))}}catch(e){T.e(e)}finally{T.f()}0!==p&&(0,l.qr)(r.data.fenOptions.tag("dead"),(e=>!e))!==d||(S.metadata.currentFullMove=++c),S.metadata.currentSideToMove=d=r.data.sideToMove;for(var j=r.makeMove(g),k=0;k<a.q3;k++)j.checkmates[k]?S.metadata.checkmates++:j.checks[k]&&S.metadata.checks++;var D,x=b(w);try{for(x.s();!(D=x.n()).done;){var E=D.value;S.alternativeLines.push(t(E,c,[...f]))}}catch(e){x.e(e)}finally{x.f()}y.metadata.playerClock&&(f[d]-=y.metadata.playerClock),S.metadata=m({},y.metadata),S.metadata.playerClock=f[d];var R=r.moves.getMove(S.path);(0,v.RR)(R),R.metadata=S.metadata,R.comment=y.comment,r.moves.stringifyMove(R,n)}return[]}(t.moves),r.moves}function S(e){var t=e.moves.getMove([e.moves.moves.length-1]),r=e.moves.getBoardSnapshot((0,v.xn)(t)?t:-1);if((0,u.lM)(r),r.boardSnapshot.data.gameOver){if(e.gameData.termination=r.boardSnapshot.data.gameOver,e.gameData.result)return;if(e.isTwoPlayer||e.gameType.type===a.Jy.Teams){var n=e.createSnapshot();e.loadSnapshot(r.boardSnapshot),e.gameData.result=e.data.getCurrentResult(),e.loadSnapshot(n)}else{var i,o=[],s=e.data.fenOptions.tag("dead"),l=e.data.fenOptions.tag("resigned"),c=e.data.fenOptions.tag("wb"),f=r.boardSnapshot.data.points,d=b(a.O9);try{for(d.s();!(i=d.n()).done;){var p=i.value;s[p]||l[p]||o.push("".concat((0,a.oh)(p,c),": ").concat(f[p]))}}catch(e){d.e(e)}finally{d.f()}e.gameData.result=o.join(" – ")}}}var C,O,A,T,M,j,k,D,x,E,R,I,N,F,B,V,G,q,$,K,L,J,z,_,U,W,H,Q,Y,Z,X,ee,te,re=r(39),ne=r(56),ae=r(57);function ie(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function oe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ie(Object(r),!0).forEach((function(t){ce(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ie(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function se(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return le(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return le(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw i}}}}function le(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function ce(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ue(e,t,r,n,a){var i={};return Object.keys(n).forEach((function(e){i[e]=n[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),i),a&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(a):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}var fe=[],de=[],pe={};function he(){return function(e,t,r){var n=r.value;(0,u.lM)(n),r.value=function(){for(var e=arguments.length,r=Array(e),a=0;a<e;a++)r[a]=arguments[a];postMessage([t,n.apply(this,r)])}}}function ve(e,t){return function(r,n){"required"===e?(de.push(n),fe.push(n)):de.push(n),pe[n]=t}}var ye=(C=he(),O=ve("required","publicFENSettings"),A=he(),T=ve("initial","initiallyAliveColors"),M=he(),j=ve("required","moveTree"),k=he(),D=he(),x=he(),E=ve("required","serializedPGN"),R=he(),I=he(),N=he(),F=ve("required","allowedInternalMoves"),B=he(),V=ve("initial","variantDataRules"),G=he(),q=ve("required","boardSquares"),$=he(),K=ve("required","gameData"),L=he(),J=ve("required","currentMove"),z=he(),_=ve("initial","variantRules"),U=he(),W=ve("initial","variantType"),H=he(),Q=he(),Y=he(),Z=he(),X=ve("required","squareVisibility"),ee=he(),ue((te=class{constructor(){ce(this,"board",void 0),ce(this,"initiallyAliveColors",[]),ce(this,"internalMoves",[]),ce(this,"legalMoves",new Map),ce(this,"fogOfWarPerspective",!1)}stripPieceStrings(e){return JSON.parse(JSON.stringify(e))}generateInitiallyAliveColors(){return this.board.data.fenOptions.tag("dead").map((e=>!e)).reduce(((e,t,r)=>t?[...e,r]:e),[])}generateCurrentMoves(){this.internalMoves=this.board.getAllowedInternalMoves(),this.legalMoves=new Map;var e,t=se(this.board.getPlayerPieces()[this.board.data.sideToMove]);try{for(t.s();!(e=t.n()).done;){var r=e.value;this.legalMoves.set((0,f.Kv)(r),this.board.getLegalMoves(r[0],r[1]))}}catch(e){t.e(e)}finally{t.f()}}construct(e,t){this.board=new n.$(t),this.board=(0,s.I)(this.board,n.$,this.board.variantRules.boardDecorators),this.generateInitiallyAliveColors();var r=new re.InsufficientMaterialConstructor(this.board,(e=>{this.board.insufficientMaterialChecker=new ne.InsufficientMaterialChecker(e,this.board),this.board.moves=w(this.board,this.board.moves),this.board.moves.currentMove=[-1],S(this.board),this.generateCurrentMoves(),postMessage(["construct",ae.serializeInsufficientMaterialState(e)])}));return r.generateInsufficientMaterialState(),ae.serializeInsufficientMaterialState(r.state)}constructWithGeneratedData(e,t){this.board=new n.$(e),this.board=(0,s.I)(this.board,n.$,this.board.variantRules.boardDecorators),this.generateInitiallyAliveColors(),this.board.insufficientMaterialChecker=new ne.InsufficientMaterialChecker((0,ae.deserializeInsufficientMaterialState)(t),this.board),this.board.moves=w(this.board,this.board.moves),this.board.moves.currentMove=[-1],S(this.board),this.generateCurrentMoves()}getFENSettings(){var e,t=this.board,r=(0,u.VS)(0,a.q3),n=!1,i=se(this.board.board);try{for(i.s();!(e=i.n()).done;){var o,s=se(e.value);try{for(s.s();!(o=s.n()).done;){var l=o.value;if(l.isPiece()&&"K"===l.piece&&++r[l.color]>1){n=!0;break}}}catch(e){s.e(e)}finally{s.f()}if(n)break}}catch(e){i.e(e)}finally{i.f()}var c=[...t.data.points];return{sideToMove:t.data.sideToMove,points:c,isCustomRoyals:n,fenOptions:t.data.fenOptions.createSerializedState()}}getInitiallyAliveColors(){return this.initiallyAliveColors}getMoveTree(){return function e(t){var r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=[],i=se(t);try{for(i.s();!(r=i.n()).done;){var o=r.value,s={alternativeLines:[],comment:o.comment,path:o.path.slice(),cachedNames:oe({},o.cachedNames),metadata:{currentSideToMove:o.metadata.currentSideToMove,playerClock:o.metadata.playerClock,highlightedArrows:o.metadata.highlightedArrows,highlightedSquares:o.metadata.highlightedSquares}};o.metadata.currentFullMove&&(s.metadata.currentFullMove=o.metadata.currentFullMove);var l,c=se(o.alternativeLines);try{for(c.s();!(l=c.n()).done;){var u=l.value;s.alternativeLines.push(e(u,n-1))}}catch(e){c.e(e)}finally{c.f()}a.push(s)}}catch(e){i.e(e)}finally{i.f()}return a}(this.board.moves.moves)}loadSnapshotByPath(e){var t;if((0,l.Rt)(e,[-1])){var r=this.board.moves.getBoardSnapshot(-1);(0,u.lM)(r),t=r}else{var n=this.board.moves.getMove(e);(0,v.RR)(n);var a=this.board.moves.getBoardSnapshot(n);if(!a)return!1;t=a}return this.board.loadSnapshot(t.boardSnapshot),this.board.moves.currentMove=[...e],this.generateCurrentMoves(),!0}verifyNextChainedMovesAreDeleted(e){return!("nextChainedMoves"in e)}convertStrippedMoveToNormal(e){var t,r=[],n=se(e);try{for(n.s();!(t=n.n()).done;){var a,s=t.value;if(delete s.nextChainedMoves,!this.verifyNextChainedMovesAreDeleted(s))throw Error("Could not delete nextChainedMoves in move component");if((0,o.$j)(s))r.push(oe(oe({},s),{},{promotion:null===(a=s.promotion)||void 0===a?void 0:a.map((e=>i.Ff.fromObjectToClass(e)))}));else(0,o.x7)(s)?r.push(oe(oe({},s),{},{piece:i.Ff.fromObjectToClass(s.piece)})):r.push(s)}}catch(e){n.e(e)}finally{n.f()}if(!(0,o.nc)(r))throw Error("Supplied move object had 0 move components");return r}makeMove(e){var t=this.board,r=this.convertStrippedMoveToNormal(e);t.moves.augmentMoveWithMetadata({move:r,board:t,makeMoveFunction:()=>t.makeMove(r)}),this.generateCurrentMoves()}serializeBoardToPGN(){return(0,c.V)(this.board)}getDroppingMoves(e){return this.board.data.gameOver?[]:this.stripPieceStrings(this.board.getDroppingMoves(i.Ff.fromObjectToClass(e)))}getLegalMoves(e,t){var r;return this.board.data.gameOver?[]:this.stripPieceStrings(null!==(r=this.legalMoves.get((0,f.Kv)([e,t])))&&void 0!==r?r:this.board.getLegalMoves(e,t))}getInternalMoves(){return this.board.data.gameOver?[]:this.stripPieceStrings(this.internalMoves)}getVariantData(){return this.stripPieceStrings(this.board.variantData)}getBoard(){return this.board.board.map((e=>e.map((e=>e.toObject()))))}getGameData(){var e=oe({},this.board.gameData);return"object"==typeof e.date&&(e.date=e.date.toUTCString()),e}getCurrentMove(){return this.board.moves.currentMove}getVariantRules(){var e,t=[],r=se(this.board.variantRules);try{for(r.s();!(e=r.n()).done;){var n=e.value;t.push(n.getPublicProperties())}}catch(e){r.e(e)}finally{r.f()}return t}getVariantType(){return this.board.gameType.type}deleteMove(e){0!==this.board.moves.moves.length&&this.board.moves.deleteMove(e)}playPreferredBotMove(){if(!(this.board.data.getRealPlayers()<=1)){var e,t=[],r=se(this.board.getPlayerPieces()[this.board.data.sideToMove]);try{for(r.s();!(e=r.n()).done;){var n,a=e.value;t.push(...null!==(n=this.legalMoves.get((0,f.Kv)(a)))&&void 0!==n?n:this.board.getLegalMoves(a[0],a[1]))}}catch(e){r.e(e)}finally{r.f()}t.push(...this.board.preGeneratedAttacks[this.board.data.sideToMove].pieceDrops.piece),t.push(...this.board.preGeneratedAttacks[this.board.data.sideToMove].pieceDrops.pawn),t.push(...this.internalMoves);var i=this.board.data.fenOptions.getDefaultZombieAlgorithm(this.board.data.sideToMove),o=i.evaluate(t,this.board);return this.stripPieceStrings(i.pickPreferredMove(o))}}changeFogPerspective(){if(!this.board.variantData.fogOfWar||this.board.data.getRealPlayers()<=1)return this.fogOfWarPerspective;if(!1===this.fogOfWarPerspective)this.fogOfWarPerspective=this.board.data.sideToMove;else{var e=this.board.data.nextTurn(this.fogOfWarPerspective);e===this.board.data.sideToMove?this.fogOfWarPerspective=!1:this.fogOfWarPerspective=e}return this.fogOfWarPerspective}getSquareVisibility(){if(!1===this.fogOfWarPerspective)return this.board.getSquareVisibility();var e=this.board.data.sideToMove;this.board.data.sideToMove=this.fogOfWarPerspective;var t=this.board.getSquareVisibility();return this.board.data.sideToMove=e,t}}).prototype,"constructWithGeneratedData",[C],Object.getOwnPropertyDescriptor(te.prototype,"constructWithGeneratedData"),te.prototype),ue(te.prototype,"getFENSettings",[O,A],Object.getOwnPropertyDescriptor(te.prototype,"getFENSettings"),te.prototype),ue(te.prototype,"getInitiallyAliveColors",[T,M],Object.getOwnPropertyDescriptor(te.prototype,"getInitiallyAliveColors"),te.prototype),ue(te.prototype,"getMoveTree",[j,k],Object.getOwnPropertyDescriptor(te.prototype,"getMoveTree"),te.prototype),ue(te.prototype,"loadSnapshotByPath",[D],Object.getOwnPropertyDescriptor(te.prototype,"loadSnapshotByPath"),te.prototype),ue(te.prototype,"makeMove",[x],Object.getOwnPropertyDescriptor(te.prototype,"makeMove"),te.prototype),ue(te.prototype,"serializeBoardToPGN",[E,R],Object.getOwnPropertyDescriptor(te.prototype,"serializeBoardToPGN"),te.prototype),ue(te.prototype,"getDroppingMoves",[I],Object.getOwnPropertyDescriptor(te.prototype,"getDroppingMoves"),te.prototype),ue(te.prototype,"getLegalMoves",[N],Object.getOwnPropertyDescriptor(te.prototype,"getLegalMoves"),te.prototype),ue(te.prototype,"getInternalMoves",[F,B],Object.getOwnPropertyDescriptor(te.prototype,"getInternalMoves"),te.prototype),ue(te.prototype,"getVariantData",[V,G],Object.getOwnPropertyDescriptor(te.prototype,"getVariantData"),te.prototype),ue(te.prototype,"getBoard",[q,$],Object.getOwnPropertyDescriptor(te.prototype,"getBoard"),te.prototype),ue(te.prototype,"getGameData",[K,L],Object.getOwnPropertyDescriptor(te.prototype,"getGameData"),te.prototype),ue(te.prototype,"getCurrentMove",[J,z],Object.getOwnPropertyDescriptor(te.prototype,"getCurrentMove"),te.prototype),ue(te.prototype,"getVariantRules",[_,U],Object.getOwnPropertyDescriptor(te.prototype,"getVariantRules"),te.prototype),ue(te.prototype,"getVariantType",[W,H],Object.getOwnPropertyDescriptor(te.prototype,"getVariantType"),te.prototype),ue(te.prototype,"deleteMove",[Q],Object.getOwnPropertyDescriptor(te.prototype,"deleteMove"),te.prototype),ue(te.prototype,"playPreferredBotMove",[Y],Object.getOwnPropertyDescriptor(te.prototype,"playPreferredBotMove"),te.prototype),ue(te.prototype,"changeFogPerspective",[Z],Object.getOwnPropertyDescriptor(te.prototype,"changeFogPerspective"),te.prototype),ue(te.prototype,"getSquareVisibility",[X,ee],Object.getOwnPropertyDescriptor(te.prototype,"getSquareVisibility"),te.prototype),te),me=new ye;self.onmessage=e=>{e.data.requestName in ye.prototype&&ye.prototype[e.data.requestName].apply(me,e.data.parameters)}},9:(e,t,r)=>{"use strict";r.d(t,{$:()=>k,i:()=>j});var n=r(84),a=r(12),i=r(23),o=r(5),s=r(10),l=r(0),c=r(11),u=r(7),f=r(1),d=r(33),p=r(15),h=r(6);function v(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class y{constructor(e){v(this,"_control",void 0),v(this,"_isConfigured",void 0),this._control=e,this._isConfigured={coordinates:[0,0],board:(0,a.BD)((()=>u.v2)),immunePieces:(0,n.VS)(!1,l.q3),color:0}}setCoordinates(e,t){return this._isConfigured.coordinates=[e,t],this}setBaseImmunePieces(e){return this._isConfigured.immunePieces=e,this}setColor(e){return this._isConfigured.color=e,this}setBoard(e){return this._isConfigured.board=e,this}constructPieceControl(){return this._control.configure(this._isConfigured),this._control}}class m{constructor(){v(this,"_generalConfig",void 0),this._generalConfig={}}setFENData(e){this._generalConfig.fenData=e}setVariantRules(e){this._generalConfig.variantRules=e}createPieceControlWrap(e){var t=new h.Gf[e].construct;if(!this._generalConfig.fenData||!this._generalConfig.variantRules)throw Error("PieceControl builder setup is not complete");t.setFENData(this._generalConfig.fenData);var r=(0,f.I)(t,p.V,(0,d.KH)(this._generalConfig.variantRules));return()=>new y(r)}}var g=r(560),b=r(8),P=r(564),w=r(75);function S(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i,o,s=[],l=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(c)throw a}}return s}}(e,t)||A(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function O(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=A(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw i}}}}function A(e,t){if(e){if("string"==typeof e)return T(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?T(e,t):void 0}}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function M(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}(0,g.D)();var j=(0,n.VS)(!1,l.q3);class k{initDecoratorSettings(){}constructor(e){M(this,"controls",{}),M(this,"data",void 0),M(this,"moves",void 0),M(this,"preGeneratedAttacks",(0,n.fi)(b.RN,l.q3)),M(this,"board",void 0),M(this,"isComplexSetup",(0,b.Ov)()),M(this,"gameData",void 0),M(this,"gameType",(0,b.Bd)()),M(this,"variantRules",void 0),M(this,"variantData",void 0),M(this,"isTwoPlayer",void 0),M(this,"insufficientMaterialChecker",void 0),M(this,"__baseClass",void 0),this.__baseClass=this;var t=(0,w.W)(e);this.gameType.type=t.gameType,this.variantRules=t.variantRules,this.gameData=t.gameData,this.board=t.board,this.data=t.fenData,this.data.injectBoard(this),this.data=(0,f.I)(this.data,s.c,this.variantRules.fenDataDecorators),this.variantData=t.variantRuleData,this.variantRules=(0,d.xU)(this),this.isTwoPlayer=2===this.data.getRealPlayers(),this.initPieceControls(t.pieceSet),this.moves=(0,i.g7)(this.createSnapshot()),this.moves.moves=t.moves,this.pregenerateAttacks()}initPieceControls(e){if(0!==e.size){var t=new m;t.setFENData(this.data),t.setVariantRules(this.variantRules.pieceControlDecorators);var r,n=O(e);try{for(n.s();!(r=n.n()).done;){var a=r.value,i=t.createPieceControlWrap(a);this.controls[a]=i}}catch(e){n.e(e)}finally{n.f()}}}getSquareVisibility(){return(0,a.BD)((()=>[]))}createSnapshot(){return{data:this.data.createSnapshot(),board:this.board.map((e=>[...e])),isComplexSetup:Object.assign({},this.isComplexSetup)}}loadSnapshot(e){this.isComplexSetup=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?C(Object(r),!0).forEach((function(t){M(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):C(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e.isComplexSetup),this.data.loadSnapshot(e.data),this.board=e.board.map((e=>[...e])),this.pregenerateAttacks(),this.runComplexLegalityEvaluationChecks()}createClone(){var e=(0,P.lJ)(this.__baseClass,k);e.board=this.board.map((e=>[...e])),e.isComplexSetup=Object.assign({},this.isComplexSetup),e.preGeneratedAttacks=(0,n.fi)(b.RN,l.q3),e.data=this.data.createClone(),(e=(0,f.I)(e,k,(0,d.KH)(this.__baseClass.variantRules.boardDecorators))).data.injectBoard(e),e.data=(0,f.I)(e.data,s.c,(0,d.KH)(this.__baseClass.variantRules.fenDataDecorators));var t,r=new Set;for(t in this.controls)Object.prototype.hasOwnProperty.call(this.controls,t)&&r.add(t);return e.initPieceControls(r),e.pregenerateAttacks(),e}isKingInCheck(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.data.fenOptions.tag("royal"))[e];if(!t||this.data.fenOptions.tag("dead")[e])return!1;var r=t;return!(!this.preGeneratedAttacks[e].slidingPieces[r[0]][r[1]]&&!this.preGeneratedAttacks[e].hoppingPieces[r[0]][r[1]])}getPlayerPieces(){for(var e=[[],[],[],[]],t=0;t<l.iJ;t++)for(var r=0;r<l.iJ;r++){var n=this.board[t][r];if(!n.isEmpty()){var a=n.color;a!==u.Ir&&e[a].push([t,r])}}return e}getCheckmatesAndStalemates(){var e=this.data.fenOptions.tag("dead"),t=this.data.fenOptions.tag("royal"),r=(0,n.VS)(!1,l.q3),a=(0,n.VS)(!1,l.q3),i=this.getPlayerPieces();a[this.data.sideToMove]=!0;var o,s=O(l.O9);try{for(s.s();!(o=s.n()).done;){var c=o.value;if(!e[c]){var u=i[c];this.isKingInCheck(c)&&(r[c]=!0);var f,d=O(u);try{for(d.s();!(f=d.n()).done;){var p=f.value;if(this.getLegalMoves(p[0],p[1],c).length){a[c]=!0;break}}}catch(e){d.e(e)}finally{d.f()}a[c]||(this.preGeneratedAttacks[c].pieceDrops.pawn.length||this.preGeneratedAttacks[c].pieceDrops.piece.length)&&(a[c]=!0)}}}catch(e){s.e(e)}finally{s.f()}var h=t.map(((t,r)=>!(e[r]||!t)&&(this.board[t[0]][t[1]].isEmpty()||this.board[t[0]][t[1]].color!==r)));return{checkmates:a.map(((e,t)=>h[t]||!e&&r[t])),stalemates:a.map(((e,t)=>!e&&!r[t])),checks:r}}runComplexLegalityEvaluationChecks(){if(!this.isComplexSetup.hasComplexRules)for(var e=0;e<l.iJ;e++)for(var t=0;t<l.iJ;t++){var r=this.board[e][t];if(r.isPiece()&&h.Gf[r.piece].moveGenerationSettings.isComplex)return void(this.isComplexSetup.hasComplexPieces=!0)}}getCurrentChecks(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.data.sideToMove,r=this.data.fenOptions.tag("dead"),a=this.data.fenOptions.tag("resigned"),i=this.data.fenOptions.tag("royal").map(((e,t)=>!e||r[t]||a[t]?null:e)),o=(0,n.fi)((()=>[]),l.q3),s=O(this.preGeneratedAttacks[t].pieceMovements);try{for(s.s();!(e=s.n()).done;){var c,u=S(e.value,2),f=u[0],d=O(u[1]);try{for(d.s();!(c=d.n()).done;){var p,h=c.value,v=O(l.O9);try{for(v.s();!(p=v.n()).done;){var y=p.value;if(y!==t){var m=i[y];m&&(0,b.ef)(m,h.move)&&o[y].push(f)}}}catch(e){v.e(e)}finally{v.f()}}}catch(e){d.e(e)}finally{d.f()}}}catch(e){s.e(e)}finally{s.f()}return o}makeMove(e){for(var t,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.data.sideToMove,a=this.preGeneratedAttacks,i=0;i<e.length;i++)i===e.length-1?t=this.data.affectOptions(e[i],{ignoreCheckmateChecks:r,ignoreNextTurn:!1}):this.data.affectOptions(e[i],{ignoreCheckmateChecks:r,ignoreNextTurn:!0});if(this.runComplexLegalityEvaluationChecks(),r)return t;var s=this.moves.currentMove.slice();return s[s.length-1]++,this.moves.currentMove=this.moves.setNewMove({move:(0,o.Zp)({path:s,moveData:e}),snapshot:{boardSnapshot:this.createSnapshot(),pregeneratedAttacks:a[n]},fenDataString:this.moves.constructPreliminaryHashString(this)}),this.data.gameOver||1===this.data.getRealPlayers()||(t.checkmates[this.data.sideToMove]?t=this.makeMove([{type:o.Fi.TeamsCheckmate}],!0):t.stalemates[this.data.sideToMove]&&(t=this.makeMove([{type:o.Fi.Stalemate}]))),t}pregenerateAttacks(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.data.fenOptions.tag("royal");this.preGeneratedAttacks=(0,n.fi)(b.RN,l.q3),this.getPlayerPieces().forEach(((r,n)=>{if(!1===e||e===n){var a,i=this.preGeneratedAttacks[n],o=O(r);try{for(o.s();!(a=o.n()).done;){var s=a.value,f=this.board[s[0]][s[1]];if(f.isPiece()){var d=f.color,p=f.piece,v=this.controls[p]().setColor(d).setCoordinates(s[0],s[1]).setBoard(this.board),y=h.Gf[f.piece],m=[],g=v.setBaseImmunePieces(this.gameType.getBaseColors(d)).constructPieceControl();if(m.push(...g.getPseudoLegalMoves()),g=v.setBaseImmunePieces(j).constructPieceControl(),y.moveGenerationSettings.isJumping){var P,w=O(g.rayGenJumpingAttacks());try{for(w.s();!(P=w.n()).done;){var S,C=P.value.move,A=O(l.O9);try{for(A.s();!(S=A.n()).done;){var T=S.value;if(T!==n){var M=this.preGeneratedAttacks[T];M.hoppingPieces[C[0]][C[1]]++,M.hoppingPieceLines.push([s,C]);var k=M.attackingColors[C[0]][C[1]];~k&&M.attackingColors[C[0]][C[1]]!==T+1&&(M.attackingColors[C[0]][C[1]]=0===k?1+T:-1)}}}catch(e){A.e(e)}finally{A.f()}}}catch(e){w.e(e)}finally{w.f()}}if(y.moveGenerationSettings.isSliding){var D,x=O(g.rayGenSlidingAttacks());try{for(x.s();!(D=x.n()).done;){var E,R=D.value,I=O(l.O9);try{for(I.s();!(E=I.n()).done;){var N=E.value;if(N!==n){var F,B=this.preGeneratedAttacks[N],V=O(R);try{for(V.s();!(F=V.n()).done;){var G=F.value.move;B.slidingPieces[G[0]][G[1]]++;var q=B.attackingColors[G[0]][G[1]];~q&&B.attackingColors[G[0]][G[1]]!==N+1&&(B.attackingColors[G[0]][G[1]]=0===q?1+N:-1)}}catch(e){V.e(e)}finally{V.f()}if(0!==R.length)B.slidingPiecesLines.push([s,R.map((e=>e.move))]);else{B.slidingPiecesLines.push([s,[]])}}}}catch(e){I.e(e)}finally{I.f()}}}catch(e){x.e(e)}finally{x.f()}var $,K=O(g.rayGenSlidingAttacks(h.hK.RayTraceLimited));try{for(K.s();!($=K.n()).done;){var L,J=$.value,z=O(l.O9);try{for(z.s();!(L=z.n()).done;){var _=L.value;if(_!==n){var U=this.preGeneratedAttacks[_];if(0!==J.length){var W,H=!1,Q=[],Y=O(J);try{for(Y.s();!(W=Y.n()).done;){var Z,X=W.value.move;Q.push(X),H?U.slidingPieces[X[0]][X[1]]++:(0,b.ef)(null!==(Z=t[_])&&void 0!==Z?Z:[-1,-1],X)&&(H=!0)}}catch(e){Y.e(e)}finally{Y.f()}U.slidingPiecesRayTracing.push([s,J.map((e=>e.move))])}else U.slidingPiecesLines.push([s,[]])}}}catch(e){z.e(e)}finally{z.f()}}}catch(e){K.e(e)}finally{K.f()}}i.pieceMovements.set((0,b.Kv)(s),m)}}}catch(e){o.e(e)}finally{o.f()}i.pieceDrops.piece=this.getDroppingMoves((0,u.HC)(n,c.KR.wall)),i.pieceDrops.pawn=this.getDroppingMoves((0,u.HC)(n,u.Fb.piece))}}))}isSetupComplex(){return this.isComplexSetup.hasComplexPieces||this.isComplexSetup.hasComplexRules||this.data.isComplexEvaluation()}isTheMoveLegal(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=this.data.fenOptions.tag("royal"),a=S(t.startCoordinates,2),i=a[0],o=a[1],s=S(t.endCoordinates,2),c=s[0],f=s[1],d=n[e];if(!this.board[c][f].isEmpty()&&d&&c===d[0]&&f===d[1])return!1;if(this.isSetupComplex()){var p=this.createSnapshot(),h=[{startCoordinates:[i,o],endCoordinates:[c,f]}];r&&h.push({piece:u.cG,endCoordinates:[i,o]});var v=this.makeMove(h,!0),y=v.checks,m=v.checkmates,g=y[e]||m[e];return g||(this.pregenerateAttacks(e),g=this.isKingInCheck(e)),this.loadSnapshot(p),!g}var P=S(null!=d?d:[null,null],2),w=P[0],C=P[1],A=this.preGeneratedAttacks[e];if(null===w)return!0;var T,M=w===i&&C===o,j=A.hoppingPieces[w][C]+A.slidingPieces[w][C],k=A.slidingPieces[c][f]+A.hoppingPieces[c][f]===0,D={canKingCapture:void 0},x=O(l.O9);try{for(x.s();!(T=x.n()).done;){var E=T.value,R=n[E];if(E!==e&&R&&R[0]===c&&R[1]===f){var I=A.attackingColors[R[1]][R[0]];I!==E+1&&0!==I||!M&&A.attackingColors[w][C]!==E+1||(D.canKingCapture=E+1)}}}catch(e){x.e(e)}finally{x.f()}if(!this.gameType.isFFA()&&void 0!==D.canKingCapture)return!0;var N,F=O(A.slidingPiecesRayTracing);try{for(F.s();!(N=F.n()).done;){var B,V=S(N.value,2),G=V[0],q=V[1],$=!1,K=!1,L=!1,J=O(q);try{for(J.s();!(B=J.n()).done;){var z=S(B.value,2),_=z[0],U=z[1];if($||_!==i||U!==o?L||K||_!==c||U!==f||(L=!0):$=!0,K||_!==w||U!==C||(K=!0),M){if(K&&_===c&&U===f){if(D.canKingCapture&&D.canKingCapture>0&&this.board[_][U].color+1===D.canKingCapture)continue;return!1}}else if($&&K&&!(0,b.ef)(G,t.endCoordinates)&&!L){if(D.canKingCapture&&D.canKingCapture>0&&this.board[_][U].color+1===D.canKingCapture)continue;return!1}}}catch(e){J.e(e)}finally{J.f()}}}catch(e){F.e(e)}finally{F.f()}if(j>1)return M&&k||!!D.canKingCapture;if(1===j){if(M)return k||!!D.canKingCapture;if(1===A.hoppingPieces[w][C]){var W,H=O(A.hoppingPieceLines);try{for(H.s();!(W=H.n()).done;){var Q=S(W.value,2),Y=Q[0],Z=Q[1];if(Z[0]===w&&Z[1]===C&&Y[0]===c&&Y[1]===f)return!0}}catch(e){H.e(e)}finally{H.f()}return!!D.canKingCapture}var X,ee=O(A.slidingPiecesLines);try{for(ee.s();!(X=ee.n()).done;){var te,re=S(X.value,2),ne=re[0],ae=re[1],ie=!1,oe=!1,se=O(ae);try{for(se.s();!(te=se.n()).done;){var le=S(te.value,2),ce=le[0],ue=le[1];if(ie||ce!==w||ue!==C?oe||ie||ce!==c||ue!==f||(oe=!0):ie=!0,ie&&!(0,b.ef)(ne,t.endCoordinates)&&!oe){if(D.canKingCapture&&D.canKingCapture>0&&this.board[ce][ue].color+1===D.canKingCapture)continue;return!!D.canKingCapture}}}catch(e){se.e(e)}finally{se.f()}}}catch(e){ee.e(e)}finally{ee.f()}return!0}return!M||(k||!!D.canKingCapture)}getCastlingMoves(e){var t=e.i,r=e.j,n=e.baseColor,a=[],i=this.data.fenOptions.tag("royal")[n];return i&&i[0]===t&&i[1]===r&&(this.data.fenOptions.isKingsideCastlingAvailable(n,this)&&a.push({startCoordinates:[t,r],endCoordinates:this.data.fenOptions.getKingsideCastlingEndCoordinate(n),specialType:o.uj.CastlingKingside}),this.data.fenOptions.isQueensideCastlingAvailable(n,this)&&a.push({startCoordinates:[t,r],endCoordinates:this.data.fenOptions.getQueensideCastlingEndCoordinate(n),specialType:o.uj.CastlingQueenside})),a}getEnPassantMoves(e){var t=e.i,r=e.j,n=e.baseColor,a=e.pieceLetter,i=[];if(h.Gf[a].moveGenerationSettings.isPawn){var s=this.data.fenOptions.getAvailableEnPassantCaptures(n),l=this.controls[a]().setBaseImmunePieces(this.gameType.getBaseColors(n)).setBoard(this.board).setCoordinates(t,r).setColor(n).constructPieceControl().rayGenJumpingAttacks();if(0!==s.length){var c,u=O(l);try{for(u.s();!(c=u.n()).done;){var f,d=c.value,p=O(s);try{for(p.s();!(f=p.n()).done;){var v=f.value;if((0,b.ef)(d.move,v)){var y=this.createSnapshot(),m=[{startCoordinates:[t,r],endCoordinates:d.move,specialType:o.uj.EnPassant,isIrreversible:d.irreversible}];this.makeMove(m,!0),this.pregenerateAttacks(),this.isKingInCheck(n)||i.push(m[0]),this.loadSnapshot(y)}}}catch(e){p.e(e)}finally{p.f()}}}catch(e){u.e(e)}finally{u.f()}}}return i}getSpecialMoves(e){return[...this.getCastlingMoves(e),...this.getEnPassantMoves(e)]}getLegalMoves(e,t){var r,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.data.sideToMove,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=null===(r=this.board[e])||void 0===r?void 0:r[t],s=this.data.fenOptions.tag("royal")[a];if(o.isPiece()){var l=o.color;if(l!==a)return[];var c=this.preGeneratedAttacks[l].pieceMovements.get((0,b.Kv)([e,t]));(0,n.lM)(c);var f=this.getSpecialMoves({i:e,j:t,baseColor:a,pieceLetter:o.piece});return[...c.map((r=>{var n={startCoordinates:[e,t],endCoordinates:r.move,isIrreversible:r.irreversible};return r.move[2]&&(n.promotion=r.move[2].split("").map((e=>(0,u.HC)(l,e)))),n})).filter((e=>{var t=this.data.getCapturedPieces(e),r=s&&t.find((e=>s[0]===e[0]&&s[1]===e[1]));return this.isTheMoveLegal(l,e,i)&&!r})),...f]}return[]}getDroppingMoves(e){arguments.length>1&&void 0!==arguments[1]||this.data.sideToMove;return[]}getAllowedInternalMoves(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.data.sideToMove,t=[o.Fi.DrawByAgreement],r=this.createSnapshot();this.makeMove([{type:o.Fi.Resign}],!0);var n=Math.max(...this.data.points),a=this.data.points.reduce(((e,t,r)=>t===n?[...e,r]:e),[]);return this.loadSnapshot(r),1===a.length&&a[0]===e?t.push(o.Fi.ClaimWin):t.push(o.Fi.Resign,o.Fi.Timeout),t.map((e=>({type:e})))}}},8:(e,t,r)=>{"use strict";r.d(t,{Bd:()=>f,Ft:()=>s,Kv:()=>c,Ov:()=>d,RN:()=>p,Xm:()=>u,ef:()=>h});var n=r(84),a=r(12),i=r(0),o=r(11),s={Highlighted:0,Fogged:1,Ghosted:2,Blindfolded:3,PieceFacesCenter:4},l=[!0,!1,!0,!1],c=e=>"".concat(e[0],":").concat(e[1]),u=e=>{var t=e.split(":").map((e=>Number(e)));if((0,n.CG)(t,2)&&t.every((e=>!Number.isNaN(e))))return t;throw Error("Unexpected stringified coordinate: ".concat(e))},f=()=>({type:i.Jy.FFA,teamSettings:{firstTeamColors:l.map((e=>e)),secondTeamColors:l.map((e=>!e))},getBaseColors(e){return this.isFFA()?(0,n.fi)(((t,r)=>r===e),i.q3):this.teamSettings.firstTeamColors[e]?this.teamSettings.firstTeamColors:this.teamSettings.secondTeamColors},isFFA(){return this.type===i.Jy.FFA||this.type===i.Jy.Solo},isSameTeam(e,t){return e===t||!this.isFFA()&&(this.teamSettings.firstTeamColors[e]?this.teamSettings.firstTeamColors[e]&&this.teamSettings.firstTeamColors[e]:this.teamSettings.secondTeamColors[e]&&this.teamSettings.secondTeamColors[t])},getTeammateColor(e){if(this.isFFA())return e;var t=this.teamSettings.firstTeamColors[e]?this.teamSettings.firstTeamColors.map(((t,r)=>t&&r!==e)).indexOf(!0):this.teamSettings.secondTeamColors.map(((t,r)=>t&&r!==e)).indexOf(!0);return(0,o.O3)(t)?t:e}}),d=()=>({hasComplexPieces:!1,hasComplexRules:!1}),p=()=>({hoppingPieces:(0,a.BD)((()=>0)),slidingPieces:(0,a.BD)((()=>0)),hoppingPieceLines:[],slidingPiecesLines:[],slidingPiecesRayTracing:[],attackingColors:(0,a.BD)((()=>0)),pieceMovements:new Map,pieceDrops:{pawn:[],piece:[]},variantRuleCache:{}}),h=(e,t)=>e[0]===t[0]&&e[1]===t[1]},10:(e,t,r)=>{"use strict";r.d(t,{c:()=>M});var n=r(12),a=r(44),i=r(5),o=r(84),s=r(0),l=r(7),c=r(6),u=r(8),f=r(11),d=r(20),p=r(564),h=r(64);function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i,o,s=[],l=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(c)throw a}}return s}}(e,t)||y(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){if(e){if("string"==typeof e)return m(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?m(e,t):void 0}}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function g(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class b{constructor(){g(this,"tags",(0,h.fL)()),g(this,"castlingKingsideData",(0,o.fi)((()=>({endCoordinates:-1,pieceCoordinates:-1,pieceEndCoordinates:-1,checkSquares:[]})),s.q3)),g(this,"castlingQueensideData",(0,o.fi)((()=>({endCoordinates:-1,pieceCoordinates:-1,pieceEndCoordinates:-1,checkSquares:[]})),s.q3))}static loadSerializedState(e){var t,r=(0,h.fL)();for(t in r)Object.prototype.hasOwnProperty.call(r,t)&&(r[t].value=e[t]);return r}createSnapshot(){return{tagsSnapshot:(0,h.rE)(this.tags)}}loadTagSnapshot(e,t){t.loadSnapshot(e)}loadSnapshot(e){var t;for(t in e.tagsSnapshot)Object.prototype.hasOwnProperty.call(e.tagsSnapshot,t)&&this.loadTagSnapshot(e.tagsSnapshot[t],this.tags[t])}verifyKeyTag(e,t){return e in t}createClone(){var e,t=(0,p.lJ)(this,b),r=this.createSnapshot();for(e in t.tags=(0,h.fL)(),t.loadSnapshot(r),this.tags)Object.prototype.hasOwnProperty.call(this.tags,e)&&!this.verifyKeyTag(e,r.tagsSnapshot)&&(t.tags[e].value=this.tags[e].value);return t}tag(e){return this.tags[e].value}setTag(e,t){this.tags[e].value=t}createSerializedState(){var e,t={};for(e in this.tags)if(Object.prototype.hasOwnProperty.call(this.tags,e)){var r=this.tags[e];t[e]=r.createSnapshot()}return t}generateCastling(e){var t=this,r=v(this.tag("dim"),2),a=r[0],i=r[1];this.tag("noCorners")||(a>8&&(a=8),i>8&&(i=8));for(var o=[a,i,a,i],s=this.tag("royal").map(((e,t)=>e?e[(0,n.x_)(t)]:e)),l=this.tag("royal").map(((e,t)=>e?e[(0,n.x_)(t)]:e)),c=[],u=[],f=e.board,d=0;d<this.tag("royal").length;d++){var p=l[d],h=s[d];if(null!==p&&null!==h){for(var y=d%2==0,m=p;m<14;m++){var g=f[y?h:m][y?m:h];if(!g.isEmpty()&&g.piece===this.tag("castleWith")){c.push(m);break}13===m&&c.push(-1)}for(var b=p;b>-1;b--){var P=f[y?h:b][y?b:h];if(!P.isEmpty()&&P.piece===this.tag("castleWith")){u.push(b);break}0===b&&u.push(-1)}}else c.push(-1),u.push(-1)}for(var w=function(){var e=l[S];if(null===e)return"continue";var r=o[S]-6<1?1:o[S]-6;if(-1===c[S])t.tag("castleKingside")[S]=!1;else{var n=[...Array(c[S]-e-1).keys()],a=e+r,i={endCoordinates:a,checkSquares:n.map((t=>t+e+1)),pieceCoordinates:c[S],pieceEndCoordinates:a-1};e<=6?t.castlingQueensideData[S]=i:t.castlingKingsideData[S]=i}if(-1===u[S])t.tags.castleQueenside.value[S]=!1;else{var s=[...Array(e-u[S]-1).keys()],f=e-r,d={endCoordinates:f,checkSquares:e<=6?s.map((t=>t+e-2)):s.map((t=>t+e-3)),pieceCoordinates:u[S],pieceEndCoordinates:f+1};e<=6?t.castlingKingsideData[S]=d:t.castlingQueensideData[S]=d}},S=0;S<this.tag("royal").length;S++)w()}isCastlingAvailable(e,t,r){var a=this.tag("royal")[e];if(null===a)return!1;var i,o=a[(0,n.ft)(e)],s=t.board,l=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=y(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw i}}}}(r);try{for(l.s();!(i=l.n()).done;){var c=i.value,u=(0,n.sC)(e)?o:c,f=(0,n.sC)(e)?c:o;if(!s[u][f].isEmpty()||t.preGeneratedAttacks[e].hoppingPieces[u][f]>0||t.preGeneratedAttacks[e].slidingPieces[u][f]>0)return!1}}catch(e){l.e(e)}finally{l.f()}return!t.isKingInCheck(e)}isKingsideCastlingAvailable(e,t){return!!this.tag("castleKingside")[e]&&(-1===this.castlingKingsideData[e].endCoordinates&&this.generateCastling(t),this.isCastlingAvailable(e,t,this.castlingKingsideData[e].checkSquares))}isQueensideCastlingAvailable(e,t){return!!this.tag("castleQueenside")[e]&&(-1===this.castlingQueensideData[e].endCoordinates&&this.generateCastling(t),this.isCastlingAvailable(e,t,this.castlingQueensideData[e].checkSquares))}getCastlingEndCoordinate(e,t){var r,a=null===(r=this.tag("royal")[e])||void 0===r?void 0:r[(0,n.ft)(e)];return(0,o.lM)(t),(0,o.lM)(a),[(0,n.sC)(e)?a:t,(0,n.sC)(e)?t:a]}getKingsideCastlingEndCoordinate(e){return this.getCastlingEndCoordinate(e,this.castlingKingsideData[e].endCoordinates)}getQueensideCastlingEndCoordinate(e){return this.getCastlingEndCoordinate(e,this.castlingQueensideData[e].endCoordinates)}getKingsideCastlingPieceEndCoordinate(e){return this.getCastlingEndCoordinate(e,this.castlingKingsideData[e].pieceEndCoordinates)}getQueensideCastlingPieceEndCoordinate(e){return this.getCastlingEndCoordinate(e,this.castlingQueensideData[e].pieceEndCoordinates)}getKingsideCastlingTandemPiece(e){return this.castlingKingsideData[e].pieceCoordinates}getQueensideCastlingTandemPiece(e){return this.castlingQueensideData[e].pieceCoordinates}getAvailableEnPassantCaptures(e){var t=[];return this.tag("enPassant").forEach(((r,n)=>{n!==e&&r&&t.push(r[0])})),t.map((e=>[...e]))}getDefaultZombieAlgorithm(e){var t=d.botAlgorithms.get(this.tag("resigned")[e]?this.tag("zombieType")[e]:d.ZombieType.F_Checker);return(0,o.lM)(t),t}}function P(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function w(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?P(Object(r),!0).forEach((function(t){T(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function S(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=O(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw i}}}}function C(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i,o,s=[],l=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(c)throw a}}return s}}(e,t)||O(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){if(e){if("string"==typeof e)return A(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?A(e,t):void 0}}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function T(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class M{initDecoratorSettings(){}constructor(){T(this,"points",void 0),T(this,"sideToMove",void 0),T(this,"fenOptions",void 0),T(this,"plyCount",void 0),T(this,"board",void 0),T(this,"privateGameOver",!1),T(this,"__baseClass",void 0),this.points=[0,0,0,0],this.sideToMove=0,this.fenOptions=new b,this.plyCount=0,this.__baseClass=this}get gameOver(){return this.privateGameOver}set gameOver(e){!1!==e&&!1!==this.privateGameOver||(this.privateGameOver=e)}injectBoard(e){this.board=e,this.fenOptions.generateCastling(e)}createClone(){var e=new M;return e.fenOptions=this.fenOptions.createClone(),e.points=[...this.points],e.sideToMove=this.sideToMove,e.plyCount=this.plyCount,e}createSnapshot(){return{points:[...this.points],sideToMove:this.sideToMove,fenOptionsSnapshot:this.fenOptions.createSnapshot(),plyCount:this.plyCount,gameOver:this.gameOver}}loadSnapshot(e){this.fenOptions.loadSnapshot(e.fenOptionsSnapshot),this.points=[...e.points],this.sideToMove=e.sideToMove,this.plyCount=e.plyCount,this.privateGameOver=e.gameOver}getCapturedPieces(e){var t=this.board.board[e.endCoordinates[0]][e.endCoordinates[1]];return t.isEmpty()||t.isDead()?[]:[[...e.endCoordinates]]}getCastlingPieceEndCoordinates(e,t){return[(0,n.sC)(t)?[e[0],this.fenOptions.getKingsideCastlingTandemPiece(t)]:[this.fenOptions.getKingsideCastlingTandemPiece(t),e[1]],(0,n.sC)(t)?[e[0],this.fenOptions.getQueensideCastlingTandemPiece(t)]:[this.fenOptions.getQueensideCastlingTandemPiece(t),e[1]]]}processStandardMove(e){var t,r=C(e.startCoordinates,2),a=r[0],o=r[1],c=C(e.endCoordinates,2),f=c[0],d=c[1],p=e.promotion,h=this.board.board[f][d],v=null!==(t=null==p?void 0:p[0])&&void 0!==t?t:this.board.board[a][o],y=this.getCapturedPieces(e);this.board.board[f][d]=v,this.board.board[a][o]=l.v2;var m,g=S(y);try{for(g.s();!(m=g.n()).done;){var b=m.value;(0,u.ef)(b,e.startCoordinates)?this.board.board[f][d]=l.v2:(0,u.ef)(b,e.endCoordinates)||(this.board.board[b[0]][b[1]]=l.v2)}}catch(e){g.e(e)}finally{g.f()}var P=C(this.getCastlingPieceEndCoordinates(e.startCoordinates,this.sideToMove),2),w=P[0],O=P[1];if("specialType"in e){var A=e.specialType;switch(A){case i.uj.CastlingKingside:var T=(0,n.sC)(this.sideToMove)?this.board.board[a][this.fenOptions.getKingsideCastlingTandemPiece(this.sideToMove)]:this.board.board[this.fenOptions.getKingsideCastlingTandemPiece(this.sideToMove)][o],M=C(this.fenOptions.getKingsideCastlingPieceEndCoordinate(this.sideToMove),2),j=M[0],k=M[1];this.board.board[j][k]=T,this.board.board[w[0]][w[1]]=l.v2;break;case i.uj.CastlingQueenside:var D=(0,n.sC)(this.sideToMove)?this.board.board[a][this.fenOptions.getQueensideCastlingTandemPiece(this.sideToMove)]:this.board.board[this.fenOptions.getQueensideCastlingTandemPiece(this.sideToMove)][o],x=C(this.fenOptions.getQueensideCastlingPieceEndCoordinate(this.sideToMove),2),E=x[0],R=x[1];this.board.board[E][R]=D,this.board.board[O[0]][O[1]]=l.v2;break;default:void 0===A||i.uj}}var I=this.fenOptions.tag("castleKingside"),N=this.fenOptions.tag("castleQueenside"),F=this.fenOptions.tag("royal");this.fenOptions.setTag("royal",this.fenOptions.tag("royal").map(((e,t)=>e?e[0]===a&&e[1]===o?(I[t]=!1,N[t]=!1,[f,d]):[...e]:null)));var B,V=S(s.O9);try{for(V.s();!(B=V.n()).done;){var G=B.value,q=F[G];if(q){if((0,u.ef)(q,e.startCoordinates)){I[G]=!1,N[G]=!1;break}if((0,u.ef)(w,e.startCoordinates)){I[G]=!1;break}if((0,u.ef)(O,e.startCoordinates)){N[G]=!1;break}}}}catch(e){V.e(e)}finally{V.f()}return{endPiece:h.isEmpty()?[]:[h]}}spreadPointsBetweenPlayersEvenly(){var e,t=this.fenOptions.tag("resigned"),r=this.fenOptions.tag("dead"),n=t.reduce(((e,t,n)=>e+Number(t||r[n])),0),a=Math.ceil(this.obtainPointsForMate()/n),i=S(s.O9);try{for(i.s();!(e=i.n()).done;){var o=e.value;r[o]||this.assignPoints(o,a)}}catch(e){i.e(e)}finally{i.f()}}branchBetweenResignationMoves(e,t){var r=(0,s.oh)(t).toUpperCase();switch(e){case i.Fi.Resign:this.gameOver="".concat(r," RESIGNED!");break;case i.Fi.Timeout:this.gameOver="".concat(r," FORFEITS ON TIME!");break;case i.Fi.ClaimWin:this.gameOver="".concat(r," CLAIMED THE WIN!");break;default:(0,o.h0)(e)}}processInternalMove(e){var t,r=this.fenOptions.tag("resigned"),n=this.fenOptions.tag("dead"),l=(0,o.VS)(!1,s.q3),c=null===(t=this.board.insufficientMaterialChecker)||void 0===t?void 0:t.checkCurrentState(this.board).every(((e,t)=>t===this.sideToMove?e:e||n[t]));switch(e.type){case i.Fi.Stalemate:n[this.sideToMove]=!0,l[this.sideToMove]=!0;break;case i.Fi.Resign:case i.Fi.Timeout:c&&this.assignGeneralTermination("Timeout vs Insufficient Material");case i.Fi.ClaimWin:r[this.sideToMove]=!0,this.turnPiecesDead(this.sideToMove,w(w({},(0,a.P8)()),{},{excludeRoyals:!0,doNotSetDead:!0}));var u=n.map(((e,t)=>e||r[t])).filter(Boolean),d=u.length===s.q3-1;if(c)this.spreadPointsBetweenPlayersEvenly();else if(u.length===s.q3-1){var p=u.findIndex((e=>!e));(0,f.O3)(p)&&(this.assignPoints(p,this.countTotalPointsOnBoard().reduce(((e,t,r)=>e+(r===p?t:0)),0)),d=!0)}else this.board.gameType.isFFA()||(d=!0);d&&this.branchBetweenResignationMoves(e.type,this.sideToMove);break;case i.Fi.DrawByAgreement:this.gameOver="½-½ AGREED.";break;case i.Fi.Pass:break;case i.Fi.TeamsCheckmate:this.gameOver="CHECKMATE • ".concat(this.getCurrentResult()),this.turnPiecesDead(this.sideToMove),this.turnPiecesDead(this.board.gameType.getTeammateColor(this.sideToMove));break;default:(0,o.h0)(e.type)}return{stalemates:l}}processDroppingMove(e){var t=this.fenOptions.tag("bank"),r=this.fenOptions.tag("areBanksEnabled"),n=this.fenOptions.tag("setupComplete");if(this.board.variantData.duckChess||r[this.sideToMove]){var a=t[this.sideToMove],i=[...a.keys()].find((t=>t.piece===e.piece.piece));if(i||this.board.variantData.duckChess||e.piece.piece===f.KR.duck){var o=null!=i?i:e.piece;if(this.board.board[e.endCoordinates[0]][e.endCoordinates[1]]=e.piece,n[this.sideToMove]){var s=a.get(o);1==s?a.delete(o):s&&a.set(o,s-1)}}}}turnPiecesDead(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,a.P8)(),r=this.fenOptions.tag("royal"),n=this.fenOptions.tag("dead"),i=r[e];t.doNotSetDead||(n[e]=!0,r[e]=null);var o,s=S(this.board.getPlayerPieces()[e]);try{for(s.s();!(o=s.n()).done;){var f=o.value;if(!(t.excludeRoyals&&i&&(0,u.ef)(f,i))){var d=this.board.board[f[0]][f[1]].piece;t.onlyPawns&&!c.Gf[d].moveGenerationSettings.isPawn||(this.board.board[f[0]][f[1]]=(0,l.HC)(l.Ir,this.board.board[f[0]][f[1]].piece))}}}catch(e){s.e(e)}finally{s.f()}}getKingCaptures(){var e,t=(0,o.VS)(!1,s.q3),r=S(s.O9);try{for(r.s();!(e=r.n()).done;){var n=e.value,a=this.fenOptions.tag("royal")[n];if(a){var i=this.board.board[a[0]][a[1]];(i.isEmpty()||i.color!==n)&&(t[n]=!0)}}}catch(e){r.e(e)}finally{r.f()}return t}processPointsForChecks(e){var t,r=this.sideToMove,n=this.board.getCurrentChecks(),a=(0,o.VS)(!1,s.q3),i=S(s.O9);try{for(i.s();!(t=i.n()).done;){var l,c=t.value,u=S(n[c]);try{for(u.s();!(l=u.n()).done;){var f=l.value;if(!e[c].has(f)){a[c]=!0;break}}}catch(e){u.e(e)}finally{u.f()}}}catch(e){i.e(e)}finally{i.f()}var d=a.filter(Boolean).length;2===d?this.assignPoints(r,1):3===d&&this.assignPoints(r,5)}affectOptions(e){var t,r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,a.Yx)(),l=this.board.getCurrentChecks().map((e=>new Set(e)));(0,i.LR)(e)?t=this.processInternalMove(e).stalemates:(0,i.$j)(e)?r=this.processStandardMove(e).endPiece:(0,i.x7)(e)&&this.processDroppingMove(e),n.ignoreCheckmateChecks||this.board.pregenerateAttacks();var c=n.ignoreCheckmateChecks?{checkmates:(0,o.VS)(!1,s.q3),checks:(0,o.VS)(!1,s.q3),stalemates:(0,o.VS)(!1,s.q3)}:this.board.getCheckmatesAndStalemates(),u=c.checkmates,f=c.stalemates,d=c.checks;if(t)for(var p=0;p<s.q3;p++)t[p]&&(f[p]=!0);var h=u.reduce(((e,t)=>t?e+this.obtainPointsForMate():e),0),v={pointDistribution:{checkmatePoints:u.map(((e,t)=>t===this.sideToMove?h:0)),pieceCapturingPoints:(0,o.VS)(0,s.q3)}};if(r){var y,m=S(r);try{for(m.s();!(y=m.n()).done;){var g=y.value;v.pointDistribution.pieceCapturingPoints[this.sideToMove]=this.getPointsForPiece(g)}}catch(e){m.e(e)}finally{m.f()}}var b=this.getKingCaptures(),P=this.fenOptions.tag("dead"),w=this.fenOptions.tag("resigned");if(this.board.gameType.isFFA()){var C,O=S(s.O9);try{for(O.s();!(C=O.n()).done;){var A=C.value;P[A]||w[A]||(u[A]||A===this.sideToMove&&f[A]?this.turnPiecesDead(A):this.assignPoints(A,v.pointDistribution.checkmatePoints[A]+v.pointDistribution.pieceCapturingPoints[A]))}}catch(e){O.e(e)}finally{O.f()}}else{var T,M=S(s.O9);try{for(M.s();!(T=M.n()).done;){var j=T.value;b[j]&&(this.turnPiecesDead(j),this.assignGeneralTermination("King Captured"))}}catch(e){M.e(e)}finally{M.f()}}var k=this.getRealPlayers(),D=this.board.gameType.isFFA()?1===k:k!==s.q3;if(D&&this.assignGeneralTermination("Checkmate"),!n.ignoreNextTurn&&!D){var x;this.processPointsForChecks(l);var E=null===(x=this.board.insufficientMaterialChecker)||void 0===x?void 0:x.checkCurrentState(this.board);!this.gameOver&&null!=E&&E.every(((e,t)=>P[t]||e))&&(this.gameOver="INSUFFICIENT MATERIAL • ".concat(this.getCurrentResult()),this.spreadPointsBetweenPlayersEvenly()),this.getRealPlayers()>1&&(this.sideToMove=this.nextTurn())}return{checkmates:u,stalemates:f,checks:d}}getRealPlayers(){var e,t=this.fenOptions.tag("dead"),r=this.fenOptions.tag("resigned"),n=0,a=S(s.O9);try{for(a.s();!(e=a.n()).done;){var i=e.value;r[i]||t[i]||n++}}catch(e){a.e(e)}finally{a.f()}return n}nextTurn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.sideToMove;if(this.getRealPlayers()<=1)throw Error("Next turn called while the game is terminated");return(0,a.cq)(e,this.fenOptions.tag("dead"))}previousTurn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.sideToMove,t=this.fenOptions.tag("dead");if(this.getRealPlayers()<=1)throw Error("Previous turn called while the game is terminated");var r=e;do{r=0===r?s.q3-1:r-1}while(t[r]);if((0,f.O3)(r))return r;throw Error("Unexpected numeric color: ".concat(r))}isComplexEvaluation(){return!1}obtainPointsForMate(){return 20}assignPoints(e,t){t>0&&(this.points[e]+=t)}getPointsForPiece(e){return e.isPiece()&&this.board.gameType.isFFA()?c.Gf[e.piece].points.singlesPoints:0}countTotalPointsOnBoard(){var e=this.fenOptions.tag("royal"),t=this.fenOptions.tag("resigned"),r=this.fenOptions.tag("zombieImmune"),n=[0,0,0,0];return this.board.getPlayerPieces().forEach(((a,i)=>{if(!r[i]){var o,s=e[i],l=S(a);try{for(l.s();!(o=l.n()).done;){var f=o.value;if(s&&(0,u.ef)(f,s))n[i]+=this.obtainPointsForMate();else if(t[i]){var d=this.board.board[f[0]][f[1]].piece;n[i]+=c.Gf[d].points.singlesPoints}}}catch(e){l.e(e)}finally{l.f()}}})),n}getCurrentResult(){if(this.board.gameType.isFFA()){var e=this.fenOptions.tag("dead"),t=this.fenOptions.tag("resigned");if(!this.board.isTwoPlayer)throw Error("Result can only get called for 2P and teams");var r,n,a,i=Math.max(...this.points),o=S(s.O9);try{for(o.s();!(a=o.n()).done;){var l=a.value;if(!e[l]&&!t[l]){if(this.points[l]===i){if(void 0!==n)return"½-½";n=l}void 0===r&&(r=l)}}}catch(e){o.e(e)}finally{o.f()}return r===n?"1-0":"0-1"}var c,u="½-½",f=S(s.O9);try{for(f.s();!(c=f.n()).done;){var d=c.value;if(this.points[d]>0){u=this.board.gameType.teamSettings.firstTeamColors[d]?"1-0":"0-1";break}}}catch(e){f.e(e)}finally{f.f()}return u}assignGeneralTermination(e,t){if(this.board.gameType.isFFA()&&!this.board.isTwoPlayer){if(void 0!==t&&"Stalemate"===e)return void(this.gameOver="".concat((0,s.oh)(t).toUpperCase()," STALEMATED!"));(0,s.Ce)(e)?this.gameOver="".concat(e.toUpperCase(),"!"):(0,s.WF)(e)?this.gameOver="".concat(e.toUpperCase()):(0,o.h0)(e)}else this.gameOver="".concat(e.toUpperCase()," • ").concat(this.getCurrentResult())}}},44:(e,t,r)=>{"use strict";r.d(t,{P8:()=>o,Yx:()=>i,cq:()=>s});var n=r(11),a=r(0),i=()=>({ignoreCheckmateChecks:!1,ignoreNextTurn:!1}),o=()=>({excludeRoyals:!1,onlyPawns:!1,doNotSetDead:!1});function s(e,t){var r=e;do{r=r===a.q3-1?0:r+1}while(t[r]);if((0,n.O3)(r))return r;throw Error("Unexpected numeric color: ".concat(r))}},64:(e,t,r)=>{"use strict";r.d(t,{fL:()=>B,rE:()=>V,bv:()=>N});var n=r(84),a=r(0),i=r(95),o=r(8),s=r(11),l=r(7),c=r(6),u=r(20),f=r(38),d=r(563),p=r(564);function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i,o,s=[],l=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(c)throw a}}return s}}(e,t)||y(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=y(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw i}}}}function y(e,t){if(e){if("string"==typeof e)return m(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?m(e,t):void 0}}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var g=(e,t)=>Array.isArray(e)&&(0,n.CG)(e,a.q3)&&e.every((e=>typeof e===t));function b(e){var t=e.defaultValue,r=e.key,n=e.isStatic,a={value:[...t],parse(e){return g(e,"boolean")?e:this.createSnapshot()},serialize(){if("castleKingside"!==r&&"castleQueenside"!==r&&"dead"!==r&&"areBanksEnabled"!==r)return(0,i.Rt)(this.value,t)?void 0:"'".concat(r,"':(").concat(this.value.join(","),")")},createSnapshot(){return[...this.value]},loadSnapshot(e){var t=[...e];this.value=t}};return n&&delete a.loadSnapshot,a}var P=()=>({value:2,parse(e){return"number"==typeof e&&e>0&&e<=a.iJ?e:this.value},serialize(){return 2===this.value?void 0:"'pawnBaseRank':".concat(this.value)},createSnapshot(){return this.value}}),w=()=>({value:(0,n.VS)(null,a.q3),parse(e){return g(e,"string")?e.map((e=>{var t;return null!==(t=(0,d.Lx)(e))&&void 0!==t?t:null})):this.createSnapshot()},serialize(){return this.value.some((e=>!e))?"'enPassant':(".concat(this.value.map((e=>e?"'".concat((0,a.kZ)(e[0]),":").concat((0,a.kZ)(e[1]),"'"):"''")).join(","),")"):void 0},createSnapshot(){return this.value.map((e=>e?[[...e[0]],[...e[1]]]:e))},loadSnapshot(e){this.value=e.map((e=>e?[[...e[0]],[...e[1]]]:e))}}),S=()=>({value:"R",parse(e){return"string"==typeof e?e:this.value},serialize(){return"R"===this.value?void 0:"'castleWith':".concat(this.value)},createSnapshot(){return this.value}}),C=()=>({value:0,parse(e){return"number"==typeof e&&(0,s.O3)(e)?e:this.value},serialize(){return 0===this.value?void 0:"'boxOffset':".concat(this.value)},createSnapshot(){return this.value}});function O(e){var t=e.defaultValue,r=e.key,n=e.isStatic,a={value:t,parse(e){return"boolean"==typeof e?e:this.createSnapshot()},serialize(){return this.value===t?void 0:"'".concat(r,"':").concat(this.value+"")},createSnapshot(){return this.value},loadSnapshot(e){this.value=e}};return n&&delete a.loadSnapshot,a}var A=[14,14],T=()=>({value:[...A],parse(e){if("string"!=typeof e)return this.createSnapshot();var t=e.split("x");return Array.isArray(t)&&(0,n.CG)(t,2)&&t.every((e=>{var t=Number(e);return!isNaN(t)&&t>=2&&t<=14&&t%2==0}))?t.map((e=>Number(e))).reverse():this.createSnapshot()},serialize(){if(!(0,i.Rt)(this.value,A))return"'dim':'".concat(this.value.join("x"),"'")},createSnapshot(){return[...this.value]}}),M=(0,n.VS)(u.ZombieType.Rando,a.q3),j=()=>({value:[...M],parse(e){if(Array.isArray(e)&&(0,n.CG)(e,a.q3)&&e.every((e=>"string"==typeof e))){var t,r=this.createSnapshot(),i=v(a.O9);try{for(i.s();!(t=i.n()).done;){var o=t.value,s=e[o];(0,u.verifyZombieType)(s)&&(r[o]=s)}}catch(e){i.e(e)}finally{i.f()}return r}return this.createSnapshot()},serialize(){if(!(0,i.Rt)(this.value,M))return"'zombieType':(".concat(this.value.map(((e,t)=>e===M[t]?"''":"'".concat(e,"'"))).join(","),")")},createSnapshot(){return[...this.value]}}),k=()=>({value:(0,n.VS)(null,a.q3),parse(e){return g(e,"string")?e.map((e=>{var t;return null!==(t=(0,d._q)(e))&&void 0!==t?t:null})):this.createSnapshot()},serialize(){return"'royal':(".concat(this.value.map((e=>e?"'".concat((0,a.kZ)(e),"'"):"''")).join(","),")")},createSnapshot(){return this.value.map((e=>e?[...e]:e))},loadSnapshot(e){this.value=e.map((e=>e?[...e]:e))}}),D=()=>({value:(0,n.VS)(null,a.q3),parse(e){return g(e,"number")?e:this.createSnapshot()},serialize(){return this.value.some((e=>null!==e))?"'lives':(".concat(this.value.map((e=>e?e+"":"1")).join(","),")"):void 0},createSnapshot(){return[...this.value]},loadSnapshot(e){this.value=[...e]}}),x=()=>({value:(0,n.fi)((()=>new Map),a.q3),parse(e){var t=(0,n.fi)((()=>new Map),a.q3);if(g(e,"string")){var r,i=v(a.O9);try{for(i.s();!(r=i.n()).done;){var o,s=r.value,u=v(e[s].split(","));try{for(u.s();!(o=u.n()).done;){var f=h(o.value.split("x").map(((e,t)=>1===t?Number(e):e)),2),d=f[0],p=f[1],y=void 0===p?1:p;if("string"==typeof d&&"number"==typeof y&&/^(?:r|b|y|g).$/.test(d)){var m=d.charAt(1);(0,c.IM)(m)&&t[s].set((0,l.m9)(d),y)}}}catch(e){u.e(e)}finally{u.f()}}}catch(e){i.e(e)}finally{i.f()}}return t},serialize(){return this.value.some((e=>0!==e.size))?"'bank':(".concat(this.value.map((e=>{var t,r=[],n=v(e);try{for(n.s();!(t=n.n()).done;){var a=h(t.value,2),i=a[0],o=a[1];1===o?r.push(i.value):r.push("".concat(i.value,"x").concat(o))}}catch(e){n.e(e)}finally{n.f()}return"'".concat(r.join(","),"'")})).join(","),")"):void 0},createSnapshot(){return this.value.map((e=>[...e.entries()].map((e=>{var t=h(e,2),r=t[0],n=t[1];return[r.toObject(),n]}))))},loadSnapshot(e){this.value=e.map((e=>new Map(e.map((e=>{var t=h(e,2),r=t[0],n=t[1];return[l.Ff.fromObjectToClass(r),n]})))))}}),E=()=>({value:new Map,parse(e){var t=new Map;if(!(0,p.T9)(e))return t;for(var r in e)if(Object.prototype.hasOwnProperty.call(t,r)){var n=(0,d._q)(r),a=e[r];n&&"string"==typeof a&&(0,c.IM)(a)&&t.set(n,a)}return t},serialize(){if(0!==this.value.size){var e,t=[],r=v(this.value);try{for(r.s();!(e=r.n()).done;){var n=h(e.value,2),i=n[0],o=n[1];t.push("'".concat((0,a.kZ)(i),"':'").concat(o,"'"))}}catch(e){r.e(e)}finally{r.f()}return"'promotedFrom':{".concat(t.join(","),"}")}},createSnapshot(){var e,t=[],r=v(this.value.entries());try{for(r.s();!(e=r.n()).done;){var n=h(e.value,2),a=n[0],i=n[1];t.push([[...a],i])}}catch(e){r.e(e)}finally{r.f()}return t},loadSnapshot(e){this.value.clear();var t,r=v(e);try{for(r.s();!(t=r.n()).done;){var n=h(t.value,2),a=n[0],i=n[1];this.value.set([...a],i)}}catch(e){r.e(e)}finally{r.f()}}}),R=()=>({value:null,parse(e){return g(e,"number")?e:this.createSnapshot()},serialize(){return this.value?"'setupPoints':(".concat(this.value.join(","),")"):void 0},createSnapshot(){return this.value?[...this.value]:this.value},loadSnapshot(e){this.value=e?[...e]:e}}),I=()=>({value:(0,n.fi)((()=>new Set),a.q3),parse(e){var t=(0,n.fi)((()=>new Set),a.q3);if(Array.isArray(e)&&((0,n.CG)(e,a.q3)||(0,n.CG)(e,a.q3+1))&&e.every((e=>Array.isArray(e)))){var r,i=v(a.O9);try{for(i.s();!(r=i.n()).done;){var s=r.value,l=e[s];if(l.every((e=>"string"==typeof e))){var c,u=v(l);try{for(u.s();!(c=u.n()).done;){var p=c.value;if(f.T.COORDINATE_REGEX.test(p)){var h=(0,d._q)(p);h&&t[s].add((0,o.Kv)(h))}}}catch(e){u.e(e)}finally{u.f()}}}}catch(e){i.e(e)}finally{i.f()}}return t},serialize(){if(!this.value.every((e=>0===e.size)))return"'seirawanDrops':(".concat(this.value.map((e=>"(".concat([...e].map((e=>"'".concat((0,a.kZ)((0,o.Xm)(e)),"'"))).join(","),")"))).join(","),")")},createSnapshot(){return this.value.map((e=>[...e.values()]))},loadSnapshot(e){this.value=e.map((e=>new Set(e)))}}),N=(e,t)=>"loadSnapshot"in e,F=e=>"loadSnapshot"in e;function B(){return{dead:b({key:"dead",defaultValue:(0,n.VS)(!1,a.q3),isStatic:!1}),resigned:b({key:"resigned",defaultValue:(0,n.VS)(!1,a.q3),isStatic:!1}),pawnBaseRank:P(),enPassant:w(),boxOffset:C(),wb:O({key:"wb",defaultValue:!1,isStatic:!0}),dim:T(),noCorners:O({key:"noCorners",defaultValue:!1,isStatic:!0}),castleKingside:b({key:"castleKingside",defaultValue:(0,n.VS)(!0,a.q3),isStatic:!1}),castleQueenside:b({key:"castleQueenside",defaultValue:(0,n.VS)(!0,a.q3),isStatic:!1}),castleWith:S(),zombieType:j(),zombieImmune:b({key:"zombieImmune",defaultValue:(0,n.VS)(!1,a.q3),isStatic:!1}),royal:k(),lives:D(),bank:x(),promotedFrom:E(),setupPoints:R(),setupComplete:b({key:"setupComplete",defaultValue:(0,n.VS)(!0,a.q3),isStatic:!1}),seirawanDrops:I(),areBanksEnabled:b({key:"areBanksEnabled",defaultValue:(0,n.VS)(!1,a.q3),isStatic:!1})}}function V(e){var t,r={};for(t in e)if(Object.prototype.hasOwnProperty.call(e,t)){var n=e[t];N(n,t)&&F(n)&&(r[t]=n.createSnapshot())}return r}},0:(e,t,r)=>{"use strict";r.d(t,{By:()=>h,Ce:()=>s,Jy:()=>m,O9:()=>P,Q3:()=>a,R4:()=>v,WF:()=>c,iJ:()=>b,kZ:()=>p,oh:()=>y,q3:()=>g,wH:()=>d});var n=r(84),a=["Red","Blue","Yellow","Green","White","Black"],i=["Won the Race","Checkmated","Stalemated","Forfeits on Time","Claimed the Win","Resigned"],o=["Checkmate","King Captured","King of the Hill","Stalemate"],s=e=>o.includes(e),l=["50-move Rule","Insufficient Material","Threefold Repetition","Timeout vs Insufficient Material"],c=e=>l.includes(e),u=[...o,...l],f=["0-1","1-0","½-½"],d=e=>{var t=e.toUpperCase();return!(!a.some((e=>t.startsWith(e.toUpperCase())))||!i.some((e=>t.endsWith(e.toUpperCase()+"!"))))||(!!(/.*?\s•\s.*/.test(t)&&u.some((e=>t.startsWith(e.toUpperCase())))&&f.some((e=>t.endsWith(e.toUpperCase()))))||"½-½ AGREED."===t)},p=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:b;if(t===b)return"".concat(String.fromCharCode(e[1]+97)).concat(b-e[0]);var r=(b-t)/2;return"".concat(String.fromCharCode(e[1]-r+97)).concat(b-e[0]-r)},h=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:b;if(t===b)return[String.fromCharCode(e[1]+97),b-e[0]];var r=(b-t)/2;return[String.fromCharCode(e[1]-r+97),b-e[0]-r]},v=e=>{switch(e){case 0:return 2;case 1:return 3;case 2:return 0;case 3:return 1;default:return(0,n.h0)(e)}},y=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];switch(e){case 0:return t?"White":"Red";case 1:return"Blue";case 2:return t?"Black":"Yellow";case 3:return"Green";default:return(0,n.h0)(e)}},m=function(e){return e.FFA="FFA",e.Teams="Teams",e.Solo="Solo",e}({}),g=4,b=14,P=[0,1,2,3]},11:(e,t,r)=>{"use strict";r.d(t,{JF:()=>i,KR:()=>a,O3:()=>n,OT:()=>o,Od:()=>s});var n=e=>e>=0&&e<4,a={wall:"X",transparentWall:"x",duck:"Θ"},i={r:0,b:1,y:2,g:3},o=e=>e in i,s={0:"r",1:"b",2:"y",3:"g",4:"d"}},7:(e,t,r)=>{"use strict";r.d(t,{Fb:()=>v,Ff:()=>s,HC:()=>l,Ir:()=>o,St:()=>y,cG:()=>p,m9:()=>c,v2:()=>f});var n=r(6),a=r(11);function i(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var o=4;class s{static comparePieceStrings(e,t){return e._piece===t._piece&&e._color===t._color}static comparePieceStringObjects(e,t){return e._piece===t._piece&&e._color===t._color}static fromObjectToClass(e){return new s(e._color,e._piece)}constructor(e,t){i(this,"value",void 0),this._color=e,this._piece=t,this.value=t.length?/[xXΘ]/.test(t)?t:a.Od[e]+t:""}isDead(){return this._color===o&&!this.isWall()}isEmpty(){return 0===this._piece.length}isWall(){return 1===this.value.length}isPiece(){return 2===this.value.length&&this._color!==o}get piece(){if(this.isEmpty())throw new TypeError("Accessing a piece string piece value while the piece string is empty.");return this._piece}get color(){if(this.isEmpty())throw new TypeError("Accessing a piece string color value while the piece string is empty.");return this._color}getStringifiedColor(){return this.value.charAt(0)}toObject(){return{_piece:this._piece,_color:this._color,value:this.value}}}var l=(e,t)=>{if((0,n.IM)(t))return new s(e,t);throw Error("Wrong color signature for the piece provided")},c=e=>{if(1===e.length&&(0,n.IM)(e))return new s(o,e);var t=e.charAt(0),r=e.charAt(1);if(!(0,n.IM)(r))throw Error("Wrong signature for the piece provided");if("d"===t)return new s(o,r);if(t in a.JF)return new s(a.JF[t],r);throw Error("Wrong color signature for the piece provided")},u=new s(0,n.md);if(!u.isEmpty())throw Error("Empty piece string is not isEmpty");var f=u,d=new s(o,n.W2);if(!d.isWall())throw Error("Wall piece string is not isWall");var p=d,h=new s(0,n.lH);if(!h.isPiece())throw Error("Active piece string is not isActive");var v=h;if(!new s(o,n.KN).isWall())throw Error("Wall piece string is not isWall");var y=h},23:(e,t,r)=>{"use strict";r.d(t,{RR:()=>k,g7:()=>D,xn:()=>j});var n=r(5),a=r(84),i=r(95),o=r(12),s=r(8),l=r(0),c=r(7);function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i,o,s=[],l=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(c)throw a}}return s}}(e,t)||d(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=d(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw i}}}}function d(e,t){if(e){if("string"==typeof e)return p(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?p(e,t):void 0}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function h(e){switch(e.specialType){case n.uj.CastlingKingside:return"O-O";case n.uj.CastlingQueenside:return"O-O-O";default:return""}}function v(e){return e.movingPiece.piece!==c.Fb.piece?e.movingPiece.piece:""}function y(e){var t,r=e.moveMetadata,n=e.move,a=e.snapshot,l=a.boardSnapshot.board,d=a.pregeneratedAttacks.pieceMovements,p=e.isCapture,h=r.movingPiece,v=h.piece,y=h.color,m=v===c.Fb.piece,g=[],b=f(d);try{for(b.s();!(t=b.n()).done;){var P=u(t.value,2),w=P[0],S=P[1],C=(0,s.Xm)(w),O=l[C[0]][C[1]];O.isEmpty()||O.color!==y||O.piece!==w||void 0!==S.find((e=>(0,i.Rt)(n.endCoordinates,e.move)))&&g.push(C)}}catch(e){b.e(e)}finally{b.f()}return y===c.Ir?[!1,!1]:[p&&m&&(0,o.sC)(y)||g.some(((e,t)=>g.some(((r,n)=>t!==n&&e[0]===r[0])))),p&&m&&!(0,o.sC)(y)||g.some(((e,t)=>g.some(((r,n)=>t!==n&&e[1]===r[1]))))]}function m(e){return e.promotion?"=".concat(e.promotion[0].piece):""}function g(e){return"+".repeat(e.checks)+"#".repeat(e.checkmates)}var b={fullMoveNotation:e=>{var t,r="",i=!1,o=f(e.moveData);try{for(o.s();!(t=o.n()).done;){var s=t.value;if((0,n.$j)(s)){if(r+=h(s))continue;r+=v(e.metadata),r+=(0,l.kZ)(s.startCoordinates),!i&&e.metadata.isCapture?(r+="x",i=!0):r+="-",r+=(0,l.kZ)(s.endCoordinates),r+=m(s)}else(0,n.x7)(s)?(r+="@".concat(s.piece.piece),r+="-".concat((0,l.kZ)(s.endCoordinates))):(0,n.LR)(s)?r+=s.type:(0,a.h0)(s)}}catch(e){o.e(e)}finally{o.f()}return r+=g(e.metadata)},shortenedMoveNotation:(e,t,r)=>{var i,o,s="",c=!1,d=f(e.moveData);try{for(d.s();!(o=d.n()).done;){var p=o.value;if((0,n.$j)(p)){if(s+=h(p))continue;s+=v(e.metadata);var b=!c&&e.metadata.isCapture,P=u(y({isCapture:b,move:p,snapshot:t,moveMetadata:e.metadata}),2),w=P[0],S=P[1];S&&!w?s+=(0,l.By)(p.startCoordinates,r)[1]:!S&&w?s+=(0,l.By)(p.startCoordinates,r)[0]:S&&w&&(s+=(0,l.kZ)(p.startCoordinates,r)),b&&(s+="x",c=!0),s+=(0,l.kZ)(p.endCoordinates,r),s+=m(p)}else(0,n.x7)(p)?(s+="@".concat(p.piece.piece),s+="".concat((0,l.kZ)(p.endCoordinates,r))):(0,n.LR)(p)?s+=p.type:(0,a.h0)(p)}}catch(e){d.e(e)}finally{d.f()}return s+=g(e.metadata),s+=null!==(i=e.metadata.annotation)&&void 0!==i?i:""}},P=r(64);function w(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function S(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?w(Object(r),!0).forEach((function(t){C(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function C(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function O(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i,o,s=[],l=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(c)throw a}}return s}}(e,t)||T(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=T(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw i}}}}function T(e,t){if(e){if("string"==typeof e)return M(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?M(e,t):void 0}}function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function j(e){return void 0!==e&&!Array.isArray(e)}function k(e){if(!e||Array.isArray(e))throw Error("The selected move is not a valid move")}var D=e=>{var t=new WeakMap,r=new Map,a=[],o={boardSnapshot:e,get hash(){throw Error("Should not access hash on base move")},get pregeneratedAttacks(){throw Error("Should not access pregenerated attacks on base move")}};function s(){var e,t=A(arguments.length>0&&void 0!==arguments[0]?arguments[0]:a);try{for(t.s();!(e=t.n()).done;)for(var r=e.value,n=0;n<r.alternativeLines.length;n++)0===r.alternativeLines[n].length?r.alternativeLines.splice(n,1):s(r.alternativeLines[n])}catch(e){t.e(e)}finally{t.f()}}function u(e,n){var a,o=A(e);try{for(o.s();!(a=o.n()).done;){var s=a.value,l=t.get(s);if(l){var c=l.hash,f=r.get(c);if(f)if(1===f.length)r.delete(c);else{var d=f.findIndex((e=>(0,i.Rt)(e,n)));-1===d||f.splice(d,1)}var p,h=A(s.alternativeLines);try{for(h.s();!(p=h.n()).done;){u(p.value,n)}}catch(e){h.e(e)}finally{h.f()}}}}catch(e){o.e(e)}finally{o.f()}}function f(e,n){var a=e.move,o=e.snapshot,s=e.fenDataString;t.set(a,{boardSnapshot:o.boardSnapshot,pregeneratedAttacks:o.pregeneratedAttacks,hash:s});var l=r.get(s);if(l){var c=l.find((e=>(0,i.Rt)(e,n)));r.set(s,c?l:[...l,n.slice()])}else r.set(s,[n.slice()])}var d=(e,t,r)=>{e[t]=r};return{moves:a,currentMove:[-1],getMove:e=>(0,n.Yr)(a,e),setNewMove(e){var t=e.move,r=this.getMove(t.path.slice(0,-1)),a=t.path.slice();if(!r)return a;if(Array.isArray(r))if(r.length>t.path[t.path.length-1]){var i=this.getMove(t.path);if(Array.isArray(i))this.setNewMove(S(S({},e),{},{move:S(S({},t),{},{path:[...t.path,i.length]})}));else if(i){var o=function(e,t){var r,a=A(e.alternativeLines);try{for(a.s();!(r=a.n()).done;){var i=O(r.value,1)[0];if(i.moveData.length===t.moveData.length&&i.moveData.every(((e,r)=>(0,n.JG)(e,t.moveData[r]))))return i.path}}catch(e){a.e(e)}finally{a.f()}return!1}(i,t);if(o)return o;i.alternativeLines.push([]);var s=S(S({},t),{},{path:[...t.path,i.alternativeLines.length-1,0]});return a=s.path.slice(),this.setNewMove(S(S({},e),{},{move:s}))}}else r.push(t),f(e,this.currentMove);else{var l;for(l in t)Object.prototype.hasOwnProperty.call(t,l)&&d(r,l,t[l]);f(e,this.currentMove)}return a},getBoardSnapshot:e=>-1===e?o:t.get(e),deleteMove(e){var t=[],r=this.getMove(e.slice(0,-1));if(r){var n=e[e.length-1];Array.isArray(r)?t=[...r.splice(n,r.length-n)]:r.alternativeLines.length>0&&(t=r.alternativeLines.splice(e[e.length-1],1)[0]),u(t,this.currentMove),s();var a=function(e,t){for(var r=[...e],n=0;n<r.length&&!(t[n]>r[n]);n++){if(t[n]!==r[n]){(r=r.slice(0,n+1))[n]=t[n]-1;break}if(n===t.length-1){(r=r.slice(0,n+1))[n]--;break}}var a=r.indexOf(-1);if(-1!==a){r=r.slice(0,a);var i=0;do{var o=r.pop();if(void 0===o){i=-1;break}i=o}while(i<=0);-1!==i&&r.push(i)}return r}(this.currentMove,e);this.currentMove=0===a.length?[-1]:a}},getHash(e){var t=r.get(e);if(void 0===t)return 0;var n,a=0,i=A(t);try{for(i.s();!(n=i.n()).done;)for(var o=n.value,s=0;s<o.length;s++)if(s+1!==0&&s===o.length-1)a++;else if(o[s]!==this.currentMove[s])break}catch(e){i.e(e)}finally{i.f()}return a},stringifyMove(e,t){var r,n=this.getBoardSnapshot(e);if(!n)return"";for(r in b)Object.prototype.hasOwnProperty.call(b,r)&&(e.cachedNames[r]=b[r](e,n,t))},augmentMoveWithMetadata(e){var t=e.move,r=e.board,a=e.makeMoveFunction,o=t.find((e=>(0,n.$j)(e))),s=o?r.board[o.startCoordinates[0]][o.startCoordinates[1]]:c.Fb,u=!!o&&0!==r.data.getCapturedPieces(o).length,f=a(),d=[...r.data.fenOptions.tag("dead")],p=r.data.sideToMove,h=r.moves.getMove(r.moves.currentMove);if(k(h),0===r.moves.currentMove[r.moves.currentMove.length-1]||(0,i.qr)(d,(e=>!e))===p){var v=r.moves.getMove(r.moves.currentMove.slice(0,-1));if(!Array.isArray(v))throw Error("The selected move is not within an array");for(var y=v.length-1;y>=0;y--){var m=v[y].metadata.currentFullMove;if(m){h.metadata.currentFullMove=m+1;break}if(0===y)if(1===h.path.length)h.metadata.currentFullMove=1;else{var g=r.moves.getMove(r.moves.currentMove.slice(0,-3));if(!Array.isArray(g))throw Error("The selected move is not within an array");h.metadata.currentFullMove=g[(0,i.qr)(g,(e=>!!e.metadata.currentFullMove))].metadata.currentFullMove}}}h.metadata.currentSideToMove=p,h.metadata.isCapture=u,h.metadata.movingPiece=s;var b,P=A(l.O9);try{for(P.s();!(b=P.n()).done;){var w=b.value;f.checkmates[w]?h.metadata.checkmates++:f.checks[w]&&h.metadata.checks++}}catch(e){P.e(e)}finally{P.f()}this.stringifyMove(h,Math.max(...r.data.fenOptions.tag("dim")))},constructPreliminaryHashString(e){var t,r=e.board,n=e.data,a="";for(t in a+=n.sideToMove,n.fenOptions.tags){var i=n.fenOptions.tags[t];if((0,P.bv)(i,t)){var o=i.serialize();o&&(a+=o)}}return a=r.reduce(((e,t)=>e+t.map((e=>e.value||"-")).join("")),a)}}}},5:(e,t,r)=>{"use strict";r.d(t,{$j:()=>m,Fi:()=>c,JG:()=>d,LR:()=>v,Qc:()=>f,SK:()=>p,Yr:()=>g,Zp:()=>h,iw:()=>b,nc:()=>u,uj:()=>l,x7:()=>y});var n=r(8),a=r(7);function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var l=function(e){return e[e.CastlingKingside=0]="CastlingKingside",e[e.CastlingQueenside=1]="CastlingQueenside",e[e.EnPassant=2]="EnPassant",e}({}),c=function(e){return e.Resign="R",e.Timeout="T",e.ClaimWin="C",e.DrawByAgreement="D",e.Stalemate="S",e.Pass="P",e.TeamsCheckmate="#",e}({}),u=e=>e.length>0;function f(e){return!!(e.alternativeLines&&void 0!==e.comment&&e.path&&e.metadata&&e.moveData)}function d(e,t){if(m(e))return!!m(t)&&((0,n.ef)(e.startCoordinates,t.startCoordinates)&&(0,n.ef)(e.endCoordinates,t.endCoordinates)&&(e.specialType===t.specialType||e.specialType===l.EnPassant||t.specialType===l.EnPassant));if(y(e))return!!y(t)&&((0,n.ef)(e.endCoordinates,t.endCoordinates)&&a.Ff.comparePieceStrings(e.piece,t.piece));if(v(e))return!!v(t)&&e.type===t.type;throw Error("Unexpected move signature of first move ".concat(JSON.stringify(e)))}function p(){return{isCapture:!1,movingPiece:a.Fb,checks:0,checkmates:0,currentSideToMove:0,highlightedArrows:[],highlightedSquares:[]}}var h=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return o(o({},{path:e.path,moveData:e.moveData,comment:"",alternativeLines:[],metadata:p(),cachedNames:{fullMoveNotation:"",shortenedMoveNotation:""}}),t)},v=e=>"type"in e,y=e=>"piece"in e,m=e=>"startCoordinates"in e,g=(e,t)=>{var r;if(0===t.length)return e;var n=t.slice();if(!(n[0]>=e.length)){for(var a=e[null!==(r=n.shift())&&void 0!==r?r:0];n.length>0;){var i=n.shift();if(void 0!==i){if(i>=a.alternativeLines.length)return;var o=a.alternativeLines[i],s=n.shift();if(void 0===s)return o;if(s>=o.length)return;a=o[s]}}return a}},b=e=>e.length>0&&e[0].nextChainedMoves?b(e[0].nextChainedMoves):e},15:(e,t,r)=>{"use strict";r.d(t,{V:()=>c});var n=r(0),a=r(7),i=r(6);function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i,o,s=[],l=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(c)throw a}}return s}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function l(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class c{initDecoratorSettings(){}constructor(){l(this,"color",void 0),l(this,"sliding",void 0),l(this,"jumping",void 0),l(this,"hooks",void 0),l(this,"moves",void 0),l(this,"rayGenCache",void 0),l(this,"baseRankActive",void 0),l(this,"immunePieces",void 0),l(this,"fenData",void 0),l(this,"board",void 0),l(this,"i",void 0),l(this,"j",void 0),l(this,"__baseClass",void 0),this.moves=[],this.color=0,this.sliding=[],this.jumping=[],this.rayGenCache=[],this.hooks={useTrajectory:void 0,usePerspective:void 0,usePawnLogic:void 0,useHopping:!1},this.baseRankActive=!1,this.immunePieces=[!1,!1,!1,!1],this.__baseClass=this}configure(e){var t;this.color=e.color,this.immunePieces=e.immunePieces;var r=o(e.coordinates,2);this.i=r[0],this.j=r[1];var n=[13-this.i,this.j,this.i,13-this.j][this.color]-this.fenData.fenOptions.tag("pawnBaseRank");this.baseRankActive=null!==(t=e.baseRank)&&void 0!==t?t:-1===n||-2===n,this.board=e.board}setFENData(e){this.fenData=e}isRayTrace(e){return e===i.hK.RayTrace||e===i.hK.RayTraceLimited}modifyDisplacements(e,t){return[[e,t],[t,-e],[-e,-t],[-t,e]][this.color]}pushMove(e){var t,r;!e.isRayGen&&this.hooks.usePawnLogic&&this.hooks.usePawnLogic.promotionRanks&&this.hooks.usePawnLogic.promotionRanks[this.color]===(this.color%2==0?e.i:e.j)&&this.hooks.usePawnLogic.promotionPieces?this.moves.push({move:[e.i,e.j,this.hooks.usePawnLogic.promotionPieces.join("")],irreversible:null!==(t=e.irreversible)&&void 0!==t&&t}):this.moves.push({move:[e.i,e.j],irreversible:null!==(r=e.irreversible)&&void 0!==r&&r})}generateSlidingAttack(e){var t,r,n,a=o(e.displacement,2),s=a[0],l=a[1],c=null!==(t=e.limit)&&void 0!==t?t:1/0,u=e.rayGenCache,f=null!==(r=e.special)&&void 0!==r?r:i.hK.Normal,d=0;if(null!==(n=this.hooks.usePerspective)&&void 0!==n&&n[this.color]){var p=o(this.modifyDisplacements(s,l),2);s=p[0],l=p[1]}for(var h=this.i+s,v=this.j+l,y=this.board[0].length,m=this.board.length,g=null!=u?u:this.isRayTrace(f);c>0&&h>=0&&h<y&&v>=0&&v<m&&(this.getMovePossibility({displacement:[h,v],special:f,rayGenCache:u})&&this.pushMove({i:h,j:v,isRayGen:!!g,irreversible:e.irreversible}),f!==i.hK.RayTraceLimited||this.board[h][v].isEmpty()||2!=++d)&&(this.isRayTrace(f)||this.board[h][v].isEmpty());)h+=s,v+=l,c--}generateJumpAttack(e){var t,r,n=o(e.displacement,2),a=n[0],s=n[1],l=e.rayGenCache,c=e.squareBlockingIndex,u=null!==(t=e.special)&&void 0!==t?t:i.hK.Normal;if(null!==(r=this.hooks.usePerspective)&&void 0!==r&&r[this.color]){var f=o(this.modifyDisplacements(a,s),2);a=f[0],s=f[1]}var d=this.i+a,p=this.j+s,h=null!=l?l:this.isRayTrace(u),v=!0;if(this.hooks.useTrajectory&&void 0!==c){var y,m,g,b=this.hooks.useTrajectory[c];if(null!==(y=this.hooks.usePerspective)&&void 0!==y&&y[this.color]){var P=o(this.modifyDisplacements(b[0],b[1]),2);m=P[0],g=P[1]}else m=b[0],g=b[1];this.getMovePossibility({displacement:[this.i+m,this.j+g],special:u,rayGenCache:l})||(v=!1)}v&&this.getMovePossibility({displacement:[d,p],special:u,rayGenCache:l})&&this.pushMove({i:d,j:p,isRayGen:!!h,irreversible:e.irreversible})}getMovePossibility(e){var t=o(e.displacement,2),r=t[0],s=t[1],l=e.rayGenCache,c=e.special;if(r<0||r>=n.iJ||s<0||s>=n.iJ)return!1;var u=this.board[r][s];if(!u.isEmpty()&&u.color!==a.Ir&&!l&&!this.isRayTrace(null!=c?c:i.hK.Normal)&&(this.immunePieces[u.color]||this.fenData.fenOptions.tag("zombieImmune")[u.color]))return!1;var f=()=>(l&&this.rayGenCache.push(l),!0);if(void 0===c||c===i.hK.Normal){if(!u.isWall())return f()}else if(c===i.hK.RayGen){if(!u.isEmpty())return f()}else if(c===i.hK.AttackOnly){if(!u.isEmpty()&&!u.isWall())return f()}else if(c===i.hK.MoveOnly){if(u.isEmpty())return f()}else if(this.isRayTrace(c))return f();return!1}getPossibleCells(){if(this.hooks.useHopping){this.sliding.forEach((e=>this.generateSlidingAttack({displacement:e,special:i.hK.RayGen,rayGenCache:[...e]})));var e=this.moves.slice();this.moves=[],e.forEach(((e,t)=>{var r=e.move[0]+this.rayGenCache[t][0],n=e.move[1]+this.rayGenCache[t][1];this.getMovePossibility({displacement:[r,n]})&&this.pushMove({i:r,j:n})})),this.rayGenCache=[]}else this.sliding.forEach((e=>this.generateSlidingAttack({displacement:e}))),this.jumping.forEach((e=>this.generateJumpAttack({displacement:e})))}rayGenJumpingAttacks(){return this.jumping.forEach((e=>this.generateJumpAttack({displacement:e,special:i.hK.RayTrace}))),this.moves.splice(0)}rayGenSlidingAttacks(e){var t=[];return this.sliding.forEach((r=>{this.generateSlidingAttack({displacement:r,special:e}),0!==this.moves.length&&t.push(this.moves.splice(0))})),t}getPseudoLegalMoves(){return this.getPossibleCells(),this.moves.splice(0)}}},560:(e,t,r)=>{"use strict";r.d(t,{D:()=>d});var n=r(15),a=r(6),i=[[-1,0],[1,0],[0,1],[0,-1]],o=[[-1,-1],[1,1],[-1,1],[1,-1]],s=[...i,...o],l=[[-1,-2],[-2,-1],[-1,2],[2,-1],[-2,1],[1,-2],[1,2],[2,1]],c=[[-1,-3],[-3,-1],[-1,3],[3,-1],[-3,1],[1,-3],[1,3],[3,1]],u=[[-2,0],[2,0],[0,2],[0,-2]],f=[[-2,-2],[2,2],[-2,2],[2,-2]],d=()=>{(0,a.pN)({baseClassRef:class extends n.V{constructor(){super(),this.sliding=i}},configuration:{points:{singlesPoints:5,teamsPoints:5,botFFAValue:7,botTeamsValue:7},piece:a.bB.rook,moveGenerationSettings:{isComplex:!1,isJumping:!1,isSliding:!0,isPawn:!1,isColorBound:!1},naming:{name:"Rook",shortName:a.bB.rook.toLowerCase()}}}),(0,a.pN)({baseClassRef:class extends n.V{constructor(){super(),this.sliding=o}},configuration:{points:{singlesPoints:5,teamsPoints:4,botFFAValue:6,botTeamsValue:6},piece:a.bB.bishop,moveGenerationSettings:{isComplex:!1,isJumping:!1,isSliding:!0,isPawn:!1,isColorBound:!0},naming:{name:"Bishop",shortName:a.bB.bishop.toLowerCase()}}}),(0,a.pN)({baseClassRef:class extends n.V{constructor(){super(),this.jumping=s}},configuration:{points:{singlesPoints:3,teamsPoints:0,botFFAValue:3,botTeamsValue:3},piece:a.bB.king,moveGenerationSettings:{isComplex:!1,isJumping:!0,isSliding:!1,isPawn:!1,isColorBound:!1},naming:{name:"King",shortName:a.bB.king.toLowerCase()}}}),(0,a.pN)({baseClassRef:class extends n.V{constructor(){super(),this.sliding=s}},configuration:{points:{singlesPoints:9,teamsPoints:10,botFFAValue:14,botTeamsValue:15},piece:a.bB.queen,moveGenerationSettings:{isComplex:!1,isJumping:!1,isSliding:!0,isPawn:!1,isColorBound:!1},naming:{name:"Queen",shortName:a.bB.queen.toLowerCase()}}}),(0,a.pN)({baseClassRef:class extends n.V{constructor(){super(),this.sliding=s}},configuration:{points:{singlesPoints:9,teamsPoints:10,botFFAValue:13,botTeamsValue:13},piece:a.t$,moveGenerationSettings:{isComplex:!1,isJumping:!1,isSliding:!0,isPawn:!1,isColorBound:!1},naming:{name:"1-point queen",shortName:a.t$.toLowerCase()}}}),(0,a.pN)({baseClassRef:class extends n.V{constructor(){super(),this.jumping=l}},configuration:{points:{singlesPoints:3,teamsPoints:3,botFFAValue:4,botTeamsValue:4},piece:a.bB.knight,moveGenerationSettings:{isComplex:!1,isJumping:!0,isSliding:!1,isPawn:!1,isColorBound:!1},naming:{name:"Knight",shortName:a.bB.knight.toLowerCase()}}}),(0,a.pN)({baseClassRef:class extends n.V{constructor(){super(),this.jumping=[...l,...s]}},configuration:{points:{singlesPoints:5,teamsPoints:5,botFFAValue:7,botTeamsValue:7},piece:"M",moveGenerationSettings:{isComplex:!1,isJumping:!0,isSliding:!1,isPawn:!1,isColorBound:!1},naming:{name:"General",shortName:"m",description:"combines king and knight"}}}),(0,a.pN)({baseClassRef:class extends n.V{constructor(){super(),this.jumping=o}},configuration:{points:{singlesPoints:1,teamsPoints:1,botFFAValue:.6,botTeamsValue:.6},piece:"F",moveGenerationSettings:{isComplex:!1,isJumping:!0,isSliding:!1,isPawn:!1,isColorBound:!0},naming:{name:"Ferz",shortName:"f",description:"moves one square diagonally"}}}),(0,a.pN)({baseClassRef:class extends n.V{constructor(){super(),this.jumping=i}},configuration:{points:{singlesPoints:1,teamsPoints:1,botFFAValue:.4,botTeamsValue:.4},piece:"W",moveGenerationSettings:{isComplex:!1,isJumping:!0,isSliding:!1,isPawn:!1,isColorBound:!1},naming:{name:"Wazir",shortName:"w",description:"moves one square horizontally or vertically"}}}),(0,a.pN)({baseClassRef:class extends n.V{constructor(){super(),this.jumping=i}},configuration:{points:{singlesPoints:1,teamsPoints:1,botFFAValue:.4,botTeamsValue:.4},piece:"W",moveGenerationSettings:{isComplex:!1,isJumping:!0,isSliding:!1,isPawn:!1,isColorBound:!1},naming:{name:"Wazir",shortName:"w",description:"moves one square horizontally or vertically"}}}),(0,a.pN)({baseClassRef:class extends n.V{constructor(){super(),this.jumping=u}},configuration:{points:{singlesPoints:1,teamsPoints:1,botFFAValue:1.6,botTeamsValue:1.6},piece:"S",moveGenerationSettings:{isComplex:!1,isJumping:!0,isSliding:!1,isPawn:!1,isColorBound:!0},naming:{name:"Dabbaba",shortName:"s",description:"jumps two squares horizontally or vertically"}}}),(0,a.pN)({baseClassRef:class extends n.V{constructor(){super(),this.sliding=u}},configuration:{points:{singlesPoints:4,teamsPoints:4,botFFAValue:5.4,botTeamsValue:5.4},piece:"T",moveGenerationSettings:{isComplex:!1,isJumping:!1,isSliding:!0,isPawn:!1,isColorBound:!0},naming:{name:"Dabbaba-rider",shortName:"t"}}}),(0,a.pN)({baseClassRef:class extends n.V{constructor(){super(),this.jumping=f}},configuration:{points:{singlesPoints:1,teamsPoints:1,botFFAValue:.5,botTeamsValue:.5},piece:"I",moveGenerationSettings:{isComplex:!1,isJumping:!0,isSliding:!1,isPawn:!1,isColorBound:!0},naming:{name:"Alfil",shortName:"i",description:"jumps two squares diagonally"}}}),(0,a.pN)({baseClassRef:class extends n.V{constructor(){super(),this.sliding=f}},configuration:{points:{singlesPoints:3,teamsPoints:3,botFFAValue:4.5,botTeamsValue:4.5},piece:"J",moveGenerationSettings:{isComplex:!1,isJumping:!1,isSliding:!0,isPawn:!1,isColorBound:!0},naming:{name:"Alfil-rider",shortName:"j"}}}),(0,a.pN)({baseClassRef:class extends n.V{constructor(){super(),this.jumping=[...f,...u]}},configuration:{points:{singlesPoints:3,teamsPoints:3,botFFAValue:3,botTeamsValue:3},piece:"Y",moveGenerationSettings:{isComplex:!1,isJumping:!0,isSliding:!1,isPawn:!1,isColorBound:!0},naming:{name:"Alibaba",shortName:"y",description:"combines alfil and dabbaba"}}}),(0,a.pN)({baseClassRef:class extends n.V{constructor(){super(),this.sliding=[...f,...u]}},configuration:{points:{singlesPoints:6,teamsPoints:6,botFFAValue:6.2,botTeamsValue:6.2},piece:"Z",moveGenerationSettings:{isComplex:!1,isJumping:!1,isSliding:!0,isPawn:!1,isColorBound:!0},naming:{name:"Alibaba-rider",shortName:"z"}}}),(0,a.pN)({baseClassRef:class extends n.V{constructor(){super(),this.jumping=l,this.sliding=s}},configuration:{points:{singlesPoints:12,teamsPoints:12,botFFAValue:17,botTeamsValue:17},piece:"A",moveGenerationSettings:{isComplex:!1,isJumping:!0,isSliding:!0,isPawn:!1,isColorBound:!1},naming:{name:"Amazon",shortName:"a",description:"combines queen and knight"}}}),(0,a.pN)({baseClassRef:class extends n.V{constructor(){super(),this.jumping=c}},configuration:{points:{singlesPoints:3,teamsPoints:3,botFFAValue:4.2,botTeamsValue:4.2},piece:"C",moveGenerationSettings:{isComplex:!1,isJumping:!0,isSliding:!1,isPawn:!1,isColorBound:!0},naming:{name:"Camel",shortName:"c",description:"an elongated 3-1 knight"}}}),(0,a.pN)({baseClassRef:class extends n.V{constructor(){super(),this.jumping=l,this.sliding=i}},configuration:{points:{singlesPoints:7,teamsPoints:7,botFFAValue:10,botTeamsValue:10},piece:"E",moveGenerationSettings:{isComplex:!1,isJumping:!0,isSliding:!0,isPawn:!1,isColorBound:!1},naming:{name:"Chancellor",shortName:"a",description:"combines rook and knight"}}}),(0,a.pN)({baseClassRef:class extends n.V{constructor(){super(),this.jumping=l,this.sliding=o}},configuration:{points:{singlesPoints:7,teamsPoints:7,botFFAValue:9,botTeamsValue:9},piece:"H",moveGenerationSettings:{isComplex:!1,isJumping:!0,isSliding:!0,isPawn:!1,isColorBound:!1},naming:{name:"Archbishop",shortName:"h",description:"combines bishop and knight"}}}),(0,a.pN)({baseClassRef:class extends n.V{constructor(){super(),this.sliding=l}},configuration:{points:{singlesPoints:7,teamsPoints:7,botFFAValue:10,botTeamsValue:10},piece:"O",moveGenerationSettings:{isComplex:!1,isJumping:!1,isSliding:!0,isPawn:!1,isColorBound:!1},naming:{name:"Knight-rider",shortName:"o"}}}),(0,a.pN)({baseClassRef:class extends n.V{constructor(){super(),this.sliding=c}},configuration:{points:{singlesPoints:7,teamsPoints:7,botFFAValue:8,botTeamsValue:8},piece:"L",moveGenerationSettings:{isComplex:!1,isJumping:!1,isSliding:!0,isPawn:!1,isColorBound:!0},naming:{name:"Camel-rider",shortName:"l"}}}),(0,a.pN)({baseClassRef:class extends n.V{constructor(){super(),this.jumping=[...c,...l]}},configuration:{points:{singlesPoints:5,teamsPoints:5,botFFAValue:8,botTeamsValue:8},piece:"V",moveGenerationSettings:{isComplex:!1,isJumping:!0,isSliding:!1,isPawn:!1,isColorBound:!1},naming:{name:"Wildebeest",shortName:"v",description:"combines camel and knight"}}}),(0,a.pN)({baseClassRef:class extends n.V{constructor(){super(),this.hooks.usePerspective=[!0,!0,!0,!0],this.hooks.usePawnLogic={}}getPossibleCells(){return this.generateJumpAttack({displacement:[-1,-1],special:a.hK.AttackOnly}),this.generateJumpAttack({displacement:[-1,1],special:a.hK.AttackOnly}),this.generateSlidingAttack({displacement:[-1,0],special:a.hK.MoveOnly,limit:this.baseRankActive?2:1,irreversible:!0}),this.moves}rayGenJumpingAttacks(){this.generateJumpAttack({displacement:[-1,-1],special:a.hK.RayTrace}),this.generateJumpAttack({displacement:[-1,1],special:a.hK.RayTrace});var e=this.moves.slice();return this.moves=[],e}},configuration:{points:{singlesPoints:1,teamsPoints:1,botFFAValue:1,botTeamsValue:.4},piece:a.lH,moveGenerationSettings:{isComplex:!1,isJumping:!0,isSliding:!1,isPawn:!0,isColorBound:!1},naming:{name:"Pawn",shortName:a.lH.toLowerCase()}}}),(0,a.pN)({baseClassRef:class extends n.V{constructor(){super(),this.hooks.usePerspective=[!0,!0,!0,!0],this.hooks.usePawnLogic={}}getPossibleCells(){return this.generateSlidingAttack({displacement:[-1,-1],special:a.hK.MoveOnly,limit:this.baseRankActive?2:1,irreversible:!0}),this.generateSlidingAttack({displacement:[-1,1],special:a.hK.MoveOnly,limit:this.baseRankActive?2:1,irreversible:!0}),this.generateJumpAttack({displacement:[-1,-1],special:a.hK.AttackOnly}),this.moves}rayGenJumpingAttacks(){this.generateJumpAttack({displacement:[-1,-1],special:a.hK.RayTrace});var e=this.moves.slice();return this.moves=[],e}},configuration:{points:{singlesPoints:1,teamsPoints:1,botFFAValue:1,botTeamsValue:.4},piece:"α",moveGenerationSettings:{isComplex:!1,isJumping:!0,isSliding:!1,isPawn:!0,isColorBound:!1},naming:{name:"Berolina",shortName:"alpha",description:"a pawn that moves diagonally and captures forwards"}}});var e=(0,a.pN)({baseClassRef:class extends n.V{constructor(){super(),this.hooks.usePerspective=[!0,!0,!0,!0],this.hooks.usePawnLogic={}}getPossibleCells(){return this.generateSlidingAttack({displacement:[-1,-1],special:a.hK.MoveOnly,limit:this.baseRankActive?2:0,irreversible:!0}),this.generateSlidingAttack({displacement:[-1,1],special:a.hK.MoveOnly,limit:this.baseRankActive?2:0,irreversible:!0}),this.generateJumpAttack({displacement:[-1,-1],irreversible:!0}),this.generateJumpAttack({displacement:[-1,1],irreversible:!0}),this.moves}rayGenJumpingAttacks(){this.generateJumpAttack({displacement:[-1,-1],special:a.hK.RayTrace}),this.generateJumpAttack({displacement:[-1,1],special:a.hK.RayTrace});var e=this.moves.slice();return this.moves=[],e}},configuration:{points:{singlesPoints:1,teamsPoints:1,botFFAValue:1,botTeamsValue:.4},piece:"γ",moveGenerationSettings:{isComplex:!1,isJumping:!0,isSliding:!1,isPawn:!0,isColorBound:!1},naming:{name:"Stone General",shortName:"gamma",description:"a pawn that moves and captures diagonally"}}}),t=(0,a.pN)({baseClassRef:class extends n.V{constructor(){super(),this.hooks.usePerspective=[!0,!0,!0,!0],this.hooks.usePawnLogic={}}getPossibleCells(){return this.generateSlidingAttack({displacement:[-1,0],special:a.hK.MoveOnly,limit:this.baseRankActive?2:0,irreversible:!0}),this.generateJumpAttack({displacement:[-1,0],irreversible:!0}),this.moves}rayGenJumpingAttacks(){this.generateJumpAttack({displacement:[-1,0],special:a.hK.RayTrace});var e=this.moves.slice();return this.moves=[],e}},configuration:{points:{singlesPoints:1,teamsPoints:1,botFFAValue:1,botTeamsValue:.4},piece:"β",moveGenerationSettings:{isComplex:!1,isJumping:!0,isSliding:!1,isPawn:!0,isColorBound:!1},naming:{name:"Soldier",shortName:"beta",description:"a pawn that moves and captures forwards only"}}});(0,a.pN)({baseClassRef:class extends n.V{constructor(){super(),this.hooks.usePerspective=[!0,!0,!0,!0],this.hooks.usePawnLogic={}}getPossibleCells(){return e.getPossibleCells.call(this),t.getPossibleCells.call(this),this.moves}rayGenJumpingAttacks(){e.rayGenJumpingAttacks.call(this),t.rayGenJumpingAttacks.call(this);var r=this.moves.slice();return this.moves=[],r}},configuration:{points:{singlesPoints:1,teamsPoints:1,botFFAValue:1,botTeamsValue:.4},piece:"δ",moveGenerationSettings:{isComplex:!1,isJumping:!0,isSliding:!1,isPawn:!0,isColorBound:!1},naming:{name:"Sergeant",shortName:"delta",description:"a pawn that moves and captures forwards and diagonally"}}});var r=(0,a.pN)({baseClassRef:class extends n.V{constructor(){super(),this.hooks.useTrajectory=[[-1,0],[1,0],[0,1],[0,-1]]}getPossibleCells(){return this.generateJumpAttack({displacement:[-1,-2],special:a.hK.Normal,squareBlockingIndex:3}),this.generateJumpAttack({displacement:[1,-2],special:a.hK.Normal,squareBlockingIndex:3}),this.generateJumpAttack({displacement:[-1,2],special:a.hK.Normal,squareBlockingIndex:2}),this.generateJumpAttack({displacement:[1,2],special:a.hK.Normal,squareBlockingIndex:2}),this.generateJumpAttack({displacement:[2,-1],special:a.hK.Normal,squareBlockingIndex:1}),this.generateJumpAttack({displacement:[2,1],special:a.hK.Normal,squareBlockingIndex:1}),this.generateJumpAttack({displacement:[-2,-1],special:a.hK.Normal,squareBlockingIndex:0}),this.generateJumpAttack({displacement:[-2,1],special:a.hK.Normal,squareBlockingIndex:0}),this.moves}},configuration:{points:{singlesPoints:2,teamsPoints:2,botFFAValue:2.1,botTeamsValue:2.1},piece:"U",moveGenerationSettings:{isComplex:!0,isJumping:!0,isSliding:!1,isPawn:!1,isColorBound:!1},naming:{name:"Xiangqi horse",shortName:"u",description:"moves one square orthogonally and then one diagonally"}}});(0,a.pN)({baseClassRef:class extends n.V{constructor(){super(),this.hooks.useTrajectory=[[-1,0],[1,0],[0,1],[0,-1]]}getPossibleCells(){return r.getPossibleCells.call(this),this.sliding.forEach((e=>{this.generateSlidingAttack({displacement:e})})),this.moves}},configuration:{points:{singlesPoints:6,teamsPoints:6,botFFAValue:7.5,botTeamsValue:7.5},piece:"Δ",moveGenerationSettings:{isComplex:!0,isJumping:!0,isSliding:!0,isPawn:!1,isColorBound:!1},naming:{name:"Dragon bishop",shortName:"deltaUpper",description:"combines bishop and xiangqi horse"}}}),(0,a.pN)({baseClassRef:class extends n.V{constructor(){super(),this.hooks.useHopping=!0,this.sliding=s}},configuration:{points:{singlesPoints:3,teamsPoints:3,botFFAValue:5.8,botTeamsValue:5.8},piece:a.OB,moveGenerationSettings:{isComplex:!0,isJumping:!0,isSliding:!1,isPawn:!1,isColorBound:!1},naming:{name:"Grasshopper",shortName:a.OB.toLowerCase(),description:"jumps in any direction hopping over the first piece, landing immediately behind it"}}})}},6:(e,t,r)=>{"use strict";r.d(t,{Gf:()=>u,IM:()=>c,KN:()=>m,OB:()=>h,W2:()=>p,bB:()=>v,hK:()=>s,lH:()=>d,md:()=>y,pN:()=>f,t$:()=>g});var n=r(11);function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function o(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var s={Normal:0,MoveOnly:1,AttackOnly:2,RayGen:3,RayTrace:4,RayTraceLimited:5},l=Object.values(n.KR),c=e=>e in u||l.includes(e),u=l.reduce(((e,t)=>i(i({},e),{},{[t]:{points:{singlesPoints:0,teamsPoints:0,botFFAValue:0,botTeamsValue:0},piece:t,moveGenerationSettings:{isComplex:!1,isJumping:!1,isSliding:!1,isPawn:!1},naming:{name:"Wall",shortName:t}}})),{}),f=e=>(u[e.configuration.piece]=i(i({},e.configuration),{},{construct:e.baseClassRef}),new e.baseClassRef);var d="P",p=n.KR.wall,h="G",v={queen:"Q",rook:"R",bishop:"B",knight:"N",king:"K"},y="",m=n.KR.duck,g="D"},1:(e,t,r)=>{"use strict";r.d(t,{$:()=>c,I:()=>f});var n,a=r(564),i=r(84);function o(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){l=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(l)throw i}}}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function l(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class c{constructor(){l(this,"dependencies",new Map),l(this,"decorator",void 0),l(this,"wrappingDecorators",[])}static initVariantRule(e){c.variantRuleList.push(e)}initializeBaseHandler(e){this.decorator=e}initializeWrappingHandler(e){this.wrappingDecorators.push(e)}injectIntoBaseClass(e){return e.bind(this.decorator)}callHandler(e,t){var r,n=o(this.wrappingDecorators);try{for(n.s();!(r=n.n()).done;){var a=r.value;if(e in a){var s=a[e];if((0,i.fJ)(s))return s.call(a,...t)}}}catch(e){n.e(e)}finally{n.f()}var l=this.getDecoratorType();if(!((e,t)=>t in e.prototype)(l,e))throw Error("Method called to callHandler is not a part of prototype");var c=l.prototype[e];if(!(0,i.fJ)(c))throw Error("Method called to callHandler is not a part of prototype");return c.call(this.decorator,...t)}getInsufficientMaterialData(){return{isPartiallyDisabled:!1,isDisabled:!1}}}l(c,"variantRuleList",[]);var u=new Set(Reflect.ownKeys(null!==(n=Reflect.getPrototypeOf({}))&&void 0!==n?n:[]));function f(e,t,r){if(0===r.length)return e;var n=(0,a.lJ)(e,t,!0),s=new Set;n.initDecoratorSettings=()=>{},s.add("initDecoratorSettings");for(var l=new Set,c=null,f=(e=>"number"!=typeof e&&e in n&&!u.has(e)&&!l.has(e));c=Reflect.getPrototypeOf(null!==(d=c)&&void 0!==d?d:e);){var d;Reflect.ownKeys(c).forEach((t=>{f(t)&&(n[t]=e[t],s.add(t),l.add(t))}))}var p,h=o(Object.getOwnPropertyNames(e));try{var v=function(){var t=p.value;if(!(t in e))throw Error("Expected prototype to not be overridden");var r=t;Object.defineProperty(n,t,{get:function(){return e[r]},set:function(t){e[r]=t},enumerable:!0,configurable:!1})};for(h.s();!(p=h.n()).done;)v()}catch(e){h.e(e)}finally{h.f()}n.__baseClass=e;var y,m=o(s);try{var g=function(){var e=y.value,t=r.filter((t=>e in t));if(0===t.length)return"continue";t[0].initializeBaseHandler(n);var a=t.reduce(((e,t)=>(t.initializeBaseHandler(n),t.initializeWrappingHandler(e),t)));if(e in n){var o=Reflect.get(a,e);if("function"==typeof o){var s=o;(0,i.fJ)(n[e])&&Object.defineProperty(n,e,{value:function(){return s.bind(a)(...arguments)},enumerable:!1,writable:!1,configurable:!1})}}};for(m.s();!(y=m.n()).done;)g()}catch(e){m.e(e)}finally{m.f()}return n.initDecoratorSettings(),n}(0,i.s8)(r(87))},88:(e,t,r)=>{"use strict";r.r(t),r.d(t,{AllowPassing:()=>u});var n=r(9),a=r(5),i=r(1),o=r(2),s=r(3);function l(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw i}}}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}class u extends i.${getDecoratorType(){return n.$}getPublicProperties(){return{parameterValue:!0,information:{name:"Allow Passing",description:"Players can pass instead of making a move",tag:"allowPassing",color:o.p.minor,displayIcon:s.w.pause}}}matchesPGNDeclaration(e){return/^AllowPassing$/i.test(e)}serializeToParsingForm(){return"AllowPassing"}isDisabled(e){return e.variantDataRules.giveaway}getAllowedInternalMoves(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.decorator.data.sideToMove,r=this.decorator.isKingInCheck(t)?[]:[{type:a.Fi.Pass}],i=l(this.wrappingDecorators);try{for(i.s();!(e=i.n()).done;){var o=e.value;if(o.getAllowedInternalMoves)return[...r,...o.getAllowedInternalMoves(t)]}}catch(e){i.e(e)}finally{i.f()}return[...r,...n.$.prototype.getAllowedInternalMoves.call(this.decorator,t)]}}i.$.initVariantRule(u)},118:(e,t,r)=>{"use strict";r.r(t),r.d(t,{AlternativeTeams:()=>u});var n=r(0),a=r(9),i=r(1),o=r(2);function s(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw i}}}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function c(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class u extends i.${constructor(e){super(),c(this,"teammate",void 0),this.teammate="number"==typeof e?e:2}getDecoratorType(){return a.$}getPublicProperties(){var e=1===this.teammate,t=e?"Red & Blue":"Red & Green",r=e?"Yellow & Green":"Blue & Yellow";return{parameterValue:this.teammate,information:{name:"Teams",description:"Alternative Teams: ".concat(t," form a team against ").concat(r),tag:"alternativeTeams",color:o.p.autogenous,displayIcon:"Đ"}}}matchesPGNDeclaration(e){var t=e.match(/^Teammate=(1|3)$/);return!!t&&(this.teammate=Number(t[1]),!0)}serializeToParsingForm(){return"Teammate=".concat(this.teammate)}isDisabled(e){return e.gameType!==n.Jy.Teams}getParametrizedOptions(){return new Map([["Red & Yellow v Blue & Green",2],["Red & Blue v Yellow & Green",1],["Red & Green v Blue & Yellow",3]])}initDecoratorSettings(){var e=this.decorator.gameType.teamSettings;1===this.teammate?(e.firstTeamColors=[!0,!0,!1,!1],e.secondTeamColors=[!1,!1,!0,!0]):3===this.teammate&&(e.firstTeamColors=[!0,!1,!1,!0],e.secondTeamColors=[!1,!0,!0,!1]);var t,r=s(this.wrappingDecorators);try{for(r.s();!(t=r.n()).done;){var n,a=t.value;null===(n=a.initDecoratorSettings)||void 0===n||n.call(a)}}catch(e){r.e(e)}finally{r.f()}}}i.$.initVariantRule(u)},89:(e,t,r)=>{"use strict";r.r(t),r.d(t,{BarePieceRule:()=>f});var n=r(3),a=r(9),i=r(8),o=r(5),s=r(1),l=r(2);function c(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return u(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw i}}}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}class f extends s.${getDecoratorType(){return a.$}getPublicProperties(){return{parameterValue:!0,information:{name:"Bare piece rule",description:"Players with only one remaining piece are forfeit",tag:"barePieceRule",color:l.p.minor,displayIcon:n.w.filter}}}matchesPGNDeclaration(e){return/^BarePieceLoses$/i.test(e)}isDisabled(){return!1}getInsufficientMaterialData(){return{isPartiallyDisabled:!0,isDisabled:!1}}serializeToParsingForm(){return"BarePieceLoses"}makeMove(){var e=this.decorator,t=e.data.sideToMove,r=e.board,n=e.preGeneratedAttacks,a=this.callHandler("makeMove",arguments),s=this.decorator.getPlayerPieces()[t];if(1===s.length){var l=n[t].pieceMovements.get((0,i.Kv)(s[0]));if(l){var u,f=c(l);try{for(f.s();!(u=f.n()).done;){var d=u.value.move;if(r[d[0]][d[1]].isPiece())return a}}catch(e){f.e(e)}finally{f.f()}return this.decorator.makeMove([{type:o.Fi.Resign}])}}return a}}s.$.initVariantRule(f)},122:(e,t,r)=>{"use strict";r.r(t),r.d(t,{Blindfold:()=>l});var n=r(9),a=r(8),i=r(1),o=r(2),s=r(3);class l extends i.${getDecoratorType(){return n.$}getPublicProperties(){return{parameterValue:!0,information:{name:"Blindfold",description:"Pieces are invisible",tag:"blindfold",color:o.p.visual,displayIcon:s.w.blindfold}}}matchesPGNDeclaration(e){return/^Blindfold$/i.test(e)}serializeToParsingForm(){return"Blindfold"}isDisabled(e){return e.variantDataRules.fogOfWar}getSquareVisibility(){return this.callHandler("getSquareVisibility",arguments).map(((e,t)=>e.map(((e,r)=>this.decorator.board[t][r].isWall()?e:[...e,a.Ft.Blindfolded]))))}}i.$.initVariantRule(l)},34:(e,t,r)=>{"use strict";r.r(t),r.d(t,{CaptureTheKing:()=>s});var n=r(3),a=r(9),i=r(1),o=r(2);class s extends i.${getDecoratorType(){return a.$}getPublicProperties(){return{parameterValue:!0,information:{name:"Capture the King",description:"To checkmate, kings must be captured",tag:"captureTheKing",color:o.p.minor,displayIcon:n.w.king}}}matchesPGNDeclaration(e){return/^CaptureTheKing$/i.test(e)}serializeToParsingForm(){return"CaptureTheKing"}isDisabled(e){var t=e.variantDataRules;return t.giveaway||t.taboo}getInsufficientMaterialData(){return{isPartiallyDisabled:!0,isDisabled:!1}}isKingInCheck(){return!1}isTheMoveLegal(){return!0}}i.$.initVariantRule(s)},123:(e,t,r)=>{"use strict";r.r(t),r.d(t,{Chess960:()=>p});var n=r(12),a=r(9),i=r(0),o=r(1),s=r(2),l=r(3);function c(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return u(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw i}}}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function f(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var d;class p extends o.${static createBaseChess960mappings(){return{colorBoundPieces:[2,5],supermajorPieces:[3],minorPieces:[1,6],royalPiece:[4],edgePieces:[0,7]}}constructor(e){super(),f(this,"positionID",void 0),this.positionID="number"==typeof e?e:-1}getDecoratorType(){return a.$}getPublicProperties(){return{parameterValue:this.positionID,information:{name:"Chess960",description:"Initial position with randomly shuffled pieces on home ranks",tag:"chess960",color:s.p.startingPosition,displayIcon:l.w.chess960}}}matchesPGNDeclaration(e){var t=e.match(p.regExp);if(t){var r=Number(t[1]);return!(r<0||r>15760)&&(this.positionID=r,!0)}return!1}serializeToParsingForm(){return"Chess960=".concat(this.positionID)}isDisabled(){return!1}initDecoratorSettings(){if(-1===this.positionID)throw Error("Position ID for Chess960 is not defined");var e=this.positionID,t=this.decorator.board,r=p.chess960ranges.findIndex((t=>e>=t[0]&&e<=t[1]));-1===r&&(e>p.legacy.legacy2PThreshold?(r=p.legacy.legacy2PRank,e-=p.legacy.legacy2PTakeaway):r=p.legacy.legacy4Prank);var a=[[],[],[],[]],o=[13-r,r,r,13-r];a[0]=t[o[0]].slice(p.displacement[0],p.displacement[1]),a[1]=t.map((e=>e[o[1]])).slice(p.displacement[0],p.displacement[1]),a[2]=t[o[2]].slice(p.displacement[0],p.displacement[1]),a[3]=t.map((e=>e[o[3]])).slice(p.displacement[0],p.displacement[1]);var s,l=a.map((e=>e.map((e=>!!e.isWall())))),u=[],f=c(l);try{for(f.s();!(s=f.n()).done;){var d=s.value;u.push(d.reduce(((e,t,r)=>t?e.filter((e=>p.pieceMasks[r].includes(e))):e),p.c960range))}}catch(e){f.e(e)}finally{f.f()}for(var h=e-p.chess960ranges[r][0],v=[],y=e=>{for(var t=[2*Math.floor(e%16/4),1+e%16%4*2].sort(),r=Math.floor(e/16)%6,n=p.minorPieceCache[Math.floor(e/96)%10],a={colorBoundPieces:[,,,,,,,,].fill(!1),supermajorPieces:[,,,,,,,,].fill(!1),minorPieces:[,,,,,,,,].fill(!1),royalPiece:[,,,,,,,,].fill(!1),edgePieces:[,,,,,,,,].fill(!1)},o=!1,s=!1,l=0,c=0,u=0;u<i.iJ-2*p.displacement[0];u++)u===t[0]||u===t[1]?(a.colorBoundPieces[u]=!0,l++):u===r+l?(a.supermajorPieces[u]=!0,c++):u===n[0]+l+c||u===n[1]+l+c?a.minorPieces[u]=!0:(a[o?s?"edgePieces":"royalPiece":"edgePieces"][u]=!0,s=o,o=!0);return a},m=0,g=u;m<g.length;m++){var b=g[m];if(0===b.length)return null;for(var P=h,w=0;w<2;){if(b.includes(P)){v.push(y(P));break}if(b.includes(p.twins[P-1])){v.push(y(p.twins[P-1]));break}960===++P&&(P=0,w++)}2===w&&u.push([])}var S,C=this.decorator.data.fenOptions.tag("royal"),O=C.map(((e,t)=>null!==e&&e[(0,n.ft)(t)]===o[t]?e[(0,n.ft)(t)]:-1)),A=e=>{var r=p.createBaseChess960mappings(),s=C[e];if(s)for(var l=s[(0,n.ft)(e)],c=!!O[e]&&l<=6,f=p.displacement[0];f<p.displacement[1];f++){var d=void 0;for(d in r)if(Object.prototype.hasOwnProperty.call(r,d)&&v[e][d][f-3]){-1!==O[e]&&"royalPiece"===d&&l!==f&&(s[(0,n.ft)(e)]=f);var h=c&&960===u[e].length?i.iJ-1-f:f,y=r[d].shift();if(void 0!==y){t[(0,n.sC)(e)?o[e]:h][(0,n.sC)(e)?h:o[e]]=a[e][y];break}}}},T=c(i.O9);try{for(T.s();!(S=T.n()).done;){A(S.value)}}catch(e){T.e(e)}finally{T.f()}var M,j=c(this.wrappingDecorators);try{for(j.s();!(M=j.n()).done;){var k,D=M.value;null===(k=D.initDecoratorSettings)||void 0===k||k.call(D)}}catch(e){j.e(e)}finally{j.f()}}}o.$.initVariantRule(p),f(p,"chess960ranges",[...Array.from({length:9},((e,t)=>[960*(t+1)+1,960+960*(t+1)])),...Array.from({length:5},((e,t)=>[1e4+960*(t+1)+1,10960+960*(t+1)]))]),f(p,"minorPieceCache",function(){for(var e=[],t=0;t<4;t++)for(var r=t+1;r<5;r++)e.push([t,r]);return e}()),f(p,"pieceMasks",[[404,405,406,407,408,409,410,411,412,413,414,415,420,421,422,423,424,425,426,427,428,429,430,431,436,437,438,439,440,441,442,443,444,445,446,447,452,453,454,455,456,457,458,459,460,461,462,463,468,469,470,471,472,473,474,475,476,477,478,479,500,501,502,503,504,505,506,507,508,509,510,511,516,517,518,519,520,521,522,523,524,525,526,527,532,533,534,535,536,537,538,539,540,541,542,543,548,549,550,551,552,553,554,555,556,557,558,559,564,565,566,567,568,569,570,571,572,573,574,575,596,597,598,599,600,601,602,603,604,605,606,607,612,613,614,615,616,617,618,619,620,621,622,623,628,629,630,631,632,633,634,635,636,637,638,639,644,645,646,647,648,649,650,651,652,653,654,655,660,661,662,663,664,665,666,667,668,669,670,671,692,693,694,695,696,697,698,699,700,701,702,703,708,709,710,711,712,713,714,715,716,717,718,719,724,725,726,727,728,729,730,731,732,733,734,735,740,741,742,743,744,745,746,747,748,749,750,751,756,757,758,759,760,761,762,763,764,765,766,767,788,789,790,791,792,793,794,795,796,797,798,799,804,805,806,807,808,809,810,811,812,813,814,815,820,821,822,823,824,825,826,827,828,829,830,831,836,837,838,839,840,841,842,843,844,845,846,847,852,853,854,855,856,857,858,859,860,861,862,863,884,885,886,887,888,889,890,891,892,893,894,895,900,901,902,903,904,905,906,907,908,909,910,911,916,917,918,919,920,921,922,923,924,925,926,927,932,933,934,935,936,937,938,939,940,941,942,943,948,949,950,951,952,953,954,955,956,957,958,959],[5,6,7,9,10,11,13,14,15,17,18,19,33,34,35,37,38,39,41,42,43,45,46,47,49,50,51,53,54,55,57,58,59,61,62,63,65,66,67,69,70,71,73,74,75,77,78,79,81,82,83,85,86,87,89,90,91,93,94,95,101,102,103,105,106,107,109,110,111,113,114,115,129,130,131,145,146,147,161,162,163,177,178,179,197,198,199,201,202,203,205,206,207,209,210,211,225,226,227,241,242,243,257,258,259,273,274,275,293,294,295,297,298,299,301,302,303,305,306,307,321,322,323,337,338,339,353,354,355,369,370,371,421,422,423,425,426,427,429,430,431,437,438,439,441,442,443,445,446,447,453,454,455,457,458,459,461,462,463,469,470,471,473,474,475,477,478,479,517,518,519,521,522,523,525,526,527,533,534,535,537,538,539,541,542,543,549,550,551,553,554,555,557,558,559,565,566,567,569,570,571,573,574,575,613,614,615,617,618,619,621,622,623,629,630,631,633,634,635,637,638,639,645,646,647,649,650,651,653,654,655,661,662,663,665,666,667,669,670,671],[4,5,6,7,20,21,22,23,36,37,38,39,52,53,54,55,68,69,70,71,84,85,86,87,100,101,102,103,116,117,118,119,132,133,134,135,148,149,150,151,164,165,166,167,180,181,182,183,196,197,198,199,212,213,214,215,228,229,230,231,244,245,246,247,260,261,262,263,276,277,278,279,292,293,294,295,308,309,310,311,324,325,326,327,340,341,342,343,356,357,358,359,372,373,374,375,388,389,390,391,404,405,406,407,420,421,422,423,436,437,438,439,452,453,454,455,468,469,470,471,484,485,486,487,500,501,502,503,516,517,518,519,532,533,534,535,548,549,550,551,564,565,566,567,580,581,582,583,596,597,598,599,612,613,614,615,628,629,630,631,644,645,646,647,660,661,662,663,676,677,678,679,692,693,694,695,708,709,710,711,724,725,726,727,740,741,742,743,756,757,758,759,772,773,774,775,788,789,790,791,804,805,806,807,820,821,822,823,836,837,838,839,852,853,854,855,868,869,870,871,884,885,886,887,900,901,902,903,916,917,918,919,932,933,934,935,948,949,950,951],[16,20,34,35,38,39,40,44,58,59,62,63,112,116,130,131,134,135,136,140,154,155,158,159,208,212,226,227,230,231,232,236,250,251,254,255,304,308,322,323,326,327,328,332,346,347,350,351,400,404,418,419,422,423,424,428,442,443,446,447,496,500,514,515,518,519,520,524,538,539,542,543,592,596,610,611,614,615,616,620,634,635,638,639,688,692,706,707,710,711,712,716,730,731,734,735,784,788,802,803,806,807,808,812,826,827,830,831,880,884,898,899,902,903,904,908,922,923,926,927],[14,15,30,31,46,47,62,63,66,67,70,71,76,77,82,83,86,87,92,93,110,111,126,127,142,143,158,159,162,163,166,167,172,173,178,179,182,183,188,189,194,195,198,199,204,205,210,211,214,215,220,221,226,227,230,231,236,237,240,241,244,245,256,257,260,261,272,273,276,277,290,291,294,295,300,301,306,307,310,311,316,317,322,323,326,327,332,333,336,337,340,341,352,353,356,357,368,369,372,373,398,399,414,415,430,431,446,447,450,451,454,455,460,461,466,467,470,471,476,477,482,483,486,487,492,493,498,499,502,503,508,509,514,515,518,519,524,525,528,529,532,533,544,545,548,549,560,561,564,565,578,579,582,583,588,589,594,595,598,599,604,605,610,611,614,615,620,621,624,625,628,629,640,641,644,645,656,657,660,661,672,673,676,677,688,689,692,693,768,769,772,773,784,785,788,789,864,865,868,869,880,881,884,885],[2,6,10,14,18,22,26,30,34,38,42,46,50,54,58,62,66,70,74,78,82,86,90,94,98,102,106,110,114,118,122,126,130,134,138,142,146,150,154,158,162,166,170,174,178,182,186,190,194,198,202,206,210,214,218,222,226,230,234,238,242,246,250,254,258,262,266,270,274,278,282,286,290,294,298,302,306,310,314,318,322,326,330,334,338,342,346,350,354,358,362,366,370,374,378,382,386,390,394,398,402,406,410,414,418,422,426,430,434,438,442,446,450,454,458,462,466,470,474,478,482,486,490,494,498,502,506,510,514,518,522,526,530,534,538,542,546,550,554,558,562,566,570,574,578,582,586,590,594,598,602,606,610,614,618,622,626,630,634,638,642,646,650,654,658,662,666,670,674,678,682,686,690,694,698,702,706,710,714,718,722,726,730,734,738,742,746,750,754,758,762,766,770,774,778,782,786,790,794,798,802,806,810,814,818,822,826,830,834,838,842,846,850,854,858,862,866,870,874,878,882,886,890,894,898,902,906,910,914,918,922,926,930,934,938,942,946,950,954,958],[192,193,194,196,197,198,200,201,202,208,209,210,212,213,214,216,217,218,224,225,226,228,229,230,232,233,234,240,241,242,244,245,246,248,249,250,291,295,299,307,311,315,323,327,331,339,343,347,355,359,363,368,369,370,372,373,374,376,377,378,480,481,482,484,485,486,488,489,490,496,497,498,500,501,502,504,505,506,512,513,514,516,517,518,520,521,522,528,529,530,532,533,534,536,537,538,579,583,587,595,599,603,611,615,619,627,631,635,643,647,651,656,657,658,660,661,662,664,665,666,672,673,674,676,677,678,680,681,682,688,689,690,692,693,694,696,697,698,704,705,706,708,709,710,712,713,714,720,721,722,724,725,726,728,729,730,771,775,779,787,791,795,803,807,811,819,823,827,835,839,843,848,849,850,852,853,854,856,857,858,864,865,866,867,868,869,870,871,872,873,874,875,880,881,882,883,884,885,886,887,888,889,890,891,896,897,898,899,900,901,902,903,904,905,906,907,912,913,914,915,916,917,918,919,920,921,922,923,931,935,939,944,945,946,948,949,950,952,953,954],[1,2,4,5,6,8,9,10,12,13,14,16,17,18,20,21,22,24,25,26,28,29,30,32,33,34,36,37,38,40,41,42,44,45,46,48,49,50,52,53,54,56,57,58,60,61,62,64,65,66,68,69,70,72,73,74,76,77,78,96,97,98,100,101,102,104,105,106,108,109,110,112,113,114,116,117,118,120,121,122,124,125,126,128,129,130,132,133,134,136,137,138,140,141,142,144,145,146,148,149,150,152,153,154,156,157,158,160,161,162,164,165,166,168,169,170,172,173,174,192,193,194,196,197,198,200,201,202,204,205,206,208,209,210,212,213,214,216,217,218,220,221,222,224,225,226,228,229,230,232,233,234,236,237,238,240,241,242,244,245,246,248,249,250,252,253,254,256,257,258,260,261,262,264,265,266,268,269,270,384,385,386,388,389,390,392,393,394,396,397,398,400,401,402,404,405,406,408,409,410,412,413,414,416,417,418,420,421,422,424,425,426,428,429,430,432,433,434,436,437,438,440,441,442,444,445,446,448,449,450,452,453,454,456,457,458,460,461,462,480,481,482,484,485,486,488,489,490,492,493,494,496,497,498,500,501,502,504,505,506,508,509,510,512,513,514,516,517,518,520,521,522,524,525,526,528,529,530,532,533,534,536,537,538,540,541,542,544,545,546,548,549,550,552,553,554,556,557,558,672,673,674,676,677,678,680,681,682,684,685,686,688,689,690,692,693,694,696,697,698,700,701,702,704,705,706,708,709,710,712,713,714,716,717,718,720,721,722,724,725,726,728,729,730,732,733,734,736,737,738,740,741,742,744,745,746,748,749,750]]),f(p,"c960range",((d=[...Array(961).keys()]).shift(),d)),f(p,"twins",[959,955,951,947,958,954,950,946,957,953,949,945,956,952,948,944,943,939,935,931,942,938,934,930,941,937,933,929,940,936,932,928,927,923,919,915,926,922,918,914,925,921,917,913,924,920,916,912,911,907,903,899,910,906,902,898,909,905,901,897,908,904,900,896,895,891,887,883,894,890,886,882,893,889,885,881,892,888,884,880,879,875,871,867,878,874,870,866,877,873,869,865,876,872,868,864,863,859,855,851,862,858,854,850,861,857,853,849,860,856,852,848,847,843,839,835,846,842,838,834,845,841,837,833,844,840,836,832,831,827,823,819,830,826,822,818,829,825,821,817,828,824,820,816,815,811,807,803,814,810,806,802,813,809,805,801,812,808,804,800,799,795,791,787,798,794,790,786,797,793,789,785,796,792,788,784,783,779,775,771,782,778,774,770,781,777,773,769,780,776,772,768,671,667,663,659,670,666,662,658,669,665,661,657,668,664,660,656,655,651,647,643,654,650,646,642,653,649,645,641,652,648,644,640,639,635,631,627,638,634,630,626,637,633,629,625,636,632,628,624,623,619,615,611,622,618,614,610,621,617,613,609,620,616,612,608,607,603,599,595,606,602,598,594,605,601,597,593,604,600,596,592,591,587,583,579,590,586,582,578,589,585,581,577,588,584,580,576,383,379,375,371,382,378,374,370,381,377,373,369,380,376,372,368,367,363,359,355,366,362,358,354,365,361,357,353,364,360,356,352,351,347,343,339,350,346,342,338,349,345,341,337,348,344,340,336,335,331,327,323,334,330,326,322,333,329,325,321,332,328,324,320,319,315,311,307,318,314,310,306,317,313,309,305,316,312,308,304,303,299,295,291,302,298,294,290,301,297,293,289,300,296,292,288,767,763,759,755,766,762,758,754,765,761,757,753,764,760,756,752,751,747,743,739,750,746,742,738,749,745,741,737,748,744,740,736,735,731,727,723,734,730,726,722,733,729,725,721,732,728,724,720,719,715,711,707,718,714,710,706,717,713,709,705,716,712,708,704,703,699,695,691,702,698,694,690,701,697,693,689,700,696,692,688,687,683,679,675,686,682,678,674,685,681,677,673,684,680,676,672,575,571,567,563,574,570,566,562,573,569,565,561,572,568,564,560,559,555,551,547,558,554,550,546,557,553,549,545,556,552,548,544,543,539,535,531,542,538,534,530,541,537,533,529,540,536,532,528,527,523,519,515,526,522,518,514,525,521,517,513,524,520,516,512,511,507,503,499,510,506,502,498,509,505,501,497,508,504,500,496,495,491,487,483,494,490,486,482,493,489,485,481,492,488,484,480,287,283,279,275,286,282,278,274,285,281,277,273,284,280,276,272,271,267,263,259,270,266,262,258,269,265,261,257,268,264,260,256,255,251,247,243,254,250,246,242,253,249,245,241,252,248,244,240,239,235,231,227,238,234,230,226,237,233,229,225,236,232,228,224,223,219,215,211,222,218,214,210,221,217,213,209,220,216,212,208,207,203,199,195,206,202,198,194,205,201,197,193,204,200,196,192,479,475,471,467,478,474,470,466,477,473,469,465,476,472,468,464,463,459,455,451,462,458,454,450,461,457,453,449,460,456,452,448,447,443,439,435,446,442,438,434,445,441,437,433,444,440,436,432,431,427,423,419,430,426,422,418,429,425,421,417,428,424,420,416,415,411,407,403,414,410,406,402,413,409,405,401,412,408,404,400,399,395,391,387,398,394,390,386,397,393,389,385,396,392,388,384,191,187,183,179,190,186,182,178,189,185,181,177,188,184,180,176,175,171,167,163,174,170,166,162,173,169,165,161,172,168,164,160,159,155,151,147,158,154,150,146,157,153,149,145,156,152,148,144,143,139,135,131,142,138,134,130,141,137,133,129,140,136,132,128,127,123,119,115,126,122,118,114,125,121,117,113,124,120,116,112,111,107,103,99,110,106,102,98,109,105,101,97,108,104,100,96,95,91,87,83,94,90,86,82,93,89,85,81,92,88,84,80,79,75,71,67,78,74,70,66,77,73,69,65,76,72,68,64,63,59,55,51,62,58,54,50,61,57,53,49,60,56,52,48,47,43,39,35,46,42,38,34,45,41,37,33,44,40,36,32,31,27,23,19,30,26,22,18,29,25,21,17,28,24,20,16,15,11,7,3,14,10,6,2,13,9,5,1,12,8,4,0]),f(p,"legacy",{legacy2PThreshold:1e3,legacy2PRank:3,legacy4Prank:0,legacy2PTakeaway:6160}),f(p,"displacement",[3,11]),f(p,"regExp",/Chess960=(\d{1,5})/i)},90:(e,t,r)=>{"use strict";r.r(t),r.d(t,{Crazyhouse:()=>h});var n=r(9),a=r(0),i=r(1),o=r(2),s=r(6),l=r(48),c=r(12),u=r(3);function f(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return d(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return d(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw i}}}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function p(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class h extends i.${constructor(){super(...arguments),p(this,"dependencies",new Map([[l.FiftyMoveRule,[1/0]]]))}getDecoratorType(){return n.$}getPublicProperties(){return{parameterValue:!0,information:{name:"Crazyhouse",description:"You can drop pieces from banks",tag:"crazyhouse",color:o.p.extending,displayIcon:u.w.crazyhouse}}}matchesPGNDeclaration(e){return/^Crazyhouse$/i.test(e)}serializeToParsingForm(){return"Crazyhouse"}isDisabled(){return!1}getInsufficientMaterialData(){return{isPartiallyDisabled:!1,isDisabled:!0}}initDecoratorSettings(){this.decorator.data.fenOptions.setTag("areBanksEnabled",[!0,!0,!0,!0]);var e,t=f(this.wrappingDecorators);try{for(t.s();!(e=t.n()).done;){var r,n=e.value;null===(r=n.initDecoratorSettings)||void 0===r||r.call(n)}}catch(e){t.e(e)}finally{t.f()}}getDroppingMoves(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.decorator.data.sideToMove;if(e.color!==t)return[];var r=this.decorator.data.fenOptions.tag("royal")[t];if(r&&this.decorator.preGeneratedAttacks[t].hoppingPieces[r[0]][r[1]])return[];for(var n=s.Gf[e.piece].moveGenerationSettings.isPawn,i=[],o=(0,c.sC)(t),l=!1===this.decorator.variantData.promotionRank?-1:this.decorator.variantData.promotionRank,u=this.decorator.data.fenOptions.tag("pawnBaseRank"),f=0;f<a.iJ;f++)if(!n||!o||l!==f&&u!==f)for(var d=0;d<a.iJ;d++){if(!n||o||l!==d&&u!==d)this.decorator.board[f][d].isEmpty()&&i.push({piece:e,endCoordinates:[f,d]})}return this.decorator.isKingInCheck(t)?i.filter((e=>{var r=this.decorator.makeMove([e],!0),n=r.checks,a=r.checkmates;return!n[t]||a[t]||this.decorator.isKingInCheck(t)})):i}}i.$.initVariantRule(h)},124:(e,t,r)=>{"use strict";r.r(t),r.d(t,{DuckChess:()=>v});var n=r(9),a=r(5),i=r(1),o=r(2),s=r(34),l=r(7),c=r(0),u=r(11),f=r(3);function d(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return p(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return p(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw i}}}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function h(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class v extends i.${constructor(){super(...arguments),h(this,"dependencies",new Map([[s.CaptureTheKing,[]]]))}getDecoratorType(){return n.$}getPublicProperties(){return{parameterValue:!0,information:{name:"Duck Chess",description:"The duck must be moved to an empty square after every move",tag:"duckChess",color:o.p.extending,displayIcon:f.w.duck}}}matchesPGNDeclaration(e){return/^DuckChess$/i.test(e)}serializeToParsingForm(){return"DuckChess"}isDisabled(e){return e.variantDataRules.taboo}getLegalMoves(e,t){for(var r=this.callHandler("getLegalMoves",arguments),n=(0,a.iw)(r),i=[],o=[],s=0;s<c.iJ;s++)for(var f=0;f<c.iJ;f++){var p=this.decorator.board[s][f];p.isWall()&&p.piece===u.KR.duck?i.push([s,f]):p.isEmpty()&&o.push([s,f])}var h=[],v=[];if(0===i.length){var y,m=d(o);try{for(m.s();!(y=m.n()).done;){var g=y.value;h.push({piece:l.St,endCoordinates:g})}}catch(e){m.e(e)}finally{m.f()}h.push({piece:l.St,endCoordinates:[e,t]})}else{var b,P=d(i);try{for(P.s();!(b=P.n()).done;){var w,S=b.value,C=d(o);try{for(C.s();!(w=C.n()).done;){var O=w.value;v.push({startCoordinates:S,endCoordinates:O})}}catch(e){C.e(e)}finally{C.f()}v.push({startCoordinates:S,endCoordinates:[e,t]})}}catch(e){P.e(e)}finally{P.f()}}var A,T=d(n);try{for(T.s();!(A=T.n()).done;){A.value.nextChainedMoves=h.length>0?h:v}}catch(e){T.e(e)}finally{T.f()}return r}}i.$.initVariantRule(v)},77:(e,t,r)=>{"use strict";r.r(t),r.d(t,{FogOfWar:()=>v});var n=r(3),a=r(12),i=r(9),o=r(8),s=r(1),l=r(2),c=r(34);function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i,o,s=[],l=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(c)throw a}}return s}}(e,t)||d(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=d(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw i}}}}function d(e,t){if(e){if("string"==typeof e)return p(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?p(e,t):void 0}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function h(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class v extends s.${constructor(){super(...arguments),h(this,"dependencies",new Map([[c.CaptureTheKing,[]]]))}getDecoratorType(){return i.$}getPublicProperties(){return{parameterValue:!0,information:{name:"Fog of War",description:"Players can only see their pieces and the squares they can legally move to",tag:"fogOfWar",color:l.p.widespread,displayIcon:n.w.fogOfWar}}}matchesPGNDeclaration(e){return/^FogOfWar$/i.test(e)}serializeToParsingForm(){return"FogOfWar"}isDisabled(e){return e.variantDataRules.taboo}getSquareVisibility(){var e,t=(0,a.BD)((()=>!1)),r=this.decorator.preGeneratedAttacks[this.decorator.data.sideToMove],n=f(r.pieceMovements);try{for(n.s();!(e=n.n()).done;){var i=u(e.value,2),s=i[0],l=i[1],c=(0,o.Xm)(s);t[c[0]][c[1]]=!0;var d,p=f(l);try{for(p.s();!(d=p.n()).done;){var h=d.value.move;t[h[0]][h[1]]=!0}}catch(e){p.e(e)}finally{p.f()}}}catch(e){n.e(e)}finally{n.f()}for(var v=0,y=[...r.pieceDrops.pawn,...r.pieceDrops.piece];v<y.length;v++){var m=y[v];t[m.endCoordinates[0]][m.endCoordinates[1]]=!0}return this.callHandler("getSquareVisibility",arguments).map(((e,r)=>e.map(((e,n)=>this.decorator.board[r][n].isWall()||t[r][n]?e:[...e,o.Ft.Fogged]))))}}s.$.initVariantRule(v)},35:(e,t,r)=>{"use strict";r.r(t),r.d(t,{ForcedCapture:()=>u});var n=r(9),a=r(8),i=r(1),o=r(2),s=r(3);function l(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw i}}}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}class u extends i.${getDecoratorType(){return n.$}getPublicProperties(){return{parameterValue:!0,information:{name:"Forced Capture",description:"Capturing is always compulsory",tag:"forcedCapture",color:o.p.widespread,displayIcon:s.w.target}}}matchesPGNDeclaration(e){return/^ForcedCapture$/i.test(e)}serializeToParsingForm(){return"ForcedCapture"}isDisabled(){return!1}getInsufficientMaterialData(){return{isPartiallyDisabled:!0,isDisabled:!1}}pregenerateAttacks(){var e=this.decorator,t=e.data.sideToMove,r=e.board,n=e.preGeneratedAttacks;this.callHandler("pregenerateAttacks",arguments);var i,o=l(this.decorator.getPlayerPieces()[t]);try{for(o.s();!(i=o.n()).done;){var s=i.value,c=n[t].pieceMovements.get((0,a.Kv)(s));if(c){var u,f=l(c);try{for(f.s();!(u=f.n()).done;){var d=u.value.move;if(r[d[0]][d[1]].isPiece())return void(n[t].variantRuleCache.hasCaptures=!0)}}catch(e){f.e(e)}finally{f.f()}}}}catch(e){o.e(e)}finally{o.f()}n[t].variantRuleCache.hasCaptures=!1}isTheMoveLegal(e,t){return!(!(this.decorator.data.getCapturedPieces(t).length>0)&&this.decorator.preGeneratedAttacks[this.decorator.data.sideToMove].variantRuleCache.hasCaptures)&&this.callHandler("isTheMoveLegal",arguments)}}i.$.initVariantRule(u)},125:(e,t,r)=>{"use strict";r.r(t),r.d(t,{Anonymous:()=>d,SelfPartner:()=>h,SemiAnonymous:()=>p});var n=r(3),a=r(95),i=r(9),o=r(0),s=r(11),l=r(1),c=r(2);function u(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return f(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return f(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw i}}}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}class d extends l.${getDecoratorType(){return i.$}getPublicProperties(){return{parameterValue:!0,information:{name:"Anonymous",description:"Players' names and ratings are hidden",tag:"anonymous",color:c.p.metadata,displayIcon:n.w.userInformation}}}matchesPGNDeclaration(e){return/^Anonymous$/i.test(e)}serializeToParsingForm(){return"Anonymous"}isDisabled(){return!1}initDecoratorSettings(){for(var e=0;e<o.q3;e++)this.decorator.gameData.players[e].name="Anonymous",this.decorator.gameData.players[e].elo=void 0;var t,r=u(this.wrappingDecorators);try{for(r.s();!(t=r.n()).done;){var n,a=t.value;null===(n=a.initDecoratorSettings)||void 0===n||n.call(a)}}catch(e){r.e(e)}finally{r.f()}}}l.$.initVariantRule(d);class p extends l.${getDecoratorType(){return i.$}getPublicProperties(){return{parameterValue:!0,information:{name:"Semi-Anonymous",description:"Players's colors are hidden",tag:"semiAnonymous",color:c.p.metadata,displayIcon:n.w.userExtraInformation}}}matchesPGNDeclaration(e){return/^Semi-Anonymous$/i.test(e)}serializeToParsingForm(){return"Semi-Anonymous"}isDisabled(){return!1}initDecoratorSettings(){(0,a.Sy)(this.decorator.gameData.players);var e,t=u(this.wrappingDecorators);try{for(t.s();!(e=t.n()).done;){var r,n=e.value;null===(r=n.initDecoratorSettings)||void 0===r||r.call(n)}}catch(e){t.e(e)}finally{t.f()}}}l.$.initVariantRule(p);class h extends l.${getDecoratorType(){return i.$}getPublicProperties(){return{parameterValue:!0,information:{name:"Self-Partner",description:"Both sides of the team were played by one player",tag:"selfPartner",color:c.p.metadata,displayIcon:n.w.selfPartner}}}matchesPGNDeclaration(e){return/^SelfPartner$/i.test(e)}serializeToParsingForm(){return"SelfPartner"}isDisabled(e){var t=e.gameType,r=e.fenTags;return t!==o.Jy.Teams||0!==r.resigned.value.filter(Boolean).length}initDecoratorSettings(){var e,t=u(this.wrappingDecorators);try{for(t.s();!(e=t.n()).done;){var r,n=e.value;null===(r=n.initDecoratorSettings)||void 0===r||r.call(n)}}catch(e){t.e(e)}finally{t.f()}var a=this.decorator.gameType,i=a.teamSettings.firstTeamColors.indexOf(!0),o=a.teamSettings.secondTeamColors.indexOf(!0);(0,s.O3)(i)&&(this.decorator.gameData.players[a.getTeammateColor(i)].name=this.decorator.gameData.players[i].name),(0,s.O3)(o)&&(this.decorator.gameData.players[a.getTeammateColor(o)].name=this.decorator.gameData.players[o].name)}}l.$.initVariantRule(h)},126:(e,t,r)=>{"use strict";r.r(t),r.d(t,{Ghostboard:()=>l});var n=r(3),a=r(9),i=r(8),o=r(1),s=r(2);class l extends o.${getDecoratorType(){return a.$}getPublicProperties(){return{parameterValue:!0,information:{name:"Ghostboard",description:"Board, clocks and players are invisible",tag:"ghostboard",color:s.p.visual,displayIcon:n.w.crossedBinoculars}}}matchesPGNDeclaration(e){return/^Ghostboard$/i.test(e)}serializeToParsingForm(){return"Ghostboard"}isDisabled(){return!1}getSquareVisibility(){return this.callHandler("getSquareVisibility",arguments).map((e=>e.map((e=>[...e,i.Ft.Ghosted]))))}}o.$.initVariantRule(l)},91:(e,t,r)=>{"use strict";r.r(t),r.d(t,{ParadigmChess30:()=>f});var n=r(3),a=r(9),i=r(1),o=r(2);function s(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw i}}}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function c(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var u="paradigmChess30";class f extends i.${constructor(e){super(),c(this,"preMethodExecution",!1),c(this,"positionId",void 0),this.positionId="number"==typeof e?e:-1}getPublicProperties(){return{parameterValue:this.positionId,information:{name:"Paradigm Chess30",description:"Paradigm Chess30: Dragon bishops combine the movement of bishop and xiangqi horse. 30 semi-random starting positions",tag:u,color:o.p.startingPosition,displayIcon:n.w.bishop}}}getDecoratorType(){return a.$}matchesPGNDeclaration(e){var t=e.match(/^ParadigmChess30=((\d{1,3}))$/i);if(t){var r=Number(t[1]);return!(r<0||r>450)&&(this.positionId=r,!0)}return!1}serializeToParsingForm(){return"ParadigmChess30=".concat(this.positionId)}isDisabled(){return!1}getInformation(){return{name:"Paradigm Chess30",description:"Paradigm Chess30: Dragon bishops combine the movement of bishop and xiangqi horse. 30 semi-random starting positions",tag:u}}initDecoratorSettings(){if(-1===this.positionId)throw Error("Position ID for Paradigm Chess30 is not defined");var e=this.positionId,t=this.decorator.board,r=this.decorator.data,n=f.paradigmRanges.findIndex((t=>e>=t[0]&&e<=t[1]));-1===n&&(n=f.legacy.twoPlayerRank,e+=f.legacy.twoPlayerAdjustment);var a=e-f.paradigmRanges[n][0],i=[13-n,n,n,13-n],o=[[],[],[],[]];o[0]=t[i[0]].slice(4,10),o[1]=t.map((e=>e[i[1]])).slice(4,10),o[2]=t[i[2]].slice(4,10),o[3]=t.map((e=>e[i[3]])).slice(4,10);for(var l=r.fenOptions.tag("royal"),c=r.fenOptions.tag("dead"),u=e=>{for(var r,n=null===(r=l[e])||void 0===r?void 0:r[e%2==0?1:0],s=[[5,8],[4,9],[void 0===n||n>=7?6:7]],u=(r,n)=>{var a;if(!c[e]){var u=e%2==0?i[e]:n,f=e%2==0?n:i[e];o[e][s[r][0]-4].isWall()||t[u][f].isWall()||(l.some((e=>!(!e||e[0]!==u||e[1]!==f)&&(e[0]=f,e[1]=u,!0))),t[u][f]=o[e][(null!==(a=s[r].shift())&&void 0!==a?a:4)-4])}},d=0,p=void 0===n||n>=7?7:6,h=6===p?f.permutations[a].slice().reverse():f.permutations[a],v=4;v<10;v++)v!==p&&u(h[d++],v)},d=0;d<4;d++)u(d);var p,h=s(this.wrappingDecorators);try{for(h.s();!(p=h.n()).done;){var v,y=p.value;null===(v=y.initDecoratorSettings)||void 0===v||v.call(y)}}catch(e){h.e(e)}finally{h.f()}}}i.$.initVariantRule(f),c(f,"paradigmRanges",[...Array.from({length:14},((e,t)=>[30*(t+1)+1,30+30*(t+1)]))]),c(f,"permutations",[[0,0,1,1,2],[0,0,1,2,1],[0,0,2,1,1],[0,1,0,1,2],[0,1,0,2,1],[0,1,1,0,2],[0,1,1,2,0],[0,1,2,0,1],[0,1,2,1,0],[0,2,0,1,1],[0,2,1,0,1],[0,2,1,1,0],[1,0,0,1,2],[1,0,0,2,1],[1,0,1,0,2],[1,0,1,2,0],[1,0,2,0,1],[1,0,2,1,0],[1,1,0,0,2],[1,1,0,2,0],[1,1,2,0,0],[1,2,0,0,1],[1,2,0,1,0],[1,2,1,0,0],[2,0,0,1,1],[2,0,1,0,1],[2,0,1,1,0],[2,1,0,0,1],[2,1,0,1,0],[2,1,1,0,0]]),c(f,"legacy",{twoPlayerRank:3,twoPlayerAdjustment:120})},127:(e,t,r)=>{"use strict";r.r(t),r.d(t,{PiecesFaceCenter:()=>l});var n=r(9),a=r(8),i=r(1),o=r(2),s=r(3);class l extends i.${getDecoratorType(){return n.$}getPublicProperties(){return{parameterValue:!0,information:{name:"Pieces Face Center",description:"Pieces are rotated to face center",tag:"piecesFaceCenter",color:o.p.visual,displayIcon:s.w.pawn3dLarge}}}matchesPGNDeclaration(e){return/^PiecesFaceCenter$/i.test(e)}serializeToParsingForm(){return"PiecesFaceCenter"}isDisabled(){return!1}getSquareVisibility(){return this.callHandler("getSquareVisibility",arguments).map(((e,t)=>e.map(((e,r)=>this.decorator.board[t][r].isPiece()?[...e,a.Ft.PieceFacesCenter]:e))))}}i.$.initVariantRule(l)},68:(e,t,r)=>{"use strict";r.r(t),r.d(t,{SeirawanSetup:()=>d});var n=r(9),a=r(8),i=r(0),o=r(5),s=r(1),l=r(2),c=r(3);function u(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return f(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return f(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw i}}}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}class d extends s.${getDecoratorType(){return n.$}getPublicProperties(){return{parameterValue:!0,information:{name:"Seirawan Setup",description:"When moving a piece for the first time, a piece from the bank can be placed on the vacated square, as part of the move",tag:"seirawanSetup",color:l.p.extending,displayIcon:c.w.pieceMeal}}}matchesPGNDeclaration(e){return/^SeirawanSetup$/i.test(e)}serializeToParsingForm(){return"SeirawanSetup"}isDisabled(e){var t=e.variantDataRules;return t.crazyhouse||!1!==t.setupChess}initDecoratorSettings(){var e,t=this.decorator.data.fenOptions,r=t.tag("areBanksEnabled"),n=t.tag("dead"),a=t.tag("seirawanDrops"),o=t.tag("bank"),s=u(i.O9);try{for(s.s();!(e=s.n()).done;){var l=e.value;!n[l]&&a[l].size>0&&o[l].size>0&&(r[l]=!0)}}catch(e){s.e(e)}finally{s.f()}var c,f=u(this.wrappingDecorators);try{for(f.s();!(c=f.n()).done;){var d,p=c.value;null===(d=p.initDecoratorSettings)||void 0===d||d.call(p)}}catch(e){f.e(e)}finally{f.f()}}makeMove(e){var t=this.decorator.data,r=t.fenOptions,n=t.sideToMove,i=r.tag("areBanksEnabled"),s=r.tag("seirawanDrops"),l=r.tag("bank"),c=!1;(0,o.$j)(e[0])&&(s[n].delete((0,a.Kv)(e[0].startCoordinates)),0!==s[n].size&&0!==l[n].size||(c=!0));var u=this.callHandler("makeMove",arguments);return c&&(s[n].clear(),l[n].clear(),i[n]=!1),u}getLegalMoves(e,t){var r,n=this.decorator.data,i=n.fenOptions,s=n.sideToMove,l=i.tag("seirawanDrops"),c=i.tag("bank"),f=[e,t],d=(0,a.Kv)(f),p=[...l[s]].find((e=>e===d)),h=0!==c[s].size&&void 0!==p,v=this.callHandler("getLegalMoves",arguments),y=[],m=u(c[s].keys());try{for(m.s();!(r=m.n()).done;){var g=r.value;y.push({piece:g,endCoordinates:f})}}catch(e){m.e(e)}finally{m.f()}if(h&&(0,o.nc)(y)){var b,P=u(v);try{for(P.s();!(b=P.n()).done;){b.value.nextChainedMoves=y}}catch(e){P.e(e)}finally{P.f()}}return v}}s.$.initVariantRule(d)},78:(e,t,r)=>{"use strict";r.r(t),r.d(t,{SelfCheck:()=>d});var n=r(9),a=r(8),i=r(1),o=r(2),s=r(3);function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i,o,s=[],l=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(c)throw a}}return s}}(e,t)||u(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=u(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw i}}}}function u(e,t){if(e){if("string"==typeof e)return f(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?f(e,t):void 0}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}class d extends i.${getDecoratorType(){return n.$}getPublicProperties(){return{parameterValue:!0,information:{name:"Self-check",description:"Self-checks cost lives. Checkmate yourself to earn points",tag:"selfCheck",color:o.p.minor,displayIcon:s.w.donut}}}matchesPGNDeclaration(e){return/^SelfCheck$/i.test(e)}serializeToParsingForm(){return"SelfCheck"}isDisabled(e){var t=e.variantDataRules;return!t.nCheck||!t.captureTheKing}getCurrentChecks(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.decorator.data.sideToMove,t=this.decorator,r=t.data,n=r.fenOptions,i=r.sideToMove,o=t.preGeneratedAttacks,s=this.callHandler("getCurrentChecks",arguments),u=n.tag("royal")[e],f=[];if(u){var d,p=c(o[i].hoppingPieceLines);try{for(p.s();!(d=p.n()).done;){var h=l(d.value,2),v=h[0],y=h[1];(0,a.ef)(y,u)&&f.push((0,a.Kv)(v))}}catch(e){p.e(e)}finally{p.f()}var m,g=c(o[i].slidingPiecesLines);try{for(g.s();!(m=g.n()).done;){var b,P=l(m.value,2),w=P[0],S=c(P[1]);try{for(S.s();!(b=S.n()).done;){var C=b.value;if((0,a.ef)(C,u)){f.push((0,a.Kv)(w));break}}}catch(e){S.e(e)}finally{S.f()}}}catch(e){g.e(e)}finally{g.f()}}return s[e]=f,s}}i.$.initVariantRule(d)},69:(e,t,r)=>{"use strict";r.r(t),r.d(t,{SetupChess:()=>y});var n=r(6),a=r(84),i=r(9),o=r(0),s=r(5),l=r(1),c=r(2),u=r(3);function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i,o,s=[],l=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(c)throw a}}return s}}(e,t)||p(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=p(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw i}}}}function p(e,t){if(e){if("string"==typeof e)return h(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?h(e,t):void 0}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function v(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class y extends l.${constructor(e){super(),v(this,"disabled",!1),v(this,"setupPoints",void 0),v(this,"wereBanksEnabled",[!1,!1,!1,!1]),v(this,"permutationCoordinates",[[],[],[],[]]),v(this,"pawnPermutationCoordinates",[[],[],[],[]]),this.setupPoints="number"==typeof e&&e}getDecoratorType(){return i.$}getPublicProperties(){return{parameterValue:this.setupPoints,information:{name:"Setup Material",description:"Set up ".concat(this.setupPoints||0," points before the game starts"),tag:"setupChess",color:c.p.phased,displayIcon:u.w.movePawn}}}matchesPGNDeclaration(e){var t=e.match(/^Setup=(\d+)$/);return!!t&&(this.setupPoints=Number(t[1]),!0)}serializeToParsingForm(){return"Setup=".concat(this.setupPoints||0)}isDisabled(){return!1}getInsufficientMaterialData(){return{isPartiallyDisabled:!1,isDisabled:!0}}getParametrizedOptions(){for(var e=new Map([["Off",!1]]),t=1;t<50;t++)e.set(t+"",t);for(var r=50;r<=120;r+=5)e.set(r+"",r);return e}initDecoratorSettings(){var e,t=this,r=this.decorator.data.fenOptions,n=r.tag("areBanksEnabled"),i=r.tag("dead"),s=r.tag("setupComplete"),l=r.tag("setupPoints"),c=r.tag("pawnBaseRank"),u=r.tag("royal"),f=r.tag("castleKingside"),p=r.tag("castleQueenside"),h=null===l,v=(e,t,r)=>[[13-e,t],[t,e],[e,t],[13-t,e]][r],y=d(o.O9);try{var m=function(){var r=e.value,d=!1;if(n[r]?(t.wereBanksEnabled[r]=!0,d=!0):s[r]||(n[r]=!0,d=!0),d){var y=(0,a.fi)(((e,t)=>t),o.iJ),m=[c,c+1].filter((e=>e>=0&&e<=13)),g=[c-1,...m];t.permutationCoordinates[r]=y.flatMap((e=>g.map((t=>v(t,e,r))))),t.pawnPermutationCoordinates[r]=y.flatMap((e=>m.map((t=>v(t,e,r)))))}h||i[r]||(l[r]=!1===t.setupPoints?0:t.setupPoints),u[r]||(f[r]=!1,p[r]=!1)};for(y.s();!(e=y.n()).done;)m()}catch(e){y.e(e)}finally{y.f()}var g,b=d(this.wrappingDecorators);try{for(b.s();!(g=b.n()).done;){var P,w=g.value;null===(P=w.initDecoratorSettings)||void 0===P||P.call(w)}}catch(e){b.e(e)}finally{b.f()}}getLegalMoves(){return this.disabled?this.callHandler("getLegalMoves",arguments):[]}getCoordinateList(e){return n.Gf[e.piece].moveGenerationSettings.isPawn?this.pawnPermutationCoordinates:this.permutationCoordinates}getDroppingMoves(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.decorator.data.sideToMove;if(e.color!==t)return[];if(this.disabled||this.decorator.data.fenOptions.tag("setupComplete")[t])return this.callHandler("getDroppingMoves",arguments);var r,n=[],a=d(this.getCoordinateList(e)[t]);try{for(a.s();!(r=a.n()).done;){var i=r.value;this.decorator.board[i[0]][i[1]].isEmpty()&&n.push({piece:e,endCoordinates:i})}}catch(e){a.e(e)}finally{a.f()}return n}makeMove(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=this.decorator.data.fenOptions,a=r.tag("areBanksEnabled"),l=r.tag("dead"),c=r.tag("setupComplete"),u=r.tag("setupPoints"),p=r.tag("bank"),h=r.tag("royal"),v=this.decorator.data.sideToMove,y=e[0],m=this.callHandler("makeMove",arguments);if(!this.disabled&&!c[v]&&(0,s.x7)(y)&&u){var g=n.Gf[y.piece.piece].points.singlesPoints;"K"===y.piece.piece?(p[v].delete(y.piece),h[v]=y.endCoordinates):u[v]-=g;var b,P=u[v],w=d(p[v]);try{for(w.s();!(b=w.n()).done;){var S=f(b.value,1)[0];"K"!==S.piece&&g>P&&p[v].delete(S)}}catch(e){w.e(e)}finally{w.f()}if(0===p[v].size)c[v]=!0;else{var C,O=!1,A=d(this.getCoordinateList(y.piece)[v]);try{for(A.s();!(C=A.n()).done;){var T=C.value;if(this.decorator.board[T[0]][T[1]].isEmpty()){O=!0;break}}}catch(e){A.e(e)}finally{A.f()}O||(c[v]=!0)}}if(c.every(((e,t)=>e||l[t]))){this.disabled=!0;var M,j=d(o.O9);try{for(j.s();!(M=j.n()).done;){var k=M.value;this.wereBanksEnabled[k]||(a[k]=!1,p[k].clear())}}catch(e){j.e(e)}finally{j.f()}}return this.disabled||t||!c[this.decorator.data.sideToMove]||i.$.prototype.makeMove.call(this.decorator,[{type:s.Fi.Pass}]),m}}l.$.initVariantRule(y)},70:(e,t,r)=>{"use strict";r.r(t),r.d(t,{Taboo:()=>u});var n=r(9),a=r(0),i=r(1),o=r(2),s=r(3);function l(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw i}}}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}class u extends i.${getDecoratorType(){return n.$}getPublicProperties(){return{parameterValue:!0,information:{name:"Taboo",description:"Giving check is forbidden",tag:"taboo",color:o.p.widespread,displayIcon:s.w.equal}}}matchesPGNDeclaration(e){return/^Taboo$/i.test(e)}serializeToParsingForm(){return"Taboo"}isDisabled(){return!1}isSetupComplex(){return!0}isTheMoveLegal(e,t){var r=this.decorator.data.fenOptions.tag("dead").slice(),n=this.decorator.createSnapshot();try{this.decorator.makeMove([t],!0);var i,o=this.decorator.data.fenOptions.tag("dead").slice(),s=l(a.O9);try{for(s.s();!(i=s.n()).done;){var c=i.value;if(!r[c]&&o[c]||this.decorator.isKingInCheck(c))return!1}}catch(e){s.e(e)}finally{s.f()}return!0}finally{this.decorator.loadSnapshot(n)}}}i.$.initVariantRule(u)},49:(e,t,r)=>{"use strict";r.r(t),r.d(t,{comfuterAlgorithm:()=>S});var n=r(84),a=r(12),i=r(8),o=r(0),s=r(7),l=r(5),c=r(6),u=r(20),f=r(43);function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i,o,s=[],l=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(c)throw a}}return s}}(e,t)||h(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=h(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw i}}}}function h(e,t){if(e){if("string"==typeof e)return v(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?v(e,t):void 0}}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){g(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function g(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var b=(e,t,r)=>r.indexOf(e)===t,P=(e,t,r)=>"".concat(e,",").concat(t,"/").concat(null!=r?r:"");function w(e,t,r){switch(r){case 0:return[e-1,t];case 1:return[e,t+1];case 2:return[e+1,t];case 3:return[e,t-1]}}var S=(0,u.createBotAlgorithm)(function(){var e;function t(e){return{board:e,boardSquares:e.board,data:e.data,remainingReal:e.data.getRealPlayers(),remaining:e.data.fenOptions.tag("dead").map(((e,t)=>!e&&t)).filter((e=>!1===e)),coverage:(0,a.BD)((()=>[])),pieces:e.getPlayerPieces(),controls:e.controls,royal:e.data.fenOptions.tag("royal"),hangingCache:new Map,coverageCache:new Map,pieceValueCache:new Map}}function r(t,r,n){if(-1===t)return 999;var a=e.royal[n];if(!a)return 999;var i=Math.abs(t-a[0]),o=Math.abs(r-a[1]);return 0===i&&0===o?999:Math.max(i,o)}function h(t,r,n){var a=e,i=a.coverageCache,o=a.coverage,s=a.boardSquares,l=a.data,c=a.board,f=a.zombieType,d=a.defaultSideToMove,h=l.fenOptions.tag("resigned"),v=P(t,r,n);if(i.has(v))return i.get(v);var y=[],m=[],g=o[t][r];if(g.length){var b,w=p(g);try{for(w.s();!(b=w.n()).done;){var S=b.value,C=s[S[0]][S[1]];if(C.isPiece()){var O=C.color;h[O]&&f[O]===u.ZombieType.Rando||(c.gameType.isSameTeam(O,d)?m.push(S):y.push(S))}}}catch(e){w.e(e)}finally{w.f()}}var A=n===d?{attackers:y,defenders:m}:{defenders:y,attackers:m};return i.set(v,A),A}function v(t,n){var a=e,i=a.boardSquares,l=a.pieceValueCache,u=a.isFFA,f=a.isTeams,d=a.remainingReal,v=a.royal,y=a.board,m=[t,n],g=i[t][n];if(!g.isPiece())return 0;var b=g.piece,P="".concat(m[0],",").concat(m[1],"/").concat(g.color);if(l.has(P))return l.get(P);var S=0,C=c.Gf[b];if(C.moveGenerationSettings.isPawn){S=u?1:.4;var O=function(t,r,n){return-1===r?99:Math.abs(e.promotionRank[t]-(1&t?r:n))||99}(g.color,...m);if(S+=2/(3*r(...m,g.color))*(d/4),S+=3/(3*O),O<2){var A=h(...w(...m,g.color),g.color),T=A.attackers,M=A.defenders;M.length||(S+=3/O),T.length<M.length&&(S+=2/O)}}else S=f?C.points.botTeamsValue:C.points.botFFAValue;var j,k=!1,D=p(v);try{for(D.s();!(j=D.n()).done;){var x=j.value;if(x&&(x[0]===m[0]&&x[1]===m[1])){k=!0;break}}}catch(e){D.e(e)}finally{D.f()}if(!k&&b!==s.Fb.piece){var E,R=p(o.O9);try{for(R.s();!(E=R.n()).done;){var I=E.value;if(!y.gameType.isSameTeam(I,g.color)){var N=r(...m,I);N<3&&(N=2),S+=(5-d)/N}}}catch(e){R.e(e)}finally{R.f()}}return l.set(P,S),S}function y(t){var r,n=e,a=n.pieces,i=n.remainingReal,o=0,s=p(a[t]);try{for(s.s();!(r=s.n()).done;){var l,c=r.value,u=p(h(c[0],c[1],t).defenders);try{for(u.s();!(l=u.n()).done;){var f=l.value;o+=30/(2*v(f[0],f[1]))}}catch(e){u.e(e)}finally{u.f()}}}catch(e){s.e(e)}finally{s.f()}return 2===i?o*=.4:3===i&&(o*=.7),o/55}function g(t,r){var n=e,a=n.data,i=n.defaultSideToMove,o=a.nextTurn();do{if(t===o)return!0;if(r===o)return!1;o=a.nextTurn(o)}while(o!==i);return!0}function S(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:v(t,r),a=e,i=a.hangingCache,o=a.boardSquares,l=a.remaining,c=a.data,u=P(t,r);if(i.has(u))return i.get(u);var f=o[t][r];if(!f.isPiece())return 0;var d,y=h(t,r,f.color),m=y.attackers,w=y.defenders,S=999,C=p(m);try{for(C.s();!(d=C.n()).done;){var O=d.value;S=Math.min(S,v(O[0],O[1]))}}catch(e){C.e(e)}finally{C.f()}var A=!1,T=c.nextTurn(f.color);if(l.length>2){var M,j=p(m);try{for(j.s();!(M=j.n()).done;){var k=M.value;if(o[k[0]][k[1]].color===T){A=!0;break}}}catch(e){j.e(e)}finally{j.f()}}var D,x,E=n-S,R=p(w);try{for(R.s();!(x=R.n()).done;){var I=x.value;if(o[I[0]][I[1]].piece===s.Fb.piece){D=I;break}}}catch(e){R.e(e)}finally{R.f()}var N=0,F=m.length-w.length>0;return F&&(N=n),F&&D&&(N=0),D&&m.length-w.length>1&&(N=v(D[0],D[1])),!N&&E>0&&(N=E),!N&&A&&E>=-2&&(N=-E),N&&function(t,r){var n,a=e.boardSquares,i=[],o=p(r);try{for(o.s();!(n=o.n()).done;){var s=n.value,l=a[s[0]][s[1]];l.isPiece()&&i.push(l.color)}}catch(e){o.e(e)}finally{o.f()}var c,u=p(i=i.filter(b));try{for(u.s();!(c=u.n()).done;)if(g(t,c.value))return!1}catch(e){u.e(e)}finally{u.f()}return!0}(f.color,m)&&(N/=6),i.set(u,N),N}function C(t){var r=e,n=r.board,i=r.royal,l=r.boardSquares,c=r.remainingReal,u=r.data,f=r.variantData,y=r.defaultSideToMove,m=0,g=0,b=0;if(f.giveaway)return{kingEval:m,checkableEval:g,exposedEval:b};var w,S=(0,a.BD)((()=>[])),C=p(n.preGeneratedAttacks[t].hoppingPieceLines);try{for(C.s();!(w=C.n()).done;){var O=d(w.value,2),A=O[0],T=O[1];S[T[0]][T[1]].push([A[0],A[1]])}}catch(e){C.e(e)}finally{C.f()}var M,j=p(n.preGeneratedAttacks[t].slidingPiecesLines);try{for(j.s();!(M=j.n()).done;){var k,D=d(M.value,2),x=D[0],E=p(D[1]);try{for(E.s();!(k=E.n()).done;){var R=k.value;S[R[0]][R[1]].push([x[0],x[1]])}}catch(e){E.e(e)}finally{E.f()}}}catch(e){j.e(e)}finally{j.f()}var I=i[t],N=new Set;if(I){for(var F=!(!n.preGeneratedAttacks[t].slidingPieces[I[0]][I[1]]&&!n.preGeneratedAttacks[t].hoppingPieces[I[0]][I[1]]),B=0;B<o.iJ;B++)for(var V=0;V<o.iJ;V++)if(F){var G=0;if(2===c)G-=.8;else{var q,$=S[B][V].map((e=>{var r=l[e[0]][e[1]];return r.isPiece()?r.color:t})),K=u.nextTurn(t),L=u.previousTurn(t),J=p($);try{for(J.s();!(q=J.n()).done;){var z=q.value;3===c?G-=z===L?3:2:4===c&&(G-=z===L?5:z===K?2:3)}}catch(e){J.e(e)}finally{J.f()}}h(B,V,t).defenders.length&&(G+=2.5),G>0&&(G=0);var _=P(B,V);N.has(_)||(b-=.123,N.add(_)),g+=G}for(var U=I[0],W=I[1],H=1;H<3;H++)for(var Q=[W,W+H,W-H],Y=0,Z=[U,U+H,U-H];Y<Z.length;Y++){var X,ee=Z[Y],te=p(Q);try{for(te.s();!(X=te.n()).done;){var re,ne=X.value;if(null!==(re=l[ee])&&void 0!==re&&re[ne]&&(ee!==U||ne!==W)){var ae=l[ee][ne];ae.isPiece()&&(n.gameType.isSameTeam(ae.color,t)?m+=ae.piece===s.Fb.piece?2:1:m-=v(ee,ne))}}}catch(e){te.e(e)}finally{te.f()}}for(var ie=-1;ie<2;ie++)for(var oe=-1;oe<2;oe++){var se,le=U+ie,ce=W+oe;if(null!==(se=l[le])&&void 0!==se&&se[ce]){var ue=h(le,ce,t),fe=ue.attackers,de=ue.defenders;m-=2*fe.length,m+=1*de.length}}m/=10}if(f.nCheck&&!n.gameType.isSameTeam(n.data.sideToMove,y))switch(u.fenOptions.tag("lives")[n.data.sideToMove]){case null:break;case 2:g*=1.5;break;case 1:g*=3;break;default:g*=1.3}return{kingEval:m,checkableEval:g,exposedEval:b}}function O(r){var n=0,a=e,c=a.board,u=a.data,f=a.defaultSideToMove,g=a.variantData,b=a.royal,P=a.isTeams,O=c.createSnapshot(),A=u.fenOptions.isKingsideCastlingAvailable(u.sideToMove,c),T=u.fenOptions.isQueensideCastlingAvailable(u.sideToMove,c);c.makeMove([r],!0),c.pregenerateAttacks(),e=m(m({},e),t(c)),function(){var t,r=e,n=r.board,a=r.boardSquares,s=r.pieces,l=r.coverage,c=p(o.O9);try{for(c.s();!(t=c.n()).done;){var u,f=t.value,d=p(s[f]);try{for(d.s();!(u=d.n()).done;){var h=u.value;if(a[h[0]][h[1]].isPiece()){var v=n.preGeneratedAttacks[f].pieceMovements.get((0,i.Kv)(h));if(v){var y,m=p(v);try{for(m.s();!(y=m.n()).done;){var g=y.value;l[g.move[0]][g.move[1]].push(h)}}catch(e){m.e(e)}finally{m.f()}}}}}catch(e){d.e(e)}finally{d.f()}}}catch(e){c.e(e)}finally{c.f()}}();var M=function(){var t,r=e,n=r.board,a=r.pieces,i=r.isTeams,s=r.remainingReal,l=r.defaultSideToMove,c=r.variantData,u=0,f=0,d=p(o.O9);try{for(d.s();!(t=d.n()).done;){var h=t.value;if(n.gameType.isSameTeam(h,l)){var y,m=p(a[h]);try{for(m.s();!(y=m.n()).done;){var g=y.value,b=v(g[0],g[1]);u+=b-=S(g[0],g[1])}}catch(e){m.e(e)}finally{m.f()}}else{var P,w=p(a[h]);try{for(w.s();!(P=w.n()).done;){var C=P.value,O=v(C[0],C[1]);i||4!==s||2!==Math.abs(h-l)||c.giveaway||(O/=n.gameType.type===o.Jy.Solo?2:3),f-=O-=S(C[0],C[1],O)}}catch(e){w.e(e)}finally{w.f()}}}}catch(e){d.e(e)}finally{d.f()}return i||4!==s||(f/=1.4,u*=1.2),i||3!==s||(f/=1.25,u*=1.1),{myMaterial:u*=2,oppMaterial:f*=2}}(),j=M.myMaterial,k=M.oppMaterial,D=g.kingOfTheHill?416/(3*function(t){var r=e.royal[t];if(!r)return 999;var n=Math.abs(6.5-r[0]),a=Math.abs(6.5-r[1]);return(n+a)/2+Math.max(n,a)/2||999}(f)):0;if(g.giveaway)n=-3*j-k-10*y(f)+D;else{n+=function(){var t=e,r=t.board,n=t.variantData,a=t.data,i=t.pieces,s=t.remainingReal;r.data.sideToMove=r.data.previousTurn();var l=r.getCheckmatesAndStalemates(),c=l.checkmates,u=l.stalemates,f=l.checks;r.data.sideToMove=r.data.nextTurn();var d,h=0,v=p(o.O9);try{for(v.s();!(d=v.n()).done;){var y=d.value;c[y]?h+=500:u[y]&&(h-=300)}}catch(e){v.e(e)}finally{v.f()}var m=f.filter(Boolean).length;if(3===m)h+=10;else if(2===m)h+=1;else if(1===m){var g=a.previousTurn();s>2&&f[g]?h+=1.2:h+=2===s?.1:.4}if(m&&n.nCheck){var b,P=p(o.O9);try{for(P.s();!(b=P.n()).done;){var w=b.value,S=a.fenOptions.tag("lives")[w];S&&f[w]&&(h+=4/(S+1))}}catch(e){P.e(e)}finally{P.f()}h+=.3}if(n.barePieceRule){var C,O=p(o.O9);try{for(O.s();!(C=O.n()).done;)i[C.value].length<=1&&(h+=300)}catch(e){O.e(e)}finally{O.f()}}return h}();var x=b[f];if(x)h(x[0],x[1],f).attackers.length&&(n-=700);if(n+=function(t){var r,n=e,a=n.pieces,l=n.boardSquares,c=n.isTeams,u=n.royal,f=n.defaultSideToMove,d=n.board,h=0,v=p(a[t]);try{for(v.s();!(r=v.n()).done;){var y,m,g=r.value;if(!(S(g[0],g[1])>2)){var b=l[g[0]][g[1]];if(b.isPiece()){var P=null!==(y=null===(m=d.preGeneratedAttacks[t].pieceMovements.get((0,i.Kv)(g)))||void 0===m?void 0:m.length)&&void 0!==y?y:0;/[QDAEHΔ]/.test(b.piece)&&(P/=c?2:3),/[RBV]]/.test(b.piece)&&(P/=c?1.5:2),h+=P/(c?10:d.gameType.type===o.Jy.Solo?21:16);var C,O=!1,A=p(u);try{for(A.s();!(C=A.n()).done;){var T=C.value;if(T&&T[0]===g[0]&&T[1]===g[1]){O=!0;break}}}catch(e){A.e(e)}finally{A.f()}if(!O&&!c&&b.piece===s.Fb.piece){var M=w(g[0],g[1],t),j=l[M[0]][M[1]];if(j.isEmpty())continue;j.isPiece()?d.gameType.isSameTeam(j.color,f)?h-=.5:j.piece===s.Fb.piece?h-=1.8:t===j.color&&(h-=.5):h-=2}}}}}catch(e){v.e(e)}finally{v.f()}return h}(f),n+=y(f),P){var E=o.O9.find((e=>e!==f&&c.gameType.isSameTeam(f,e)));E&&Object.values(C(E)).forEach((e=>n+=e))}Object.values(function(){var t,r=e,n=r.board,a=r.royal,i=r.pieces,s=r.defaultSideToMove,l=r.remainingReal,c=0,u=0,f=p(o.O9);try{for(f.s();!(t=f.n()).done;){var h,y=t.value,m=[],g=[],b=p(i[y]);try{for(b.s();!(h=b.n()).done;){var P=h.value,w=a[y];if(!w)break;if(w[0]!==P[0]||w[1]!==P[1]){var C,O=d(w,2),A=O[0],T=O[1],M=P[0],j=P[1],k=p(n.preGeneratedAttacks[y].slidingPiecesRayTracing);try{for(k.s();!(C=k.n()).done;){var D,x=d(C.value,2),E=x[0],R=x[1],I=!1,N=!1,F=p(R);try{for(F.s();!(D=F.n()).done;){var B=d(D.value,2),V=B[0],G=B[1];I||V!==M||G!==j||(I=!0),N||V!==A||G!==T||(N=!0),I&&N?g.push(P):N&&!I&&m.push([E[0],E[1]])}}catch(e){F.e(e)}finally{F.f()}}}catch(e){k.e(e)}finally{k.f()}}}}catch(e){b.e(e)}finally{b.f()}for(var q=0,$=g;q<$.length;q++){var K=$[q];if(!(S(K[0],K[1])>2)){var L=Math.sqrt(v(K[0],K[1]));n.gameType.isSameTeam(y,s)?c-=L:c+=L/2}}for(var J=0,z=m;J<z.length;J++){var _=z[J];if(!(S(_[0],_[1])>2)){var U=Math.sqrt(v(_[0],_[1]));n.gameType.isSameTeam(y,s)?u+=U/2:u-=U}}}}catch(e){f.e(e)}finally{f.f()}return(u*=l/6)<0&&(u/=10),{pinnedEval:c*=l/6,discovsEval:u}}()).forEach((e=>n+=e)),Object.values(C(f)).forEach((e=>n+=e)),n+=j+k+D}switch("specialType"in r&&(r.specialType===l.uj.CastlingKingside||r.specialType===l.uj.CastlingQueenside)||!A&&!T||(n-=.5),function(t){if(!(0,l.$j)(t))return!1;var r=e,n=r.data,a=r.defaultSideToMove,i=r.boardSquares;if(r.variantData.giveaway)return!1;var o=n.fenOptions.tag("resigned");if(!o[a])return!1;var s=i[t.endCoordinates[0]][t.endCoordinates[1]];return!!s.isPiece()&&!!o[s.color]}(r)&&(n-=1e4),c.moves.getHash(c.moves.constructPreliminaryHashString(c))){case 1:n-=1e4;break;case 2:n-=2e4}return g.fiftyMoveRule&&g.fiftyMoveRule-c.data.plyCount<8&&(n-=15e4),c.loadSnapshot(O),n}return{stringifiedType:u.ZombieType.Futer,evaluate(r,a){!function(r){var a=!1!==r.variantData.promotionRank?[o.iJ-r.variantData.promotionRank,r.variantData.promotionRank-1,r.variantData.promotionRank-1,o.iJ-r.variantData.promotionRank]:(0,n.VS)(99,o.q3);e=m(m({},t(r)),{},{variantData:r.variantData,promotionRank:a,isFFA:r.gameType.isFFA(),isTeams:!r.gameType.isFFA(),zombieType:r.data.fenOptions.tag("zombieType"),defaultSideToMove:r.data.sideToMove})}(a.createClone());var i,s=new Map,c=p(r);try{for(c.s();!(i=c.n()).done;){var u=i.value;if((0,l.LR)(u))switch(u.type){case l.Fi.Resign:case l.Fi.Timeout:s.set(u,-1/0);break;case l.Fi.ClaimWin:s.set(u,1/0)}else s.set(u,O(u))}}catch(e){c.e(e)}finally{c.f()}return s},pickPreferredMove(e){var t,r=[...e.entries()].sort(((e,t)=>t[1]-e[1])),n=[],a=p(r);try{for(a.s();!(t=a.n()).done;){var i=d(t.value,2),o=i[0],s=i[1];if(r[0][1]-s>.5)break;n.push(o)}}catch(e){a.e(e)}finally{a.f()}n.length>5&&(n.length=5);var l=Math.floor(Math.random()*n.length);return l>0&&Math.random()>.8&&(l=0),l>1&&Math.random()>.8&&(l=1),l>2&&Math.random()>.8&&(l=2),(0,f.randomlyPickNextChainedMoves)(n[l])}}}())},71:(e,t,r)=>{"use strict";r.r(t),r.d(t,{comfuterCheckerAlgorithm:()=>v,comfuterMuncherAlgorithm:()=>y,comfuterPusherAlgorithm:()=>m,createComfuterBasedAlgorithm:()=>h,patzerAlgorithm:()=>g});var n=r(5),a=r(6),i=r(20),o=r(49);function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i,o,s=[],l=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(c)throw a}}return s}}(e,t)||c(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=c(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw i}}}}function c(e,t){if(e){if("string"==typeof e)return u(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?u(e,t):void 0}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){p(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function p(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var h=e=>d(d({},e),{},{pickPreferredMove(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return o.comfuterAlgorithm.pickPreferredMove.apply(this,t)}}),v=(0,i.createBotAlgorithm)(h({stringifiedType:i.ZombieType.F_Checker,evaluate(e,t){var r,a=o.comfuterAlgorithm.evaluate.call(this,e,t),i=l(a);try{for(i.s();!(r=i.n()).done;){var c=s(r.value,2),u=c[0],f=c[1];if(!(0,n.LR)(u)){var d=t.createSnapshot(),p=t.makeMove([u]),h=p.checks,v=p.checkmates,y=h.filter(Boolean).length;a.set(u,f+(v.includes(!0)?500*y:1500*y)),t.moves.deleteMove(t.moves.currentMove),t.loadSnapshot(d)}}}catch(e){i.e(e)}finally{i.f()}return a}})),y=(0,i.createBotAlgorithm)(h({stringifiedType:i.ZombieType.F_Muncher,evaluate(e,t){var r,a=o.comfuterAlgorithm.evaluate.call(this,e,t),i=l(a);try{for(i.s();!(r=i.n()).done;){var c=s(r.value,2),u=c[0],f=c[1];(0,n.$j)(u)&&(u.specialType===n.uj.EnPassant||t.board[u.endCoordinates[0]][u.endCoordinates[1]].isEmpty()||a.set(u,f+5e3))}}catch(e){i.e(e)}finally{i.f()}return a}})),m=(0,i.createBotAlgorithm)(h({stringifiedType:i.ZombieType.F_Pusher,evaluate(e,t){var r,i=o.comfuterAlgorithm.evaluate.call(this,e,t),c=l(i);try{for(c.s();!(r=c.n()).done;){var u=s(r.value,2),f=u[0],d=u[1];if((0,n.$j)(f)){var p=t.board[f.startCoordinates[0]][f.startCoordinates[1]];p.isPiece()&&!a.Gf[p.piece].moveGenerationSettings.isPawn&&i.set(f,d+5e3)}}}catch(e){c.e(e)}finally{c.f()}return i}})),g=(0,i.createBotAlgorithm)(h({stringifiedType:i.ZombieType.Patzer,evaluate(e,t){var r,n=o.comfuterAlgorithm.evaluate.call(this,e,t),a=l(n);try{for(a.s();!(r=a.n()).done;){var i=s(r.value,2),c=i[0],u=i[1];n.set(c,-u)}}catch(e){a.e(e)}finally{a.f()}return n}}))},79:(e,t,r)=>{"use strict";r.r(t),r.d(t,{RanterAlgorithm:()=>s});var n=r(20),a=r(49),i=r(71),o=r(43),s=(0,n.createBotAlgorithm)((0,i.createComfuterBasedAlgorithm)({stringifiedType:n.ZombieType.Ranter,evaluate(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return Math.random()<.5?o.randoBotAlgorithm.evaluate.apply(this,t):a.comfuterAlgorithm.evaluate.apply(this,t)}}))},43:(e,t,r)=>{"use strict";r.r(t),r.d(t,{randoBotAlgorithm:()=>l,randomlyPickNextChainedMoves:()=>s});var n=r(5),a=r(20);function i(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){l=!0,i=e},f:function(){try{s||null==r.return||r.return()}finally{if(l)throw i}}}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function s(e){var t=[...arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],e];if(e.nextChainedMoves&&!e.isForcedContinuation&&Math.random()>.5)return s(e.nextChainedMoves[Math.floor(Math.random()*e.nextChainedMoves.length)],t);if(!(0,n.nc)(t))throw Error("Required move length is 0");return t}var l=(0,a.createBotAlgorithm)({stringifiedType:a.ZombieType.Rando,evaluate(e,t){for(var r=e.slice(),a=e.length-1;a>0;a--){var o=Math.floor(Math.random()*(a+1)),s=[e[o],e[a]];r[a]=s[0],r[o]=s[1]}var l,c=t.data,u=t.board,f=[],d=[],p=i(r);try{for(p.s();!(l=p.n()).done;){var h=l.value;if((0,n.$j)(h)){var v=u[h.endCoordinates[1]][h.endCoordinates[0]];if(v.isPiece()&&c.fenOptions.tag("resigned")[v.color]){f.push(h);continue}}d.push(h)}}catch(e){p.e(e)}finally{p.f()}var y=0;return new Map([...d.reduce(((e,t)=>(e.push([t,--y]),e)),[]),...f.reduce(((e,t)=>(e.push([t,--y/2]),e)),[])])},pickPreferredMove:e=>s([...e.entries()].reduce(((e,t)=>t[1]>e[1]?t:e))[0])})},137:(e,t,r)=>{"use strict";r.r(t),r.d(t,{checkerAlgorithm:()=>v,createRandomBasedAlgorithm:()=>h,muncherAlgorithm:()=>y,pusherAlgorithm:()=>m});var n=r(5),a=r(6),i=r(20),o=r(43);function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i,o,s=[],l=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(c)throw a}}return s}}(e,t)||c(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=c(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw i}}}}function c(e,t){if(e){if("string"==typeof e)return u(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?u(e,t):void 0}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){p(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function p(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var h=e=>d(d({},e),{},{pickPreferredMove(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return o.randoBotAlgorithm.pickPreferredMove.apply(this,t)}}),v=(0,i.createBotAlgorithm)(h({stringifiedType:i.ZombieType.Checker,evaluate(e,t){var r,n=o.randoBotAlgorithm.evaluate.call(this,e,t),a=l(n);try{var i=function(){var e=s(r.value,2),a=e[0],i=e[1],o=t.createSnapshot(),l=t.makeMove([a]),c=l.checks,u=l.checkmates;0===c.filter(((e,t)=>e&&!u[t]===e)).length&&n.set(a,i/(i/2)),t.loadSnapshot(o)};for(a.s();!(r=a.n()).done;)i()}catch(e){a.e(e)}finally{a.f()}return n}})),y=(0,i.createBotAlgorithm)(h({stringifiedType:i.ZombieType.Muncher,evaluate(e,t){var r,a=o.randoBotAlgorithm.evaluate.call(this,e,t),i=l(a);try{for(i.s();!(r=i.n()).done;){var c=s(r.value,2),u=c[0],f=c[1];(0,n.$j)(u)&&(u.specialType===n.uj.EnPassant||t.board[u.endCoordinates[0]][u.endCoordinates[1]].isEmpty()||a.set(u,f/(f/2)))}}catch(e){i.e(e)}finally{i.f()}return a}})),m=(0,i.createBotAlgorithm)(h({stringifiedType:i.ZombieType.Pusher,evaluate(e,t){var r,i=o.randoBotAlgorithm.evaluate.call(this,e,t),c=l(i);try{for(c.s();!(r=c.n()).done;){var u=s(r.value,2),f=u[0],d=u[1];if((0,n.$j)(f)){var p=t.board[f.startCoordinates[0]][f.startCoordinates[1]];p.isPiece()&&!a.Gf[p.piece].moveGenerationSettings.isPawn&&i.set(f,d/(d/2))}}}catch(e){c.e(e)}finally{c.f()}return i}}))},20:(e,t,r)=>{"use strict";r.r(t),r.d(t,{ZombieType:()=>n,botAlgorithms:()=>i,createBotAlgorithm:()=>o,verifyZombieType:()=>a});var n=function(e){return e.Rando="rando",e.Futer="comfuter",e.Ranter="ranter",e.Patzer="patzer",e.Pusher="pusher",e.Checker="checker",e.Muncher="muncher",e.F_Pusher="pusher_comfuter",e.F_Checker="checker_comfuter",e.F_Muncher="muncher_comfuter",e}({}),a=e=>e in n,i=new Map;function o(e){return i.set(e.stringifiedType,e),e}},56:(e,t,r)=>{"use strict";r.r(t),r.d(t,{InsufficientMaterialChecker:()=>p});var n=r(39),a=r(84),i=r(0),o=r(31),s=r(6),l=r(30),c=r(8);function u(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return f(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return f(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw i}}}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function d(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class p{constructor(e,t){d(this,"noRoyalsToMate",!1),d(this,"isDisabled",!1),d(this,"promotionPieces",void 0),d(this,"hasPromotion",void 0),this.state=e;var r,n=u(t.variantRules);try{for(n.s();!(r=n.n()).done;){var a=r.value.getInsufficientMaterialData(),i=a.isDisabled,o=a.isPartiallyDisabled;if(i){this.isDisabled=!0;break}o&&(this.noRoyalsToMate=!0)}}catch(e){n.e(e)}finally{n.f()}this.hasPromotion=t.variantData.promotionRank!==l.disabledRank,this.promotionPieces=t.variantData.promotionPieces||[]}getRoyalPieceMedians(e){var t=this.state,r=t.walls,n=t.royalMoveMedians,a=e.data.fenOptions.tag("royal"),i=e.variantData,s=e.board.reduce(((e,t,n)=>e+t.reduce(((e,t,a)=>t.isWall()&&!r[n][a]?e+1:e),0)),0);return n.map(((e,t)=>{var r;if(a[t])return i.stalemateOptions===o.stalemateOptionsValues.stalemateLoses?(r=1,e--):(e++,r=2),(e-=s)<r&&(e=r),e}))}obtainPieceSymbolFromCoordinate(e,t){var r=this.state,i=r.optimizedPieces,o=r.pieceSquareMedians,l=r.backwardsPieceRegistry,c=e.board[t[0]][t[1]];if(s.Gf[c.piece].moveGenerationSettings.isPawn&&this.hasPromotion){var u=[...i].filter((e=>(0,s.IM)(e)&&!s.Gf[e].moveGenerationSettings.isPawn)).map((e=>o[e]));if(0===u.length)return{selectedSymbol:n.InsufficientMaterialConstructor.NON_INDEXED_PIECE_SYMBOL,piece:c};var f=u.map((e=>e[Object.getOwnPropertySymbols(e)[0]].reduce(((e,t)=>e+(null!=t?t:0)),0))),d=f.indexOf(Math.max(...f));return{selectedSymbol:Object.getOwnPropertySymbols(u[d])[0],piece:c}}var p=Object.getOwnPropertySymbols(o[c.piece]),h=1===p.length?p[0]:l[c.piece][t[0]][t[1]];return(0,a.lM)(h),{selectedSymbol:h,piece:c}}getPartialIntersection(e){var t,r=this.state.pieceSquareMedians,n=e.board,a=e.army,i=e.pieces,o=e.royalColor,l=u(a);try{for(l.s();!(t=l.n()).done;){var c=t.value,f=this.obtainPieceSymbolFromCoordinate(n,c),d=f.piece,p=f.selectedSymbol;if(!(Object.getOwnPropertySymbols(r[d.piece]).length>1||s.Gf[d.piece].moveGenerationSettings.isColorBound))return 1/0;var h,v=u(i[o]);try{for(v.s();!(h=v.n()).done;){var y=h.value;if(p===this.obtainPieceSymbolFromCoordinate(n,y).selectedSymbol)return 1/0}}catch(e){v.e(e)}finally{v.f()}}}catch(e){l.e(e)}finally{l.f()}return-1}checkCurrentState(e){var t=this,r=e.data.fenOptions,n=r.tag("dead"),o=r.tag("royal"),l=e.getPlayerPieces(),f=(0,a.VS)(!1,i.q3);if(this.isDisabled)return f;var d,p=this.getRoyalPieceMedians(e),h=this.state,v=h.oppositionMedians,y=h.pieceSquareMedians,m=(0,a.fi)((()=>(0,a.VS)(0,i.q3)),i.q3),g=u(i.O9);try{for(g.s();!(d=g.n()).done;){var b=d.value,P=l[b];if(!n[b]){var w,S=u(i.O9);try{var C=function(){var r=w.value;if(b===r||n[r])return"continue";if(!o[r]||t.noRoyalsToMate)m[r][b]=t.getPartialIntersection({board:e,army:P,pieces:l,royalColor:r});else{if(void 0===p[r])return"continue";var a,i=o[b],f=[],d=u(P);try{for(d.s();!(a=d.n()).done;){var h=a.value;if(i&&(0,c.ef)(h,i))e.variantData.royalsCannotCapture?m[b][r]++:m[b][r]+=v[b][r];else{var g=t.obtainPieceSymbolFromCoordinate(e,h),S=g.piece,C=g.selectedSymbol;if(t.hasPromotion&&s.Gf[S.piece].moveGenerationSettings.isPawn){var O=t.promotionPieces.map((e=>{var t,n=Object.getOwnPropertySymbols(y[e])[0];return null!==(t=y[e][n][r])&&void 0!==t?t:0}));m[b][r]+=Math.max(...O)}else{var A;if(s.Gf[S.piece].moveGenerationSettings.isColorBound){if(f.includes(C))continue;f.push(C)}m[b][r]+=null!==(A=y[S.piece][C][r])&&void 0!==A?A:0}}}}catch(e){d.e(e)}finally{d.f()}m[b][r]+=l[r].length-1}};for(S.s();!(w=S.n()).done;)C()}catch(e){S.e(e)}finally{S.f()}}}}catch(e){g.e(e)}finally{g.f()}var O,A=u(i.O9);try{for(A.s();!(O=A.n()).done;){var T=O.value;if(!n[T]){for(var M=0,j=0;j<i.q3;j++)j!==T&&(M+=m[j][T]);var k=p[T];(void 0!==k&&M<=k||M<0)&&(f[T]=!0)}}}catch(e){A.e(e)}finally{A.f()}return f}}},39:(e,t,r)=>{"use strict";r.r(t),r.d(t,{InsufficientMaterialConstructor:()=>g});var n=r(84),a=r(12),i=r(9),o=r(0),s=r(7),l=r(6),c=r(32),u=r(30),f=r(8),d=r(128);function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i,o,s=[],l=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(c)throw a}}return s}}(e,t)||v(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=v(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw i}}}}function v(e,t){if(e){if("string"==typeof e)return y(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?y(e,t):void 0}}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function m(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class g{constructor(e,t){m(this,"board",void 0),m(this,"emptyBoard",void 0),m(this,"pieceMoveRegistry",{}),m(this,"possibleRoyals",(0,n.fi)((()=>[]),o.q3)),m(this,"boardDestinations",new Map),m(this,"royalPieceSets",(0,n.fi)((()=>new Set),o.q3)),m(this,"state",void 0),this.callback=t,this.board=e.createClone(),this.emptyBoard=this.board.board.map((e=>e.map((e=>e.isWall()?e:s.v2)))),this.state={walls:this.emptyBoard.map((e=>e.map((e=>e.isWall())))),backwardsPieceRegistry:{},royalMoveMedians:(0,n.VS)(0,o.q3),pieceSquareMedians:{[l.OB]:{[g.NON_INDEXED_PIECE_SYMBOL]:[2,2,2,2]}},optimizedPieces:(0,c.optimizePieceSet)(this.board.variantData.promotionPieces||[],!0),oppositionMedians:(0,n.fi)((()=>(0,n.VS)(0,o.q3)),o.q3)}}initializeRoyals(){var e=this.board.board,t=this.board.variantData.promotionPieces||[];this.board.data.fenOptions.tag("royal").forEach(((r,n)=>{if(r){var a=e[r[0]][r[1]].piece;l.Gf[a].moveGenerationSettings.isPawn?this.possibleRoyals[n]=[a,...t]:this.possibleRoyals[n]=[a]}else t.includes(l.bB.king)&&(this.possibleRoyals[n]=[l.bB.king])}));var r,n=h(o.O9);try{for(n.s();!(r=n.n()).done;){var a=r.value;this.possibleRoyals[a].length>1?this.royalPieceSets[a]=(0,c.optimizePieceSet)(this.possibleRoyals[a],!1):1===this.possibleRoyals[a].length&&this.royalPieceSets[a].add(this.possibleRoyals[a][0])}}catch(e){n.e(e)}finally{n.f()}}recurseThroughSquares(e,t,r){var n=this.emptyBoard,s=this.board.controls,l=this.pieceMoveRegistry,u=new Set,d=new Set;if(!r.isPiece())throw new TypeError("Wrong piece signature detected at ".concat(r.value));var v=s[r.piece]().setColor(r.color).setBoard(n).setBaseImmunePieces(i.i),y=(0,a.BD)((()=>new Uint16Array(o.iJ).fill(c.oneBitMask)));!function e(t,r){var n=v.setCoordinates(t,r).constructPieceControl().getPseudoLegalMoves(),a=n.length;if(0!==a){for(var i=0;i<a;i++){var o=n[i].move,s=(0,f.Kv)(o);y[t][r][o[0]]|=c.binaryMasks[o[1]],u.has(s)||d.add(s)}var l,m=h(d);try{for(m.s();!(l=m.n()).done;){var g=l.value,b=p(g.split(":"),2),P=b[0],w=b[1];u.has(g)||(u.add(g),e(parseInt(P,10),parseInt(w,10)))}}catch(e){m.e(e)}finally{m.f()}}}(e,t),r.piece in l||(l[r.piece]={}),l[r.piece][Symbol()]=y;var m=new Uint16Array(14).fill(c.oneBitMask);return u.forEach((e=>{var t=e.split(":");m[parseInt(t[0],10)]|=c.binaryMasks[parseInt(t[1],10)]})),d.forEach((e=>{var t=e.split(":");m[parseInt(t[0],10)]|=c.binaryMasks[parseInt(t[1],10)]})),m}addToBoardDestinations(e,t,r){var n=this.recurseThroughSquares(e,t,r),a=this.boardDestinations.get(r.piece);a?this.boardDestinations.set(r.piece,a.concat(n)):this.boardDestinations.set(r.piece,[n])}getBoardDestinations(){for(var e=this.board.board,t=this.board.variantData.promotionRank||u.disabledRank,r=this.board.variantData.promotionPieces||[],n=0;n<o.iJ;n++)for(var a=0;a<o.iJ;a++)e[n][a].isPiece()&&this.addToBoardDestinations(n,a,e[n][a]);var i=t!==u.disabledRank&&r.some((e=>(0,l.IM)(e))),f=[o.iJ-t,t-1,t-1,o.iJ-t],d=(0,c.optimizePieceSet)(r,!0);if(i){var p,v=h(o.O9);try{for(v.s();!(p=v.n()).done;){var y=p.value;y&=1;for(var m=0;m<o.iJ;m++){var g=y?f[y]:m,b=y?m:f[y];if(!this.state.walls[g][b]){var P,w=h(d);try{for(w.s();!(P=w.n()).done;){var S=P.value;this.addToBoardDestinations(g,b,(0,s.HC)(0,S))}}catch(e){w.e(e)}finally{w.f()}}}}}catch(e){v.e(e)}finally{v.f()}}}initializeBackwardsPieceRegistry(){var e,t=this,r=this.boardDestinations.entries(),n=this.state.backwardsPieceRegistry,i=this.pieceMoveRegistry,s=h(r);try{var u=function(){var r=p(e.value,2),s=r[0],u=r[1];if(l.Gf[s].moveGenerationSettings.isPawn||s===l.OB||!(0,l.IM)(s))return"continue";var f,d=!0,v=[],y=h(u);try{var m=function(){var e=f.value;if(0===v.length)v.push(e);else{var t=v.findIndex((t=>"number"!=typeof t&&t.every(((t,r)=>t===e[r]))));~t?v.push(t):(v.push(e),d=!1)}};for(y.s();!(f=y.n()).done;)m()}catch(e){y.e(e)}finally{y.f()}if(d)i[s]={[Symbol()]:i[s][Object.getOwnPropertySymbols(i[s])[0]]};else{s in n||(n[s]=(0,a.BD)((()=>null)));var g,b=[],P=h(v);try{for(P.s();!(g=P.n()).done;){var w=g.value,S=void 0;if("number"!=typeof w)for(var C=0;C<o.iJ;C++)for(var O=0;O<o.iJ;O++){var A,T,M;if(w[C]&c.binaryMasks[O]^c.oneBitMask)S||(S=Symbol(),b.push(S)),null!==(M=(A=t.state.backwardsPieceRegistry[s][C])[T=O])&&void 0!==M||(A[T]=S)}else b.push(w)}}catch(e){P.e(e)}finally{P.f()}var j=Object.getOwnPropertySymbols(i[s]).map((e=>i[s][e]));i[s]={};for(var k=0;k<j.length;k++){var D=b[k];if("number"!=typeof D){if(void 0===D)break;i[s][D]=j[k]}}}};for(s.s();!(e=s.n()).done;)u()}catch(e){s.e(e)}finally{s.f()}}generateOppositionSquares(){var e=this.board.board,t=this.board.controls,r=this.emptyBoard,s=(0,n.VS)((0,a.BD)((()=>new Uint16Array(o.iJ).fill(c.oneBitMask))),o.q3),l=(0,n.VS)(void 0,o.q3);this.board.data.fenOptions.tag("royal").forEach(((n,u)=>{if(n){for(var f=e[n[0]][n[1]],d=(0,t[f.piece])().setColor(0).setBaseImmunePieces(i.i).setBoard(r),p=(0,a.BD)((()=>new Uint16Array(14).fill(c.oneBitMask))),v=0;v<e.length;v++)for(var y=0;y<e[0].length;y++)if(!r[v][y].isWall()){var m,g=d.setCoordinates(v,y).constructPieceControl().getPseudoLegalMoves(),b=new Uint16Array(o.iJ).fill(c.oneBitMask),P=h(g);try{for(P.s();!(m=P.n()).done;){var w=m.value.move;b[w[0]]|=c.binaryMasks[w[1]]}}catch(e){P.e(e)}finally{P.f()}p[v][y]=b,s[u][v][y]=b}l[u]=p}}));var u,f=h(o.O9);try{for(f.s();!(u=f.n()).done;){var d=u.value;this.state.royalMoveMedians[d]=(0,c.findMinimumOnBoardSquares)(s[d])}}catch(e){f.e(e)}finally{f.f()}return{oppositionRowEchelon:l,royalMoves:s}}generateOppositeMedians(e){for(var t=this.emptyBoard,r=this.state.oppositionMedians,n=this.board.data.fenOptions.tag("royal"),a=0;a<o.q3;a++)for(var i=0;i<o.q3;i++)if(a!==i&&void 0!==e[a]){var s=n[a],l=n[i];if(s&&l){for(var u=Array.from({length:14},(()=>Array.from({length:14},(()=>0)))),f=function(r){for(var n=function(n){var f,p;if(t[r][n].isWall())return"continue";var h=e[i],v=e[a];if(!h||!v)throw Error("Central opposition matrix indexes are undefined: ".concat(null!==(f=null==h?void 0:h.toString())&&void 0!==f?f:"undefined","  ").concat(null!==(p=null==v?void 0:v.toString())&&void 0!==p?p:"undefined"));if(h[r][n][s[1]]&c.binaryMasks[s[0]]^c.oneBitMask&&v[r][n][l[1]]&c.binaryMasks[l[0]]^c.oneBitMask)return"continue";for(var y=h[r][n].map(((e,t)=>e&v[r][n][t])),m=0,g=0;g<o.iJ;g++)m+=(0,d.y)(y[g])-1;u[r][n]=m},f=0;f<o.iJ;f++)n(f)},p=0;p<o.iJ;p++)f(p);for(var h=1/0,v=0;v<o.iJ;v++)for(var y=0;y<o.iJ;y++)0!==u[v][y]&&u[v][y]<h&&(h=u[v][y]);r[a][i]=h-1}}}generatePieceMoveMedians(e){var t=this,n=this.pieceMoveRegistry,a=this.state,i=a.pieceSquareMedians,o=a.walls,s=this.royalPieceSets,c=0,u=0,f=function(a){if(!(0,l.IM)(a)||!Object.prototype.hasOwnProperty.call(n,a))return"continue";if(a in i)return"continue";i[a]={};var f,d=h(Object.getOwnPropertySymbols(n[a]));try{var p=function(){var l=f.value,d=new Worker(new URL(r.p+r.u(5),r.b));d.postMessage({walls:o,moveRegistryArray:n[a][l].map((e=>e.map((e=>e.buffer)))),royalMoves:e.map((e=>e.map((e=>e.map((e=>e.buffer)))))),royalPieceSet:s.map((e=>[...e]))}),u++,d.onmessage=e=>{i[a][l]=e.data,d.terminate(),u===++c&&t.callback(t.state)}};for(d.s();!(f=d.n()).done;)p()}catch(e){d.e(e)}finally{d.f()}};for(var d in n)f(d)}generateInsufficientMaterialState(){this.initializeRoyals(),this.getBoardDestinations(),this.initializeBackwardsPieceRegistry();var e=this.generateOppositionSquares(),t=e.royalMoves,r=e.oppositionRowEchelon;this.generateOppositeMedians(r),this.generatePieceMoveMedians(t)}}m(g,"NON_INDEXED_PIECE_SYMBOL",Symbol())},36:(e,t,r)=>{"use strict";r.r(t);var n=r(84),a=r(12),i=r(0),o=r(95),s=r(32);function l(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw i}}}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}self.onmessage=e=>{for(var t=e.data,r=t.walls,c=t.royalPieceSet,u=t.royalMoves,f=t.moveRegistryArray,d=(0,n.fi)((()=>(0,a.BD)((()=>0))),i.q3),p=0;p<i.iJ;p++)for(var h=0;h<i.iJ;h++)if(!r[p][h]){var v,y=new Uint16Array(f[p][h]),m=l(i.O9);try{for(m.s();!(v=m.n()).done;){var g=v.value;if(0!==c[g].length){for(var b=0,P=0;P<i.iJ;P++)for(var w=function(){var e=new Uint16Array(u[g][P][S]),t=y.map(((t,r)=>t&e[r])),r=(0,s.countBitsOnBoard)(t);r>b&&(b=r)},S=0;S<i.iJ;S++)w();var C=d[g];C&&(C[p][h]=b)}else d[g]=void 0}}catch(e){m.e(e)}finally{m.f()}}postMessage(d.map((e=>{if(e){var t=(0,o.Bx)(e);return t===1/0?0:t}return e})))}},57:(e,t,r)=>{"use strict";function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){l=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(l)throw i}}}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function l(e){var t,r={},n={},i=0;for(t in e.backwardsPieceRegistry)Object.prototype.hasOwnProperty.call(e.backwardsPieceRegistry,t)&&(r[t]=e.backwardsPieceRegistry[t].map((e=>e.map((e=>null!==e?(e in n||(n[e]=i++),n[e]):e)))));var s={};for(t in e.pieceSquareMedians)if(Object.prototype.hasOwnProperty.call(e.pieceSquareMedians,t)){var l,c={},u=o(Object.getOwnPropertySymbols(e.pieceSquareMedians[t]));try{for(u.s();!(l=u.n()).done;){var f=l.value;f in n?c[n[f]]=e.pieceSquareMedians[t][f]:c[i--]=e.pieceSquareMedians[t][f]}}catch(e){u.e(e)}finally{u.f()}s[t]=c}return a(a({},e),{},{backwardsPieceRegistry:r,pieceSquareMedians:s,optimizedPieces:[...e.optimizedPieces]})}function c(e){var t,r={},n={};for(t in e.backwardsPieceRegistry)Object.prototype.hasOwnProperty.call(e.backwardsPieceRegistry,t)&&(n[t]={},r[t]=e.backwardsPieceRegistry[t].map((e=>e.map((e=>null!==e?(e in n[t]||(n[t][e]=Symbol()),n[t][e]):e)))));var i={};for(t in e.pieceSquareMedians)if(Object.prototype.hasOwnProperty.call(e.pieceSquareMedians,t)){var o={};for(var s in e.pieceSquareMedians[t])if(Object.prototype.hasOwnProperty.call(e.pieceSquareMedians[t],s)){var l=Number(s);t in n&&l in n[t]?o[n[t][l]]=e.pieceSquareMedians[t][l]:o[Symbol()]=e.pieceSquareMedians[t][l]}i[t]=o}return a(a({},e),{},{backwardsPieceRegistry:r,pieceSquareMedians:i,optimizedPieces:new Set(e.optimizedPieces)})}r.r(t),r.d(t,{deserializeInsufficientMaterialState:()=>c,serializeInsufficientMaterialState:()=>l})},32:(e,t,r)=>{"use strict";r.r(t),r.d(t,{binaryMasks:()=>l,countBitsOnBoard:()=>u,findMinimumOnBoardSquares:()=>f,oneBitMask:()=>c,optimizePieceSet:()=>d});var n=r(0),a=r(6),i=r(128);function o(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){l=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(l)throw i}}}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var l=Array(n.iJ).fill(1).map(((e,t)=>e<<n.iJ|e<<n.iJ-1-t)),c=1<<n.iJ;function u(e){for(var t=0,r=0;r<n.iJ;r++)t+=(0,i.y)(e[r]^c);return t}function f(e){for(var t=1/0,r=0;r<n.iJ;r++)for(var a=0;a<n.iJ;a++){var i=u(e[r][a]);0!==i&&i<t&&(t=i)}return t}function d(e,t){for(var r=new Set,n=0,i=[["β","W","R","E","M","Q","D","A"],["γ","F","B","H","M","Q","D","A","Δ"],["Y","Z"],["I","J"],["S","T"],["S","Y"],["I","Y"],["U","N","O"],["H","A"],["E","A"],["Δ","H"],["C","L"],["C","V"]];n<i.length;n++){var s,l=i[n],c=t?l.slice().reverse():l,u=o(e);try{for(u.s();!(s=u.n()).done;){var f=s.value;if(c.includes(f)){c.slice(0,-c.indexOf(f)).forEach((t=>{e.includes(t)&&(0,a.IM)(t)&&r.add(t)}));break}}}catch(e){u.e(e)}finally{u.f()}}return 0===r.size&&e.forEach((e=>{(0,a.IM)(e)&&r.add(e)})),r}},80:(e,t,r)=>{"use strict";r.r(t),r.d(t,{Atomic:()=>h});var n=r(0),a=r(6),i=r(10),o=r(1),s=r(2),l=r(50),c=r(3);function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i,o,s=[],l=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(c)throw a}}return s}}(e,t)||f(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){if(e){if("string"==typeof e)return d(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?d(e,t):void 0}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function p(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class h extends o.${constructor(){super(...arguments),p(this,"dependencies",new Map([[l.RoyalsCannotCapture,[]]]))}getDecoratorType(){return i.c}getPublicProperties(){return{parameterValue:!0,information:{name:"Atomic",description:"Captures cause all surrounding pieces except pawns to explode",tag:"atomic",color:s.p.extending,displayIcon:c.w.atomic}}}matchesPGNDeclaration(e){return/^Atomic$/i.test(e)}serializeToParsingForm(){return"Atomic"}isDisabled(){return!1}isComplexEvaluation(){return!0}getCapturedPieces(e){var t=this.callHandler("getCapturedPieces",arguments),r=(r,i)=>{var o=e.endCoordinates[0]+r,s=e.endCoordinates[1]+i;if(o>=0&&o<=n.iJ&&s>=0&&s<=n.iJ){var l=this.decorator.board.board[o][s];!l.isPiece()&&!l.isDead()||a.Gf[l.piece].moveGenerationSettings.isPawn||t.push([o,s])}};if(0!==t.length){var i,o=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=f(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw i}}}}(h.atomicCoordinates);try{for(o.s();!(i=o.n()).done;){var s=u(i.value,2);r(s[0],s[1])}}catch(e){o.e(e)}finally{o.f()}t.push([...e.startCoordinates])}return t}}o.$.initVariantRule(h),p(h,"atomicCoordinates",[[-1,-1],[-1,0],[0,-1],[-1,1],[1,-1],[1,0],[0,1],[1,1]])},72:(e,t,r)=>{"use strict";r.r(t),r.d(t,{DeadKingWalking:()=>p});var n=r(10),a=r(0),i=r(11),o=r(7),s=r(5),l=r(6),c=r(1),u=r(2);function f(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return d(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return d(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw i}}}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}class p extends c.${getDecoratorType(){return n.c}getPublicProperties(){return{parameterValue:!0,information:{name:"Zombies",description:"Resigned players are controlled by a bot",tag:"deadKingWalking",color:u.p.autogenous,displayIcon:""}}}matchesPGNDeclaration(e){return/^DeadKingWalking$/i.test(e)}serializeToParsingForm(){return"DeadKingWalking"}isDisabled(e){var t=e.variantDataRules,r=e.gameType,n=e.fenTags;return r===a.Jy.Teams||n.dead.value.reduce(((e,t,r)=>e+Number(t||n.resigned.value[r])),0)<=a.q3-1||!1!==t.pointsForMate&&t.pointsForMate<6}processInternalMove(e){if(e.type===s.Fi.Resign||e.type===s.Fi.ClaimWin||e.type===s.Fi.Timeout){var t=this.decorator,r=t.sideToMove,n=t.fenOptions,c=t.board,u=n.tag("dead"),d=n.tag("resigned");d[r]=!0,u[r]=!0;var p,h=f(c.getPlayerPieces()[r]);try{for(h.s();!(p=h.n()).done;){var v=p.value,y=c.board[v[0]][v[1]].piece;l.Gf[y].moveGenerationSettings.isPawn&&(c.board[v[0]][v[1]]=(0,o.HC)(o.Ir,y))}}catch(e){h.e(e)}finally{h.f()}var m=u.map(((e,t)=>e||d[t])).filter(Boolean);if(m.length===a.q3-1){var g=m.findIndex((e=>!e));(0,i.O3)(g)&&this.decorator.assignPoints(g,this.decorator.countTotalPointsOnBoard().reduce(((e,t,r)=>e+(r===g?t:0)),0))}return{stalemates:[!1,!1,!1,!1]}}return this.callHandler("processInternalMove",arguments)}}c.$.initVariantRule(p)},138:(e,t,r)=>{"use strict";r.r(t),r.d(t,{EnPassant:()=>v});var n=r(5),a=r(10),i=r(7),o=r(1),s=r(2),l=r(6),c=r(11),u=r(84),f=r(12),d=r(3);function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i,o,s=[],l=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(c)throw a}}return s}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return h(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return h(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}class v extends o.${getDecoratorType(){return a.c}getPublicProperties(){return{parameterValue:!0,information:{name:"En Passant",description:"Pawns can capture en passant",tag:"enPassant",color:s.p.minor,displayIcon:d.w.pawnConnection}}}matchesPGNDeclaration(e){return/^EnPassant$/i.test(e)}serializeToParsingForm(){return"EnPassant"}isDisabled(){return!1}processStandardMove(e){var t=this.decorator.fenOptions.tag("enPassant"),r=p(e.startCoordinates,2),a=r[0],o=r[1],s=p(e.endCoordinates,2),d=s[0],h=s[1];if(e.specialType===n.uj.EnPassant){var v=[];t.forEach(((e,t)=>{e&&e[0][0]===d&&e[0][1]===h&&v.push(t)}));for(var y=0,m=v;y<m.length;y++){var g=m[y],b=t[g];(0,u.lM)(b),this.decorator.board.board[b[1][0]][b[1][1]]=i.v2,t[g]=null}}else{var P=this.decorator.board.board[a][o];if(!P.isEmpty()&&P.piece!==c.KR.duck)if(t[this.decorator.sideToMove]=null,l.Gf[P.piece].moveGenerationSettings.isPawn&&2===Math.abs((0,f.sC)(this.decorator.sideToMove)?a-d:o-h)){var w=[[Math.ceil((a+d)/2),Math.ceil((o+h)/2)],[d,h]];t[this.decorator.sideToMove]=w}}return this.callHandler("processStandardMove",arguments)}}o.$.initVariantRule(v)},139:(e,t,r)=>{"use strict";r.r(t),r.d(t,{FatalCapture:()=>y});var n=r(84),a=r(10),i=r(0),o=r(7),s=r(1),l=r(2),c=r(50),u=r(6),f=r(5),d=r(3);function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i,o,s=[],l=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(c)throw a}}return s}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return h(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return h(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function v(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class y extends s.${constructor(){super(...arguments),v(this,"dependencies",new Map([[c.RoyalsCannotCapture,[]]]))}getDecoratorType(){return a.c}getPublicProperties(){return{parameterValue:!0,information:{name:"Fatal Capture",description:"Pieces (but not pawns) die when they capture",tag:"fatalCapture",color:l.p.extending,displayIcon:d.w.trashBin}}}matchesPGNDeclaration(e){return/^FatalCapture$/i.test(e)}serializeToParsingForm(){return"FatalCapture"}isDisabled(){return!1}affectOptions(e){var t;if((0,f.$j)(e)){var r=p(e.startCoordinates,2),a=r[0],s=r[1],l=p(e.endCoordinates,2),c=l[0],d=l[1],h=this.decorator.board.board[c][d].isPiece(),v=this.decorator.fenOptions.tag("royal")[this.decorator.sideToMove];if(v&&a===v[0]&&s===v[1]&&h)return{checkmates:this.decorator.board.gameType.getBaseColors(this.decorator.sideToMove),checks:(0,n.VS)(!1,i.q3),stalemates:(0,n.VS)(!1,i.q3)};t=h?e.endCoordinates:void 0}var y=this.callHandler("affectOptions",arguments);if(t){var m=this.decorator.board.board[t[0]][t[1]];u.Gf[m.piece].moveGenerationSettings.isPawn||(this.decorator.board.board[t[0]][t[1]]=(0,o.HC)(o.Ir,this.decorator.board.board[t[0]][t[1]].piece))}return y}}s.$.initVariantRule(y)},48:(e,t,r)=>{"use strict";r.r(t),r.d(t,{FiftyMoveRule:()=>s});var n=r(10),a=r(0),i=r(1);function o(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class s extends i.${constructor(e){super(),o(this,"totalFullMoves",void 0),this.totalFullMoves="number"==typeof e&&e>0?e:50}getDecoratorType(){return n.c}getPublicProperties(){var e=this.totalFullMoves===1/0;return{parameterValue:this.totalFullMoves,information:{name:"N Move Rule",textualForm:"",description:e?"50 move rule disabled":"After ".concat(this.totalFullMoves," full moves without captures or pawn pushes game is over"),tag:"fiftyMoveRule"}}}matchesPGNDeclaration(e){var t=e.match(/^FiftyMoveRule=((?:\d+)|(?:Infinity))$/i);return!!t&&(this.totalFullMoves=Number(t[1]),!0)}serializeToParsingForm(){return"FiftyMoveRule=".concat(this.totalFullMoves)}isDisabled(){return!1}getParametrizedOptions(){for(var e=new Map,t=0,r=[50,150,200,25,10];t<r.length;t++){var n=r[t];e.set("".concat(n," Move rule"),n)}return e.set("Unlimited",1/0),e}processStandardMove(e){return this.decorator.getCapturedPieces(e).length>0&&(this.decorator.plyCount=0),this.callHandler("processStandardMove",arguments)}affectOptions(e){var t=this.callHandler("affectOptions",arguments);e.isIrreversible?this.decorator.plyCount=0:this.decorator.plyCount++;var r=a.q3-this.decorator.fenOptions.tag("dead").filter(Boolean).length;return r>0&&Math.floor(this.decorator.plyCount/r)>this.totalFullMoves&&(this.decorator.assignGeneralTermination("50-move Rule"),this.injectIntoBaseClass((function(){this.spreadPointsBetweenPlayersEvenly()}))()),t}}i.$.initVariantRule(s)},73:(e,t,r)=>{"use strict";r.r(t),r.d(t,{Giveaway:()=>p});var n=r(10),a=r(0),i=r(1),o=r(2),s=r(35),l=r(31),c=r(3);function u(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return f(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return f(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw i}}}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function d(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class p extends i.${constructor(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];super(...t),d(this,"dependencies",new Map([[s.ForcedCapture,[]],[l.StalemateOptions,[l.stalemateOptionsValues.stalemateWins]]])),d(this,"initiallyAliveColors",a.q3)}getDecoratorType(){return n.c}getPublicProperties(){return{parameterValue:!0,information:{name:"Giveaway",description:"First to lose all pieces or stalemate wins",tag:"giveaway",color:o.p.widespread,displayIcon:c.w.gift}}}matchesPGNDeclaration(e){return/^Giveaway$/i.test(e)}serializeToParsingForm(){return"Giveaway"}isDisabled(e){return e.variantDataRules.taboo}initDecoratorSettings(){this.decorator.fenOptions.setTag("royal",[null,null,null,null]),this.initiallyAliveColors=this.decorator.fenOptions.tag("dead").map(((e,t)=>e||this.decorator.fenOptions.tag("resigned")[t])).filter(Boolean).length;var e,t=u(this.wrappingDecorators);try{for(t.s();!(e=t.n()).done;){var r,n=e.value;null===(r=n.initDecoratorSettings)||void 0===r||r.call(n)}}catch(e){t.e(e)}finally{t.f()}}processStandardMove(e){var t,r=this.decorator.getCapturedPieces(e),n=this.decorator.board.board,a=u(r);try{for(a.s();!(t=a.n()).done;){var i=t.value,o=n[i[0]][i[1]];o.isPiece()&&this.assignPoints(o.color,p.pointsForPiece,!0)}}catch(e){a.e(e)}finally{a.f()}return this.callHandler("processStandardMove",arguments),{endPiece:[]}}affectOptions(){var e=this.callHandler("affectOptions",arguments);return this.decorator.fenOptions.setTag("royal",[null,null,null,null]),e}obtainPointsForMate(){switch(this.decorator.fenOptions.tag("dead").filter(Boolean).length){case 1:if(this.initiallyAliveColors===a.q3)return p.stalematePoints[1];case 2:if(this.initiallyAliveColors>=a.q3-1)return p.stalematePoints[2];case 3:return p.stalematePoints[3];default:return 0}}assignPoints(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2]){var r,a=u(this.wrappingDecorators);try{for(a.s();!(r=a.n()).done;){var i=r.value;if(i.assignPoints)return void i.assignPoints(e,t)}}catch(e){a.e(e)}finally{a.f()}n.c.prototype.assignPoints.call(this.decorator,e,t)}}}i.$.initVariantRule(p),d(p,"pointsForPiece",3),d(p,"stalematePoints",{1:200,2:400,3:600})},140:(e,t,r)=>{"use strict";r.r(t),r.d(t,{KingOfTheHill:()=>v});var n=r(95),a=r(8),i=r(10),o=r(0),s=r(5),l=r(1),c=r(2),u=r(563),f=r(3);function d(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return p(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return p(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw i}}}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function h(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class v extends l.${constructor(e){super(),h(this,"hillSquares",void 0),Array.isArray(e)&&e.every((e=>Array.isArray(e)&&2===e.length&&e.every((e=>"number"==typeof e))))?this.hillSquares=e:this.hillSquares=v.defaultCoordinates}getDecoratorType(){return i.c}getPublicProperties(){return{parameterValue:this.hillSquares,information:{name:"King of the Hill",description:"A king reaching the hill will checkmate all opponents",tag:"kingOfTheHill",color:c.p.autogenous,displayIcon:f.w.kingOfTheHill}}}matchesPGNDeclaration(e){var t=e.toLowerCase().match(/^KotH(?:=(.+))?$/i);if(t){if(t[1]){var r,n=[],a=d(t[1].split(","));try{for(a.s();!(r=a.n()).done;){var i=r.value,o=(0,u._q)(i);o&&n.push(o)}}catch(e){a.e(e)}finally{a.f()}n.length>0&&(this.hillSquares=n)}return!0}return!1}serializeToParsingForm(){return(0,n.Rt)(this.hillSquares,v.defaultCoordinates)?"KotH":"KotH=".concat(this.hillSquares.map((e=>(0,o.kZ)(e))).join(","))}isDisabled(){return!1}getInsufficientMaterialData(){return{isPartiallyDisabled:!0,isDisabled:!0}}affectOptions(){var e=this.decorator,t=e.board,r=e.sideToMove,n=e.fenOptions,i=this.callHandler("affectOptions",arguments),l=n.tag("royal")[r],c=n.tag("dead"),u=n.tag("wb");if(t.variantData.giveaway&&this.hillSquares.some((e=>{var r=t.board[e[0]][e[1]];return r.isPiece()&&r.piece===v.defaultRoyal})))this.decorator.processInternalMove({type:s.Fi.Stalemate}),i.stalemates[r]=!0;else if(l&&this.hillSquares.some((e=>(0,a.ef)(e,l)))){var f,p=this.decorator.obtainPointsForMate(),h=d(o.O9);try{for(h.s();!(f=h.n()).done;){var y=f.value;y!==r&&(c[y]||(c[y]=!0,this.decorator.assignPoints(r,p)))}}catch(e){h.e(e)}finally{h.f()}this.decorator.board.variantData.taboo?this.decorator.gameOver="".concat((0,o.oh)(r,u).toUpperCase()," WON THE RACE!"):this.decorator.assignGeneralTermination("King of the Hill")}return i}}l.$.initVariantRule(v),h(v,"defaultCoordinates",[[7,7],[7,6],[6,7],[6,6]]),h(v,"defaultRoyal","K")},141:(e,t,r)=>{"use strict";r.r(t),r.d(t,{NCheck:()=>p});var n=r(84),a=r(8),i=r(10),o=r(44),s=r(0),l=r(5),c=r(1);function u(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return f(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return f(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw i}}}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function d(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class p extends c.${constructor(e){super(),d(this,"defaultChecks",void 0),Array.isArray(e)&&(0,n.CG)(e,s.q3)&&e.every((e=>"number"==typeof e))?this.defaultChecks=e:this.defaultChecks=(0,n.VS)(3,s.q3)}getDecoratorType(){return i.c}getPublicProperties(){var e=this.defaultChecks.filter(Boolean).reduce(((e,t,r,n)=>e+(n[r-1]===n[r]?"":"-".concat(t))),"").slice(1);return{parameterValue:this.defaultChecks,information:{name:"N-Check",textualForm:"".concat(e,"+"),description:"Checking a king ".concat(e," times is checkmate"),tag:"nCheck"}}}matchesPGNDeclaration(e){var t=e.toLowerCase().match(/^(\d\d?\d?(?:-\d\d?\d?){0,3})-check$/i);if(t){for(var r=t[1].split("-"),n=0;n<=r.length;n++)if(r[n])this.defaultChecks[n]=Number(r[n]);else for(;n!==s.q3;)this.defaultChecks[n]=this.defaultChecks[n-1],n++;return!0}return!1}serializeToParsingForm(){return"".concat(this.defaultChecks.join("-"),"-check")}isDisabled(e){return e.variantDataRules.giveaway}getInsufficientMaterialData(){return{isPartiallyDisabled:!0,isDisabled:!1}}getParametrizedOptions(){for(var e=new Map([["N+ Off",!1]]),t=1;t<10;t++)e.set("".concat(t,"+"),(0,n.VS)(t,s.q3));for(var r=0,a=[12,15,20,30,50];r<a.length;r++){var i=a[r];e.set("".concat(i,"+"),(0,n.VS)(i,s.q3))}return e}initDecoratorSettings(){var e,t=this.decorator.fenOptions.tag("lives"),r=u(s.O9);try{for(r.s();!(e=r.n()).done;){var n=e.value;null===t[n]&&(t[n]=this.defaultChecks[n])}}catch(e){r.e(e)}finally{r.f()}var a,i=u(this.wrappingDecorators);try{for(i.s();!(a=i.n()).done;){var o,l=a.value;null===(o=l.initDecoratorSettings)||void 0===o||o.call(l)}}catch(e){i.e(e)}finally{i.f()}}affectOptions(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,o.Yx)(),r=this.decorator,i=r.board,c=r.sideToMove,f=i.getCurrentChecks().map((e=>new Set(e))),d=!t.ignoreCheckmateChecks&&!t.ignoreNextTurn,p=this.decorator.fenOptions.tag("royal"),h=this.decorator.fenOptions.tag("lives"),v=this.callHandler("affectOptions",arguments),y=(0,l.$j)(e);if(d){var m,g=i.getCurrentChecks(c),b=(0,n.VS)(0,s.q3),P=u(s.O9);try{for(P.s();!(m=P.n()).done;){var w,S=m.value,C=u(g[S]);try{for(C.s();!(w=C.n()).done;){var O=w.value,A=p[S];(!f[S].has(O)||A&&y&&(0,a.ef)(e.endCoordinates,A))&&b[S]++}}catch(e){C.e(e)}finally{C.f()}}}catch(e){P.e(e)}finally{P.f()}if(h.every((e=>null!==e))){var T,M=u(s.O9);try{for(M.s();!(T=M.n()).done;){var j=T.value;h[j]-=b[j],h[j]<=0&&(this.decorator.assignPoints(c,this.decorator.obtainPointsForMate()),this.decorator.turnPiecesDead(j),h[j]=0)}}catch(e){M.e(e)}finally{M.f()}}this.decorator.getRealPlayers()>1&&(this.decorator.sideToMove=this.decorator.nextTurn(c),i.pregenerateAttacks())}return v}}c.$.initVariantRule(p)},142:(e,t,r)=>{"use strict";r.r(t),r.d(t,{OppositeMultiplier:()=>l});var n=r(10),a=r(0),i=r(6),o=r(1);function s(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class l extends o.${constructor(){super(...arguments),s(this,"oppositeMultiplierValue",2)}getDecoratorType(){return n.c}getPublicProperties(){return{parameterValue:this.oppositeMultiplierValue,information:{name:"Opposite's piece value",textualForm:"Ox".concat(this.oppositeMultiplierValue),description:"Opposite's pieces are worth ".concat(this.oppositeMultiplierValue," times their normal points value until one player is eliminated"),tag:"oppositeMultiplier"}}}matchesPGNDeclaration(e){var t=e.toLowerCase().match(/^OppX=(\d)$/i);if(t){var r=Number(t[1]);return!(r<=0||r>l.MAXIMUM_MULTIPLIER)&&(this.oppositeMultiplierValue=r,!0)}return!1}serializeToParsingForm(){return"OppX=".concat(this.oppositeMultiplierValue)}isDisabled(e){var t=e.variantDataRules,r=e.gameType,n=e.fenTags;return r===a.Jy.Teams||t.giveaway||n.dead.value.reduce(((e,t,r)=>e+Number(t||n.resigned.value[r])),0)<=a.q3-1}getParametrizedOptions(){for(var e=new Map([["Ox Off",!1]]),t=1;t<=l.MAXIMUM_MULTIPLIER;t++)e.set("Ox".concat(t),t);return e}getPointsForPiece(e){var t=this.decorator.fenOptions.tag("dead"),r=this.decorator.fenOptions.tag("resigned");return t.map(((e,t)=>e||r[t])).filter(Boolean).length===a.q3&&e.isPiece()&&e.color===(0,a.R4)(this.decorator.sideToMove)?i.Gf[e.piece].points.singlesPoints*this.oppositeMultiplierValue:this.callHandler("getPointsForPiece",arguments)}}s(l,"MAXIMUM_MULTIPLIER",6),o.$.initVariantRule(l)},143:(e,t,r)=>{"use strict";r.r(t),r.d(t,{OppositeSideCastling:()=>l});var n=r(5),a=r(10),i=r(1),o=r(2),s=r(0);class l extends i.${getDecoratorType(){return a.c}getPublicProperties(){return{parameterValue:!0,information:{name:"Opposite-side Castling",description:"Once your opponent has castled, you can only castle to the opposite side",tag:"oppositeSideCastling",color:o.p.minor,displayIcon:"ὸ"}}}matchesPGNDeclaration(e){return/^OppositeSideCastling$/i.test(e)}serializeToParsingForm(){return"OppositeSideCastling"}isDisabled(){return!1}processStandardMove(e){var t,r=this.callHandler("processStandardMove",arguments);"specialType"in e&&(e.specialType===n.uj.CastlingKingside?t=this.decorator.fenOptions.tag("castleKingside"):e.specialType===n.uj.CastlingQueenside&&(t=this.decorator.fenOptions.tag("castleQueenside")),t&&(t[(0,s.R4)(this.decorator.sideToMove)]=!1));return r}}i.$.initVariantRule(l)},144:(e,t,r)=>{"use strict";r.r(t),r.d(t,{PiecesGoToBanks:()=>p});var n=r(10),a=r(7),i=r(1),o=r(2),s=r(5),l=r(3);function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i,o,s=[],l=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(c)throw a}}return s}}(e,t)||f(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=f(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw i}}}}function f(e,t){if(e){if("string"==typeof e)return d(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?d(e,t):void 0}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}class p extends i.${getDecoratorType(){return n.c}getPublicProperties(){return{parameterValue:!0,information:{name:"Bank Captures",description:"Captured pieces go to banks",tag:"piecesGoToBanks",color:o.p.extending,displayIcon:l.w.copyToClipboard}}}matchesPGNDeclaration(e){return/^Crazy(?:house|wan)$/i.test(e)}serializeToParsingForm(){return""}isDisabled(){return!1}processStandardMove(e){var t=this.decorator.fenOptions.tag("promotedFrom");if(e.promotion){var r=this.decorator.board.board[e.startCoordinates[0]][e.startCoordinates[1]].piece;t.set(e.endCoordinates,r)}else{var n,a=u(t);try{for(a.s();!(n=a.n()).done;){var i=c(n.value,2),o=i[0],s=i[1];if(o[0]===e.startCoordinates[0]&&o[1]===e.endCoordinates[1]){t.delete(o),t.set(e.endCoordinates,s);break}}}catch(e){a.e(e)}finally{a.f()}}return this.callHandler("processStandardMove",arguments)}affectOptions(e){var t=this.decorator.fenOptions,r=t.tag("areBanksEnabled"),n=t.tag("bank"),i=t.tag("promotedFrom");if(r[this.decorator.sideToMove]&&!(0,s.LR)(e)&&(0,s.$j)(e)){var o=this.decorator.getCapturedPieces(e),l=this.decorator.sideToMove,f=e=>{var t,r=u(n[l]);try{for(r.s();!(t=r.n()).done;){var i=c(t.value,2),o=i[0],s=i[1];if(o.piece===e&&o.color===l)return void n[l].set(o,s+1)}}catch(e){r.e(e)}finally{r.f()}n[l].set((0,a.HC)(l,e),1)};o.forEach((e=>{var t,r=u(i);try{for(r.s();!(t=r.n()).done;){var n=c(t.value,2),a=n[0],o=n[1];if(a[0]===e[0]&&a[1]===e[1])return i.delete(a),void f(o)}}catch(e){r.e(e)}finally{r.f()}f(this.decorator.board.board[e[0]][e[1]].piece)}))}return this.callHandler("affectOptions",arguments)}}},145:(e,t,r)=>{"use strict";r.r(t),r.d(t,{PlayForMate:()=>f});var n=r(3),a=r(10),i=r(0),o=r(1),s=r(2);function l(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw i}}}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function u(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class f extends o.${constructor(){super(...arguments),u(this,"initiallyAliveColors",i.q3)}getDecoratorType(){return a.c}getPublicProperties(){return{parameterValue:!0,information:{name:"Play for mate",description:"No points for pieces, only checkmates matter",tag:"playForMate",color:s.p.pointsAlternation,displayIcon:n.w.hashtag}}}matchesPGNDeclaration(e){return/^Play4Mate$/i.test(e)}serializeToParsingForm(){return"Play4Mate"}isDisabled(e){return e.gameType===i.Jy.Teams}initDecoratorSettings(){this.initiallyAliveColors=this.decorator.fenOptions.tag("dead").map(((e,t)=>e||this.decorator.fenOptions.tag("resigned")[t])).filter(Boolean).length;var e,t=l(this.wrappingDecorators);try{for(t.s();!(e=t.n()).done;){var r,n=e.value;null===(r=n.initDecoratorSettings)||void 0===r||r.call(n)}}catch(e){t.e(e)}finally{t.f()}}obtainPointsForMate(){switch(this.decorator.fenOptions.tag("dead").filter(Boolean).length){case 1:if(this.initiallyAliveColors===i.q3)return f.checkmatePoints[1];case 2:if(this.initiallyAliveColors>=i.q3-1)return f.checkmatePoints[2];case 3:return f.checkmatePoints[3];default:return 0}}getPointsForPiece(){return 0}}o.$.initVariantRule(f),u(f,"checkmatePoints",{1:24,2:32,3:48})},146:(e,t,r)=>{"use strict";r.r(t),r.d(t,{PointsForMate:()=>s});var n=r(0),a=r(10),i=r(1);function o(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class s extends i.${constructor(e){super(),o(this,"pointsForMate",void 0),this.pointsForMate="number"==typeof e?e:20}getDecoratorType(){return a.c}getPublicProperties(){return{parameterValue:this.pointsForMate,information:{name:"Points for Mate",textualForm:"+".concat(this.pointsForMate),description:"Checkmates & king captures are worth ".concat(this.pointsForMate," points"),tag:"pointsForMate"}}}matchesPGNDeclaration(e){var t=e.match(/^PointsForMate=(3|5|10|40)$/i);return!!t&&(this.pointsForMate=Number(t[1]),!0)}serializeToParsingForm(){return"PointsForMate=".concat(this.pointsForMate)}isDisabled(e){var t=e.variantDataRules,r=e.gameType;return t.giveaway||t.playForMate||r===n.Jy.Teams}getParametrizedOptions(){for(var e=new Map,t=0,r=[20,3,5,10,40];t<r.length;t++){var n=r[t];e.set("+".concat(n),n)}return e}obtainPointsForMate(){return this.pointsForMate}}i.$.initVariantRule(s)},31:(e,t,r)=>{"use strict";r.r(t),r.d(t,{StalemateOptions:()=>h,stalemateOptionsValues:()=>d,verifyCustomStalemateValue:()=>p});var n=r(84),a=r(10),i=r(5),o=r(1),s=r(2),l=r(3);function c(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return u(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw i}}}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function f(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var d={stalemateLoses:"loss",stalemateWins:"win",stalemateDraws:"draw"},p=e=>Object.values(d).includes(e);class h extends o.${constructor(e){super(),f(this,"type",void 0),f(this,"isFFA",!1),"string"==typeof e&&p(e)?this.type=e:this.type=void 0}getDecoratorType(){return a.c}getPublicProperties(){var e="draw"===this.type?"Stalemate is a draw":this.isFFA?"The remaining players share the points":"The stalemated player ".concat("loss"===this.type?"loses":"wins");return{parameterValue:this.type,information:{name:"Stalemate",description:e,tag:"stalemateOptions",color:s.p.minor,displayIcon:l.w.dollarSign}}}matchesPGNDeclaration(e){var t=e.toLowerCase().match(/^Stalemate=(.+)$/i);if(t){var r=t[1];return p(r)&&(this.type=r),!0}return!1}serializeToParsingForm(){var e;return"Stalemate=".concat(null!==(e=this.type)&&void 0!==e?e:"draw")}isDisabled(){return!1}getParametrizedOptions(){return new Map([["Draw",d.stalemateDraws],["The stalemated player loses",d.stalemateLoses],["The stalemated player wins",d.stalemateWins]])}initDecoratorSettings(){void 0===this.type&&(this.decorator.board.gameType.isFFA()&&this.decorator.fenOptions.tag("dead").filter(Boolean).length>2?(this.type="win",this.isFFA=!0):(this.type="draw",this.isFFA=!1));var e,t=c(this.wrappingDecorators);try{for(t.s();!(e=t.n()).done;){var r,n=e.value;null===(r=n.initDecoratorSettings)||void 0===r||r.call(n)}}catch(e){t.e(e)}finally{t.f()}}processInternalMove(e){var t=this.decorator.sideToMove,r=this.callHandler("processInternalMove",arguments);if(e.type===i.Fi.Stalemate){var a=this.decorator.obtainPointsForMate();switch(this.type){case"loss":if(!this.isFFA){this.decorator.points[t]+=a;break}case"draw":this.injectIntoBaseClass((function(){this.spreadPointsBetweenPlayersEvenly()}))();break;case"win":this.decorator.points[this.decorator.sideToMove]+=a;break;case void 0:break;default:(0,n.h0)(this.type)}1===this.decorator.getRealPlayers()&&this.decorator.assignGeneralTermination("Stalemate",t)}return r}}o.$.initVariantRule(h)},147:(e,t,r)=>{"use strict";r.r(t),r.d(t,{Takeover:()=>v});var n=r(8),a=r(10),i=r(0),o=r(7),s=r(6),l=r(1),c=r(2),u=r(72),f=r(3);function d(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return p(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return p(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw i}}}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function h(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class v extends l.${constructor(){super(...arguments),h(this,"dependencies",new Map([[u.DeadKingWalking,[]]]))}getDecoratorType(){return a.c}getPublicProperties(){return{parameterValue:!0,information:{name:"Takeover",description:"Checkmate players to take control of their pieces",tag:"takeover",color:c.p.phased,displayIcon:f.w.exchange}}}matchesPGNDeclaration(e){return/^Takeover$/i.test(e)}serializeToParsingForm(){return"Takeover"}isDisabled(e){return e.gameType===i.Jy.Teams}affectOptions(){var e,t=this.decorator.sideToMove,r=this.decorator.board.getPlayerPieces(),n=this.callHandler("affectOptions",arguments),a=d(i.O9);try{for(a.s();!(e=a.n()).done;){var l=e.value;if(n.checkmates[l]){var c,u=d(r[t]);try{for(u.s();!(c=u.n()).done;){var f=c.value,p=this.decorator.board.board[f[0]][f[1]];p.isDead()&&!s.Gf[p.piece].moveGenerationSettings.isPawn&&(this.decorator.board.board[f[0]][f[1]]=(0,o.HC)(t,p.piece))}}catch(e){u.e(e)}finally{u.f()}}}}catch(e){a.e(e)}finally{a.f()}return n}countTotalPointsOnBoard(){var e=this.decorator.fenOptions.tag("zombieImmune"),t=this.decorator.fenOptions.tag("royal"),r=[0,0,0,0];return this.decorator.board.getPlayerPieces().forEach(((a,i)=>{if(!e[i]){var o,l=t[i],c=d(a);try{for(c.s();!(o=c.n()).done;){var u=o.value;if(l&&(0,n.ef)(u,l))r[i]+=this.decorator.obtainPointsForMate();else{var f=this.decorator.board.board[u[0]][u[1]].piece;r[i]+=s.Gf[f].points.singlesPoints}}}catch(e){c.e(e)}finally{c.f()}}})),r}}l.$.initVariantRule(v)},74:(e,t,r)=>{"use strict";r.r(t),r.d(t,{ThreefoldRepetition:()=>o});var n=r(10),a=r(1);function i(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class o extends a.${constructor(e){super(),i(this,"totalRepetitionsRequired",void 0),this.totalRepetitionsRequired="number"==typeof e&&e>0?e:3}getDecoratorType(){return n.c}getPublicProperties(){var e=this.totalRepetitionsRequired===1/0;return{parameterValue:this.totalRepetitionsRequired,information:{name:"N-fold Repetition",textualForm:"",description:e?"3-fold repetition disabled":"After position repeats ".concat(this.totalRepetitionsRequired," times game is over"),tag:"threefoldRepetition"}}}matchesPGNDeclaration(e){var t=e.match(/^ThreefoldRepetition=((?:\d+)|(?:Infinity))$/i);return!!t&&(this.totalRepetitionsRequired=Number(t[1]),!0)}serializeToParsingForm(){return"ThreefoldRepetition=".concat(this.totalRepetitionsRequired)}isDisabled(){return!1}getParametrizedOptions(){for(var e=new Map,t=0,r=[3,2,5];t<r.length;t++){var n=r[t];e.set("".concat(n,"-fold"),n)}return e.set("Unlimited",1/0),e}affectOptions(){var e=this.callHandler("affectOptions",arguments);return this.decorator.board.moves.getHash(this.decorator.board.moves.constructPreliminaryHashString(this.decorator.board))+1>=this.totalRepetitionsRequired&&(this.decorator.assignGeneralTermination("Threefold Repetition"),this.injectIntoBaseClass((function(){this.spreadPointsBetweenPlayersEvenly()}))()),e}}a.$.initVariantRule(o)},148:(e,t,r)=>{"use strict";r.r(t),r.d(t,{AnyCapture:()=>h});var n=r(84),a=r(0),i=r(15),o=r(1),s=r(2),l=r(3);function c(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return u(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw i}}}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){p(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function p(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class h extends o.${getDecoratorType(){return i.V}getPublicProperties(){return{parameterValue:!0,information:{name:"Any Capture",description:"You can capture your own pieces",tag:"anyCapture",color:s.p.autogenous,displayIcon:l.w.captureAnything}}}matchesPGNDeclaration(e){return/^AnyCapture$/i.test(e)}serializeToParsingForm(){return"AnyCapture"}isDisabled(){return!1}configure(e){var t,r=d(d({},e),{},{immunePieces:(0,n.VS)(!1,a.q3)}),o=c(this.wrappingDecorators);try{for(o.s();!(t=o.n()).done;){var s=t.value;if(s.configure)return s.configure(r)}}catch(e){o.e(e)}finally{o.f()}return i.V.prototype.configure.call(this.decorator,r)}}o.$.initVariantRule(h)},63:(e,t,r)=>{"use strict";r.r(t),r.d(t,{PromoteTo:()=>u});var n=r(6),a=r(565),i=r(15),o=r(1);function s(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw i}}}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function c(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class u extends o.${static filterPromotionPieceString(e){var t=e.split("").filter((e=>(0,n.IM)(e)));return t.length?t:[n.bB.queen,n.bB.rook,n.bB.bishop,n.bB.knight]}constructor(e){super(),c(this,"promotionPieces",void 0),this.promotionPieces=Array.isArray(e)&&e.every((e=>"string"==typeof e&&(0,n.IM)(e)))?e:[n.bB.queen,n.bB.rook,n.bB.bishop,n.bB.knight]}getDecoratorType(){return i.V}getPublicProperties(){var e=this.promotionPieces.reduce(((e,t)=>[...e,n.Gf[t].naming.name]),[]);return{parameterValue:this.promotionPieces,information:{name:"Pawns promote to",textualForm:"",description:"Pawns promote to ".concat((0,a.zL)((0,a.uC)(e))),tag:"promotionPieces"}}}matchesPGNDeclaration(e){var t=e.match(/^PromoteTo=([A-ZxΘ]+)$/i);return!!t&&(this.promotionPieces=u.filterPromotionPieceString(t[1]),!0)}serializeToParsingForm(){return"PromoteTo=".concat(this.promotionPieces.join(""))}isDisabled(){return!1}initDecoratorSettings(){this.decorator.hooks.usePawnLogic&&(this.decorator.hooks.usePawnLogic.promotionPieces=this.promotionPieces);var e,t=s(this.wrappingDecorators);try{for(t.s();!(e=t.n()).done;){var r,n=e.value;null===(r=n.initDecoratorSettings)||void 0===r||r.call(n)}}catch(e){t.e(e)}finally{t.f()}}}o.$.initVariantRule(u)},30:(e,t,r)=>{"use strict";r.r(t),r.d(t,{PromotionRank:()=>f,disabledRank:()=>u});var n=r(565),a=r(0),i=r(15),o=r(1);function s(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw i}}}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function c(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var u=99;class f extends o.${constructor(e){super(),c(this,"promotionRank",void 0),this.promotionRank="number"==typeof e?e:8}getDecoratorType(){return i.V}getPublicProperties(){return{parameterValue:this.promotionRank,information:{name:"Promotion Rank",textualForm:"",description:"on the ".concat(this.promotionRank).concat((0,n.od)(this.promotionRank)," rank"),tag:"promotionRank"}}}matchesPGNDeclaration(e){var t=e.match(/^Prom=(\d\d?)$/i);return!!t&&(this.promotionRank=Number(t[1]),!0)}serializeToParsingForm(){return"Prom=".concat(this.promotionRank)}isDisabled(){return!1}getParametrizedOptions(){for(var e=new Map,t=1;t<=a.iJ;t++)e.set(t+""+(0,n.od)(t),t);return e.set("No promotion",u),e}initDecoratorSettings(){this.decorator.hooks.usePawnLogic&&(this.decorator.hooks.usePawnLogic.promotionRanks=[a.iJ-this.promotionRank,this.promotionRank-1,this.promotionRank-1,a.iJ-this.promotionRank]);var e,t=s(this.wrappingDecorators);try{for(t.s();!(e=t.n()).done;){var r,n=e.value;null===(r=n.initDecoratorSettings)||void 0===r||r.call(n)}}catch(e){t.e(e)}finally{t.f()}}}o.$.initVariantRule(f)},50:(e,t,r)=>{"use strict";r.r(t),r.d(t,{RoyalsCannotCapture:()=>u});var n=r(3),a=r(15),i=r(6),o=r(1),s=r(2);function l(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw i}}}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}class u extends o.${getDecoratorType(){return a.V}getPublicProperties(){return{parameterValue:!0,information:{name:"Royals Cannot Capture",description:"Royal pieces cannot capture pieces.",tag:"royalsCannotCapture",color:s.p.autogenous,displayIcon:n.w.handshake}}}matchesPGNDeclaration(){return!1}serializeToParsingForm(){return""}isDisabled(){return!1}getMovePossibility(e){var t=this.decorator.fenData.fenOptions.tag("royal")[this.decorator.color];t&&t[0]===this.decorator.i&&t[1]===this.decorator.j&&(e.special=i.hK.MoveOnly);var r,n=l(this.wrappingDecorators);try{for(n.s();!(r=n.n()).done;){var o=r.value;if(o.getMovePossibility)return o.getMovePossibility(e)}}catch(e){n.e(e)}finally{n.f()}return a.V.prototype.getMovePossibility.call(this.decorator,e)}}},149:(e,t,r)=>{"use strict";r.r(t),r.d(t,{Sideways:()=>u});var n=r(6),a=r(15),i=r(1),o=r(2),s=r(3);function l(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw i}}}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}class u extends i.${getDecoratorType(){return a.V}getPublicProperties(){return{parameterValue:!0,information:{name:"Sideways",description:"Pawns can also move one square sideways",tag:"sideways",color:o.p.autogenous,displayIcon:s.w.pawnSideways}}}matchesPGNDeclaration(e){return/^Sideways$/i.test(e)}serializeToParsingForm(){return"Sideways"}isDisabled(){return!1}getPossibleCells(){this.decorator.hooks.usePawnLogic&&this.injectIntoBaseClass((function(){this.generateJumpAttack({displacement:[0,-1],special:n.hK.MoveOnly}),this.generateJumpAttack({displacement:[0,1],special:n.hK.MoveOnly})}))();var e,t=l(this.wrappingDecorators);try{for(t.s();!(e=t.n()).done;){var r=e.value;if(r.getPossibleCells)return r.getPossibleCells()}}catch(e){t.e(e)}finally{t.f()}Object.getPrototypeOf(this.decorator).getPossibleCells.call(this.decorator)}}i.$.initVariantRule(u)},150:(e,t,r)=>{"use strict";r.r(t),r.d(t,{Stonewall:()=>d});var n=r(15),a=r(6),i=r(1);function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){l(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i,o,s=[],l=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(c)throw a}}return s}}(e,t)||u(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){if(e){if("string"==typeof e)return f(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?f(e,t):void 0}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}class d extends i.${getDecoratorType(){return n.V}getPublicProperties(){return{parameterValue:!0,information:{name:"Stonewall",textualForm:"",description:"Dead pieces cannot be captured",tag:"stonewall"}}}matchesPGNDeclaration(e){return/^Deadwall$/i.test(e)}serializeToParsingForm(){return"Deadwall"}isDisabled(){return!1}getMovePossibility(e){var t=c(e.displacement,2),r=t[0],i=t[1],o=e.special,l=e;(o===a.hK.AttackOnly||o===a.hK.Normal||o===a.hK.RayGen)&&this.decorator.board[r]&&this.decorator.board[r][i]&&this.decorator.board[r][i].isDead()&&(l=s(s({},e),{},{special:a.hK.MoveOnly}));var f,d=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=u(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw i}}}}(this.wrappingDecorators);try{for(d.s();!(f=d.n()).done;){var p=f.value;if(p.getMovePossibility)return p.getMovePossibility(e)}}catch(e){d.e(e)}finally{d.f()}return n.V.prototype.getMovePossibility.call(this.decorator,l)}}i.$.initVariantRule(d)},151:(e,t,r)=>{"use strict";r.r(t),r.d(t,{Torpedo:()=>d});var n=r(15),a=r(1),i=r(2),o=r(3);function s(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw i}}}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){f(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function f(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class d extends a.${getDecoratorType(){return n.V}getPublicProperties(){return{parameterValue:!0,information:{name:"Torpedo",description:"Pawns can always jump two squares",tag:"torpedo",color:i.p.autogenous,displayIcon:o.w.torpedo}}}matchesPGNDeclaration(e){return/^Torpedo$/i.test(e)}serializeToParsingForm(){return"Torpedo"}isDisabled(){return!1}configure(e){var t,r=u(u({},e),{},{baseRank:!0}),a=s(this.wrappingDecorators);try{for(a.s();!(t=a.n()).done;){var i=t.value;if(i.configure)return i.configure(r)}}catch(e){a.e(e)}finally{a.f()}n.V.prototype.configure.call(this.decorator,r)}}a.$.initVariantRule(d)},2:(e,t,r)=>{"use strict";r.d(t,{p:()=>a});var n=r(552),a={minor:(0,n.TG)("#e01492"),visual:(0,n.TG)("#ad5709"),autogenous:(0,n.TG)("#f2791e"),metadata:(0,n.TG)("#89a5d3"),startingPosition:(0,n.TG)("#7030a0"),extending:(0,n.TG)("#fbaa07"),widespread:(0,n.TG)("#d40c0c"),pointsAlternation:(0,n.TG)("#00b0f0"),phased:(0,n.TG)("#00b050")}},33:(e,t,r)=>{"use strict";r.d(t,{KH:()=>D,XY:()=>A,x7:()=>k,xU:()=>x,yS:()=>j});var n=r(9),a=r(10),i=r(15),o=r(35),s=r(68),l=r(69),c=r(70),u=r(48),f=r(73),d=r(31),p=r(74),h=r(63),v=r(30),y=r(1);function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){b(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function b(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function P(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i,o,s=[],l=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(c)throw a}}return s}}(e,t)||S(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=S(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw i}}}}function S(e,t){if(e){if("string"==typeof e)return C(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?C(e,t):void 0}}function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function O(){O=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",o=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function c(e,t,r,a){var i=t&&t.prototype instanceof d?t:d,o=Object.create(i.prototype),s=new T(a||[]);return n(o,"_invoke",{value:w(e,r,s)}),o}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var f={};function d(){}function p(){}function h(){}var v={};l(v,i,(function(){return this}));var y=Object.getPrototypeOf,m=y&&y(y(M([])));m&&m!==t&&r.call(m,i)&&(v=m);var g=h.prototype=d.prototype=Object.create(v);function b(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function P(e,t){function a(n,i,o,s){var l=u(e[n],e,i);if("throw"!==l.type){var c=l.arg,f=c.value;return f&&"object"==typeof f&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){a("next",e,o,s)}),(function(e){a("throw",e,o,s)})):t.resolve(f).then((function(e){c.value=e,o(c)}),(function(e){return a("throw",e,o,s)}))}s(l.arg)}var i;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){a(e,r,t,n)}))}return i=i?i.then(n,n):n()}})}function w(e,t,r){var n="suspendedStart";return function(a,i){if("executing"===n)throw Error("Generator is already running");if("completed"===n){if("throw"===a)throw i;return j()}for(r.method=a,r.arg=i;;){var o=r.delegate;if(o){var s=S(o,r);if(s){if(s===f)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=u(e,t,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===f)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}function S(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var a=u(n,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,f;var i=a.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function M(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,a=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:j}}function j(){return{value:void 0,done:!0}}return p.prototype=h,n(g,"constructor",{value:h,configurable:!0}),n(h,"constructor",{value:p,configurable:!0}),p.displayName=l(h,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,l(e,s,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},b(P.prototype),l(P.prototype,o,(function(){return this})),e.AsyncIterator=P,e.async=function(t,r,n,a,i){void 0===i&&(i=Promise);var o=new P(c(t,r,n,a),i);return e.isGeneratorFunction(r)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},b(g),l(g,s,"Generator"),l(g,i,(function(){return this})),l(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=M,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(A),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return o.type="throw",o.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],o=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),l=r.call(i,"finallyLoc");if(s&&l){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),A(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;A(r)}return a}}throw Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:M(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}var A=()=>({boardDecorators:[],pieceControlDecorators:[],fenDataDecorators:[],[Symbol.iterator](){var e=this;return O().mark((function t(){var r,n,a,i;return O().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=0,n=[...e.boardDecorators,...e.pieceControlDecorators,...e.fenDataDecorators];case 1:if(!(r<n.length)){t.next=9;break}return a=n[r],i=a,t.next=6,i;case 6:r++,t.next=1;break;case 9:case"end":return t.stop()}}),t)}))()}}),T=[l.SetupChess,o.ForcedCapture,c.Taboo,s.SeirawanSetup,h.PromoteTo,v.PromotionRank,f.Giveaway].reverse();function M(e,t){var r=(e,t)=>e.getDecoratorType()===t;r(e,n.$)?t.boardDecorators(e):r(e,i.V)?t.pieceControlDecorators(e):r(e,a.c)&&t.fenDataDecorators(e)}function j(e){var t,r=new Set,n=new Set,a=[v.PromotionRank,h.PromoteTo,d.StalemateOptions,u.FiftyMoveRule,p.ThreefoldRepetition],i=w(y.$.variantRuleList);try{for(i.s();!(t=i.n()).done;){var o=t.value,s=new o;n.add(s),r.add(o)}}catch(e){i.e(e)}finally{i.f()}var l,c=A(),f=e.split(/\s+/),m=e=>{M(e,{boardDecorators:e=>{c.boardDecorators.push(e)},pieceControlDecorators:e=>{c.pieceControlDecorators.push(e)},fenDataDecorators:e=>{c.fenDataDecorators.push(e)}});var t,r=w(e.dependencies);try{var n=function(){var e=P(t.value,2),r=e[0],n=e[1];Object.values(c).some((e=>e.some((e=>e instanceof r))))||m(new r(...n))};for(r.s();!(t=r.n()).done;)n()}catch(e){r.e(e)}finally{r.f()}},g=w(n);try{for(g.s();!(l=g.n()).done;){var b,S=l.value,C=w(f);try{for(C.s();!(b=C.n()).done;){var O=b.value;S.matchesPGNDeclaration(O)&&(m(S),n.delete(S))}}catch(e){C.e(e)}finally{C.f()}}}catch(e){g.e(e)}finally{g.f()}for(var j=function(){var e=D[k];M(new e,{boardDecorators:t=>{c.boardDecorators.some((t=>t instanceof e))||c.boardDecorators.push(t)},pieceControlDecorators:t=>{c.pieceControlDecorators.some((t=>t instanceof e))||c.pieceControlDecorators.push(t)},fenDataDecorators:t=>{c.fenDataDecorators.some((t=>t instanceof e))||c.fenDataDecorators.push(t)}})},k=0,D=a;k<D.length;k++)j();var x,E=w(T);try{var R=function(){var e=x.value;M(new e,{boardDecorators:()=>{var t=c.boardDecorators.findIndex((t=>t instanceof e));-1!==t&&c.boardDecorators.unshift(c.boardDecorators.splice(t,1)[0])},pieceControlDecorators:()=>{var t=c.pieceControlDecorators.findIndex((t=>t instanceof e));-1!==t&&c.pieceControlDecorators.unshift(c.pieceControlDecorators.splice(t,1)[0])},fenDataDecorators:()=>{var t=c.fenDataDecorators.findIndex((t=>t instanceof e));-1!==t&&c.fenDataDecorators.unshift(c.fenDataDecorators.splice(t,1)[0])}})};for(E.s();!(x=E.n()).done;)R()}catch(e){E.e(e)}finally{E.f()}return c}function k(e){var t,r={},n=w(y.$.variantRuleList.map((e=>new e)));try{for(n.s();!(t=n.n()).done;){var a=t.value;r[a.getPublicProperties().information.tag]=!1}}catch(e){n.e(e)}finally{n.f()}var i,o,s=w(e);try{for(s.s();!(i=s.n()).done;){var l=i.value;o=l.getPublicProperties(),r[o.information.tag]=o.parameterValue}}catch(e){s.e(e)}finally{s.f()}return r}function D(e){return e.map((e=>{var t=e.getPublicProperties().parameterValue,r=!1!==t?[t]:[];return new e.constructor(r)}))}function x(e){var t={variantDataRules:e.variantData,gameType:e.gameType.type,fenTags:e.data.fenOptions.tags};return g(g({},e.variantRules),{},{boardDecorators:e.variantRules.boardDecorators.filter((e=>!e.isDisabled(t))),pieceControlDecorators:e.variantRules.pieceControlDecorators.filter((e=>!e.isDisabled(t))),fenDataDecorators:e.variantRules.fenDataDecorators.filter((e=>!e.isDisabled(t)))})}},75:(e,t,r)=>{"use strict";r.d(t,{W:()=>I,V:()=>F});var n=r(11),a=r(33),i=r(38);function o(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){l=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(l)throw i}}}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var l=r(40),c=r(84),u=r(0),f=r(128),d=r(563);function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){v(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function v(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function y(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=g(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw i}}}}function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i,o,s=[],l=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(c)throw a}}return s}}(e,t)||g(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){if(e){if("string"==typeof e)return b(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?b(e,t):void 0}}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var P="Variant",w="Date",S="Site",C="TimeControl",O="Termination",A="GameNr",T=()=>({tag:"playerData",currentValue:(0,c.fi)((()=>({})),u.q3),verifyTagInParsing(e){var t,r=y(u.O9);try{for(r.s();!(t=r.n()).done;){var n=t.value,a=(0,u.oh)(n);if((0,d.tk)(e,a)||(0,d.tk)(e,"".concat(a,"Elo")))return!0}}catch(e){r.e(e)}finally{r.f()}return!1},parseTag(e){var t,r=y(u.O9);try{for(r.s();!(t=r.n()).done;){var n=t.value,a=(0,u.oh)(n),i=[...this.currentValue];if((0,d.tk)(e,a)){var o=(0,d.k5)(e,a);return o&&(i[n]=h(h({},i[n]),{},{name:o})),i}if((0,d.tk)(e,"".concat(a,"Elo"))){var s=Number((0,d.k5)(e,a));return isNaN(s)||(i[n]=h(h({},i[n]),{},{elo:s})),i}}}catch(e){r.e(e)}finally{r.f()}throw Error("Tag does not match any player data signature")},serialize(e){var t,r=[],n=y(u.O9);try{for(n.s();!(t=n.n()).done;){var a=t.value,i=e.gameData.players[a];i.elo&&r.push((0,d.JY)("".concat(u.Q3[a],"Elo"),i.elo+"")),i.name&&r.push((0,d.JY)("".concat(u.Q3[a]),i.name+""))}}catch(e){n.e(e)}finally{n.f()}return r.join("\n")}}),M="Results";function j(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return k(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return k(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw i}}}}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var D="RuleVariants",x=()=>({variantType:{tag:"variantType",currentValue:u.Jy.FFA,verifyTagInParsing:e=>(0,d.tk)(e,P),parseTag(e){for(var t=(0,d.k5)(e,P),r=0,n=Object.values(u.Jy);r<n.length;r++){var a=n[r];if(t===a)return a}return u.Jy.FFA},serialize:e=>(0,d.JY)(P,e.gameType.type)},startingPosition:(0,l.w)(),variantRules:{tag:"variantRules",currentValue:(0,a.XY)(),verifyTagInParsing:e=>(0,d.tk)(e,D),parseTag:e=>(0,a.yS)((0,d.k5)(e,D)),serialize(e){var t,r=[],n=j(e.variantRules);try{for(n.s();!(t=n.n()).done;){var a=t.value.serializeToParsingForm();a&&r.push(a)}}catch(e){n.e(e)}finally{n.f()}return(0,d.JY)(D,r.join(" "))}},date:{tag:"date",currentValue:new Date,verifyTagInParsing:e=>(0,d.tk)(e,w),parseTag:e=>new Date((0,d.k5)(e,w)),serialize(e){if(e.gameData.date)return"object"==typeof e.gameData.date?(0,d.JY)(w,e.gameData.date.toUTCString()):(0,d.JY)(w,e.gameData.date)}},site:{tag:"site",currentValue:"",verifyTagInParsing:e=>(0,d.tk)(e,S),parseTag:e=>(0,d.k5)(e,S),serialize(e){if(e.gameData.site)return(0,d.JY)(S,e.gameData.site)}},timeControl:{tag:"timeControl",currentValue:{baseTime:180,increment:2,isDelay:!1},verifyTagInParsing:e=>(0,d.tk)(e,C),parseTag(e){var t,r={baseTime:180,increment:2,isDelay:!1},n=null===(t=(0,d.k5)(e,C).match(/^((?:0\.\d\d?)?|(?:\d\d?s?))(?:(?:(?:\+|\|)(\d\d?)(D?))|(\smin))$/))||void 0===t?void 0:t.slice(1);if(n){var a=m(n,3),i=a[0],o=a[1],s=a[2];if(!o)return r;r.isDelay=!!s,r.increment=/\smin/.test(o)?0:Number(o),i.endsWith("s")?r.baseTime=Math.round(Number(i.slice(0,-1))):r.baseTime=60*Number(i)}return r},serialize(e){var t=e.gameData.timeControl,r=0===t.increment,n="";return t.baseTime<60?n+="".concat(60*t.baseTime,r?" sec":"s"):t.baseTime>60&&r?n+="".concat((0,f.O)(t.baseTime/60,1)," min"):n+=(0,f.O)(t.baseTime/60,1),r||(n+="|",n+=t.increment),t.isDelay&&(n+="D"),(0,d.JY)(C,n)}},termination:{tag:"termination",currentValue:void 0,verifyTagInParsing:e=>(0,d.tk)(e,O),parseTag(e){var t=(0,d.k5)(e,O);return(0,u.wH)(t)?t:void 0},serialize(e){if(e.gameData.termination)return(0,d.JY)(O,e.gameData.termination)}},gameNumber:{tag:"gameNumber",currentValue:void 0,verifyTagInParsing:e=>(0,d.tk)(e,A),parseTag(e){var t=Number((0,d.k5)(e,A));return isNaN(t)?void 0:t},serialize(e){if(e.gameData.gameNumber)return(0,d.JY)(A,e.gameData.gameNumber.toString())}},playerData:T(),results:{tag:"results",currentValue:"",verifyTagInParsing:e=>(0,d.tk)(e,M),parseTag:e=>(0,d.k5)(e,M),serialize(e){if(e.gameData.result)return(0,d.JY)(M,e.gameData.result)}}});function E(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return R(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return R(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw i}}}}function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function I(e){var t,r="",o=e.match(/(?=1\.\s*?[xA-ZΑ-ωa-n0-9-])/);null!=o&&o.index?(r=e.substring(o.index),t=e.substring(0,o.index).split("]").map((e=>e.trim()))):t=e.split("]").map((e=>e.trim()));var s,l=r.length?(0,i.Q)(r):[],c=x(),u=!1,f=E(t);try{for(f.s();!(s=f.n()).done;){var d=s.value,p=void 0;for(p in c){var h=c[p];if(Object.prototype.hasOwnProperty.call(c,p)&&h.verifyTagInParsing(d)){"startingPosition"===p&&(u=!0),h.currentValue=h.parseTag(d);break}}}}catch(e){f.e(e)}finally{f.f()}u||c.startingPosition.currentValue.fenData.fenOptions.setTag("noCorners",!0);var v={site:c.site.currentValue,gameNumber:c.gameNumber.currentValue,date:c.date.currentValue,timeControl:c.timeControl.currentValue,players:c.playerData.currentValue,termination:c.termination.currentValue,result:void 0},y=(0,a.x7)(c.variantRules.currentValue),m=Array.isArray(y.promotionPieces)?y.promotionPieces:[],g=Object.values(n.KR);return{gameData:v,gameType:c.variantType.currentValue,variantRules:c.variantRules.currentValue,variantRuleData:y,board:c.startingPosition.currentValue.board,fenData:c.startingPosition.currentValue.fenData,pieceSet:new Set([...c.startingPosition.currentValue.pieceSet,...m].filter((e=>!g.includes(e)))),moves:l}}var N=x();function F(e){return{board:Object.values(N).map((t=>t.serialize(e))).filter((e=>void 0!==e)).join("\n"),moves:(t=e.moves,r="",n=e=>{var t,a=o(e);try{for(a.s();!(t=a.n()).done;){var i=t.value;i.metadata.currentFullMove&&(r=r.replace(/\s\.\.\s$/,""),r+=" ".concat(i.metadata.currentFullMove,". ")),r+=i.cachedNames.fullMoveNotation,i.comment&&(r+=" {".concat(i.comment,"}")),r+=" .. ";var s,l=o(i.alternativeLines);try{for(l.s();!(s=l.n()).done;){var c=s.value;r+="(.. ",n(c),r+=" )"}}catch(e){l.e(e)}finally{l.f()}}}catch(e){a.e(e)}finally{a.f()}r=r.replace(/\s\.\.\s$/,"")},n(t.moves),r)};var t,r,n}},38:(e,t,r)=>{"use strict";r.d(t,{Q:()=>m,T:()=>y});var n=r(84),a=r(11),i=r(7),o=r(5),s=r(6),l=r(563);function c(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=h(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw i}}}}function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){d(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function d(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i,o,s=[],l=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(c)throw a}}return s}}(e,t)||h(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){if(e){if("string"==typeof e)return v(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?v(e,t):void 0}}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var y={SPLIT:".",PIECE_REGEX:/[xA-ZΑ-ωa-nrbyg0-9-=+#@]/,PIECE_REGEX_SIMPLIFIED:/[A-ZΑ-ωa-n0-9-]/,MOVE_CAPTURING_REGEX:/^[A-ZΑ-ω]?([a-n]\d{1,2})(?:-|x[A-ZΑ-ω]?)[A-ZΑ-ω]?([a-n]\d{1,2})/,DUCK_MOVE_CAPTURING_REGEX:/Θ([a-n]\d{1,2})?-([a-n]\d{1,2})/,DROPPING_MOVE_CAPTURING_REGEX:/Θ?@([a-z])([A-ZΑ-ω])-([a-n]\d{1,2})/,BRACKETS:{COMMENT_START:"{",COMMENT_END:"}",VARIATION_START:"(",VARIATION_END:")"},COORDINATE_REGEX:/[a-n](?:(?:1[0-4])|(?:[1-9]))/,COMMENT_SYNTAXES:{CLOCK:/\[%timestamp (-?\d+?)]/,ARROWS:/\[%cal ((?:R|B|Y|G).+?)]/,SQUARES:/\[%csl ((?:R|B|Y|G).+?)]/,ANNOTATION:/\[%ann (.+?)]/}};var m=e=>{var t=(r,u)=>{var d,h=[],v=u;function m(e){for(;r[e]&&y.PIECE_REGEX.test(r[e]);)e++;return e}function g(e){for(;r[e]&&r[e]!==y.BRACKETS.COMMENT_END;)e++;return e}function b(e){for(;r[e]&&/\d|\./.test(r[e]);)e++;return--e}function P(e){for(var t=0;e<r.length;e++)switch(r[e]){case y.BRACKETS.COMMENT_START:e=g(e);break;case y.BRACKETS.VARIATION_START:t++;break;case y.BRACKETS.VARIATION_END:if(0==--t)return e}throw new TypeError("No matching parentheses for input "+r)}function w(){if(d){var e,t,r,n;v.push(++O),C.path=v.slice(),v.pop(),C.moveData=d.map((e=>function(e){if((0,o.LR)(e))return{type:e.type};if("startCoordinates"in e){var t={startCoordinates:[...e.startCoordinates],endCoordinates:[...e.endCoordinates]};return"specialType"in e&&(t.specialType=e.specialType),"promotion"in e&&(t.promotion=e.promotion),t}return{endCoordinates:e.endCoordinates,piece:e.piece}}(e))),C.metadata=(0,o.SK)();var i,s=null===(e=C.comment)||void 0===e?void 0:e.match(y.COMMENT_SYNTAXES.CLOCK);if(s&&!isNaN(Number(s[1])))C.comment=null===(i=C.comment)||void 0===i?void 0:i.replace(y.COMMENT_SYNTAXES.CLOCK,""),C.metadata.playerClock=Number(s[1]);var u=null===(t=C.comment)||void 0===t?void 0:t.match(y.COMMENT_SYNTAXES.ARROWS);if(u){var f,p,m=c(u[1].split(","));try{for(m.s();!(p=m.n()).done;){var g=p.value,b=[g[0],g.slice(1)],P=b[1],w=b[0].toLowerCase(),S=(0,l.Lx)(P);(0,a.OT)(w)&&S&&C.metadata.highlightedArrows.push([a.JF[w],...S])}}catch(e){m.e(e)}finally{m.f()}C.comment=null===(f=C.comment)||void 0===f?void 0:f.replace(y.COMMENT_SYNTAXES.ARROWS,"")}var A=null===(r=C.comment)||void 0===r?void 0:r.match(y.COMMENT_SYNTAXES.SQUARES);if(A){var T,M,j=c(A[1].split(","));try{for(j.s();!(M=j.n()).done;){var k=M.value,D=[k[0],k.slice(1)],x=D[1],E=D[0].toLowerCase(),R=(0,l._q)(x);(0,a.OT)(E)&&R&&C.metadata.highlightedSquares.push([a.JF[E],R])}}catch(e){j.e(e)}finally{j.f()}C.comment=null===(T=C.comment)||void 0===T?void 0:T.replace(y.COMMENT_SYNTAXES.SQUARES,"")}var I,N=null===(n=C.comment)||void 0===n?void 0:n.match(y.COMMENT_SYNTAXES.ANNOTATION);if(N)C.metadata.annotation=N[1],C.comment=null===(I=C.comment)||void 0===I?void 0:I.replace(y.COMMENT_SYNTAXES.ANNOTATION,"");(0,o.Qc)(C)&&h.push(Object.assign({},C)),C={alternativeLines:[],comment:""},d=void 0}}function S(e){var t=[],r=function(e){var t;for(t in o.Fi)if(Object.prototype.hasOwnProperty.call(o.Fi,t)&&o.Fi[t]===e)return{type:o.Fi[t]}}(e[0]);if(1===e.length&&void 0!==r)return[r];var c=function(e){var t={startCoordinates:[-1,-1],endCoordinates:[-1,-1]},r=e.match(/.*?=([A-Zx])/);null!=r&&r[1]&&(t.promotion=[(0,i.HC)(i.Ir,r[1].charAt(0))]);var a=e.match(y.MOVE_CAPTURING_REGEX);if(a){var s=(0,l._q)(a[1]),c=(0,l._q)(a[2]);return(0,n.lM)(s),(0,n.lM)(c),t.startCoordinates=s,t.endCoordinates=c,t}return/O-O-O.*/.test(e)?f(f({},t),{},{specialType:o.uj.CastlingQueenside}):/O-O.*/.test(e)?f(f({},t),{},{specialType:o.uj.CastlingKingside}):void 0}(e);c&&t.push(c);var u=function(e){var t=e.match(y.DROPPING_MOVE_CAPTURING_REGEX);if(t){var r=p(t,4),n=r[1],o=r[2],c=r[3];if(!(0,a.OT)(n)||!(0,s.IM)(o))return;var u=(0,l._q)(c);if(!u)return;return{piece:(0,i.HC)(a.JF[n],o),endCoordinates:u}}}(e);u&&t.push(u);var d=function(e){var t=e.match(y.DUCK_MOVE_CAPTURING_REGEX);if(t){if(t[1]){var r=(0,l._q)(t[1]),n=(0,l._q)(t[2]);if(!r||!n)return;return{startCoordinates:r,endCoordinates:n}}var a=(0,l._q)(t[2]);if(!a)return;return{piece:i.St,endCoordinates:a}}}(e);if(d&&t.push(d),(0,o.nc)(t))return t;throw Error("Move length is 0 for string ".concat(e))}var C={alternativeLines:[],comment:""},O=-1,A=-1;try{for(var T=0;T<r.length;T++){var M=isNaN(Number(r[T]));if(M&&!/\s/.test(r[T])&&r[T]!==y.SPLIT){if(y.PIECE_REGEX_SIMPLIFIED.test(r[T])){var j=m(T);d=S(r.substring(T,j)),T=j}else if(e[T]===y.BRACKETS.COMMENT_START){var k=g(T);C.comment=e.substring(T+1,k),T=k}else if(e[T]===y.BRACKETS.VARIATION_START){var D,x=P(T);v.push(O+1,++A),null===(D=C.alternativeLines)||void 0===D||D.push([...t(e.substring(T+1,x),v.slice())]),T=x}}else(r[T]===y.SPLIT&&e[T+1]&&e[T+1]===y.SPLIT||e[T].trim()&&!M&&e[T+1]&&(e[T+1]===y.SPLIT||!isNaN(Number(e[T+1]))))&&(M||(T=b(T)),d&&w())}}finally{w(),v.push(O+1),C.path=v.slice(),(0,o.Qc)(C)&&h.push(Object.assign({},C))}return h};return t(e,[])}},40:(e,t,r)=>{"use strict";r.d(t,{w:()=>g});var n=r(84),a=r(12),i=r(10),o=r(0),s=r(11),l=r(7),c=r(563);function u(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=d(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw i}}}}function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i,o,s=[],l=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(c)throw a}}return s}}(e,t)||d(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){if(e){if("string"==typeof e)return p(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?p(e,t):void 0}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function h(e,t){var r=f(t,2),n=r[0],a=r[1],i=(o.iJ-e[0])/2,s=(o.iJ-e[1])/2;return n<i||n>=i+e[0]||a<s||a>=s+e[1]}function v(e,t){var r=e.split(",").map((e=>!!Number(e)));(0,n.CG)(r,o.q3)&&t.forEach(((e,t,n)=>n[t]=r[t]))}var y={"4PC":"R-0,0,0,0-1,1,1,1-1,1,1,1-0,0,0,0-0-x,x,x,yR,yN,yB,yK,yQ,yB,yN,yR,x,x,x/x,x,x,yP,yP,yP,yP,yP,yP,yP,yP,x,x,x/x,x,x,8,x,x,x/bR,bP,10,gP,gR/bN,bP,10,gP,gN/bB,bP,10,gP,gB/bQ,bP,10,gP,gK/bK,bP,10,gP,gQ/bB,bP,10,gP,gB/bN,bP,10,gP,gN/bR,bP,10,gP,gR/x,x,x,8,x,x,x/x,x,x,rP,rP,rP,rP,rP,rP,rP,rP,x,x,x/x,x,x,rR,rN,rB,rQ,rK,rB,rN,rR,x,x,x","4PCo":"R-0,0,0,0-1,1,1,1-1,1,1,1-0,0,0,0-0-x,x,x,yR,yN,yB,yK,yQ,yB,yN,yR,x,x,x/x,x,x,yP,yP,yP,yP,yP,yP,yP,yP,x,x,x/x,x,x,8,x,x,x/bR,bP,10,gP,gR/bN,bP,10,gP,gN/bB,bP,10,gP,gB/bK,bP,10,gP,gQ/bQ,bP,10,gP,gK/bB,bP,10,gP,gB/bN,bP,10,gP,gN/bR,bP,10,gP,gR/x,x,x,8,x,x,x/x,x,x,rP,rP,rP,rP,rP,rP,rP,rP,x,x,x/x,x,x,rR,rN,rB,rQ,rK,rB,rN,rR,x,x,x","4PCb":"R-0,0,0,0-1,1,1,1-1,1,1,1-0,0,0,0-0-x,x,x,yR,yN,yB,yQ,yK,yB,yN,yR,x,x,x/x,x,x,yP,yP,yP,yP,yP,yP,yP,yP,x,x,x/x,x,x,8,x,x,x/bR,bP,10,gP,gR/bN,bP,10,gP,gN/bB,bP,10,gP,gB/bQ,bP,10,gP,gQ/bK,bP,10,gP,gK/bB,bP,10,gP,gB/bN,bP,10,gP,gN/bR,bP,10,gP,gR/x,x,x,8,x,x,x/x,x,x,rP,rP,rP,rP,rP,rP,rP,rP,x,x,x/x,x,x,rR,rN,rB,rQ,rK,rB,rN,rR,x,x,x","4PCn":"R-0,0,0,0-1,1,1,1-1,1,1,1-0,0,0,0-0-x,x,x,yR,yN,yB,yQ,yK,yB,yN,yR,x,x,x/x,x,x,yP,yP,yP,yP,yP,yP,yP,yP,x,x,x/x,x,x,8,x,x,x/bR,bP,10,gP,gR/bN,bP,10,gP,gN/bB,bP,10,gP,gB/bQ,bP,10,gP,gK/bK,bP,10,gP,gQ/bB,bP,10,gP,gB/bN,bP,10,gP,gN/bR,bP,10,gP,gR/x,x,x,8,x,x,x/x,x,x,rP,rP,rP,rP,rP,rP,rP,rP,x,x,x/x,x,x,rR,rN,rB,rQ,rK,rB,rN,rR,x,x,x","2PC":"R-0,1,0,1-1,1,1,1-1,1,1,1-0,0,0,0-0-{'pawnBaseRank':5,'wb':true,'dim':'8x8'}-x,x,x,x,x,x,x,x,x,x,x,x,x,x/x,x,x,x,x,x,x,x,x,x,x,x,x,x/x,x,x,x,x,x,x,x,x,x,x,x,x,x/x,x,x,yR,yN,yB,yQ,yK,yB,yN,yR,x,x,x/x,x,x,yP,yP,yP,yP,yP,yP,yP,yP,x,x,x/x,x,x,8,x,x,x/x,x,x,8,x,x,x/x,x,x,8,x,x,x/x,x,x,8,x,x,x/x,x,x,rP,rP,rP,rP,rP,rP,rP,rP,x,x,x/x,x,x,rR,rN,rB,rQ,rK,rB,rN,rR,x,x,x/x,x,x,x,x,x,x,x,x,x,x,x,x,x/x,x,x,x,x,x,x,x,x,x,x,x,x,x/x,x,x,x,x,x,x,x,x,x,x,x,x,x"},m="StartFen4",g=()=>({tag:"startingPosition",currentValue:{board:(0,a.BD)((()=>l.v2)),fenData:new i.c,pieceSet:new Set},verifyTagInParsing:e=>(0,c.tk)(e,m),parseTag(e){var t=(0,c.k5)(e,m),r=t in y?y[t]:t,d=new i.c,p=(0,a.BD)((()=>l.v2)),g=new Set,b=(0,l.m9)("x"),P=r.split("-");if(P.length<7||P[P.length-1].split("/").length!==o.iJ);else{var w=P[0].charAt(0).toLowerCase();(0,s.OT)(w)&&(d.sideToMove=s.JF[w]),v(P[1],d.fenOptions.tag("dead")),v(P[2],d.fenOptions.tag("castleKingside")),v(P[3],d.fenOptions.tag("castleQueenside"));var S=P[4].split(",").map((e=>Number(e)));(0,n.CG)(S,o.q3)&&(d.points=S),d.plyCount=Number(P[5]);var C=(0,n.VS)(null,o.q3),O=e=>e in d.fenOptions.tags;if(P[6].startsWith("{")){var A=JSON.parse(P[6].replaceAll("(","[").replaceAll(")","]").replaceAll("'",'"'));if("object"!=typeof A||null===A)throw Error("Unexpected object definition syntax for "+A);for(var T=0,M=Object.entries(A);T<M.length;T++){var j=f(M[T],2),k=j[0],D=j[1];if(O(k)){var x=d.fenOptions.tags[k];x.value=x.parse(D)}}}var E=P[P.length-1].split("/"),R=d.fenOptions.tag("dim");E.forEach(((e,t)=>{var r,n=0,a=u(e.split(","));try{for(a.s();!(r=a.n()).done;){var i=r.value;if(i.endsWith('"')&&(i=i.slice(0,-1)),isNaN(Number(i)))try{if(!h(R,[t,n])){var o=(0,l.m9)(i);p[t][n]=o,o.isPiece()&&("K"!==o.piece||C[o.color]||(C[o.color]=[t,n]),g.add(o.piece))}}finally{n++}else n+=Number(i)}}catch(e){a.e(e)}finally{a.f()}}));var I,N=u(o.O9);try{for(N.s();!(I=N.n()).done;){var F,B=I.value,V=u(d.fenOptions.tag("bank")[B]);try{for(V.s();!(F=V.n()).done;){var G=f(F.value,1)[0];G.piece in s.KR||g.add(G.piece)}}catch(e){V.e(e)}finally{V.f()}}}catch(e){N.e(e)}finally{N.f()}d.fenOptions.setTag("royal",C);for(var q=0;q<o.iJ;q++)for(var $=0;$<o.iJ;$++)h(R,[q,$])&&(p[q][$]=b)}if(!d.fenOptions.tag("noCorners")){var K=o.iJ-1;e:for(var L=0;L<3;L++)for(var J=0;J<3;J++)for(var z=0,_=[[L,J],[K-L,J],[L,K-J],[K-L,K-J]];z<_.length;z++){var U=_[z],W=p[U[0]][U[1]];if(!W.isWall()||W.piece!==b.piece){d.fenOptions.setTag("noCorners",!0);break e}}}return{fenData:d,board:p,pieceSet:g}},serialize(e){var t=e.board,r=e.data,n="";n+="".concat(s.Od[r.sideToMove].toUpperCase(),"-"),n+="".concat(r.fenOptions.tag("dead").map((e=>Number(e))).join(","),"-"),n+="".concat(r.fenOptions.tag("castleKingside").map((e=>Number(e))).join(","),"-"),n+="".concat(r.fenOptions.tag("castleQueenside").map((e=>Number(e))).join(","),"-"),n+="".concat(r.points.join(","),"-"),n+="".concat(r.plyCount,"-"),n+="".concat(function(e){var t,r=[];for(t in e.tags)if(Object.prototype.hasOwnProperty.call(e.tags,t)){var n=e.tags[t].serialize();n&&r.push(n)}return"{".concat(r.join(","),"}")}(r.fenOptions),"-");var a,i=0,o=u(t);try{for(o.s();!(a=o.n()).done;){var l,f=u(a.value);try{for(f.s();!(l=f.n()).done;){var d=l.value;d.isEmpty()?i++:(0!==i&&(n+="".concat(i,","),i=0),n+="".concat(d.value,","))}}catch(e){f.e(e)}finally{f.f()}0!==i?(n+="".concat(i,"/"),i=0):(n=n.slice(0,-1),n+="/")}}catch(e){o.e(e)}finally{o.f()}return n=n.slice(0,-1),(0,c.JY)(m,n)}})},563:(e,t,r)=>{"use strict";function n(e){if(0!==e.length){var t=[14-Number(e.slice(1)),e.charCodeAt(0)-97];if(!Number.isNaN(t[0])&&!Number.isNaN(t[1])&&!(t[0]<0||t[0]>13||t[1]<0||t[1]>13))return t}}function a(e){if(0!==e.length){var t=e.split(":");return[[14-Number(t[0].slice(1)),t[0].charCodeAt(0)-97],[14-Number(t[1].slice(1)),t[1].charCodeAt(0)-97]]}}r.d(t,{JY:()=>i,Lx:()=>a,_q:()=>n,k5:()=>s,tk:()=>o});var i=(e,t)=>"[".concat(e,' "').concat(t,'"]'),o=(e,t)=>e.toLowerCase().startsWith("[".concat(t.toLowerCase(),' "')),s=(e,t)=>e.replace("[".concat(t,' "'),"").slice(0,-1)},95:(e,t,r)=>{"use strict";function n(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){l=!0,o=e},f:function(){try{s||null==r.return||r.return()}finally{if(l)throw o}}}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function i(e){for(var t=e.length,r=0;0!==t;){var n=[e[r=Math.floor(Math.random()*t--)],e[t]];e[t]=n[0],e[r]=n[1]}return e}function o(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++){var n=e[r],a=t[r];if(Array.isArray(n)&&Array.isArray(a)){if(!o(n,a))return!1}else if(n!==a)return!1}return!0}function s(e){var t,r=1/0,a=n(e);try{for(a.s();!(t=a.n()).done;){var i,o=n(t.value);try{for(o.s();!(i=o.n()).done;){var s=i.value;0!==s&&s<r&&(r=s)}}catch(e){o.e(e)}finally{o.f()}}}catch(e){a.e(e)}finally{a.f()}return r}function l(e,t){for(var r=e.length;r--;)if(t(e[r],r,e))return r;return-1}r.d(t,{Bx:()=>s,Rt:()=>o,Sy:()=>i,qr:()=>l})},128:(e,t,r)=>{"use strict";function n(e,t){var r=Math.pow(10,t),n=e*r;return n<0?Math.ceil(n/r):Math.floor(n/r)}function a(e){return 16843009*((e=(858993459&(e-=e>>1&1431655765))+(e>>2&858993459))+(e>>4)&252645135)>>24}r.d(t,{O:()=>n,y:()=>a})},564:(e,t,r)=>{"use strict";function n(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=Object.getPrototypeOf(e);if("object"!=typeof n)throw Error("Expected prototype to be an object");var a=Object.create(n);if("object"!=typeof a||null===a)throw Error("Expected prototype to be an object");var i=Object.assign(a,r?{}:e);if(!(i instanceof t))throw Error("Expected prototype to not be overridden");return i}r.d(t,{T9:()=>a,lJ:()=>n});var a=e=>"object"==typeof e&&null!==e},565:(e,t,r)=>{"use strict";function n(e){var t=Number((e+"").slice(-2));if(t>3&&t<21)return"th";switch(t%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}}function a(e){if(0===e.length)return"";if(1===e.length)return e[0];for(var t="",r=0;r<e.length;r++)r===e.length-2?t+=" ".concat(e[r]," or "):r===e.length-1?t+=e[r]:t+=e[r]+", ";return t}function i(e){return/[AEUIO]/i.test(e.charAt(0))?"an "+e:"a "+e}r.d(t,{od:()=>n,uC:()=>a,zL:()=>i})},87:(e,t,r)=>{var n={"./BoardDecorators/AllowPassing.ts":88,"./BoardDecorators/AlternativeTeams.ts":118,"./BoardDecorators/BarePieceRule.ts":89,"./BoardDecorators/Blindfold.ts":122,"./BoardDecorators/CaptureTheKing.ts":34,"./BoardDecorators/Chess960.ts":123,"./BoardDecorators/Crazyhouse.ts":90,"./BoardDecorators/DuckChess.ts":124,"./BoardDecorators/FogOfWar.ts":77,"./BoardDecorators/ForcedCapture.ts":35,"./BoardDecorators/GameMetadataRules.ts":125,"./BoardDecorators/Ghostboard.ts":126,"./BoardDecorators/ParadigmChess30.ts":91,"./BoardDecorators/PiecesFaceCenter.ts":127,"./BoardDecorators/SeirawanSetup.ts":68,"./BoardDecorators/SelfCheck.ts":78,"./BoardDecorators/SetupChess.ts":69,"./BoardDecorators/Taboo.ts":70,"./BoardVariantModules/EngineMoveGeneration/Algorithms/ComfuterEvaluation.ts":49,"./BoardVariantModules/EngineMoveGeneration/Algorithms/ComfuterEvaluationExtensions.ts":71,"./BoardVariantModules/EngineMoveGeneration/Algorithms/MixedAlgorithms.ts":79,"./BoardVariantModules/EngineMoveGeneration/Algorithms/RandomEvaluation.ts":43,"./BoardVariantModules/EngineMoveGeneration/Algorithms/RandomEvaluationExtensions.ts":137,"./BoardVariantModules/EngineMoveGeneration/BotInterface.ts":20,"./BoardVariantModules/InsufficientMaterial/InsufficientMaterialChecker.ts":56,"./BoardVariantModules/InsufficientMaterial/InsufficientMaterialConstructor.ts":39,"./BoardVariantModules/InsufficientMaterial/PieceMedianCounter.ts":36,"./BoardVariantModules/InsufficientMaterial/StateSerializer.ts":57,"./BoardVariantModules/InsufficientMaterial/Utilities.ts":32,"./FENDataDecorators/Atomic.ts":80,"./FENDataDecorators/DeadKingWalking.ts":72,"./FENDataDecorators/EnPassant.ts":138,"./FENDataDecorators/FatalCapture.ts":139,"./FENDataDecorators/FiftyMoveRule.ts":48,"./FENDataDecorators/Giveaway.ts":73,"./FENDataDecorators/KingOfTheHill.ts":140,"./FENDataDecorators/NCheck.ts":141,"./FENDataDecorators/OppositeMultiplier.ts":142,"./FENDataDecorators/OppositeSideCastling.ts":143,"./FENDataDecorators/PiecesGoToBanks.ts":144,"./FENDataDecorators/PlayForMate.ts":145,"./FENDataDecorators/PointsForMate.ts":146,"./FENDataDecorators/StalemateOptions.ts":31,"./FENDataDecorators/Takeover.ts":147,"./FENDataDecorators/ThreefoldRepetition.ts":74,"./PieceControlDecorators/AnyCapture.ts":148,"./PieceControlDecorators/PromoteTo.ts":63,"./PieceControlDecorators/PromotionRank.ts":30,"./PieceControlDecorators/RoyalsCannotCapture.ts":50,"./PieceControlDecorators/Sideways.ts":149,"./PieceControlDecorators/Stonewall.ts":150,"./PieceControlDecorators/Torpedo.ts":151};function a(e){var t=i(e);return r(t)}function i(e){if(!r.o(n,e)){var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}a.keys=function(){return Object.keys(n)},a.resolve=i,e.exports=a,a.id=87}}]);
//# sourceMappingURL=0.react-app.js.map